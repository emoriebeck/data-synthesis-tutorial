<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 Method 3: One-Stage Individual Participant Analyses Reported Together | A Taxonomy of Data Synthesis: A Tutorial</title>
  <meta name="description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.37 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 Method 3: One-Stage Individual Participant Analyses Reported Together | A Taxonomy of Data Synthesis: A Tutorial" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  <meta name="github-repo" content="emoriebeck/data-synthesis-tutorial" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Method 3: One-Stage Individual Participant Analyses Reported Together | A Taxonomy of Data Synthesis: A Tutorial" />
  
  <meta name="twitter:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  



<meta name="date" content="2024-05-16" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="method-3-two-stage-individual-participant-meta-analysis.html"/>
<link rel="next" href="method-3-one-stage-individual-participant-analyses-reported-together-1.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Workspace</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#packages"><i class="fa fa-check"></i><b>1.1</b> Packages</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#directory-path"><i class="fa fa-check"></i><b>1.2</b> Directory Path</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#introduction"><i class="fa fa-check"></i><b>1.3</b> Introduction</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#codebook"><i class="fa fa-check"></i><b>1.4</b> Codebook</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#navigating-this-tutorial"><i class="fa fa-check"></i><b>1.5</b> Navigating This Tutorial</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="cleaning.html"><a href="cleaning.html"><i class="fa fa-check"></i><b>2</b> Data Cleaning</a>
<ul>
<li class="chapter" data-level="2.1" data-path="cleaning.html"><a href="cleaning.html#berlin-aging-study-base-i"><i class="fa fa-check"></i><b>2.1</b> Berlin Aging Study (BASE-I)</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="cleaning.html"><a href="cleaning.html#load-data"><i class="fa fa-check"></i><b>2.1.1</b> Load Data</a></li>
<li class="chapter" data-level="2.1.2" data-path="cleaning.html"><a href="cleaning.html#recoding-reverse-scoring"><i class="fa fa-check"></i><b>2.1.2</b> Recoding &amp; Reverse Scoring</a></li>
<li class="chapter" data-level="2.1.3" data-path="cleaning.html"><a href="cleaning.html#covariates"><i class="fa fa-check"></i><b>2.1.3</b> Covariates</a></li>
<li class="chapter" data-level="2.1.4" data-path="cleaning.html"><a href="cleaning.html#personality-variables"><i class="fa fa-check"></i><b>2.1.4</b> Personality Variables</a></li>
<li class="chapter" data-level="2.1.5" data-path="cleaning.html"><a href="cleaning.html#outcome-variables"><i class="fa fa-check"></i><b>2.1.5</b> Outcome Variables</a></li>
<li class="chapter" data-level="2.1.6" data-path="cleaning.html"><a href="cleaning.html#combine-data"><i class="fa fa-check"></i><b>2.1.6</b> Combine Data</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="cleaning.html"><a href="cleaning.html#einstein-aging-study-eas"><i class="fa fa-check"></i><b>2.2</b> Einstein Aging Study (EAS)</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="cleaning.html"><a href="cleaning.html#load-data-1"><i class="fa fa-check"></i><b>2.2.1</b> Load Data</a></li>
<li class="chapter" data-level="2.2.2" data-path="cleaning.html"><a href="cleaning.html#recoding-reverse-scoring-1"><i class="fa fa-check"></i><b>2.2.2</b> Recoding &amp; Reverse Scoring</a></li>
<li class="chapter" data-level="2.2.3" data-path="cleaning.html"><a href="cleaning.html#covariates-1"><i class="fa fa-check"></i><b>2.2.3</b> Covariates</a></li>
<li class="chapter" data-level="2.2.4" data-path="cleaning.html"><a href="cleaning.html#personality-variables-1"><i class="fa fa-check"></i><b>2.2.4</b> Personality Variables</a></li>
<li class="chapter" data-level="2.2.5" data-path="cleaning.html"><a href="cleaning.html#outcome-variables-1"><i class="fa fa-check"></i><b>2.2.5</b> Outcome Variables</a></li>
<li class="chapter" data-level="2.2.6" data-path="cleaning.html"><a href="cleaning.html#combine-data-1"><i class="fa fa-check"></i><b>2.2.6</b> Combine Data</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="cleaning.html"><a href="cleaning.html#german-socioeconomic-panel-gsoep"><i class="fa fa-check"></i><b>2.3</b> German Socioeconomic Panel (GSOEP)</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="cleaning.html"><a href="cleaning.html#load-data-2"><i class="fa fa-check"></i><b>2.3.1</b> Load Data</a></li>
<li class="chapter" data-level="2.3.2" data-path="cleaning.html"><a href="cleaning.html#recoding-reverse-scoring-2"><i class="fa fa-check"></i><b>2.3.2</b> Recoding &amp; Reverse Scoring</a></li>
<li class="chapter" data-level="2.3.3" data-path="cleaning.html"><a href="cleaning.html#covariates-2"><i class="fa fa-check"></i><b>2.3.3</b> Covariates</a></li>
<li class="chapter" data-level="2.3.4" data-path="cleaning.html"><a href="cleaning.html#personality-variables-2"><i class="fa fa-check"></i><b>2.3.4</b> Personality Variables</a></li>
<li class="chapter" data-level="2.3.5" data-path="cleaning.html"><a href="cleaning.html#outcome-variables-2"><i class="fa fa-check"></i><b>2.3.5</b> Outcome Variables</a></li>
<li class="chapter" data-level="2.3.6" data-path="cleaning.html"><a href="cleaning.html#combine-data-2"><i class="fa fa-check"></i><b>2.3.6</b> Combine Data</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="cleaning.html"><a href="cleaning.html#household-income-and-labour-dynamics-in-australia-hilda"><i class="fa fa-check"></i><b>2.4</b> Household, Income, and Labour Dynamics in Australia (HILDA)</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="cleaning.html"><a href="cleaning.html#load-data-3"><i class="fa fa-check"></i><b>2.4.1</b> Load Data</a></li>
<li class="chapter" data-level="2.4.2" data-path="cleaning.html"><a href="cleaning.html#recoding-reverse-scoring-3"><i class="fa fa-check"></i><b>2.4.2</b> Recoding &amp; Reverse Scoring</a></li>
<li class="chapter" data-level="2.4.3" data-path="cleaning.html"><a href="cleaning.html#covariates-3"><i class="fa fa-check"></i><b>2.4.3</b> Covariates</a></li>
<li class="chapter" data-level="2.4.4" data-path="cleaning.html"><a href="cleaning.html#personality-variables-3"><i class="fa fa-check"></i><b>2.4.4</b> Personality Variables</a></li>
<li class="chapter" data-level="2.4.5" data-path="cleaning.html"><a href="cleaning.html#outcome-variables-3"><i class="fa fa-check"></i><b>2.4.5</b> Outcome Variables</a></li>
<li class="chapter" data-level="2.4.6" data-path="cleaning.html"><a href="cleaning.html#combine-data-3"><i class="fa fa-check"></i><b>2.4.6</b> Combine Data</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="cleaning.html"><a href="cleaning.html#health-and-retirement-study-hrs"><i class="fa fa-check"></i><b>2.5</b> Health and Retirement Study (HRS)</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="cleaning.html"><a href="cleaning.html#load-data-4"><i class="fa fa-check"></i><b>2.5.1</b> Load Data</a></li>
<li class="chapter" data-level="2.5.2" data-path="cleaning.html"><a href="cleaning.html#recoding-reverse-scoring-4"><i class="fa fa-check"></i><b>2.5.2</b> Recoding &amp; Reverse Scoring</a></li>
<li class="chapter" data-level="2.5.3" data-path="cleaning.html"><a href="cleaning.html#covariates-4"><i class="fa fa-check"></i><b>2.5.3</b> Covariates</a></li>
<li class="chapter" data-level="2.5.4" data-path="cleaning.html"><a href="cleaning.html#personality-variables-4"><i class="fa fa-check"></i><b>2.5.4</b> Personality Variables</a></li>
<li class="chapter" data-level="2.5.5" data-path="cleaning.html"><a href="cleaning.html#outcome-variables-4"><i class="fa fa-check"></i><b>2.5.5</b> Outcome Variables</a></li>
<li class="chapter" data-level="2.5.6" data-path="cleaning.html"><a href="cleaning.html#combine-data-4"><i class="fa fa-check"></i><b>2.5.6</b> Combine Data</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="cleaning.html"><a href="cleaning.html#longitudinal-aging-study-amsterdam-lasa"><i class="fa fa-check"></i><b>2.6</b> Longitudinal Aging Study Amsterdam (LASA)</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="cleaning.html"><a href="cleaning.html#load-data-5"><i class="fa fa-check"></i><b>2.6.1</b> Load Data</a></li>
<li class="chapter" data-level="2.6.2" data-path="cleaning.html"><a href="cleaning.html#recoding-reverse-scoring-5"><i class="fa fa-check"></i><b>2.6.2</b> Recoding &amp; Reverse Scoring</a></li>
<li class="chapter" data-level="2.6.3" data-path="cleaning.html"><a href="cleaning.html#covariates-5"><i class="fa fa-check"></i><b>2.6.3</b> Covariates</a></li>
<li class="chapter" data-level="2.6.4" data-path="cleaning.html"><a href="cleaning.html#personality-variables-5"><i class="fa fa-check"></i><b>2.6.4</b> Personality Variables</a></li>
<li class="chapter" data-level="2.6.5" data-path="cleaning.html"><a href="cleaning.html#outcome-variables-5"><i class="fa fa-check"></i><b>2.6.5</b> Outcome Variables</a></li>
<li class="chapter" data-level="2.6.6" data-path="cleaning.html"><a href="cleaning.html#combine-data-5"><i class="fa fa-check"></i><b>2.6.6</b> Combine Data</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="cleaning.html"><a href="cleaning.html#map"><i class="fa fa-check"></i><b>2.7</b> MAP</a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="cleaning.html"><a href="cleaning.html#load-data-6"><i class="fa fa-check"></i><b>2.7.1</b> Load Data</a></li>
<li class="chapter" data-level="2.7.2" data-path="cleaning.html"><a href="cleaning.html#recoding-reverse-scoring-6"><i class="fa fa-check"></i><b>2.7.2</b> Recoding &amp; Reverse Scoring</a></li>
<li class="chapter" data-level="2.7.3" data-path="cleaning.html"><a href="cleaning.html#covariates-6"><i class="fa fa-check"></i><b>2.7.3</b> Covariates</a></li>
<li class="chapter" data-level="2.7.4" data-path="cleaning.html"><a href="cleaning.html#personality-variables-6"><i class="fa fa-check"></i><b>2.7.4</b> Personality Variables</a></li>
<li class="chapter" data-level="2.7.5" data-path="cleaning.html"><a href="cleaning.html#outcome-variables-6"><i class="fa fa-check"></i><b>2.7.5</b> Outcome Variables</a></li>
<li class="chapter" data-level="2.7.6" data-path="cleaning.html"><a href="cleaning.html#combine-data-6"><i class="fa fa-check"></i><b>2.7.6</b> Combine Data</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="cleaning.html"><a href="cleaning.html#mars"><i class="fa fa-check"></i><b>2.8</b> MARS</a>
<ul>
<li class="chapter" data-level="2.8.1" data-path="cleaning.html"><a href="cleaning.html#recoding-reverse-scoring-7"><i class="fa fa-check"></i><b>2.8.1</b> Recoding &amp; Reverse Scoring</a></li>
<li class="chapter" data-level="2.8.2" data-path="cleaning.html"><a href="cleaning.html#covariates-7"><i class="fa fa-check"></i><b>2.8.2</b> Covariates</a></li>
<li class="chapter" data-level="2.8.3" data-path="cleaning.html"><a href="cleaning.html#personality-variables-7"><i class="fa fa-check"></i><b>2.8.3</b> Personality Variables</a></li>
<li class="chapter" data-level="2.8.4" data-path="cleaning.html"><a href="cleaning.html#outcome-variables-7"><i class="fa fa-check"></i><b>2.8.4</b> Outcome Variables</a></li>
<li class="chapter" data-level="2.8.5" data-path="cleaning.html"><a href="cleaning.html#combine-data-7"><i class="fa fa-check"></i><b>2.8.5</b> Combine Data</a></li>
</ul></li>
<li class="chapter" data-level="2.9" data-path="cleaning.html"><a href="cleaning.html#ros"><i class="fa fa-check"></i><b>2.9</b> ROS</a>
<ul>
<li class="chapter" data-level="2.9.1" data-path="cleaning.html"><a href="cleaning.html#load-data-7"><i class="fa fa-check"></i><b>2.9.1</b> Load Data</a></li>
<li class="chapter" data-level="2.9.2" data-path="cleaning.html"><a href="cleaning.html#recoding-reverse-scoring-8"><i class="fa fa-check"></i><b>2.9.2</b> Recoding &amp; Reverse Scoring</a></li>
<li class="chapter" data-level="2.9.3" data-path="cleaning.html"><a href="cleaning.html#covariates-8"><i class="fa fa-check"></i><b>2.9.3</b> Covariates</a></li>
<li class="chapter" data-level="2.9.4" data-path="cleaning.html"><a href="cleaning.html#personality-variables-8"><i class="fa fa-check"></i><b>2.9.4</b> Personality Variables</a></li>
<li class="chapter" data-level="2.9.5" data-path="cleaning.html"><a href="cleaning.html#outcome-variables-8"><i class="fa fa-check"></i><b>2.9.5</b> Outcome Variables</a></li>
<li class="chapter" data-level="2.9.6" data-path="cleaning.html"><a href="cleaning.html#combine-data-8"><i class="fa fa-check"></i><b>2.9.6</b> Combine Data</a></li>
</ul></li>
<li class="chapter" data-level="2.10" data-path="cleaning.html"><a href="cleaning.html#origins-of-the-variances-of-the-oldest-old-octogenarian-twins-octo-twin"><i class="fa fa-check"></i><b>2.10</b> Origins of the Variances of the Oldest-Old: Octogenarian Twins (OCTO-TWIN)</a>
<ul>
<li class="chapter" data-level="2.10.1" data-path="cleaning.html"><a href="cleaning.html#load-data-8"><i class="fa fa-check"></i><b>2.10.1</b> Load Data</a></li>
<li class="chapter" data-level="2.10.2" data-path="cleaning.html"><a href="cleaning.html#recoding-reverse-scoring-9"><i class="fa fa-check"></i><b>2.10.2</b> Recoding &amp; Reverse Scoring</a></li>
<li class="chapter" data-level="2.10.3" data-path="cleaning.html"><a href="cleaning.html#covariates-9"><i class="fa fa-check"></i><b>2.10.3</b> Covariates</a></li>
<li class="chapter" data-level="2.10.4" data-path="cleaning.html"><a href="cleaning.html#personality-variables-9"><i class="fa fa-check"></i><b>2.10.4</b> Personality Variables</a></li>
<li class="chapter" data-level="2.10.5" data-path="cleaning.html"><a href="cleaning.html#outcome-variables-9"><i class="fa fa-check"></i><b>2.10.5</b> Outcome Variables</a></li>
<li class="chapter" data-level="2.10.6" data-path="cleaning.html"><a href="cleaning.html#combine-data-9"><i class="fa fa-check"></i><b>2.10.6</b> Combine Data</a></li>
</ul></li>
<li class="chapter" data-level="2.11" data-path="cleaning.html"><a href="cleaning.html#swedish-adoption-twin-study-of-aging-satsa"><i class="fa fa-check"></i><b>2.11</b> Swedish Adoption Twin Study of Aging (SATSA)</a>
<ul>
<li class="chapter" data-level="2.11.1" data-path="cleaning.html"><a href="cleaning.html#load-data-9"><i class="fa fa-check"></i><b>2.11.1</b> Load Data</a></li>
<li class="chapter" data-level="2.11.2" data-path="cleaning.html"><a href="cleaning.html#recoding-reverse-scoring-10"><i class="fa fa-check"></i><b>2.11.2</b> Recoding &amp; Reverse Scoring</a></li>
<li class="chapter" data-level="2.11.3" data-path="cleaning.html"><a href="cleaning.html#covariates-10"><i class="fa fa-check"></i><b>2.11.3</b> Covariates</a></li>
<li class="chapter" data-level="2.11.4" data-path="cleaning.html"><a href="cleaning.html#personality-variables-10"><i class="fa fa-check"></i><b>2.11.4</b> Personality Variables</a></li>
<li class="chapter" data-level="2.11.5" data-path="cleaning.html"><a href="cleaning.html#outcome-variables-10"><i class="fa fa-check"></i><b>2.11.5</b> Outcome Variables</a></li>
<li class="chapter" data-level="2.11.6" data-path="cleaning.html"><a href="cleaning.html#combine-data-10"><i class="fa fa-check"></i><b>2.11.6</b> Combine Data</a></li>
</ul></li>
<li class="chapter" data-level="2.12" data-path="cleaning.html"><a href="cleaning.html#seattle-longitudinal-study-sls"><i class="fa fa-check"></i><b>2.12</b> Seattle Longitudinal Study (SLS)</a></li>
<li class="chapter" data-level="2.13" data-path="cleaning.html"><a href="cleaning.html#descriptives-of-all-studies"><i class="fa fa-check"></i><b>2.13</b> Descriptives of All Studies</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="runmodels.html"><a href="runmodels.html"><i class="fa fa-check"></i><b>3</b> Method 1: Pooled One Stage Models without Study-Specific Effects</a>
<ul>
<li class="chapter" data-level="3.1" data-path="runmodels.html"><a href="runmodels.html#step-1-combine-data"><i class="fa fa-check"></i><b>3.1</b> Step 1: Combine Data</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="runmodels.html"><a href="runmodels.html#study-level-moderators"><i class="fa fa-check"></i><b>3.1.1</b> Study-Level Moderators</a></li>
<li class="chapter" data-level="3.1.2" data-path="runmodels.html"><a href="runmodels.html#harmonize-data"><i class="fa fa-check"></i><b>3.1.2</b> Harmonize Data</a></li>
<li class="chapter" data-level="3.1.3" data-path="runmodels.html"><a href="runmodels.html#save-data-files"><i class="fa fa-check"></i><b>3.1.3</b> Save Data Files</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="runmodels.html"><a href="runmodels.html#step-2-run-models-and-extract-results"><i class="fa fa-check"></i><b>3.2</b> Step 2: Run Models and Extract Results</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="runmodels.html"><a href="runmodels.html#method-1a-linear-regression"><i class="fa fa-check"></i><b>3.2.1</b> Method 1A: Linear Regression</a></li>
<li class="chapter" data-level="3.2.2" data-path="runmodels.html"><a href="runmodels.html#part-1b-pooled-linear-regression-with-cluster-robust-standard-errors"><i class="fa fa-check"></i><b>3.2.2</b> Part 1B: Pooled Linear Regression with Cluster Robust Standard Errors</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="method-2-pooled-one-stage-models-with-study-specific-effects.html"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html"><i class="fa fa-check"></i><b>4</b> Method 2: Pooled One Stage Models with Study-Specific Effects</a>
<ul>
<li class="chapter" data-level="4.1" data-path="method-2-pooled-one-stage-models-with-study-specific-effects.html"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#step-1-combine-data-1"><i class="fa fa-check"></i><b>4.1</b> Step 1: Combine Data</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="method-2-pooled-one-stage-models-with-study-specific-effects.html"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#study-level-moderators-1"><i class="fa fa-check"></i><b>4.1.1</b> Study-Level Moderators</a></li>
<li class="chapter" data-level="4.1.2" data-path="method-2-pooled-one-stage-models-with-study-specific-effects.html"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#harmonize-data-1"><i class="fa fa-check"></i><b>4.1.2</b> Harmonize Data</a></li>
<li class="chapter" data-level="4.1.3" data-path="method-2-pooled-one-stage-models-with-study-specific-effects.html"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#save-data-files-1"><i class="fa fa-check"></i><b>4.1.3</b> Save Data Files</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="method-2-pooled-one-stage-models-with-study-specific-effects.html"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#step-2-run-models-and-extract-results-1"><i class="fa fa-check"></i><b>4.2</b> Step 2: Run Models and Extract Results</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="method-2-pooled-one-stage-models-with-study-specific-effects.html"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#method-2a-pooled-one-stage-models-with-dummy-codes"><i class="fa fa-check"></i><b>4.2.1</b> Method 2A: Pooled One Stage Models with Dummy Codes</a></li>
<li class="chapter" data-level="4.2.2" data-path="method-2-pooled-one-stage-models-with-study-specific-effects.html"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#method-2b-pooled-one-stage-models-with-random-effects"><i class="fa fa-check"></i><b>4.2.2</b> Method 2B: Pooled One Stage Models with Random Effects</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html"><i class="fa fa-check"></i><b>5</b> Method 3: Two-Stage Individual Participant Meta-Analysis</a>
<ul>
<li class="chapter" data-level="5.1" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#analytic-plan-4"><i class="fa fa-check"></i><b>5.1</b> Analytic Plan</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#sample-specific-statistical-modeling"><i class="fa fa-check"></i><b>5.1.1</b> 1. Sample-Specific Statistical Modeling</a></li>
<li class="chapter" data-level="5.1.2" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#results-pooling-using-meta-analysis"><i class="fa fa-check"></i><b>5.1.2</b> 2. Results Pooling Using Meta-Analysis</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#step-1-combine-data-2"><i class="fa fa-check"></i><b>5.2</b> Step 1: Combine Data</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#study-level-moderators-2"><i class="fa fa-check"></i><b>5.2.1</b> Study-Level Moderators</a></li>
<li class="chapter" data-level="5.2.2" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#harmonize-data-2"><i class="fa fa-check"></i><b>5.2.2</b> Harmonize Data</a></li>
<li class="chapter" data-level="5.2.3" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#save-data-files-2"><i class="fa fa-check"></i><b>5.2.3</b> Save Data Files</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#step-2-run-models-for-each-study"><i class="fa fa-check"></i><b>5.3</b> Step 2: Run Models for Each Study</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#functions"><i class="fa fa-check"></i><b>5.3.1</b> Functions</a></li>
<li class="chapter" data-level="5.3.2" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#run-models"><i class="fa fa-check"></i><b>5.3.2</b> Run Models</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#step-3-meta-analyze-results"><i class="fa fa-check"></i><b>5.4</b> Step 3: Meta-Analyze Results</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#functions-1"><i class="fa fa-check"></i><b>5.4.1</b> Functions</a></li>
<li class="chapter" data-level="5.4.2" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#run-meta-analysis-and-meta-regression-models"><i class="fa fa-check"></i><b>5.4.2</b> Run Meta-Analysis and Meta-Regression Models</a></li>
<li class="chapter" data-level="5.4.3" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#compile-results-4"><i class="fa fa-check"></i><b>5.4.3</b> Compile Results</a></li>
<li class="chapter" data-level="5.4.4" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#figures-4"><i class="fa fa-check"></i><b>5.4.4</b> Figures</a></li>
<li class="chapter" data-level="5.4.5" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#table-meta-analytic-heterogeneity"><i class="fa fa-check"></i><b>5.4.5</b> Table Meta-Analytic Heterogeneity</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#sample-results-section-4"><i class="fa fa-check"></i><b>5.5</b> Sample Results Section</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="method-3-one-stage-individual-participant-analyses-reported-together.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html"><i class="fa fa-check"></i><b>6</b> Method 3: One-Stage Individual Participant Analyses Reported Together</a>
<ul>
<li class="chapter" data-level="6.1" data-path="method-3-one-stage-individual-participant-analyses-reported-together.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#analytic-plan-5"><i class="fa fa-check"></i><b>6.1</b> Analytic Plan</a></li>
<li class="chapter" data-level="6.2" data-path="method-3-one-stage-individual-participant-analyses-reported-together.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#step-1-combine-data-3"><i class="fa fa-check"></i><b>6.2</b> Step 1: Combine Data</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="method-3-one-stage-individual-participant-analyses-reported-together.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#harmonize-data-3"><i class="fa fa-check"></i><b>6.2.1</b> Harmonize Data</a></li>
<li class="chapter" data-level="6.2.2" data-path="method-3-one-stage-individual-participant-analyses-reported-together.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#save-data-files-3"><i class="fa fa-check"></i><b>6.2.2</b> Save Data Files</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="method-3-one-stage-individual-participant-analyses-reported-together.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#step-2-run-models-for-each-study-1"><i class="fa fa-check"></i><b>6.3</b> Step 2: Run Models for Each Study</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="method-3-one-stage-individual-participant-analyses-reported-together.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#functions-2"><i class="fa fa-check"></i><b>6.3.1</b> Functions</a></li>
<li class="chapter" data-level="6.3.2" data-path="method-3-one-stage-individual-participant-analyses-reported-together.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#run-models-1"><i class="fa fa-check"></i><b>6.3.2</b> Run Models</a></li>
<li class="chapter" data-level="6.3.3" data-path="method-3-one-stage-individual-participant-analyses-reported-together.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#compile-results-5"><i class="fa fa-check"></i><b>6.3.3</b> Compile Results</a></li>
<li class="chapter" data-level="6.3.4" data-path="method-3-one-stage-individual-participant-analyses-reported-together.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#figures-5"><i class="fa fa-check"></i><b>6.3.4</b> Figures</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="method-3-one-stage-individual-participant-analyses-reported-together.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#sample-results-section-5"><i class="fa fa-check"></i><b>6.4</b> Sample Results Section</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="method-3-one-stage-individual-participant-analyses-reported-together-1.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together-1.html"><i class="fa fa-check"></i><b>7</b> Method 3: One-Stage Individual Participant Analyses Reported Together</a>
<ul>
<li class="chapter" data-level="7.1" data-path="method-3-one-stage-individual-participant-analyses-reported-together-1.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together-1.html#comparisons-across-the-taxonomy"><i class="fa fa-check"></i><b>7.1</b> Comparisons Across the Taxonomy</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="method-3-one-stage-individual-participant-analyses-reported-together-1.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together-1.html#tables-6"><i class="fa fa-check"></i><b>7.1.1</b> Tables</a></li>
<li class="chapter" data-level="7.1.2" data-path="method-3-one-stage-individual-participant-analyses-reported-together-1.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together-1.html#figures-6"><i class="fa fa-check"></i><b>7.1.2</b> Figures</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="method-3-one-stage-individual-participant-analyses-reported-together-1.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together-1.html#comparisons-across-methods-bayesian-versus-frequentist"><i class="fa fa-check"></i><b>7.2</b> Comparisons Across Methods: Bayesian versus Frequentist</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="method-3-one-stage-individual-participant-analyses-reported-together-1.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together-1.html#tables-7"><i class="fa fa-check"></i><b>7.2.1</b> Tables</a></li>
<li class="chapter" data-level="7.2.2" data-path="method-3-one-stage-individual-participant-analyses-reported-together-1.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together-1.html#figures-7"><i class="fa fa-check"></i><b>7.2.2</b> Figures</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">A Taxonomy of Data Synthesis: A Tutorial</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="method-3-one-stage-individual-participant-analyses-reported-together" class="section level1 hasAnchor" number="6">
<h1><span class="header-section-number">Chapter 6</span> Method 3: One-Stage Individual Participant Analyses Reported Together<a href="method-3-one-stage-individual-participant-analyses-reported-together.html#method-3-one-stage-individual-participant-analyses-reported-together" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="analytic-plan-5" class="section level2 hasAnchor" number="6.1">
<h2><span class="header-section-number">6.1</span> Analytic Plan<a href="method-3-one-stage-individual-participant-analyses-reported-together.html#analytic-plan-5" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In the present study, we estimate associations between the Big Five personality traits and crystallized cognitive abilities using a series of separate regression models for each sample (also known as a coordinated data analysis when multiple analysts are used). The procedure is as follows:</p>
<p>Models were run separately for each sample, personality characteristic, outcome, covariate, and moderator combination. To do so, we wrote a series of functions in the R programming language (see online materials) to (1) set up and run the model and extract model coefficients, (2) extract simple-effects predictions for moderator models (i.e. predicted values across levels of the moderator values), and (3) extract effect size metrics for the later meta-analysis. The basic form of the model is as follows:</p>
<p><span class="math inline">\(Y_{ij}=b_0+b_1\ast predictor_{ij}+\epsilon_{ij}\)</span>
<span class="math inline">\(\epsilon_{ij}\sim\mathcal{N}(0, \sigma^2)\)</span>,</p>
<p>where <span class="math inline">\(b_1\)</span> represents the effect of personality predicting the outcome separately in each sample.<br />
The modeling function used the base <code>R</code> <code>lm()</code> function to run the models and the <code>tidy()</code> function from the broom package to extract model coefficients and confidence intervals (CI). Inferences will be made based on the 95% confidence intervals. Effect sizes and their standard errors were extracted from the model <code>summary()</code>. Simple-effects predictions were calculated by providing the full range of personality levels (0-10) and average levels of the covariates from the data used to estimate the model as the <code>"newdata"</code> argument in the base <code>R</code> <code>predict()</code> function.</p>
</div>
<div id="step-1-combine-data-3" class="section level2 hasAnchor" number="6.2">
<h2><span class="header-section-number">6.2</span> Step 1: Combine Data<a href="method-3-one-stage-individual-participant-analyses-reported-together.html#step-1-combine-data-3" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We again need to combine data. However, rather than combining data across studies, for the two-stage approach, we’ll be combining data within studies in order to run separate analyses for each before combining via meta-analytic tools.</p>
<div class="sourceCode" id="cb411"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb411-1"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb411-1" tabindex="-1"></a>loadRData <span class="ot">&lt;-</span> <span class="cf">function</span>(fileName, type){</span>
<span id="cb411-2"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb411-2" tabindex="-1"></a><span class="co">#loads an RData file, and returns it</span></span>
<span id="cb411-3"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb411-3" tabindex="-1"></a>    path <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/data/clean/%s_cleaned.RData&quot;</span>, local_path, fileName)</span>
<span id="cb411-4"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb411-4" tabindex="-1"></a>    <span class="fu">load</span>(path)</span>
<span id="cb411-5"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb411-5" tabindex="-1"></a>    <span class="fu">get</span>(<span class="fu">ls</span>()[<span class="fu">grepl</span>(type, <span class="fu">ls</span>())])</span>
<span id="cb411-6"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb411-6" tabindex="-1"></a>}</span>
<span id="cb411-7"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb411-7" tabindex="-1"></a></span>
<span id="cb411-8"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb411-8" tabindex="-1"></a>ipd4_reg_data <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb411-9"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb411-9" tabindex="-1"></a>  <span class="at">study =</span> studies[<span class="sc">!</span>studies <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;CNLSY&quot;</span>, <span class="st">&quot;SLS&quot;</span>)]</span>
<span id="cb411-10"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb411-10" tabindex="-1"></a>  , <span class="at">data =</span> <span class="fu">map</span>(<span class="fu">str_to_lower</span>(study), <span class="sc">~</span><span class="fu">loadRData</span>(., <span class="st">&quot;combined&quot;</span>))</span>
<span id="cb411-11"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb411-11" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb411-12"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb411-12" tabindex="-1"></a>    <span class="at">data =</span> <span class="fu">map</span>(data, <span class="sc">~</span>(.) <span class="sc">%&gt;%</span> </span>
<span id="cb411-13"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb411-13" tabindex="-1"></a>                 <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb411-14"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb411-14" tabindex="-1"></a>                 <span class="fu">mutate</span>(<span class="at">SID =</span> <span class="fu">as.character</span>(SID)))</span>
<span id="cb411-15"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb411-15" tabindex="-1"></a>    , <span class="at">study =</span> <span class="fu">mapvalues</span>(study, studies, studies_long)</span>
<span id="cb411-16"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb411-16" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb411-17"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb411-17" tabindex="-1"></a>  <span class="fu">unnest</span>(data) <span class="sc">%&gt;%</span></span>
<span id="cb411-18"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb411-18" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">age =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(age), p_year <span class="sc">-</span> yearBrth, age))</span>
<span id="cb411-19"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb411-19" tabindex="-1"></a></span>
<span id="cb411-20"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb411-20" tabindex="-1"></a>ipd4_reg_data</span></code></pre></div>
<pre><code>## # A tibble: 119,597 × 13
##    study Trait p_value p_year SID   Outcome      o_value o_year education gender SRhealth yearBrth   age
##    &lt;chr&gt; &lt;chr&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;          &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;
##  1 BASE  E        3.83   1990 10004 crystallized   2.17    2000        17      0        4     1918    72
##  2 BASE  E        3.83   1990 10010 crystallized   3.08    1995        11      0        2     1911    79
##  3 BASE  E        2.5    1990 10033 crystallized   0.909   1997         8      1        5     1910    80
##  4 BASE  E        3      1990 10034 crystallized   6.54    1995        10      0        5     1914    76
##  5 BASE  E        2.5    1990 10111 crystallized   6.54    1995        13      1        4     1901    89
##  6 BASE  E        3.17   1990 10115 crystallized  10       1995        11      0        2     1918    72
##  7 BASE  E        3      1990 10116 crystallized   3.85    1995        10      0        4     1917    73
##  8 BASE  E        3      1990 10145 crystallized   6.36    1997        10      1        5     1897    93
##  9 BASE  E        3.33   1990 10175 crystallized   2.31    1995         8      1        3     1911    79
## 10 BASE  E        3.33   1990 10188 crystallized   5.77    2004        10      1        2     1903    87
## # ℹ 119,587 more rows</code></pre>
<div id="harmonize-data-3" class="section level3 hasAnchor" number="6.2.1">
<h3><span class="header-section-number">6.2.1</span> Harmonize Data<a href="method-3-one-stage-individual-participant-analyses-reported-together.html#harmonize-data-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb413"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb413-1"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb413-1" tabindex="-1"></a>ipd4_reg_data <span class="ot">&lt;-</span> ipd4_reg_data <span class="sc">%&gt;%</span></span>
<span id="cb413-2"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb413-2" tabindex="-1"></a>  <span class="fu">group_by</span>(study, Trait, Outcome) <span class="sc">%&gt;%</span></span>
<span id="cb413-3"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb413-3" tabindex="-1"></a>  <span class="fu">mutate_at</span>(<span class="fu">vars</span>(p_value, o_value, SRhealth), </span>
<span id="cb413-4"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb413-4" tabindex="-1"></a>            <span class="sc">~</span>((. <span class="sc">-</span> <span class="fu">min</span>(., <span class="at">na.rm =</span> T))<span class="sc">/</span>(<span class="fu">max</span>(., <span class="at">na.rm =</span> T) <span class="sc">-</span> <span class="fu">min</span>(., <span class="at">na.rm =</span> T))<span class="sc">*</span><span class="dv">10</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb413-5"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb413-5" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gender =</span> <span class="fu">factor</span>(gender, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;Male&quot;</span>, <span class="st">&quot;Female&quot;</span>)),</span>
<span id="cb413-6"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb413-6" tabindex="-1"></a>         <span class="at">education =</span> education <span class="sc">-</span> <span class="dv">12</span>,</span>
<span id="cb413-7"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb413-7" tabindex="-1"></a>         <span class="at">age =</span> age <span class="sc">-</span> <span class="fu">mean</span>(age, <span class="at">na.rm =</span> T))</span>
<span id="cb413-8"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb413-8" tabindex="-1"></a>ipd4_reg_data</span></code></pre></div>
<pre><code>## # A tibble: 119,597 × 13
## # Groups:   study, Trait, Outcome [40]
##    study Trait p_value p_year SID   Outcome      o_value o_year education gender SRhealth yearBrth    age
##    &lt;chr&gt; &lt;chr&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;          &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt; &lt;fct&gt;     &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt;
##  1 BASE  E         7     1990 10004 crystallized   2.17    2000         5 Male        7.5     1918 -6.23 
##  2 BASE  E         7     1990 10010 crystallized   3.08    1995        -1 Male        2.5     1911  0.766
##  3 BASE  E         3     1990 10033 crystallized   0.909   1997        -4 Female     10       1910  1.77 
##  4 BASE  E         4.5   1990 10034 crystallized   6.54    1995        -2 Male       10       1914 -2.23 
##  5 BASE  E         3     1990 10111 crystallized   6.54    1995         1 Female      7.5     1901 10.8  
##  6 BASE  E         5     1990 10115 crystallized  10       1995        -1 Male        2.5     1918 -6.23 
##  7 BASE  E         4.5   1990 10116 crystallized   3.85    1995        -2 Male        7.5     1917 -5.23 
##  8 BASE  E         4.5   1990 10145 crystallized   6.36    1997        -2 Female     10       1897 14.8  
##  9 BASE  E         5.5   1990 10175 crystallized   2.31    1995        -4 Female      5       1911  0.766
## 10 BASE  E         5.5   1990 10188 crystallized   5.77    2004        -2 Female      2.5     1903  8.77 
## # ℹ 119,587 more rows</code></pre>
</div>
<div id="save-data-files-3" class="section level3 hasAnchor" number="6.2.2">
<h3><span class="header-section-number">6.2.2</span> Save Data Files<a href="method-3-one-stage-individual-participant-analyses-reported-together.html#save-data-files-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb415"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb415-1"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb415-1" tabindex="-1"></a>save_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(d, trait, outcome, study){</span>
<span id="cb415-2"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb415-2" tabindex="-1"></a>  <span class="fu">save</span>(d, <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/data/two_stage/%s_%s_%s.RData&quot;</span>, local_path, trait, outcome, study))</span>
<span id="cb415-3"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb415-3" tabindex="-1"></a>}</span>
<span id="cb415-4"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb415-4" tabindex="-1"></a></span>
<span id="cb415-5"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb415-5" tabindex="-1"></a>ipd4_reg_data <span class="sc">%&gt;%</span></span>
<span id="cb415-6"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb415-6" tabindex="-1"></a>  <span class="fu">group_by</span>(study, Trait, Outcome) <span class="sc">%&gt;%</span></span>
<span id="cb415-7"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb415-7" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span></span>
<span id="cb415-8"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb415-8" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb415-9"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb415-9" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">data =</span> <span class="fu">pmap</span>(<span class="fu">list</span>(data, Trait, Outcome, study), save_fun))</span></code></pre></div>
<pre><code>## # A tibble: 40 × 4
##    study Trait Outcome      data  
##    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;        &lt;list&gt;
##  1 BASE  E     crystallized &lt;NULL&gt;
##  2 BASE  N     crystallized &lt;NULL&gt;
##  3 BASE  O     crystallized &lt;NULL&gt;
##  4 EAS   A     crystallized &lt;NULL&gt;
##  5 EAS   C     crystallized &lt;NULL&gt;
##  6 EAS   E     crystallized &lt;NULL&gt;
##  7 EAS   N     crystallized &lt;NULL&gt;
##  8 EAS   O     crystallized &lt;NULL&gt;
##  9 GSOEP A     crystallized &lt;NULL&gt;
## 10 GSOEP C     crystallized &lt;NULL&gt;
## # ℹ 30 more rows</code></pre>
</div>
</div>
<div id="step-2-run-models-for-each-study-1" class="section level2 hasAnchor" number="6.3">
<h2><span class="header-section-number">6.3</span> Step 2: Run Models for Each Study<a href="method-3-one-stage-individual-participant-analyses-reported-together.html#step-2-run-models-for-each-study-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="functions-2" class="section level3 hasAnchor" number="6.3.1">
<h3><span class="header-section-number">6.3.1</span> Functions<a href="method-3-one-stage-individual-participant-analyses-reported-together.html#functions-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="model-function-5" class="section level4 hasAnchor" number="6.3.1.1">
<h4><span class="header-section-number">6.3.1.1</span> Model Function<a href="method-3-one-stage-individual-participant-analyses-reported-together.html#model-function-5" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb417"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb417-1"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb417-1" tabindex="-1"></a>ipd4_study_mod_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(trait, outcome, type, mod, study, cov){</span>
<span id="cb417-2"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb417-2" tabindex="-1"></a>  <span class="do">## load the data</span></span>
<span id="cb417-3"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb417-3" tabindex="-1"></a>  <span class="fu">load</span>(<span class="fu">sprintf</span>(<span class="st">&quot;%s/data/two_stage/%s_%s_%s.RData&quot;</span>, local_path, trait, outcome, study))</span>
<span id="cb417-4"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb417-4" tabindex="-1"></a>  </span>
<span id="cb417-5"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb417-5" tabindex="-1"></a>  <span class="do">## compiled Bayesian model to speed up processing and avoid crashing</span></span>
<span id="cb417-6"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb417-6" tabindex="-1"></a>  <span class="cf">if</span>(type <span class="sc">==</span> <span class="st">&quot;Bayesian&quot;</span>) <span class="fu">load</span>(<span class="fu">sprintf</span>(<span class="st">&quot;%s/results/4_ca_reptog/bayes_sample_mod.RData&quot;</span>, local_path))</span>
<span id="cb417-7"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb417-7" tabindex="-1"></a>  </span>
<span id="cb417-8"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb417-8" tabindex="-1"></a>  <span class="do">## model formula </span></span>
<span id="cb417-9"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb417-9" tabindex="-1"></a>  <span class="cf">if</span> (cov <span class="sc">==</span> <span class="st">&quot;all&quot;</span>) cv <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;age&quot;</span>, <span class="st">&quot;gender&quot;</span>, <span class="st">&quot;education&quot;</span>)</span>
<span id="cb417-10"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb417-10" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span>cov <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;all&quot;</span>, <span class="st">&quot;none&quot;</span>)) cv <span class="ot">&lt;-</span> cov</span>
<span id="cb417-11"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb417-11" tabindex="-1"></a>  rhs <span class="ot">&lt;-</span> <span class="st">&quot;p_value&quot;</span></span>
<span id="cb417-12"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb417-12" tabindex="-1"></a>  rhs <span class="ot">&lt;-</span> <span class="cf">if</span>(cov <span class="sc">!=</span> <span class="st">&quot;none&quot;</span>) <span class="fu">c</span>(rhs, cv) <span class="cf">else</span> rhs</span>
<span id="cb417-13"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb417-13" tabindex="-1"></a>  <span class="cf">if</span>(mod <span class="sc">!=</span> <span class="st">&quot;none&quot;</span>){rhs <span class="ot">&lt;-</span> <span class="fu">c</span>(rhs, <span class="fu">paste</span>(<span class="st">&quot;p_value&quot;</span>, mod, <span class="at">sep =</span> <span class="st">&quot;*&quot;</span>))}</span>
<span id="cb417-14"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb417-14" tabindex="-1"></a>  rhs <span class="ot">&lt;-</span> <span class="fu">paste</span>(rhs, <span class="at">collapse =</span> <span class="st">&quot; + &quot;</span>)</span>
<span id="cb417-15"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb417-15" tabindex="-1"></a>  f <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;o_value ~ &quot;</span>, rhs, <span class="at">collapse =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb417-16"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb417-16" tabindex="-1"></a>  </span>
<span id="cb417-17"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb417-17" tabindex="-1"></a>  <span class="do">## run the models &amp; save</span></span>
<span id="cb417-18"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb417-18" tabindex="-1"></a>  m <span class="ot">&lt;-</span> <span class="cf">if</span>(type <span class="sc">==</span> <span class="st">&quot;Frequentist&quot;</span>){<span class="fu">do.call</span>(<span class="st">&quot;lm&quot;</span>, <span class="fu">list</span>(<span class="at">formula =</span> f, <span class="at">data =</span> <span class="fu">quote</span>(d)))} <span class="cf">else</span> {<span class="fu">update</span>(m, <span class="at">formula =</span> f, <span class="at">newdata =</span> d, <span class="at">warmup =</span> <span class="dv">1000</span>, <span class="at">iter =</span> <span class="dv">2000</span>)}</span>
<span id="cb417-19"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb417-19" tabindex="-1"></a>  <span class="fu">save</span>(m, <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/4_ca_reptog/%s/models/%s_%s_%s_%s_%s.RData&quot;</span></span>
<span id="cb417-20"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb417-20" tabindex="-1"></a>                         , local_path, type, outcome, trait, mod, cov, study))</span>
<span id="cb417-21"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb417-21" tabindex="-1"></a>  </span>
<span id="cb417-22"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb417-22" tabindex="-1"></a>  <span class="do">## extract model terms and confidence intervals &amp; save</span></span>
<span id="cb417-23"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb417-23" tabindex="-1"></a>  fx <span class="ot">&lt;-</span> <span class="fu">tidy</span>(m, <span class="at">conf.int =</span> T) <span class="sc">%&gt;%</span></span>
<span id="cb417-24"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb417-24" tabindex="-1"></a>    <span class="fu">select</span>(term, estimate, conf.low, conf.high)</span>
<span id="cb417-25"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb417-25" tabindex="-1"></a>  <span class="fu">save</span>(fx, <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/4_ca_reptog/%s/summary/%s_%s_%s_%s_%s.RData&quot;</span></span>
<span id="cb417-26"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb417-26" tabindex="-1"></a>                          , local_path, type, outcome, trait, mod, cov, study))</span>
<span id="cb417-27"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb417-27" tabindex="-1"></a>  </span>
<span id="cb417-28"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb417-28" tabindex="-1"></a>  <span class="do">## calculate simple effects  </span></span>
<span id="cb417-29"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb417-29" tabindex="-1"></a>  <span class="cf">if</span>(mod <span class="sc">!=</span> <span class="st">&quot;none&quot;</span>){</span>
<span id="cb417-30"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb417-30" tabindex="-1"></a>    pred.rx <span class="ot">&lt;-</span> <span class="fu">ipd4_study_simpeff_fun</span>(m, mod, type)</span>
<span id="cb417-31"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb417-31" tabindex="-1"></a>    <span class="fu">save</span>(pred.rx, <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/4_ca_reptog/%s/predicted/%s_%s_%s_%s_%s.RData&quot;</span></span>
<span id="cb417-32"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb417-32" tabindex="-1"></a>                                 , local_path, type, outcome, trait, mod, cov, study))</span>
<span id="cb417-33"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb417-33" tabindex="-1"></a>  }</span>
<span id="cb417-34"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb417-34" tabindex="-1"></a>  </span>
<span id="cb417-35"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb417-35" tabindex="-1"></a>  <span class="do">## clean up the local function environment</span></span>
<span id="cb417-36"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb417-36" tabindex="-1"></a>  <span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">c</span>(<span class="st">&quot;d&quot;</span>, <span class="st">&quot;f&quot;</span>, <span class="st">&quot;m&quot;</span>, <span class="st">&quot;fx&quot;</span>, <span class="st">&quot;es&quot;</span>, <span class="st">&quot;rhs&quot;</span>))</span>
<span id="cb417-37"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb417-37" tabindex="-1"></a>  <span class="fu">gc</span>()</span>
<span id="cb417-38"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb417-38" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="study-specific-simple-effects-function-1" class="section level4 hasAnchor" number="6.3.1.2">
<h4><span class="header-section-number">6.3.1.2</span> Study-Specific Simple Effects Function<a href="method-3-one-stage-individual-participant-analyses-reported-together.html#study-specific-simple-effects-function-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb418"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb418-1"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-1" tabindex="-1"></a>ipd4_study_simpeff_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(m, moder, type){</span>
<span id="cb418-2"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-2" tabindex="-1"></a>  d <span class="ot">&lt;-</span> <span class="cf">if</span>(type <span class="sc">==</span> <span class="st">&quot;Bayesian&quot;</span>) m<span class="sc">$</span>data <span class="cf">else</span> m<span class="sc">$</span>model</span>
<span id="cb418-3"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-3" tabindex="-1"></a>  d <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>o_value, <span class="sc">-</span>p_value)</span>
<span id="cb418-4"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-4" tabindex="-1"></a>  cols <span class="ot">&lt;-</span> <span class="fu">colnames</span>(d)</span>
<span id="cb418-5"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-5" tabindex="-1"></a>  md_cl <span class="ot">&lt;-</span> <span class="fu">class</span>(d[,moder])</span>
<span id="cb418-6"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-6" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">any</span>(<span class="fu">sapply</span>(d, class) <span class="sc">==</span> <span class="st">&quot;numeric&quot;</span>)){</span>
<span id="cb418-7"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-7" tabindex="-1"></a>    msd <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span></span>
<span id="cb418-8"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-8" tabindex="-1"></a>      <span class="fu">select_if</span>(is.numeric) <span class="sc">%&gt;%</span></span>
<span id="cb418-9"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-9" tabindex="-1"></a>      <span class="fu">pivot_longer</span>(<span class="fu">everything</span>()</span>
<span id="cb418-10"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-10" tabindex="-1"></a>                   , <span class="at">names_to =</span> <span class="st">&quot;item&quot;</span></span>
<span id="cb418-11"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-11" tabindex="-1"></a>                   , <span class="at">values_to =</span> <span class="st">&quot;value&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb418-12"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-12" tabindex="-1"></a>      <span class="fu">group_by</span>(item) <span class="sc">%&gt;%</span></span>
<span id="cb418-13"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-13" tabindex="-1"></a>      <span class="fu">summarize_at</span>(<span class="fu">vars</span>(value), <span class="fu">lst</span>(mean, sd)) <span class="sc">%&gt;%</span></span>
<span id="cb418-14"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-14" tabindex="-1"></a>      <span class="fu">ungroup</span>()</span>
<span id="cb418-15"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-15" tabindex="-1"></a>  }</span>
<span id="cb418-16"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-16" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">any</span>(<span class="fu">sapply</span>(d, class) <span class="sc">==</span> <span class="st">&quot;factor&quot;</span>)){</span>
<span id="cb418-17"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-17" tabindex="-1"></a>    fct_lev <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> </span>
<span id="cb418-18"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-18" tabindex="-1"></a>      <span class="fu">select_if</span>(is.factor) <span class="sc">%&gt;%</span></span>
<span id="cb418-19"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-19" tabindex="-1"></a>      <span class="fu">summarize_all</span>(<span class="sc">~</span><span class="fu">list</span>(<span class="fu">unique</span>(.)))</span>
<span id="cb418-20"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-20" tabindex="-1"></a>  }</span>
<span id="cb418-21"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-21" tabindex="-1"></a>  d <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span><span class="fu">one_of</span>(moder))</span>
<span id="cb418-22"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-22" tabindex="-1"></a>  md_levs <span class="ot">&lt;-</span> <span class="cf">if</span>(md_cl <span class="sc">==</span> <span class="st">&quot;numeric&quot;</span>){</span>
<span id="cb418-23"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-23" tabindex="-1"></a>    <span class="cf">if</span>(moder <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;age&quot;</span>, <span class="st">&quot;baseAge&quot;</span>, <span class="st">&quot;baseYear&quot;</span>)) {</span>
<span id="cb418-24"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-24" tabindex="-1"></a>      <span class="fu">c</span>(<span class="sc">-</span><span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">10</span>)</span>
<span id="cb418-25"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-25" tabindex="-1"></a>      } <span class="cf">else</span> <span class="cf">if</span> (moder <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;predInt&quot;</span>, <span class="st">&quot;education&quot;</span>)) {</span>
<span id="cb418-26"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-26" tabindex="-1"></a>      <span class="fu">c</span>(<span class="sc">-</span><span class="dv">5</span>, <span class="dv">0</span>, <span class="dv">5</span>) </span>
<span id="cb418-27"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-27" tabindex="-1"></a>      } <span class="cf">else</span> {</span>
<span id="cb418-28"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-28" tabindex="-1"></a>        <span class="fu">with</span>(msd, <span class="fu">c</span>(mean[item <span class="sc">==</span> moder] <span class="sc">-</span> sd[item <span class="sc">==</span> moder], mean[item <span class="sc">==</span> moder], mean[item <span class="sc">==</span> moder] <span class="sc">+</span> sd[item <span class="sc">==</span> moder]))</span>
<span id="cb418-29"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-29" tabindex="-1"></a>      }</span>
<span id="cb418-30"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-30" tabindex="-1"></a>  } <span class="cf">else</span> { </span>
<span id="cb418-31"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-31" tabindex="-1"></a>    <span class="fu">unique</span>(fct_lev[,moder][[<span class="dv">1</span>]])</span>
<span id="cb418-32"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-32" tabindex="-1"></a>  }</span>
<span id="cb418-33"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-33" tabindex="-1"></a>  </span>
<span id="cb418-34"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-34" tabindex="-1"></a>  mod_frame <span class="ot">&lt;-</span> <span class="fu">crossing</span>(</span>
<span id="cb418-35"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-35" tabindex="-1"></a>    <span class="at">p_value =</span> <span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">10</span>,.<span class="dv">5</span>)</span>
<span id="cb418-36"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-36" tabindex="-1"></a>    , <span class="at">modvalue =</span> md_levs</span>
<span id="cb418-37"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-37" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> <span class="fu">setNames</span>(<span class="fu">c</span>(<span class="st">&quot;p_value&quot;</span>, moder))</span>
<span id="cb418-38"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-38" tabindex="-1"></a>  </span>
<span id="cb418-39"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-39" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">ncol</span>(d) <span class="sc">&gt;</span> <span class="dv">0</span>){</span>
<span id="cb418-40"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-40" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">any</span>(<span class="fu">sapply</span>(d, class) <span class="sc">==</span> <span class="st">&quot;numeric&quot;</span>)){</span>
<span id="cb418-41"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-41" tabindex="-1"></a>      mod_frame <span class="ot">&lt;-</span> <span class="fu">tibble</span>(mod_frame, d <span class="sc">%&gt;%</span> <span class="fu">select_if</span>(is.numeric) <span class="sc">%&gt;%</span> <span class="fu">summarize_all</span>(mean))</span>
<span id="cb418-42"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-42" tabindex="-1"></a>    } </span>
<span id="cb418-43"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-43" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">any</span>(<span class="fu">sapply</span>(d, class) <span class="sc">==</span> <span class="st">&quot;factor&quot;</span>)){</span>
<span id="cb418-44"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-44" tabindex="-1"></a>      mod_frame <span class="ot">&lt;-</span> <span class="fu">tibble</span>(mod_frame, d <span class="sc">%&gt;%</span> <span class="fu">select_if</span>(is.factor) <span class="sc">%&gt;%</span> <span class="fu">summarize_all</span>(<span class="sc">~</span><span class="fu">levels</span>(.)[<span class="dv">1</span>]))</span>
<span id="cb418-45"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-45" tabindex="-1"></a>    }</span>
<span id="cb418-46"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-46" tabindex="-1"></a>  }</span>
<span id="cb418-47"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-47" tabindex="-1"></a>  </span>
<span id="cb418-48"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-48" tabindex="-1"></a>  pred.fx <span class="ot">&lt;-</span> <span class="cf">if</span>(type <span class="sc">==</span> <span class="st">&quot;Bayesian&quot;</span>){</span>
<span id="cb418-49"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-49" tabindex="-1"></a>    <span class="fu">bind_cols</span>(</span>
<span id="cb418-50"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-50" tabindex="-1"></a>      mod_frame, </span>
<span id="cb418-51"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-51" tabindex="-1"></a>      <span class="fu">fitted</span>(m, <span class="at">newdata =</span> mod_frame) <span class="sc">%&gt;%</span> data.frame</span>
<span id="cb418-52"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-52" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb418-53"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-53" tabindex="-1"></a>      <span class="fu">select</span>(<span class="fu">one_of</span>(<span class="fu">colnames</span>(m<span class="sc">$</span>data)), <span class="at">pred =</span> Estimate, <span class="at">lower =</span> Q2<span class="fl">.5</span>, <span class="at">upper =</span> Q97<span class="fl">.5</span>)</span>
<span id="cb418-54"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-54" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb418-55"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-55" tabindex="-1"></a>    <span class="fu">bind_cols</span>(</span>
<span id="cb418-56"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-56" tabindex="-1"></a>      mod_frame, </span>
<span id="cb418-57"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-57" tabindex="-1"></a>      <span class="fu">predict</span>(m, <span class="at">newdata =</span> mod_frame, <span class="at">interval =</span> <span class="st">&quot;confidence&quot;</span>) <span class="sc">%&gt;%</span> data.frame </span>
<span id="cb418-58"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-58" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb418-59"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-59" tabindex="-1"></a>      <span class="fu">select</span>(<span class="fu">one_of</span>(<span class="fu">colnames</span>(m<span class="sc">$</span>model)), <span class="at">pred =</span> fit, <span class="at">lower =</span> lwr, <span class="at">upper =</span> upr)</span>
<span id="cb418-60"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-60" tabindex="-1"></a>  }</span>
<span id="cb418-61"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-61" tabindex="-1"></a>  </span>
<span id="cb418-62"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-62" tabindex="-1"></a>  <span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">c</span>(<span class="st">&quot;m&quot;</span>, <span class="st">&quot;mod_frame&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;md_levs&quot;</span>))</span>
<span id="cb418-63"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-63" tabindex="-1"></a>  <span class="fu">gc</span>()</span>
<span id="cb418-64"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-64" tabindex="-1"></a>  <span class="fu">return</span>(pred.fx)</span>
<span id="cb418-65"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb418-65" tabindex="-1"></a>}</span></code></pre></div>
</div>
</div>
<div id="run-models-1" class="section level3 hasAnchor" number="6.3.2">
<h3><span class="header-section-number">6.3.2</span> Run Models<a href="method-3-one-stage-individual-participant-analyses-reported-together.html#run-models-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb419"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb419-1"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb419-1" tabindex="-1"></a><span class="fu">load</span>(<span class="fu">sprintf</span>(<span class="st">&quot;%s/data/two_stage/N_crystallized_HILDA.RData&quot;</span>, local_path))</span>
<span id="cb419-2"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb419-2" tabindex="-1"></a></span>
<span id="cb419-3"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb419-3" tabindex="-1"></a><span class="co"># clean data &amp; keep only needed columns and a subset of the used variables</span></span>
<span id="cb419-4"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb419-4" tabindex="-1"></a>d <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span></span>
<span id="cb419-5"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb419-5" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">row_number</span>() <span class="sc">%in%</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(.), <span class="dv">100</span>, <span class="at">replace =</span> F))</span>
<span id="cb419-6"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb419-6" tabindex="-1"></a></span>
<span id="cb419-7"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb419-7" tabindex="-1"></a><span class="co"># set priors &amp; model specifications </span></span>
<span id="cb419-8"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb419-8" tabindex="-1"></a>Prior <span class="ot">&lt;-</span>  <span class="fu">c</span>(<span class="fu">set_prior</span>(<span class="st">&quot;student_t(3, 0, 2)&quot;</span>, <span class="at">class =</span> <span class="st">&quot;b&quot;</span>),</span>
<span id="cb419-9"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb419-9" tabindex="-1"></a>            <span class="fu">set_prior</span>(<span class="st">&quot;student_t(3, 0, 5)&quot;</span>, <span class="at">class =</span> <span class="st">&quot;Intercept&quot;</span>))</span>
<span id="cb419-10"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb419-10" tabindex="-1"></a>Iter <span class="ot">&lt;-</span> <span class="dv">30</span>; Warmup <span class="ot">&lt;-</span> <span class="dv">21</span>; treedepth <span class="ot">&lt;-</span> <span class="dv">20</span></span>
<span id="cb419-11"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb419-11" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">bf</span>(o_value <span class="sc">~</span> p_value <span class="sc">+</span> age <span class="sc">+</span> gender <span class="sc">+</span> education)</span>
<span id="cb419-12"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb419-12" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">brm</span>(<span class="at">formula =</span> f</span>
<span id="cb419-13"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb419-13" tabindex="-1"></a>            , <span class="at">data =</span> d</span>
<span id="cb419-14"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb419-14" tabindex="-1"></a>            , <span class="at">prior =</span> Prior</span>
<span id="cb419-15"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb419-15" tabindex="-1"></a>            , <span class="at">iter =</span> Iter</span>
<span id="cb419-16"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb419-16" tabindex="-1"></a>            , <span class="at">warmup =</span> Warmup)</span></code></pre></div>
<pre><code>## 
## SAMPLING FOR MODEL &#39;anon_model&#39; NOW (CHAIN 1).
## Chain 1: 
## Chain 1: Gradient evaluation took 3.8e-05 seconds
## Chain 1: 1000 transitions using 10 leapfrog steps per transition would take 0.38 seconds.
## Chain 1: Adjust your expectations accordingly!
## Chain 1: 
## Chain 1: 
## Chain 1: WARNING: There aren&#39;t enough warmup iterations to fit the
## Chain 1:          three stages of adaptation as currently configured.
## Chain 1:          Reducing each adaptation stage to 15%/75%/10% of
## Chain 1:          the given number of warmup iterations:
## Chain 1:            init_buffer = 3
## Chain 1:            adapt_window = 16
## Chain 1:            term_buffer = 2
## Chain 1: 
## Chain 1: Iteration:  1 / 30 [  3%]  (Warmup)
## Chain 1: Iteration:  3 / 30 [ 10%]  (Warmup)
## Chain 1: Iteration:  6 / 30 [ 20%]  (Warmup)
## Chain 1: Iteration:  9 / 30 [ 30%]  (Warmup)
## Chain 1: Iteration: 12 / 30 [ 40%]  (Warmup)
## Chain 1: Iteration: 15 / 30 [ 50%]  (Warmup)
## Chain 1: Iteration: 18 / 30 [ 60%]  (Warmup)
## Chain 1: Iteration: 21 / 30 [ 70%]  (Warmup)
## Chain 1: Iteration: 22 / 30 [ 73%]  (Sampling)
## Chain 1: Iteration: 24 / 30 [ 80%]  (Sampling)
## Chain 1: Iteration: 27 / 30 [ 90%]  (Sampling)
## Chain 1: Iteration: 30 / 30 [100%]  (Sampling)
## Chain 1: 
## Chain 1:  Elapsed Time: 0.002 seconds (Warm-up)
## Chain 1:                0 seconds (Sampling)
## Chain 1:                0.002 seconds (Total)
## Chain 1: 
## 
## SAMPLING FOR MODEL &#39;anon_model&#39; NOW (CHAIN 2).
## Chain 2: 
## Chain 2: Gradient evaluation took 4e-06 seconds
## Chain 2: 1000 transitions using 10 leapfrog steps per transition would take 0.04 seconds.
## Chain 2: Adjust your expectations accordingly!
## Chain 2: 
## Chain 2: 
## Chain 2: WARNING: There aren&#39;t enough warmup iterations to fit the
## Chain 2:          three stages of adaptation as currently configured.
## Chain 2:          Reducing each adaptation stage to 15%/75%/10% of
## Chain 2:          the given number of warmup iterations:
## Chain 2:            init_buffer = 3
## Chain 2:            adapt_window = 16
## Chain 2:            term_buffer = 2
## Chain 2: 
## Chain 2: Iteration:  1 / 30 [  3%]  (Warmup)
## Chain 2: Iteration:  3 / 30 [ 10%]  (Warmup)
## Chain 2: Iteration:  6 / 30 [ 20%]  (Warmup)
## Chain 2: Iteration:  9 / 30 [ 30%]  (Warmup)
## Chain 2: Iteration: 12 / 30 [ 40%]  (Warmup)
## Chain 2: Iteration: 15 / 30 [ 50%]  (Warmup)
## Chain 2: Iteration: 18 / 30 [ 60%]  (Warmup)
## Chain 2: Iteration: 21 / 30 [ 70%]  (Warmup)
## Chain 2: Iteration: 22 / 30 [ 73%]  (Sampling)
## Chain 2: Iteration: 24 / 30 [ 80%]  (Sampling)
## Chain 2: Iteration: 27 / 30 [ 90%]  (Sampling)
## Chain 2: Iteration: 30 / 30 [100%]  (Sampling)
## Chain 2: 
## Chain 2:  Elapsed Time: 0.004 seconds (Warm-up)
## Chain 2:                0 seconds (Sampling)
## Chain 2:                0.004 seconds (Total)
## Chain 2: 
## 
## SAMPLING FOR MODEL &#39;anon_model&#39; NOW (CHAIN 3).
## Chain 3: 
## Chain 3: Gradient evaluation took 3e-06 seconds
## Chain 3: 1000 transitions using 10 leapfrog steps per transition would take 0.03 seconds.
## Chain 3: Adjust your expectations accordingly!
## Chain 3: 
## Chain 3: 
## Chain 3: WARNING: There aren&#39;t enough warmup iterations to fit the
## Chain 3:          three stages of adaptation as currently configured.
## Chain 3:          Reducing each adaptation stage to 15%/75%/10% of
## Chain 3:          the given number of warmup iterations:
## Chain 3:            init_buffer = 3
## Chain 3:            adapt_window = 16
## Chain 3:            term_buffer = 2
## Chain 3: 
## Chain 3: Iteration:  1 / 30 [  3%]  (Warmup)
## Chain 3: Iteration:  3 / 30 [ 10%]  (Warmup)
## Chain 3: Iteration:  6 / 30 [ 20%]  (Warmup)
## Chain 3: Iteration:  9 / 30 [ 30%]  (Warmup)
## Chain 3: Iteration: 12 / 30 [ 40%]  (Warmup)
## Chain 3: Iteration: 15 / 30 [ 50%]  (Warmup)
## Chain 3: Iteration: 18 / 30 [ 60%]  (Warmup)
## Chain 3: Iteration: 21 / 30 [ 70%]  (Warmup)
## Chain 3: Iteration: 22 / 30 [ 73%]  (Sampling)
## Chain 3: Iteration: 24 / 30 [ 80%]  (Sampling)
## Chain 3: Iteration: 27 / 30 [ 90%]  (Sampling)
## Chain 3: Iteration: 30 / 30 [100%]  (Sampling)
## Chain 3: 
## Chain 3:  Elapsed Time: 0.003 seconds (Warm-up)
## Chain 3:                0 seconds (Sampling)
## Chain 3:                0.003 seconds (Total)
## Chain 3: 
## 
## SAMPLING FOR MODEL &#39;anon_model&#39; NOW (CHAIN 4).
## Chain 4: 
## Chain 4: Gradient evaluation took 3e-06 seconds
## Chain 4: 1000 transitions using 10 leapfrog steps per transition would take 0.03 seconds.
## Chain 4: Adjust your expectations accordingly!
## Chain 4: 
## Chain 4: 
## Chain 4: WARNING: There aren&#39;t enough warmup iterations to fit the
## Chain 4:          three stages of adaptation as currently configured.
## Chain 4:          Reducing each adaptation stage to 15%/75%/10% of
## Chain 4:          the given number of warmup iterations:
## Chain 4:            init_buffer = 3
## Chain 4:            adapt_window = 16
## Chain 4:            term_buffer = 2
## Chain 4: 
## Chain 4: Iteration:  1 / 30 [  3%]  (Warmup)
## Chain 4: Iteration:  3 / 30 [ 10%]  (Warmup)
## Chain 4: Iteration:  6 / 30 [ 20%]  (Warmup)
## Chain 4: Iteration:  9 / 30 [ 30%]  (Warmup)
## Chain 4: Iteration: 12 / 30 [ 40%]  (Warmup)
## Chain 4: Iteration: 15 / 30 [ 50%]  (Warmup)
## Chain 4: Iteration: 18 / 30 [ 60%]  (Warmup)
## Chain 4: Iteration: 21 / 30 [ 70%]  (Warmup)
## Chain 4: Iteration: 22 / 30 [ 73%]  (Sampling)
## Chain 4: Iteration: 24 / 30 [ 80%]  (Sampling)
## Chain 4: Iteration: 27 / 30 [ 90%]  (Sampling)
## Chain 4: Iteration: 30 / 30 [100%]  (Sampling)
## Chain 4: 
## Chain 4:  Elapsed Time: 0.002 seconds (Warm-up)
## Chain 4:                0 seconds (Sampling)
## Chain 4:                0.002 seconds (Total)
## Chain 4:</code></pre>
<div class="sourceCode" id="cb421"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb421-1"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb421-1" tabindex="-1"></a><span class="fu">save</span>(m, <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/4_ca_reptog/bayes_sample_mod.RData&quot;</span>, local_path))</span>
<span id="cb421-2"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb421-2" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">c</span>(<span class="st">&quot;d&quot;</span>, <span class="st">&quot;Prior&quot;</span>, <span class="st">&quot;Iter&quot;</span>, <span class="st">&quot;Warmup&quot;</span>, <span class="st">&quot;treedepth&quot;</span>, <span class="st">&quot;f&quot;</span>, <span class="st">&quot;m&quot;</span>))</span></code></pre></div>
<div class="sourceCode" id="cb422"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb422-1"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-1" tabindex="-1"></a><span class="co"># done &lt;- tibble(file = list.files(sprintf(&quot;%s/results/4_ca_reptog/Bayesian/studyModels&quot;, local_path))) %&gt;%</span></span>
<span id="cb422-2"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-2" tabindex="-1"></a><span class="co">#   separate(file, c(&quot;Outcome&quot;, &quot;Trait&quot;, &quot;Moderator&quot;, &quot;Covariate&quot;, &quot;study&quot;), sep = &quot;_&quot;) %&gt;%</span></span>
<span id="cb422-3"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-3" tabindex="-1"></a><span class="co">#   mutate(study = str_remove_all(study, &quot;.RData&quot;),</span></span>
<span id="cb422-4"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-4" tabindex="-1"></a><span class="co">#          done = &quot;done&quot;)</span></span>
<span id="cb422-5"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-5" tabindex="-1"></a><span class="fu">plan</span>(<span class="fu">multisession</span>(<span class="at">workers =</span> <span class="dv">12</span><span class="dt">L</span>))</span>
<span id="cb422-6"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-6" tabindex="-1"></a>nested_ipd_reg <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">files =</span> <span class="fu">list.files</span>(<span class="fu">sprintf</span>(<span class="st">&quot;%s/data/two_stage&quot;</span>, local_path))) <span class="sc">%&gt;%</span></span>
<span id="cb422-7"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-7" tabindex="-1"></a>  <span class="fu">separate</span>(files, <span class="fu">c</span>(<span class="st">&quot;Trait&quot;</span>, <span class="st">&quot;Outcome&quot;</span>, <span class="st">&quot;study&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb422-8"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-8" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(study)) <span class="sc">%&gt;%</span></span>
<span id="cb422-9"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-9" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">study =</span> <span class="fu">str_remove</span>(study, <span class="st">&quot;.RData&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb422-10"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-10" tabindex="-1"></a>  <span class="fu">left_join</span>(</span>
<span id="cb422-11"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-11" tabindex="-1"></a>    <span class="fu">crossing</span>(</span>
<span id="cb422-12"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-12" tabindex="-1"></a>      <span class="at">study =</span> studies</span>
<span id="cb422-13"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-13" tabindex="-1"></a>      , <span class="at">Trait =</span> traits<span class="sc">$</span>short_name</span>
<span id="cb422-14"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-14" tabindex="-1"></a>      , <span class="at">Outcome =</span> outcomes<span class="sc">$</span>short_name</span>
<span id="cb422-15"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-15" tabindex="-1"></a>      , <span class="at">type =</span> <span class="fu">c</span>(<span class="st">&quot;Frequentist&quot;</span>, <span class="st">&quot;Bayesian&quot;</span>)</span>
<span id="cb422-16"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-16" tabindex="-1"></a>      , <span class="at">Moderator =</span> <span class="fu">c</span>(<span class="st">&quot;age&quot;</span>, <span class="st">&quot;gender&quot;</span>, <span class="st">&quot;education&quot;</span>)</span>
<span id="cb422-17"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-17" tabindex="-1"></a>      , <span class="at">Covariate =</span> <span class="fu">c</span>(<span class="st">&quot;none&quot;</span>, <span class="st">&quot;all&quot;</span>)</span>
<span id="cb422-18"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-18" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb422-19"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-19" tabindex="-1"></a>      <span class="fu">full_join</span>(</span>
<span id="cb422-20"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-20" tabindex="-1"></a>        <span class="fu">crossing</span>(</span>
<span id="cb422-21"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-21" tabindex="-1"></a>          <span class="at">study =</span> studies</span>
<span id="cb422-22"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-22" tabindex="-1"></a>          , <span class="at">Trait =</span> traits<span class="sc">$</span>short_name</span>
<span id="cb422-23"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-23" tabindex="-1"></a>          , <span class="at">Outcome =</span> outcomes<span class="sc">$</span>short_name</span>
<span id="cb422-24"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-24" tabindex="-1"></a>          , <span class="at">type =</span> <span class="fu">c</span>(<span class="st">&quot;Frequentist&quot;</span>, <span class="st">&quot;Bayesian&quot;</span>)</span>
<span id="cb422-25"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-25" tabindex="-1"></a>          , <span class="at">Moderator =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb422-26"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-26" tabindex="-1"></a>          , <span class="at">Covariate =</span> <span class="fu">c</span>(<span class="st">&quot;none&quot;</span>, <span class="st">&quot;age&quot;</span>, <span class="st">&quot;gender&quot;</span>, <span class="st">&quot;education&quot;</span>, <span class="st">&quot;all&quot;</span>)</span>
<span id="cb422-27"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-27" tabindex="-1"></a>          )</span>
<span id="cb422-28"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-28" tabindex="-1"></a>        )</span>
<span id="cb422-29"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-29" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb422-30"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-30" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Covariate)) <span class="sc">%&gt;%</span></span>
<span id="cb422-31"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-31" tabindex="-1"></a>  <span class="co"># full_join(done) %&gt;% filter(is.na(done)) %&gt;%</span></span>
<span id="cb422-32"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-32" tabindex="-1"></a>  <span class="co"># filter(type != &quot;Frequentist&quot;) %&gt;%</span></span>
<span id="cb422-33"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-33" tabindex="-1"></a>  <span class="fu">filter</span>(Trait <span class="sc">==</span> <span class="st">&quot;N&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb422-34"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-34" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">run =</span> </span>
<span id="cb422-35"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-35" tabindex="-1"></a>           <span class="co"># pmap(list(Trait, Outcome, type, Moderator, study, Covariate)</span></span>
<span id="cb422-36"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-36" tabindex="-1"></a>           <span class="fu">future_pmap</span>(<span class="fu">list</span>(Trait, Outcome, type, Moderator, study, Covariate)</span>
<span id="cb422-37"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-37" tabindex="-1"></a>                    , ipd4_study_mod_fun</span>
<span id="cb422-38"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-38" tabindex="-1"></a>                    , <span class="at">.progress =</span> T</span>
<span id="cb422-39"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-39" tabindex="-1"></a>             , <span class="at">.options =</span> <span class="fu">furrr_options</span>(</span>
<span id="cb422-40"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-40" tabindex="-1"></a>                                    <span class="at">globals =</span> <span class="fu">c</span>(<span class="st">&quot;ipd4_study_simpeff_fun&quot;</span></span>
<span id="cb422-41"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-41" tabindex="-1"></a>                                                , <span class="st">&quot;read_path&quot;</span></span>
<span id="cb422-42"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-42" tabindex="-1"></a>                                                , <span class="st">&quot;local_path&quot;</span></span>
<span id="cb422-43"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-43" tabindex="-1"></a>                                                , <span class="st">&quot;local_path&quot;</span></span>
<span id="cb422-44"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-44" tabindex="-1"></a>                                                , <span class="st">&quot;codebook&quot;</span></span>
<span id="cb422-45"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-45" tabindex="-1"></a>                                                , <span class="st">&quot;covars&quot;</span></span>
<span id="cb422-46"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-46" tabindex="-1"></a>                                                , <span class="st">&quot;moders&quot;</span></span>
<span id="cb422-47"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-47" tabindex="-1"></a>                                                , <span class="st">&quot;outcomes&quot;</span></span>
<span id="cb422-48"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-48" tabindex="-1"></a>                                                , <span class="st">&quot;studies&quot;</span></span>
<span id="cb422-49"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-49" tabindex="-1"></a>                                                , <span class="st">&quot;stdyModers&quot;</span></span>
<span id="cb422-50"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-50" tabindex="-1"></a>                                                , <span class="st">&quot;traits&quot;</span></span>
<span id="cb422-51"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-51" tabindex="-1"></a>                                                , <span class="st">&quot;data_path&quot;</span>)</span>
<span id="cb422-52"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-52" tabindex="-1"></a>                                  , <span class="at">packages =</span> <span class="fu">c</span>(<span class="st">&quot;lme4&quot;</span></span>
<span id="cb422-53"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-53" tabindex="-1"></a>                                                 , <span class="st">&quot;broom&quot;</span></span>
<span id="cb422-54"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-54" tabindex="-1"></a>                                                 , <span class="st">&quot;psych&quot;</span></span>
<span id="cb422-55"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-55" tabindex="-1"></a>                                                 , <span class="st">&quot;knitr&quot;</span></span>
<span id="cb422-56"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-56" tabindex="-1"></a>                                                 , <span class="st">&quot;broom.mixed&quot;</span></span>
<span id="cb422-57"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-57" tabindex="-1"></a>                                                 , <span class="st">&quot;brms&quot;</span></span>
<span id="cb422-58"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-58" tabindex="-1"></a>                                                 <span class="co">#, &quot;tidybayes&quot;</span></span>
<span id="cb422-59"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-59" tabindex="-1"></a>                                                 <span class="co">#, &quot;bootpredictlme4&quot;</span></span>
<span id="cb422-60"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-60" tabindex="-1"></a>                                                 , <span class="st">&quot;rstan&quot;</span></span>
<span id="cb422-61"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-61" tabindex="-1"></a>                                                 , <span class="st">&quot;estimatr&quot;</span></span>
<span id="cb422-62"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-62" tabindex="-1"></a>                                                 <span class="co">#, &quot;merTools&quot;</span></span>
<span id="cb422-63"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-63" tabindex="-1"></a>                                                 , <span class="st">&quot;plyr&quot;</span></span>
<span id="cb422-64"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-64" tabindex="-1"></a>                                                 , <span class="st">&quot;tidyverse&quot;</span>))</span>
<span id="cb422-65"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-65" tabindex="-1"></a>             ))</span>
<span id="cb422-66"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb422-66" tabindex="-1"></a><span class="fu">closeAllConnections</span>()</span></code></pre></div>
<!-- ### DELETE LATER -->
<!-- ```{r} -->
<!-- pred_fun <- function(file, type, outcome, trait, mod, cov, study){ -->
<!--   if(mod != "none"){ -->
<!--     load(sprintf("%s/results/4_ca_reptog/%s/studyModels/%s_%s_%s_%s_%s.RData", local_path, type, outcome, trait, mod, cov, study)) -->
<!--     pred.rx <- ipd4_study_simpeff_fun(m, mod, type) -->
<!--     save(pred.rx, file = sprintf("%s/results/4_ca_reptog/%s/studyPredicted/%s_%s_%s_%s_%s.RData", local_path, type, outcome, trait, mod, cov, study)) -->
<!--   } -->
<!-- } -->
<!--  tibble(type = c("Frequentist", "Bayesian")) %>% -->
<!--   mutate(file = map(type, ~list.files(sprintf("%s/results/4_ca_reptog/%s/studySummary", local_path, .)))) %>% -->
<!--   unnest(file) %>% -->
<!--   separate(file, c("Outcome", "Trait", "Moderator", "Covariate", "study"), sep = "_", remove = F) %>% -->
<!--   ## read in the files -->
<!--   mutate(study = str_remove(study, ".RData"), -->
<!--          pmap(list(file, type, Outcome, Trait, Moderator, Covariate, study), pred_fun)) -->
<!-- ``` -->
</div>
<div id="compile-results-5" class="section level3 hasAnchor" number="6.3.3">
<h3><span class="header-section-number">6.3.3</span> Compile Results<a href="method-3-one-stage-individual-participant-analyses-reported-together.html#compile-results-5" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb423"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb423-1"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb423-1" tabindex="-1"></a>loadRData <span class="ot">&lt;-</span> <span class="cf">function</span>(fileName, type, obj, folder){</span>
<span id="cb423-2"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb423-2" tabindex="-1"></a><span class="co">#loads an RData file, and returns it</span></span>
<span id="cb423-3"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb423-3" tabindex="-1"></a>    path <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/4_ca_reptog/%s/%s/%s&quot;</span>, local_path, type, folder, fileName)</span>
<span id="cb423-4"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb423-4" tabindex="-1"></a>    <span class="co"># print(path)</span></span>
<span id="cb423-5"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb423-5" tabindex="-1"></a>    <span class="fu">load</span>(path)</span>
<span id="cb423-6"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb423-6" tabindex="-1"></a>    <span class="fu">get</span>(<span class="fu">ls</span>()[<span class="fu">grepl</span>(obj, <span class="fu">ls</span>())])</span>
<span id="cb423-7"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb423-7" tabindex="-1"></a>}</span>
<span id="cb423-8"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb423-8" tabindex="-1"></a></span>
<span id="cb423-9"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb423-9" tabindex="-1"></a></span>
<span id="cb423-10"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb423-10" tabindex="-1"></a>n_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(fileName, type){</span>
<span id="cb423-11"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb423-11" tabindex="-1"></a>  m <span class="ot">&lt;-</span> <span class="fu">loadRData</span>(fileName, type, <span class="st">&quot;^m&quot;</span>, <span class="st">&quot;models&quot;</span>)</span>
<span id="cb423-12"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb423-12" tabindex="-1"></a>  d <span class="ot">&lt;-</span> <span class="cf">if</span>(type <span class="sc">==</span> <span class="st">&quot;Bayesian&quot;</span>) m<span class="sc">$</span>data <span class="cf">else</span> m<span class="sc">$</span>model</span>
<span id="cb423-13"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb423-13" tabindex="-1"></a>  n <span class="ot">&lt;-</span> <span class="fu">nrow</span>(d)</span>
<span id="cb423-14"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb423-14" tabindex="-1"></a>  <span class="fu">return</span>(n)</span>
<span id="cb423-15"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb423-15" tabindex="-1"></a>}</span>
<span id="cb423-16"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb423-16" tabindex="-1"></a></span>
<span id="cb423-17"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb423-17" tabindex="-1"></a><span class="do">## load in effect size data </span></span>
<span id="cb423-18"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb423-18" tabindex="-1"></a><span class="do">## first get file names</span></span>
<span id="cb423-19"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb423-19" tabindex="-1"></a>nested_ipd4_ca <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">type =</span> <span class="fu">c</span>(<span class="st">&quot;Frequentist&quot;</span>, <span class="st">&quot;Bayesian&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb423-20"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb423-20" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">file =</span> <span class="fu">map</span>(type, <span class="sc">~</span><span class="fu">list.files</span>(<span class="fu">sprintf</span>(<span class="st">&quot;%s/results/4_ca_reptog/%s/summary&quot;</span>, local_path, .)))) <span class="sc">%&gt;%</span></span>
<span id="cb423-21"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb423-21" tabindex="-1"></a>  <span class="fu">unnest</span>(file) <span class="sc">%&gt;%</span></span>
<span id="cb423-22"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb423-22" tabindex="-1"></a>  <span class="fu">separate</span>(file, <span class="fu">c</span>(<span class="st">&quot;Outcome&quot;</span>, <span class="st">&quot;Trait&quot;</span>, <span class="st">&quot;Moderator&quot;</span>, <span class="st">&quot;Covariate&quot;</span>, <span class="st">&quot;study&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>, <span class="at">remove =</span> F) <span class="sc">%&gt;%</span> </span>
<span id="cb423-23"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb423-23" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(study)) <span class="sc">%&gt;%</span></span>
<span id="cb423-24"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb423-24" tabindex="-1"></a>  <span class="do">## read in the files</span></span>
<span id="cb423-25"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb423-25" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">study =</span> <span class="fu">str_remove</span>(study, <span class="st">&quot;.RData&quot;</span>),</span>
<span id="cb423-26"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb423-26" tabindex="-1"></a>         <span class="at">fx =</span> <span class="fu">map2</span>(file, type, <span class="sc">~</span><span class="fu">loadRData</span>(.x, .y, <span class="st">&quot;fx&quot;</span>, <span class="st">&quot;summary&quot;</span>)),</span>
<span id="cb423-27"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb423-27" tabindex="-1"></a>         <span class="at">n =</span> <span class="fu">map2_dbl</span>(file, type, n_fun)) <span class="sc">%&gt;%</span></span>
<span id="cb423-28"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb423-28" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>file) <span class="sc">%&gt;%</span></span>
<span id="cb423-29"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb423-29" tabindex="-1"></a>  <span class="fu">unnest</span>(fx)</span></code></pre></div>
<p>This results in a nested data frame, with columns:</p>
<ul>
<li><code>studyEff</code> = standardized study-specific effects from stage 1 regressions</li>
</ul>
<div class="sourceCode" id="cb424"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb424-1"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb424-1" tabindex="-1"></a>nested_ipd4_ca</span></code></pre></div>
<pre><code>## # A tibble: 4,120 × 11
##    type        Outcome      Trait Moderator Covariate study term         estimate conf.low conf.high     n
##    &lt;chr&gt;       &lt;chr&gt;        &lt;chr&gt; &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;           &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;
##  1 Frequentist crystallized A     age       all       EAS   (Intercept)   5.67      4.99     6.35      788
##  2 Frequentist crystallized A     age       all       EAS   p_value       0.0812   -0.0121   0.174     788
##  3 Frequentist crystallized A     age       all       EAS   age           0.0136   -0.110    0.138     788
##  4 Frequentist crystallized A     age       all       EAS   genderFemale -0.445    -0.774   -0.116     788
##  5 Frequentist crystallized A     age       all       EAS   education     0.233     0.185    0.281     788
##  6 Frequentist crystallized A     age       all       EAS   p_value:age  -0.0103   -0.0276   0.00702   788
##  7 Frequentist crystallized A     age       all       GSOEP (Intercept)   8.08      7.67     8.48      647
##  8 Frequentist crystallized A     age       all       GSOEP p_value       0.0196   -0.0343   0.0736    647
##  9 Frequentist crystallized A     age       all       GSOEP age           0.00909  -0.0209   0.0391    647
## 10 Frequentist crystallized A     age       all       GSOEP genderFemale  0.0439   -0.140    0.227     647
## # ℹ 4,110 more rows</code></pre>
<div id="tables-5" class="section level5 hasAnchor" number="6.3.3.0.1">
<h5><span class="header-section-number">6.3.3.0.1</span> Tables<a href="method-3-one-stage-individual-participant-analyses-reported-together.html#tables-5" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div id="study-specific-1" class="section level6 hasAnchor" number="6.3.3.0.1.1">
<h6><span class="header-section-number">6.3.3.0.1.1</span> Study-Specific<a href="method-3-one-stage-individual-participant-analyses-reported-together.html#study-specific-1" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<p>We’ll make a table of the results, separately for each moderator. To do this efficiently, we’ll make a function that creates those tables across all combinations. Before calling that function, we’ll do some reformatting and reshaping to get the data ready.</p>
<div class="sourceCode" id="cb426"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb426-1"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb426-1" tabindex="-1"></a>ipd4_res_tab <span class="ot">&lt;-</span> nested_ipd4_ca <span class="sc">%&gt;%</span></span>
<span id="cb426-2"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb426-2" tabindex="-1"></a>  <span class="fu">filter</span>((Moderator <span class="sc">==</span> <span class="st">&quot;none&quot;</span> <span class="sc">&amp;</span> term <span class="sc">==</span> <span class="st">&quot;p_value&quot;</span>) <span class="sc">|</span> (Moderator <span class="sc">!=</span> <span class="st">&quot;none&quot;</span> <span class="sc">&amp;</span> <span class="fu">grepl</span>(<span class="st">&quot;p_value:&quot;</span>, term))) <span class="sc">%&gt;%</span></span>
<span id="cb426-3"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb426-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sig =</span> <span class="fu">ifelse</span>(<span class="fu">sign</span>(conf.low) <span class="sc">==</span> <span class="fu">sign</span>(conf.high), <span class="st">&quot;sig&quot;</span>, <span class="st">&quot;ns&quot;</span>)) <span class="sc">%&gt;%</span> <span class="co"># significance marker</span></span>
<span id="cb426-4"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb426-4" tabindex="-1"></a>  <span class="fu">mutate_at</span>(<span class="fu">vars</span>(estimate<span class="sc">:</span>conf.high), </span>
<span id="cb426-5"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb426-5" tabindex="-1"></a>            <span class="sc">~</span><span class="fu">ifelse</span>(<span class="fu">abs</span>(.) <span class="sc">&lt;</span> .<span class="dv">01</span>, <span class="fu">sprintf</span>(<span class="st">&quot;%.3f&quot;</span>, .), <span class="fu">sprintf</span>(<span class="st">&quot;%.2f&quot;</span>,.))) <span class="sc">%&gt;%</span></span>
<span id="cb426-6"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb426-6" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">est =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s&lt;br&gt;[%s, %s]&quot;</span>, estimate, conf.low, conf.high),</span>
<span id="cb426-7"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb426-7" tabindex="-1"></a>         <span class="at">est =</span> <span class="fu">ifelse</span>(sig <span class="sc">==</span> <span class="st">&quot;sig&quot;</span>, <span class="fu">sprintf</span>(<span class="st">&quot;&lt;strong&gt;%s&lt;/strong&gt;&quot;</span>, est), est),</span>
<span id="cb426-8"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb426-8" tabindex="-1"></a>         <span class="at">study =</span> <span class="fu">mapvalues</span>(study, <span class="fu">c</span>(<span class="st">&quot;BASE-I&quot;</span>, <span class="st">&quot;OCTO-TWIN&quot;</span>), <span class="fu">c</span>(<span class="st">&quot;BASE&quot;</span>, <span class="st">&quot;OCTO-Twin&quot;</span>)),</span>
<span id="cb426-9"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb426-9" tabindex="-1"></a>         <span class="at">study =</span> <span class="fu">factor</span>(study, <span class="fu">c</span>(studies_long, <span class="st">&quot;Meta-Analytic&quot;</span>)),</span>
<span id="cb426-10"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb426-10" tabindex="-1"></a>         <span class="at">Outcome =</span> <span class="fu">factor</span>(Outcome, outcomes<span class="sc">$</span>short_name, outcomes<span class="sc">$</span>long_name)) <span class="sc">%&gt;%</span></span>
<span id="cb426-11"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb426-11" tabindex="-1"></a>  <span class="fu">select</span>(type<span class="sc">:</span>Covariate, term, study, est) <span class="sc">%&gt;%</span></span>
<span id="cb426-12"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb426-12" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">&quot;Trait&quot;</span>, <span class="at">values_from =</span> <span class="st">&quot;est&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb426-13"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb426-13" tabindex="-1"></a>  <span class="fu">select</span>(type<span class="sc">:</span>study, E, A, C, N, O) <span class="sc">%&gt;%</span></span>
<span id="cb426-14"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb426-14" tabindex="-1"></a>  <span class="fu">arrange</span>(type, Outcome, Moderator, Covariate, study)</span>
<span id="cb426-15"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb426-15" tabindex="-1"></a>ipd4_res_tab</span></code></pre></div>
<pre><code>## # A tibble: 242 × 11
##    type     Outcome              Moderator Covariate term        study     E                         A      C     N     O    
##    &lt;chr&gt;    &lt;fct&gt;                &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;       &lt;fct&gt;     &lt;chr&gt;                     &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
##  1 Bayesian Crystallized Ability age       all       p_value:age BASE      0.002&lt;br&gt;[-0.03, 0.04]    &lt;NA&gt;   &lt;NA&gt;  0.01… -0.0…
##  2 Bayesian Crystallized Ability age       all       p_value:age EAS       -0.005&lt;br&gt;[-0.02, 0.01]   -0.01… &lt;str… &lt;str… -0.0…
##  3 Bayesian Crystallized Ability age       all       p_value:age GSOEP     -0.000&lt;br&gt;[-0.004, 0.003] -0.00… 0.00… 0.00… -0.0…
##  4 Bayesian Crystallized Ability age       all       p_value:age HILDA     0.001&lt;br&gt;[-0.000, 0.003]  0.000… &lt;str… &lt;str… &lt;str…
##  5 Bayesian Crystallized Ability age       all       p_value:age HRS       -0.002&lt;br&gt;[-0.005, 0.001] -0.00… &lt;str… 0.00… &lt;str…
##  6 Bayesian Crystallized Ability age       all       p_value:age LASA      &lt;NA&gt;                      &lt;NA&gt;   &lt;NA&gt;  -0.0… &lt;NA&gt; 
##  7 Bayesian Crystallized Ability age       all       p_value:age MAP       -0.002&lt;br&gt;[-0.009, 0.005] &lt;NA&gt;   0.00… -0.0… &lt;NA&gt; 
##  8 Bayesian Crystallized Ability age       all       p_value:age MARS      &lt;NA&gt;                      &lt;NA&gt;   &lt;NA&gt;  -0.0… &lt;NA&gt; 
##  9 Bayesian Crystallized Ability age       all       p_value:age OCTO-Twin -0.01&lt;br&gt;[-0.06, 0.03]    &lt;NA&gt;   &lt;NA&gt;  0.03… &lt;NA&gt; 
## 10 Bayesian Crystallized Ability age       all       p_value:age ROS       0.004&lt;br&gt;[-0.006, 0.01]   &lt;stro… 0.00… &lt;str… &lt;str…
## # ℹ 232 more rows</code></pre>
<div class="sourceCode" id="cb428"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb428-1"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb428-1" tabindex="-1"></a>ipd4_std_table_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(d, type, moder, cov){</span>
<span id="cb428-2"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb428-2" tabindex="-1"></a>  cv <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(cov, covars<span class="sc">$</span>short_name, covars<span class="sc">$</span>long_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb428-3"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb428-3" tabindex="-1"></a>  <span class="cf">if</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">&quot;djust&quot;</span>, cv)) cv <span class="ot">&lt;-</span> <span class="fu">paste</span>(cv, <span class="st">&quot;Adjusted&quot;</span>)</span>
<span id="cb428-4"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb428-4" tabindex="-1"></a>  md <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(moder, <span class="fu">c</span>(moders<span class="sc">$</span>short_name, stdyModers<span class="sc">$</span>short_name),</span>
<span id="cb428-5"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb428-5" tabindex="-1"></a>                  <span class="fu">c</span>(moders<span class="sc">$</span>long_name, stdyModers<span class="sc">$</span>long_name), <span class="at">warn_missing =</span> F)</span>
<span id="cb428-6"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb428-6" tabindex="-1"></a>  rs <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Outcome) <span class="sc">%&gt;%</span> <span class="fu">tally</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb428-7"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb428-7" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">end =</span> <span class="fu">cumsum</span>(n), <span class="at">start =</span> <span class="fu">lag</span>(end) <span class="sc">+</span> <span class="dv">1</span>, <span class="at">start =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(start), <span class="dv">1</span>, start))</span>
<span id="cb428-8"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb428-8" tabindex="-1"></a>  cs <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">1</span>,<span class="dv">6</span>); <span class="fu">names</span>(cs) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot; &quot;</span>, <span class="fu">paste0</span>(<span class="st">&quot;&lt;strong&gt;&quot;</span>, traits<span class="sc">$</span>short_name, <span class="st">&quot;&lt;/strong&gt;&quot;</span>))</span>
<span id="cb428-9"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb428-9" tabindex="-1"></a>  cap <span class="ot">&lt;-</span> <span class="cf">if</span>(moder <span class="sc">==</span> <span class="st">&quot;none&quot;</span>) {</span>
<span id="cb428-10"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb428-10" tabindex="-1"></a>      <span class="fu">sprintf</span>(<span class="st">&quot;&lt;strong&gt;Table X.&lt;/strong&gt;&lt;br&gt;&lt;em&gt;Method 4 Coordinated Analyses Reported Together: Sample Estimates of %s Personality-Cognitive Domain Relationships&lt;/em&gt;&quot;</span>, cv) </span>
<span id="cb428-11"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb428-11" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb428-12"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb428-12" tabindex="-1"></a>      <span class="fu">sprintf</span>(<span class="st">&quot;&lt;strong&gt;Table X.&lt;/strong&gt;&lt;br&gt;&lt;em&gt;Method 4 Coordinated Analyses Reported Together: Sample %s Moderation of %s Personality-Cognitive Domain Relationships&lt;/em&gt;&quot;</span>, md, cv)</span>
<span id="cb428-13"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb428-13" tabindex="-1"></a>    }</span>
<span id="cb428-14"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb428-14" tabindex="-1"></a>  tab <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span></span>
<span id="cb428-15"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb428-15" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>Outcome) <span class="sc">%&gt;%</span></span>
<span id="cb428-16"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb428-16" tabindex="-1"></a>    <span class="fu">kable</span>(., <span class="st">&quot;html&quot;</span></span>
<span id="cb428-17"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb428-17" tabindex="-1"></a>          , <span class="at">escape =</span> F</span>
<span id="cb428-18"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb428-18" tabindex="-1"></a>          , <span class="at">booktabs =</span> T</span>
<span id="cb428-19"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb428-19" tabindex="-1"></a>          , <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">&quot;Study&quot;</span>, <span class="fu">rep</span>(<span class="st">&quot;b [CI]&quot;</span>, <span class="dv">5</span>))</span>
<span id="cb428-20"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb428-20" tabindex="-1"></a>          , <span class="at">align =</span> <span class="fu">c</span>(<span class="st">&quot;r&quot;</span>, <span class="fu">rep</span>(<span class="st">&quot;c&quot;</span>, <span class="dv">5</span>))</span>
<span id="cb428-21"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb428-21" tabindex="-1"></a>          , <span class="at">caption =</span> cap) <span class="sc">%&gt;%</span></span>
<span id="cb428-22"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb428-22" tabindex="-1"></a>    <span class="fu">kable_classic</span>(<span class="at">full_width =</span> F, <span class="at">html_font =</span> <span class="st">&quot;Times New Roman&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb428-23"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb428-23" tabindex="-1"></a>    <span class="fu">add_header_above</span>(cs, <span class="at">escape =</span> F) </span>
<span id="cb428-24"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb428-24" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(rs)){</span>
<span id="cb428-25"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb428-25" tabindex="-1"></a>    tab <span class="ot">&lt;-</span> tab <span class="sc">%&gt;%</span> </span>
<span id="cb428-26"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb428-26" tabindex="-1"></a>      kableExtra<span class="sc">::</span><span class="fu">group_rows</span>(rs<span class="sc">$</span>Outcome[i], rs<span class="sc">$</span>start[i], rs<span class="sc">$</span>end[i])</span>
<span id="cb428-27"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb428-27" tabindex="-1"></a>  }</span>
<span id="cb428-28"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb428-28" tabindex="-1"></a>  <span class="fu">save_kable</span>(tab, <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/4_ca_reptog/%s/tables/study specific/%s_%s.html&quot;</span>,</span>
<span id="cb428-29"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb428-29" tabindex="-1"></a>                                 local_path, type, moder, cov))</span>
<span id="cb428-30"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb428-30" tabindex="-1"></a>  <span class="fu">return</span>(tab)</span>
<span id="cb428-31"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb428-31" tabindex="-1"></a>}</span>
<span id="cb428-32"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb428-32" tabindex="-1"></a></span>
<span id="cb428-33"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb428-33" tabindex="-1"></a>ipd4_std_tab <span class="ot">&lt;-</span> ipd4_res_tab <span class="sc">%&gt;%</span></span>
<span id="cb428-34"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb428-34" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>Moderator <span class="sc">%in%</span> stdyModers<span class="sc">$</span>short_name) <span class="sc">%&gt;%</span></span>
<span id="cb428-35"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb428-35" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>term) <span class="sc">%&gt;%</span></span>
<span id="cb428-36"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb428-36" tabindex="-1"></a>  <span class="fu">group_by</span>(type, Moderator, Covariate) <span class="sc">%&gt;%</span></span>
<span id="cb428-37"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb428-37" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span></span>
<span id="cb428-38"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb428-38" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb428-39"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb428-39" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">tab =</span> <span class="fu">pmap</span>(<span class="fu">list</span>(data, type, Moderator, Covariate), ipd4_std_table_fun))</span></code></pre></div>
</div>
<div id="meta-analytic-1" class="section level6 hasAnchor" number="6.3.3.0.1.2">
<h6><span class="header-section-number">6.3.3.0.1.2</span> Meta-Analytic<a href="method-3-one-stage-individual-participant-analyses-reported-together.html#meta-analytic-1" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<p>Results are not meta-analyzed, so there are no meta-analytic results.</p>
</div>
<div id="all-model-terms-5" class="section level6 hasAnchor" number="6.3.3.0.1.3">
<h6><span class="header-section-number">6.3.3.0.1.3</span> All Model Terms<a href="method-3-one-stage-individual-participant-analyses-reported-together.html#all-model-terms-5" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<div class="sourceCode" id="cb429"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb429-1"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-1" tabindex="-1"></a>ipd4_mod_tab <span class="ot">&lt;-</span> nested_ipd4_ca <span class="sc">%&gt;%</span></span>
<span id="cb429-2"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-2" tabindex="-1"></a>  <span class="co"># keep key terms </span></span>
<span id="cb429-3"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-3" tabindex="-1"></a>  <span class="co"># mark significance and prettify trait, outcome, and covariate names</span></span>
<span id="cb429-4"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sig =</span> <span class="fu">ifelse</span>(<span class="fu">sign</span>(conf.low) <span class="sc">==</span> <span class="fu">sign</span>(conf.high), <span class="st">&quot;sig&quot;</span>, <span class="st">&quot;ns&quot;</span>),</span>
<span id="cb429-5"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-5" tabindex="-1"></a>         <span class="at">Trait =</span> <span class="fu">factor</span>(Trait, traits<span class="sc">$</span>short_name),</span>
<span id="cb429-6"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-6" tabindex="-1"></a>         <span class="at">Outcome =</span> <span class="fu">factor</span>(Outcome, outcomes<span class="sc">$</span>short_name, outcomes<span class="sc">$</span>long_name),</span>
<span id="cb429-7"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-7" tabindex="-1"></a>         <span class="at">Moderator =</span> <span class="fu">factor</span>(Moderator, moders<span class="sc">$</span>short_name, moders<span class="sc">$</span>long_name),</span>
<span id="cb429-8"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-8" tabindex="-1"></a>         <span class="at">Covariate =</span> <span class="fu">factor</span>(Covariate, covars<span class="sc">$</span>short_name, <span class="fu">str_wrap</span>(covars<span class="sc">$</span>long_name, <span class="dv">15</span>)),</span>
<span id="cb429-9"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-9" tabindex="-1"></a>         <span class="at">term =</span> <span class="fu">str_replace_all</span>(term, <span class="st">&quot;metamod&quot;</span>, <span class="fu">paste0</span>(<span class="st">&quot;p_value:&quot;</span>, Moderator))) <span class="sc">%&gt;%</span></span>
<span id="cb429-10"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-10" tabindex="-1"></a>  <span class="co"># format values as text, combine estimates and CI&#39;s, bold significance</span></span>
<span id="cb429-11"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-11" tabindex="-1"></a>  <span class="fu">mutate_at</span>(<span class="fu">vars</span>(estimate, conf.low, conf.high), </span>
<span id="cb429-12"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-12" tabindex="-1"></a>            <span class="sc">~</span><span class="fu">ifelse</span>(<span class="fu">abs</span>(.) <span class="sc">&lt;</span> .<span class="dv">01</span>, <span class="fu">sprintf</span>(<span class="st">&quot;%.3f&quot;</span>, .), <span class="fu">sprintf</span>(<span class="st">&quot;%.2f&quot;</span>, .))) <span class="sc">%&gt;%</span></span>
<span id="cb429-13"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-13" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">est =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s&lt;br&gt;[%s, %s]&quot;</span>, estimate, conf.low, conf.high),</span>
<span id="cb429-14"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-14" tabindex="-1"></a>         <span class="at">est =</span> <span class="fu">ifelse</span>(sig <span class="sc">==</span> <span class="st">&quot;sig&quot;</span>, <span class="fu">sprintf</span>(<span class="st">&quot;&lt;strong&gt;%s&lt;/strong&gt;&quot;</span>, est), est)) <span class="sc">%&gt;%</span></span>
<span id="cb429-15"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-15" tabindex="-1"></a>  <span class="co"># mutate(est = sprintf(&quot;%s [%s, %s]&quot;, estimate, conf.low, conf.high),</span></span>
<span id="cb429-16"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-16" tabindex="-1"></a>  <span class="co"># est = ifelse(sig == &quot;sig&quot;, sprintf(&quot;\\textbf{%s}&quot;, est), est)) %&gt;%</span></span>
<span id="cb429-17"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-17" tabindex="-1"></a>  <span class="co"># final reshaping, remove extra columns, arrange values, and change to wide format</span></span>
<span id="cb429-18"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-18" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>estimate, <span class="sc">-</span>conf.low, <span class="sc">-</span>conf.high, <span class="sc">-</span>sig, <span class="sc">-</span>n) <span class="sc">%&gt;%</span></span>
<span id="cb429-19"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-19" tabindex="-1"></a>  <span class="fu">arrange</span>(type, Outcome, Trait, Moderator, Covariate) <span class="sc">%&gt;%</span></span>
<span id="cb429-20"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-20" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">&quot;Trait&quot;</span>, <span class="at">values_from =</span> <span class="st">&quot;est&quot;</span>) </span>
<span id="cb429-21"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-21" tabindex="-1"></a></span>
<span id="cb429-22"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-22" tabindex="-1"></a>ipd4_mod_tab_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(d, type, out, moder, cov){</span>
<span id="cb429-23"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-23" tabindex="-1"></a>  md <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(moder, <span class="fu">c</span>(moders<span class="sc">$</span>long_name, stdyModers<span class="sc">$</span>long_name), <span class="fu">c</span>(moders<span class="sc">$</span>short_name, stdyModers<span class="sc">$</span>short_name), <span class="at">warn_missing =</span> F)</span>
<span id="cb429-24"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-24" tabindex="-1"></a>  o <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(out, outcomes<span class="sc">$</span>long_name, outcomes<span class="sc">$</span>short_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb429-25"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-25" tabindex="-1"></a>  cv <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(cov, covars<span class="sc">$</span>long_name, covars<span class="sc">$</span>short_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb429-26"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-26" tabindex="-1"></a>  cs <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">1</span>,<span class="dv">6</span>)</span>
<span id="cb429-27"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-27" tabindex="-1"></a>  <span class="fu">names</span>(cs) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot; &quot;</span>, traits<span class="sc">$</span>long_name)</span>
<span id="cb429-28"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-28" tabindex="-1"></a>  <span class="co"># cln &lt;- if(length(unique(d$term2)) == 1) c(&quot;Covariate&quot;, rep(&quot;\\textit{b} [CI]&quot;, 5)) else c(&quot; &quot;, &quot;Term&quot;, rep(&quot;\\textit{b} [CI]&quot;, 5))</span></span>
<span id="cb429-29"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-29" tabindex="-1"></a>  cln <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Term&quot;</span>, <span class="fu">rep</span>(<span class="st">&quot;&lt;em&gt;b&lt;/em&gt; [CI]&quot;</span>, <span class="dv">5</span>))</span>
<span id="cb429-30"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-30" tabindex="-1"></a>  al <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;r&quot;</span>, <span class="fu">rep</span>(<span class="st">&quot;c&quot;</span>, <span class="dv">5</span>))</span>
<span id="cb429-31"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-31" tabindex="-1"></a>  <span class="co"># caption </span></span>
<span id="cb429-32"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-32" tabindex="-1"></a>  cap <span class="ot">&lt;-</span> <span class="cf">if</span>(md <span class="sc">==</span> <span class="st">&quot;none&quot;</span>) <span class="st">&quot;4 Coordinated Analyses Reported Together: All Model Estimates of Fixed Effect Personality-Crystallized Domain Associations&quot;</span> <span class="cf">else</span> <span class="fu">sprintf</span>(<span class="st">&quot;4 Coordinated Analyses Reported Together: All Model Estimates of Fixed Effect %s Moderation of Personality-Crystallized Domain Associations&quot;</span>, md)</span>
<span id="cb429-33"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-33" tabindex="-1"></a>  </span>
<span id="cb429-34"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-34" tabindex="-1"></a>  d <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(study, term)</span>
<span id="cb429-35"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-35" tabindex="-1"></a>  </span>
<span id="cb429-36"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-36" tabindex="-1"></a>  rs <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(study) <span class="sc">%&gt;%</span> <span class="fu">tally</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb429-37"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-37" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">end =</span> <span class="fu">cumsum</span>(n), <span class="at">start =</span> <span class="fu">lag</span>(end) <span class="sc">+</span> <span class="dv">1</span>, <span class="at">start =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(start), <span class="dv">1</span>, start))</span>
<span id="cb429-38"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-38" tabindex="-1"></a>  </span>
<span id="cb429-39"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-39" tabindex="-1"></a>  <span class="co"># kable the table</span></span>
<span id="cb429-40"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-40" tabindex="-1"></a>  tab <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span></span>
<span id="cb429-41"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-41" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>study) <span class="sc">%&gt;%</span></span>
<span id="cb429-42"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-42" tabindex="-1"></a>    <span class="fu">kable</span>(., <span class="st">&quot;html&quot;</span></span>
<span id="cb429-43"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-43" tabindex="-1"></a>    <span class="co"># kable(., &quot;latex&quot;</span></span>
<span id="cb429-44"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-44" tabindex="-1"></a>          , <span class="at">booktabs =</span> T</span>
<span id="cb429-45"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-45" tabindex="-1"></a>          , <span class="at">escape =</span> F</span>
<span id="cb429-46"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-46" tabindex="-1"></a>          , <span class="at">col.names =</span> cln</span>
<span id="cb429-47"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-47" tabindex="-1"></a>          , <span class="at">align =</span> al</span>
<span id="cb429-48"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-48" tabindex="-1"></a>          , <span class="at">caption =</span> cap</span>
<span id="cb429-49"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-49" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb429-50"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-50" tabindex="-1"></a>    <span class="fu">kable_classic</span>(<span class="at">full_width =</span> F, <span class="at">html_font =</span> <span class="st">&quot;Times New Roman&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb429-51"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-51" tabindex="-1"></a>    <span class="co"># kable_styling(full_width = F, font_size = 7) %&gt;%</span></span>
<span id="cb429-52"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-52" tabindex="-1"></a>    <span class="fu">add_header_above</span>(cs)</span>
<span id="cb429-53"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-53" tabindex="-1"></a>  </span>
<span id="cb429-54"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-54" tabindex="-1"></a>  <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(rs)){</span>
<span id="cb429-55"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-55" tabindex="-1"></a>    tab <span class="ot">&lt;-</span> tab <span class="sc">%&gt;%</span> kableExtra<span class="sc">::</span><span class="fu">group_rows</span>(rs<span class="sc">$</span>study[i], rs<span class="sc">$</span>start[i], rs<span class="sc">$</span>end[i])</span>
<span id="cb429-56"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-56" tabindex="-1"></a>  }</span>
<span id="cb429-57"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-57" tabindex="-1"></a>  <span class="co"># save the resulting html table</span></span>
<span id="cb429-58"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-58" tabindex="-1"></a>  <span class="fu">save_kable</span>(tab, <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/4_ca_reptog/%s/tables/all terms/%s-%s-%s.html&quot;</span></span>
<span id="cb429-59"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-59" tabindex="-1"></a>                                 , local_path, type, o, md, cv))</span>
<span id="cb429-60"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-60" tabindex="-1"></a>  <span class="fu">return</span>(tab) <span class="co"># return the html table</span></span>
<span id="cb429-61"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-61" tabindex="-1"></a>}</span>
<span id="cb429-62"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-62" tabindex="-1"></a></span>
<span id="cb429-63"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-63" tabindex="-1"></a>ipd4_mod_tab2 <span class="ot">&lt;-</span> ipd4_res_tab <span class="sc">%&gt;%</span></span>
<span id="cb429-64"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-64" tabindex="-1"></a>  <span class="fu">group_by</span>(type, Outcome, Moderator, Covariate) <span class="sc">%&gt;%</span></span>
<span id="cb429-65"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-65" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span></span>
<span id="cb429-66"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-66" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb429-67"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb429-67" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">tab =</span> <span class="fu">pmap</span>(<span class="fu">list</span>(data, type, Outcome, Moderator, Covariate), ipd4_mod_tab_fun)) </span></code></pre></div>
</div>
</div>
</div>
<div id="figures-5" class="section level3 hasAnchor" number="6.3.4">
<h3><span class="header-section-number">6.3.4</span> Figures<a href="method-3-one-stage-individual-participant-analyses-reported-together.html#figures-5" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="overall-forest-5" class="section level4 hasAnchor" number="6.3.4.1">
<h4><span class="header-section-number">6.3.4.1</span> Overall Forest<a href="method-3-one-stage-individual-participant-analyses-reported-together.html#overall-forest-5" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Results are not meta-analyzes, so there is no overall estimate.</p>
</div>
<div id="study-specific-forest-3" class="section level4 hasAnchor" number="6.3.4.2">
<h4><span class="header-section-number">6.3.4.2</span> Study-Specific Forest<a href="method-3-one-stage-individual-participant-analyses-reported-together.html#study-specific-forest-3" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb430"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb430-1"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-1" tabindex="-1"></a>ipd4_rx_plot_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(df, outcome, mod, type, cov, trait){</span>
<span id="cb430-2"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-2" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(outcome, mod))</span>
<span id="cb430-3"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-3" tabindex="-1"></a>  trt <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(trait, traits<span class="sc">$</span>short_name, traits<span class="sc">$</span>long_name)</span>
<span id="cb430-4"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-4" tabindex="-1"></a>  m <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(mod, moders<span class="sc">$</span>short_name, moders<span class="sc">$</span>long_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb430-5"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-5" tabindex="-1"></a>  d <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">max</span>(<span class="fu">abs</span>(<span class="fu">min</span>(df<span class="sc">$</span>estimate)), <span class="fu">abs</span>(<span class="fu">max</span>(df<span class="sc">$</span>estimate))), <span class="dv">3</span>)</span>
<span id="cb430-6"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-6" tabindex="-1"></a>  <span class="co"># stds &lt;- unique(df$study)</span></span>
<span id="cb430-7"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-7" tabindex="-1"></a>  lim <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span><span class="sc">-</span>d<span class="sc">-</span>(d<span class="sc">/</span><span class="fl">2.5</span>), <span class="dv">0</span><span class="sc">+</span>d<span class="sc">+</span>(d<span class="sc">/</span><span class="fl">2.5</span>))</span>
<span id="cb430-8"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-8" tabindex="-1"></a>  brk <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">c</span>(<span class="dv">0</span><span class="sc">-</span>d<span class="sc">-</span>(d<span class="sc">/</span><span class="dv">5</span>), <span class="dv">0</span>, <span class="dv">0</span><span class="sc">+</span>d<span class="sc">+</span>(d<span class="sc">/</span><span class="dv">5</span>)),<span class="dv">2</span>)</span>
<span id="cb430-9"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-9" tabindex="-1"></a>  lab <span class="ot">&lt;-</span> <span class="fu">str_remove</span>(<span class="fu">round</span>(<span class="fu">c</span>(<span class="dv">0</span><span class="sc">-</span>d<span class="sc">-</span>(d<span class="sc">/</span><span class="dv">5</span>), <span class="dv">0</span>, <span class="dv">0</span><span class="sc">+</span>d<span class="sc">+</span>(d<span class="sc">/</span><span class="dv">5</span>)),<span class="dv">2</span>), <span class="st">&quot;^0&quot;</span>)</span>
<span id="cb430-10"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-10" tabindex="-1"></a>  shapes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">16</span>, <span class="dv">17</span>, <span class="dv">18</span>)[<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(<span class="fu">unique</span>(df<span class="sc">$</span>term))]</span>
<span id="cb430-11"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-11" tabindex="-1"></a>  lt <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">&quot;solid&quot;</span>, <span class="fu">length</span>(<span class="fu">unique</span>(df<span class="sc">$</span>term)))</span>
<span id="cb430-12"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-12" tabindex="-1"></a>  titl <span class="ot">&lt;-</span> <span class="cf">if</span>(mod <span class="sc">==</span> <span class="st">&quot;none&quot;</span>){trt} <span class="cf">else</span> {<span class="fu">sprintf</span>(<span class="st">&quot;%s x %s&quot;</span>, trt, m)}</span>
<span id="cb430-13"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-13" tabindex="-1"></a>  leg <span class="ot">&lt;-</span> <span class="cf">if</span>(<span class="fu">length</span>(<span class="fu">unique</span>(df<span class="sc">$</span>term)) <span class="sc">&gt;</span> <span class="dv">1</span>){<span class="st">&quot;bottom&quot;</span>} <span class="cf">else</span> {<span class="st">&quot;none&quot;</span>}</span>
<span id="cb430-14"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-14" tabindex="-1"></a>  df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> </span>
<span id="cb430-15"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-15" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">study =</span> <span class="fu">mapvalues</span>(study, <span class="fu">c</span>(<span class="st">&quot;BASE-I&quot;</span>, <span class="st">&quot;OCTO-TWIN&quot;</span>), <span class="fu">c</span>(<span class="st">&quot;BASE&quot;</span>, <span class="st">&quot;OCTO-Twin&quot;</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb430-16"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-16" tabindex="-1"></a>    <span class="fu">full_join</span>(<span class="fu">tibble</span>(<span class="at">study =</span> <span class="st">&quot; &quot;</span>, <span class="at">estimate =</span> <span class="cn">NA</span>, <span class="at">n =</span> <span class="cn">NA</span>))</span>
<span id="cb430-17"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-17" tabindex="-1"></a>  df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(estimate)</span>
<span id="cb430-18"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-18" tabindex="-1"></a>  stds <span class="ot">&lt;-</span> df<span class="sc">$</span>study[df<span class="sc">$</span>study <span class="sc">!=</span> <span class="st">&quot; &quot;</span>]</span>
<span id="cb430-19"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-19" tabindex="-1"></a>  df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb430-20"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-20" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">study =</span> <span class="fu">factor</span>(study, <span class="fu">rev</span>(<span class="fu">c</span>(<span class="st">&quot; &quot;</span>, stds)))</span>
<span id="cb430-21"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-21" tabindex="-1"></a>           <span class="co"># , conf.low = ifelse(conf.low &lt; lim[1], lim[1], conf.low)</span></span>
<span id="cb430-22"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-22" tabindex="-1"></a>           <span class="co"># , conf.high = ifelse(conf.high &gt; lim[2], lim[2], conf.high)</span></span>
<span id="cb430-23"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-23" tabindex="-1"></a>           , <span class="at">lb =</span> <span class="fu">ifelse</span>(conf.low <span class="sc">&lt;</span> lim[<span class="dv">1</span>], <span class="st">&quot;lower&quot;</span></span>
<span id="cb430-24"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-24" tabindex="-1"></a>                         , <span class="fu">ifelse</span>(conf.high <span class="sc">&gt;</span> lim[<span class="dv">2</span>], <span class="st">&quot;upper&quot;</span>, <span class="st">&quot;neither&quot;</span>))</span>
<span id="cb430-25"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-25" tabindex="-1"></a>           , <span class="at">conf.low2 =</span> <span class="fu">ifelse</span>(conf.low <span class="sc">&lt;</span> lim[<span class="dv">1</span>], lim[<span class="dv">1</span>], conf.low)</span>
<span id="cb430-26"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-26" tabindex="-1"></a>           , <span class="at">conf.high2 =</span> <span class="fu">ifelse</span>(conf.high <span class="sc">&gt;</span> lim[<span class="dv">2</span>], lim[<span class="dv">2</span>], conf.high)</span>
<span id="cb430-27"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-27" tabindex="-1"></a>           <span class="co"># , study = factor(study, levels = str_remove_all(c(&quot;Overall&quot;, studies_long), &quot;-&quot;), labels = c(&quot;Overall&quot;, studies_long))</span></span>
<span id="cb430-28"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-28" tabindex="-1"></a>           <span class="co"># Trait = factor(Trait, levels = traits$short_name, labels = traits$long_name),</span></span>
<span id="cb430-29"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-29" tabindex="-1"></a>           , <span class="at">type =</span> <span class="st">&quot;random&quot;</span>)</span>
<span id="cb430-30"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-30" tabindex="-1"></a>  p1 <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb430-31"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-31" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> study, <span class="at">y =</span> estimate)) <span class="sc">+</span> </span>
<span id="cb430-32"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-32" tabindex="-1"></a>    <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> conf.low, <span class="at">ymax =</span> conf.high)</span>
<span id="cb430-33"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-33" tabindex="-1"></a>                  , <span class="at">position =</span> <span class="st">&quot;dodge&quot;</span></span>
<span id="cb430-34"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-34" tabindex="-1"></a>                  , <span class="at">width =</span> .<span class="dv">2</span>) <span class="sc">+</span> </span>
<span id="cb430-35"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-35" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">shape =</span> term, <span class="at">size =</span> term)) <span class="sc">+</span> </span>
<span id="cb430-36"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-36" tabindex="-1"></a>    <span class="fu">geom_segment</span>(<span class="at">data =</span> df <span class="sc">%&gt;%</span> <span class="fu">filter</span>(lb <span class="sc">==</span> <span class="st">&quot;lower&quot;</span>)</span>
<span id="cb430-37"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-37" tabindex="-1"></a>                 , <span class="fu">aes</span>(<span class="at">y =</span> conf.high2, <span class="at">yend =</span> conf.low2, <span class="at">xend =</span> study)</span>
<span id="cb430-38"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-38" tabindex="-1"></a>                 , <span class="at">arrow =</span> <span class="fu">arrow</span>(<span class="at">type =</span> <span class="st">&quot;closed&quot;</span>, <span class="at">length =</span> <span class="fu">unit</span>(<span class="fl">0.1</span>, <span class="st">&quot;cm&quot;</span>))) <span class="sc">+</span></span>
<span id="cb430-39"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-39" tabindex="-1"></a>    <span class="fu">geom_segment</span>(<span class="at">data =</span> df <span class="sc">%&gt;%</span> <span class="fu">filter</span>(lb <span class="sc">==</span> <span class="st">&quot;upper&quot;</span>)</span>
<span id="cb430-40"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-40" tabindex="-1"></a>                 , <span class="fu">aes</span>(<span class="at">y =</span> conf.low2, <span class="at">yend =</span> conf.high2, <span class="at">xend =</span> study)</span>
<span id="cb430-41"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-41" tabindex="-1"></a>                 , <span class="at">arrow =</span> <span class="fu">arrow</span>(<span class="at">type =</span> <span class="st">&quot;closed&quot;</span>, <span class="at">length =</span> <span class="fu">unit</span>(<span class="fl">0.1</span>, <span class="st">&quot;cm&quot;</span>))) <span class="sc">+</span></span>
<span id="cb430-42"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-42" tabindex="-1"></a>    <span class="fu">geom_hline</span>(<span class="fu">aes</span>(<span class="at">yintercept =</span> <span class="dv">0</span>), <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>, <span class="at">size =</span> .<span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb430-43"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-43" tabindex="-1"></a>    <span class="co"># geom_vline(aes(xintercept = 1.5)) +</span></span>
<span id="cb430-44"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-44" tabindex="-1"></a>    <span class="fu">geom_vline</span>(<span class="fu">aes</span>(<span class="at">xintercept =</span> <span class="fu">length</span>(stds) <span class="sc">+</span> <span class="fl">1.5</span>)) <span class="sc">+</span></span>
<span id="cb430-45"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-45" tabindex="-1"></a>    <span class="fu">annotate</span>(<span class="st">&quot;rect&quot;</span>, <span class="at">xmin =</span> <span class="fu">length</span>(stds) <span class="sc">+</span> .<span class="dv">5</span>, <span class="at">xmax =</span> <span class="cn">Inf</span>, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>, <span class="at">fill =</span> <span class="st">&quot;white&quot;</span>) <span class="sc">+</span></span>
<span id="cb430-46"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-46" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> lim, <span class="at">breaks =</span> brk, <span class="at">labels =</span> lab) <span class="sc">+</span> </span>
<span id="cb430-47"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-47" tabindex="-1"></a>    <span class="fu">scale_size_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">2</span>)) <span class="sc">+</span> </span>
<span id="cb430-48"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-48" tabindex="-1"></a>    <span class="fu">scale_shape_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">16</span>)) <span class="sc">+</span></span>
<span id="cb430-49"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-49" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span></span>
<span id="cb430-50"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-50" tabindex="-1"></a>         , <span class="at">y =</span> <span class="st">&quot;Estimate&quot;</span></span>
<span id="cb430-51"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-51" tabindex="-1"></a>         <span class="co"># , title = &quot;  &quot;</span></span>
<span id="cb430-52"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-52" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb430-53"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-53" tabindex="-1"></a>    <span class="fu">coord_flip</span>() <span class="sc">+</span> </span>
<span id="cb430-54"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-54" tabindex="-1"></a>    <span class="fu">theme_classic</span>() <span class="sc">+</span> </span>
<span id="cb430-55"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-55" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb430-56"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-56" tabindex="-1"></a>          , <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb430-57"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-57" tabindex="-1"></a>          , <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb430-58"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-58" tabindex="-1"></a>          , <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">hjust =</span> .<span class="dv">5</span>)</span>
<span id="cb430-59"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-59" tabindex="-1"></a>          , <span class="at">axis.ticks.y =</span> <span class="fu">element_blank</span>()</span>
<span id="cb430-60"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-60" tabindex="-1"></a>          , <span class="at">axis.line.y =</span> <span class="fu">element_blank</span>()</span>
<span id="cb430-61"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-61" tabindex="-1"></a>          , <span class="at">axis.line.x.top =</span> <span class="fu">element_line</span>(<span class="at">size =</span> <span class="dv">1</span>))</span>
<span id="cb430-62"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-62" tabindex="-1"></a>  </span>
<span id="cb430-63"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-63" tabindex="-1"></a>  d2 <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb430-64"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-64" tabindex="-1"></a>    <span class="fu">mutate_at</span>(<span class="fu">vars</span>(estimate, conf.low, conf.high)</span>
<span id="cb430-65"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-65" tabindex="-1"></a>              , <span class="sc">~</span><span class="fu">ifelse</span>(<span class="fu">abs</span>(.) <span class="sc">&lt;</span> .<span class="dv">01</span>, <span class="fu">sprintf</span>(<span class="st">&quot;%.3f&quot;</span>, .), <span class="fu">sprintf</span>(<span class="st">&quot;%.2f&quot;</span>, .))) <span class="sc">%&gt;%</span></span>
<span id="cb430-66"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-66" tabindex="-1"></a>    <span class="fu">mutate_at</span>(<span class="fu">vars</span>(estimate, conf.low, conf.high), <span class="sc">~</span><span class="fu">str_replace_all</span>(., <span class="st">&quot;^0.&quot;</span>, <span class="st">&quot;.&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb430-67"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-67" tabindex="-1"></a>    <span class="fu">mutate_at</span>(<span class="fu">vars</span>(estimate, conf.low, conf.high), <span class="sc">~</span><span class="fu">str_replace_all</span>(., <span class="st">&quot;^-0.&quot;</span>, <span class="st">&quot;-.&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb430-68"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-68" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">est =</span> <span class="fu">ifelse</span>(study <span class="sc">!=</span> <span class="st">&quot; &quot;</span>, <span class="fu">sprintf</span>(<span class="st">&quot;%s [%s, %s]      &quot;</span>, estimate, conf.low, conf.high), <span class="st">&quot;&quot;</span>)</span>
<span id="cb430-69"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-69" tabindex="-1"></a>           , <span class="at">n =</span> <span class="fu">as.character</span>(n)</span>
<span id="cb430-70"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-70" tabindex="-1"></a>           ) <span class="sc">%&gt;%</span></span>
<span id="cb430-71"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-71" tabindex="-1"></a>    <span class="fu">select</span>(study, n, est) <span class="sc">%&gt;%</span></span>
<span id="cb430-72"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-72" tabindex="-1"></a>    <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(n, est), <span class="at">names_to =</span> <span class="st">&quot;est&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;value&quot;</span>)</span>
<span id="cb430-73"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-73" tabindex="-1"></a>  p2 <span class="ot">&lt;-</span> d2 <span class="sc">%&gt;%</span></span>
<span id="cb430-74"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-74" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> study, <span class="at">y =</span> est)) <span class="sc">+</span></span>
<span id="cb430-75"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-75" tabindex="-1"></a>      <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> value), <span class="at">hjust =</span> .<span class="dv">5</span>, <span class="at">size =</span> <span class="fl">3.5</span>) <span class="sc">+</span> </span>
<span id="cb430-76"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-76" tabindex="-1"></a>      <span class="fu">annotate</span>(<span class="st">&quot;text&quot;</span>, <span class="at">label =</span> <span class="st">&quot;b [CI]&quot;</span>, <span class="at">x =</span> <span class="fu">length</span>(stds) <span class="sc">+</span> .<span class="dv">75</span>, <span class="at">y =</span> <span class="st">&quot;est&quot;</span>, <span class="at">hjust =</span> .<span class="dv">5</span>, <span class="at">vjust =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb430-77"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-77" tabindex="-1"></a>      <span class="fu">annotate</span>(<span class="st">&quot;text&quot;</span>, <span class="at">label =</span> <span class="st">&quot;N&quot;</span>, <span class="at">x =</span> <span class="fu">length</span>(stds) <span class="sc">+</span> .<span class="dv">75</span>, <span class="at">y =</span> <span class="st">&quot;n&quot;</span>, <span class="at">hjust =</span> .<span class="dv">5</span>, <span class="at">vjust =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb430-78"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-78" tabindex="-1"></a>      <span class="co"># geom_vline(aes(xintercept = .5)) +</span></span>
<span id="cb430-79"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-79" tabindex="-1"></a>      <span class="fu">geom_vline</span>(<span class="fu">aes</span>(<span class="at">xintercept =</span> <span class="fu">length</span>(stds) <span class="sc">+</span> .<span class="dv">5</span>)) <span class="sc">+</span></span>
<span id="cb430-80"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-80" tabindex="-1"></a>      <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb430-81"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-81" tabindex="-1"></a>      <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb430-82"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-82" tabindex="-1"></a>      <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">hjust =</span> <span class="dv">0</span>)</span>
<span id="cb430-83"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-83" tabindex="-1"></a>            , <span class="at">axis.text =</span> <span class="fu">element_blank</span>()</span>
<span id="cb430-84"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-84" tabindex="-1"></a>            , <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>()</span>
<span id="cb430-85"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-85" tabindex="-1"></a>            , <span class="at">axis.title =</span> <span class="fu">element_blank</span>()</span>
<span id="cb430-86"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-86" tabindex="-1"></a>            , <span class="at">axis.line.y =</span> <span class="fu">element_blank</span>())</span>
<span id="cb430-87"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-87" tabindex="-1"></a>  </span>
<span id="cb430-88"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-88" tabindex="-1"></a>  my_theme <span class="ot">&lt;-</span> <span class="cf">function</span>(...) {</span>
<span id="cb430-89"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-89" tabindex="-1"></a>    <span class="fu">theme_classic</span>() <span class="sc">+</span> </span>
<span id="cb430-90"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-90" tabindex="-1"></a>      <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>))</span>
<span id="cb430-91"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-91" tabindex="-1"></a>  }</span>
<span id="cb430-92"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-92" tabindex="-1"></a>  title_theme <span class="ot">&lt;-</span> <span class="fu">calc_element</span>(<span class="st">&quot;plot.title&quot;</span>, <span class="fu">my_theme</span>())</span>
<span id="cb430-93"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-93" tabindex="-1"></a>  ttl <span class="ot">&lt;-</span> <span class="fu">ggdraw</span>() <span class="sc">+</span> </span>
<span id="cb430-94"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-94" tabindex="-1"></a>      <span class="fu">draw_label</span>(</span>
<span id="cb430-95"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-95" tabindex="-1"></a>          titl,</span>
<span id="cb430-96"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-96" tabindex="-1"></a>          <span class="at">fontfamily =</span> title_theme<span class="sc">$</span>family,</span>
<span id="cb430-97"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-97" tabindex="-1"></a>          <span class="at">fontface =</span> title_theme<span class="sc">$</span>face,</span>
<span id="cb430-98"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-98" tabindex="-1"></a>          <span class="at">size =</span> title_theme<span class="sc">$</span>size</span>
<span id="cb430-99"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-99" tabindex="-1"></a>      )</span>
<span id="cb430-100"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-100" tabindex="-1"></a></span>
<span id="cb430-101"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-101" tabindex="-1"></a>  p3 <span class="ot">&lt;-</span> cowplot<span class="sc">::</span><span class="fu">plot_grid</span>(p1, p2</span>
<span id="cb430-102"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-102" tabindex="-1"></a>                     , <span class="at">rel_widths =</span> <span class="fu">c</span>(.<span class="dv">4</span>, .<span class="dv">6</span>)</span>
<span id="cb430-103"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-103" tabindex="-1"></a>                     , <span class="at">align =</span> <span class="st">&quot;h&quot;</span></span>
<span id="cb430-104"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-104" tabindex="-1"></a>                     )</span>
<span id="cb430-105"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-105" tabindex="-1"></a>  <span class="co"># p &lt;- cowplot::plot_grid(ttl, subttl, p3, rel_heights = c(.05, .05, .9), nrow = 3)</span></span>
<span id="cb430-106"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-106" tabindex="-1"></a>  p <span class="ot">&lt;-</span> cowplot<span class="sc">::</span><span class="fu">plot_grid</span>(ttl, p3, <span class="at">rel_heights =</span> <span class="fu">c</span>(.<span class="dv">05</span>, .<span class="dv">95</span>), <span class="at">nrow =</span> <span class="dv">2</span>)</span>
<span id="cb430-107"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-107" tabindex="-1"></a>  <span class="fu">gc</span>()</span>
<span id="cb430-108"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-108" tabindex="-1"></a>  <span class="fu">save</span>(p</span>
<span id="cb430-109"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-109" tabindex="-1"></a>       , <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/4_ca_reptog/%s/figures/study specific forest/rdata/%s_%s_%s_%s.RData&quot;</span>, local_path, type, outcome, trait, mod, cov))</span>
<span id="cb430-110"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-110" tabindex="-1"></a>  <span class="fu">return</span>(p)</span>
<span id="cb430-111"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-111" tabindex="-1"></a>}</span>
<span id="cb430-112"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-112" tabindex="-1"></a></span>
<span id="cb430-113"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-113" tabindex="-1"></a><span class="do">## fixed effects</span></span>
<span id="cb430-114"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-114" tabindex="-1"></a>nested_ipd4_reg_fp <span class="ot">&lt;-</span> nested_ipd4_ca <span class="sc">%&gt;%</span></span>
<span id="cb430-115"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-115" tabindex="-1"></a>  <span class="fu">filter</span>(Moderator <span class="sc">%in%</span> moders<span class="sc">$</span>short_name) <span class="sc">%&gt;%</span></span>
<span id="cb430-116"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-116" tabindex="-1"></a>  <span class="do">## filter key terms</span></span>
<span id="cb430-117"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-117" tabindex="-1"></a>  <span class="fu">filter</span>((Moderator <span class="sc">==</span> <span class="st">&quot;none&quot;</span> <span class="sc">&amp;</span> term <span class="sc">==</span> <span class="st">&quot;p_value&quot;</span>)<span class="sc">|</span></span>
<span id="cb430-118"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-118" tabindex="-1"></a>         (Moderator <span class="sc">!=</span> <span class="st">&quot;none&quot;</span> <span class="sc">&amp;</span> <span class="fu">grepl</span>(<span class="st">&quot;^p_value:&quot;</span>, term) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">grepl</span>(<span class="st">&quot;study&quot;</span>, term))) <span class="sc">%&gt;%</span></span>
<span id="cb430-119"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-119" tabindex="-1"></a>  <span class="do">## significance</span></span>
<span id="cb430-120"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-120" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sig =</span> <span class="fu">ifelse</span>(<span class="fu">sign</span>(conf.low) <span class="sc">==</span> <span class="fu">sign</span>(conf.high), <span class="st">&quot;sig&quot;</span>, <span class="st">&quot;ns&quot;</span>)</span>
<span id="cb430-121"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-121" tabindex="-1"></a>         , <span class="at">study =</span> <span class="fu">mapvalues</span>(study, studies_long, studies_sp, <span class="at">warn_missing =</span> F)) <span class="sc">%&gt;%</span></span>
<span id="cb430-122"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-122" tabindex="-1"></a>  <span class="do">## grouping for plotting</span></span>
<span id="cb430-123"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-123" tabindex="-1"></a>  <span class="fu">group_by</span>(Outcome, Moderator, type, Covariate, Trait) <span class="sc">%&gt;%</span></span>
<span id="cb430-124"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-124" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span></span>
<span id="cb430-125"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-125" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb430-126"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-126" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">p =</span> <span class="fu">pmap</span>(<span class="fu">list</span>(data, Outcome, Moderator, type, Covariate, Trait), ipd4_rx_plot_fun))</span>
<span id="cb430-127"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-127" tabindex="-1"></a></span>
<span id="cb430-128"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-128" tabindex="-1"></a>ipd4_rx_plot_comb_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(outcome, cov, mod, type, d){</span>
<span id="cb430-129"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-129" tabindex="-1"></a>  o <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(outcome, outcomes<span class="sc">$</span>short_name, outcomes<span class="sc">$</span>long_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb430-130"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-130" tabindex="-1"></a>  cv <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(cov, covars<span class="sc">$</span>short_name, covars<span class="sc">$</span>long_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb430-131"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-131" tabindex="-1"></a>  titl <span class="ot">&lt;-</span> <span class="fu">paste0</span>(o, <span class="st">&quot;,&quot;</span>)</span>
<span id="cb430-132"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-132" tabindex="-1"></a>  titl <span class="ot">&lt;-</span> <span class="cf">if</span>(<span class="sc">!</span>cov <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;none&quot;</span>, <span class="st">&quot;all&quot;</span>)) <span class="fu">paste</span>(titl, cv, <span class="st">&quot;Adjusted&quot;</span>, <span class="at">collapse =</span> <span class="st">&quot;, &quot;</span>) <span class="cf">else</span> <span class="fu">paste</span>(titl, cv, <span class="at">collapse =</span> <span class="st">&quot;, &quot;</span>)</span>
<span id="cb430-133"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-133" tabindex="-1"></a>  p1 <span class="ot">&lt;-</span> <span class="fu">plot_grid</span>(</span>
<span id="cb430-134"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-134" tabindex="-1"></a>    d<span class="sc">$</span>p[[<span class="dv">1</span>]]</span>
<span id="cb430-135"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-135" tabindex="-1"></a>    , d<span class="sc">$</span>p[[<span class="dv">2</span>]]</span>
<span id="cb430-136"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-136" tabindex="-1"></a>    , d<span class="sc">$</span>p[[<span class="dv">3</span>]]</span>
<span id="cb430-137"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-137" tabindex="-1"></a>    , d<span class="sc">$</span>p[[<span class="dv">4</span>]]</span>
<span id="cb430-138"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-138" tabindex="-1"></a>    , d<span class="sc">$</span>p[[<span class="dv">5</span>]]</span>
<span id="cb430-139"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-139" tabindex="-1"></a>    , <span class="at">nrow =</span> <span class="dv">3</span></span>
<span id="cb430-140"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-140" tabindex="-1"></a>    , <span class="at">ncol =</span> <span class="dv">2</span></span>
<span id="cb430-141"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-141" tabindex="-1"></a>    , <span class="at">axis =</span> <span class="st">&quot;tblr&quot;</span></span>
<span id="cb430-142"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-142" tabindex="-1"></a>    , <span class="at">align =</span> <span class="st">&quot;hv&quot;</span></span>
<span id="cb430-143"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-143" tabindex="-1"></a>    )</span>
<span id="cb430-144"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-144" tabindex="-1"></a>  my_theme <span class="ot">&lt;-</span> <span class="cf">function</span>(...) {</span>
<span id="cb430-145"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-145" tabindex="-1"></a>    <span class="fu">theme_classic</span>() <span class="sc">+</span> </span>
<span id="cb430-146"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-146" tabindex="-1"></a>      <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>))</span>
<span id="cb430-147"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-147" tabindex="-1"></a>  }</span>
<span id="cb430-148"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-148" tabindex="-1"></a>  title_theme <span class="ot">&lt;-</span> <span class="fu">calc_element</span>(<span class="st">&quot;plot.title&quot;</span>, <span class="fu">my_theme</span>())</span>
<span id="cb430-149"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-149" tabindex="-1"></a>  ttl <span class="ot">&lt;-</span> <span class="fu">ggdraw</span>() <span class="sc">+</span> </span>
<span id="cb430-150"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-150" tabindex="-1"></a>      <span class="fu">draw_label</span>(</span>
<span id="cb430-151"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-151" tabindex="-1"></a>          titl,</span>
<span id="cb430-152"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-152" tabindex="-1"></a>          <span class="at">fontfamily =</span> title_theme<span class="sc">$</span>family,</span>
<span id="cb430-153"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-153" tabindex="-1"></a>          <span class="at">fontface =</span> title_theme<span class="sc">$</span>face,</span>
<span id="cb430-154"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-154" tabindex="-1"></a>          <span class="at">size =</span> title_theme<span class="sc">$</span>size</span>
<span id="cb430-155"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-155" tabindex="-1"></a>      )</span>
<span id="cb430-156"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-156" tabindex="-1"></a>  my_theme <span class="ot">&lt;-</span> <span class="cf">function</span>(...) {</span>
<span id="cb430-157"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-157" tabindex="-1"></a>    <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb430-158"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-158" tabindex="-1"></a>      <span class="fu">theme</span>(<span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>))</span>
<span id="cb430-159"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-159" tabindex="-1"></a>  }</span>
<span id="cb430-160"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-160" tabindex="-1"></a>  subtitle_theme <span class="ot">&lt;-</span> <span class="fu">calc_element</span>(<span class="st">&quot;subplot.title&quot;</span>, <span class="fu">my_theme</span>())</span>
<span id="cb430-161"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-161" tabindex="-1"></a>  subttl <span class="ot">&lt;-</span> <span class="fu">ggdraw</span>() <span class="sc">+</span></span>
<span id="cb430-162"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-162" tabindex="-1"></a>      <span class="fu">draw_label</span>(</span>
<span id="cb430-163"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-163" tabindex="-1"></a>          <span class="st">&quot;Method 4: Coordinated Analyses Reported Together&quot;</span>,</span>
<span id="cb430-164"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-164" tabindex="-1"></a>          <span class="at">fontfamily =</span> subtitle_theme<span class="sc">$</span>family,</span>
<span id="cb430-165"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-165" tabindex="-1"></a>          <span class="at">fontface =</span> subtitle_theme<span class="sc">$</span>face,</span>
<span id="cb430-166"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-166" tabindex="-1"></a>          <span class="at">size =</span> subtitle_theme<span class="sc">$</span>size</span>
<span id="cb430-167"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-167" tabindex="-1"></a>      )</span>
<span id="cb430-168"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-168" tabindex="-1"></a>  p <span class="ot">&lt;-</span> cowplot<span class="sc">::</span><span class="fu">plot_grid</span>(ttl, subttl, p1, <span class="at">rel_heights =</span> <span class="fu">c</span>(.<span class="dv">03</span>, .<span class="dv">03</span>, .<span class="dv">94</span>), <span class="at">nrow =</span> <span class="dv">3</span>)</span>
<span id="cb430-169"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-169" tabindex="-1"></a>  <span class="fu">ggsave</span>(p </span>
<span id="cb430-170"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-170" tabindex="-1"></a>         , <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/4_ca_reptog/%s/figures/study specific forest/%s_%s_%s.png&quot;</span>, local_path, type, outcome, mod, cov)</span>
<span id="cb430-171"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-171" tabindex="-1"></a>         , <span class="at">width =</span> <span class="dv">10</span>, <span class="at">height =</span> <span class="dv">10</span>)</span>
<span id="cb430-172"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-172" tabindex="-1"></a>  <span class="fu">ggsave</span>(p </span>
<span id="cb430-173"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-173" tabindex="-1"></a>         , <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/4_ca_reptog/%s/figures/study specific forest/%s_%s_%s.pdf&quot;</span>, local_path, type, outcome, mod, cov)</span>
<span id="cb430-174"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-174" tabindex="-1"></a>         , <span class="at">width =</span> <span class="dv">10</span>, <span class="at">height =</span> <span class="dv">10</span>)</span>
<span id="cb430-175"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-175" tabindex="-1"></a>  <span class="fu">return</span>(T)</span>
<span id="cb430-176"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-176" tabindex="-1"></a>}</span>
<span id="cb430-177"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-177" tabindex="-1"></a></span>
<span id="cb430-178"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-178" tabindex="-1"></a>nested_ipd4_reg_fp <span class="sc">%&gt;%</span></span>
<span id="cb430-179"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-179" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Trait =</span> <span class="fu">factor</span>(Trait, traits<span class="sc">$</span>short_name)) <span class="sc">%&gt;%</span></span>
<span id="cb430-180"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-180" tabindex="-1"></a>  <span class="fu">arrange</span>(Trait) <span class="sc">%&gt;%</span></span>
<span id="cb430-181"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-181" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>data) <span class="sc">%&gt;%</span></span>
<span id="cb430-182"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-182" tabindex="-1"></a>  <span class="fu">group_by</span>(type, Outcome, Moderator, Covariate) <span class="sc">%&gt;%</span></span>
<span id="cb430-183"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-183" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb430-184"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-184" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb430-185"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb430-185" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">p =</span> <span class="fu">pmap</span>(<span class="fu">list</span>(Outcome, Covariate, Moderator, type, data), ipd4_rx_plot_comb_fun))</span></code></pre></div>
<div class="sourceCode" id="cb431"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb431-1"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-1" tabindex="-1"></a>ipd4_rx_plot_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(df, outcome, mod, type, cov){</span>
<span id="cb431-2"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-2" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(outcome, mod))</span>
<span id="cb431-3"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-3" tabindex="-1"></a>  o <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(outcome, outcomes<span class="sc">$</span>short_name, outcomes<span class="sc">$</span>long_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb431-4"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-4" tabindex="-1"></a>  cv <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(cov, covars<span class="sc">$</span>short_name, covars<span class="sc">$</span>long_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb431-5"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-5" tabindex="-1"></a>  m <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(mod, moders<span class="sc">$</span>short_name, moders<span class="sc">$</span>long_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb431-6"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-6" tabindex="-1"></a>  d <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">max</span>(<span class="fu">abs</span>(<span class="fu">min</span>(df<span class="sc">$</span>estimate)), <span class="fu">abs</span>(<span class="fu">max</span>(df<span class="sc">$</span>estimate))), <span class="dv">3</span>)</span>
<span id="cb431-7"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-7" tabindex="-1"></a>  lim <span class="ot">&lt;-</span> <span class="cf">if</span>(mod <span class="sc">==</span> <span class="st">&quot;none&quot;</span>){<span class="fu">c</span>(<span class="sc">-</span>.<span class="dv">25</span>, .<span class="dv">25</span>)} <span class="cf">else</span>{<span class="fu">c</span>(<span class="dv">0</span><span class="sc">-</span>d<span class="sc">-</span>(d<span class="sc">/</span><span class="fl">2.5</span>), <span class="dv">0</span><span class="sc">+</span>d<span class="sc">+</span>(d<span class="sc">/</span><span class="fl">2.5</span>))}</span>
<span id="cb431-8"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-8" tabindex="-1"></a>  brk <span class="ot">&lt;-</span> <span class="cf">if</span>(mod <span class="sc">==</span> <span class="st">&quot;none&quot;</span>){<span class="fu">seq</span>(<span class="sc">-</span>.<span class="dv">2</span>,.<span class="dv">2</span>,.<span class="dv">2</span>)} <span class="cf">else</span>{<span class="fu">round</span>(<span class="fu">c</span>(<span class="dv">0</span><span class="sc">-</span>d<span class="sc">-</span>(d<span class="sc">/</span><span class="dv">5</span>), <span class="dv">0</span>, <span class="dv">0</span><span class="sc">+</span>d<span class="sc">+</span>(d<span class="sc">/</span><span class="dv">5</span>)),<span class="dv">2</span>)}</span>
<span id="cb431-9"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-9" tabindex="-1"></a>  lab <span class="ot">&lt;-</span> <span class="cf">if</span>(mod <span class="sc">==</span> <span class="st">&quot;none&quot;</span>){<span class="fu">c</span>(<span class="st">&quot;-.2&quot;</span>, <span class="st">&quot;0&quot;</span>, <span class="st">&quot;.2&quot;</span>)} <span class="cf">else</span>{<span class="fu">str_remove</span>(<span class="fu">round</span>(<span class="fu">c</span>(<span class="dv">0</span><span class="sc">-</span>d<span class="sc">-</span>(d<span class="sc">/</span><span class="dv">5</span>), <span class="dv">0</span>, <span class="dv">0</span><span class="sc">+</span>d<span class="sc">+</span>(d<span class="sc">/</span><span class="dv">5</span>)),<span class="dv">2</span>), <span class="st">&quot;^0&quot;</span>)}</span>
<span id="cb431-10"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-10" tabindex="-1"></a>  shapes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">16</span>, <span class="dv">17</span>, <span class="dv">18</span>)[<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(<span class="fu">unique</span>(df<span class="sc">$</span>term))]</span>
<span id="cb431-11"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-11" tabindex="-1"></a>  lt <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">&quot;solid&quot;</span>, <span class="fu">length</span>(<span class="fu">unique</span>(df<span class="sc">$</span>term)))</span>
<span id="cb431-12"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-12" tabindex="-1"></a>  titl <span class="ot">&lt;-</span> <span class="cf">if</span>(mod <span class="sc">==</span> <span class="st">&quot;none&quot;</span>){o} <span class="cf">else</span> {<span class="fu">sprintf</span>(<span class="st">&quot;%s: Personality x %s,&quot;</span>, o, m)}</span>
<span id="cb431-13"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-13" tabindex="-1"></a>  titl <span class="ot">&lt;-</span> <span class="cf">if</span>(<span class="sc">!</span>cov <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;none&quot;</span>, <span class="st">&quot;all&quot;</span>)) <span class="fu">paste</span>(titl, cv, <span class="st">&quot;Adjusted&quot;</span>, <span class="at">collapse =</span> <span class="st">&quot; &quot;</span>) <span class="cf">else</span> <span class="fu">paste</span>(titl, cv, <span class="at">collapse =</span> <span class="st">&quot; &quot;</span>)</span>
<span id="cb431-14"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-14" tabindex="-1"></a>  leg <span class="ot">&lt;-</span> <span class="cf">if</span>(<span class="fu">length</span>(<span class="fu">unique</span>(df<span class="sc">$</span>term)) <span class="sc">&gt;</span> <span class="dv">1</span>){<span class="st">&quot;bottom&quot;</span>} <span class="cf">else</span> {<span class="st">&quot;none&quot;</span>}</span>
<span id="cb431-15"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-15" tabindex="-1"></a>  p <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb431-16"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-16" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">conf.low =</span> <span class="fu">ifelse</span>(conf.low <span class="sc">&lt;</span> lim[<span class="dv">1</span>], lim[<span class="dv">1</span>], conf.low),</span>
<span id="cb431-17"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-17" tabindex="-1"></a>           <span class="at">conf.high =</span> <span class="fu">ifelse</span>(conf.high <span class="sc">&gt;</span> lim[<span class="dv">2</span>], lim[<span class="dv">2</span>], conf.high),</span>
<span id="cb431-18"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-18" tabindex="-1"></a>           <span class="at">study =</span> <span class="fu">factor</span>(study, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;Overall&quot;</span>, studies_long)),</span>
<span id="cb431-19"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-19" tabindex="-1"></a>           <span class="at">Trait =</span> <span class="fu">factor</span>(Trait, <span class="at">levels =</span> traits<span class="sc">$</span>short_name, <span class="at">labels =</span> traits<span class="sc">$</span>long_name),</span>
<span id="cb431-20"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-20" tabindex="-1"></a>           <span class="at">type =</span> <span class="fu">ifelse</span>(study <span class="sc">==</span> <span class="st">&quot;Overall&quot;</span>, <span class="st">&quot;fixed&quot;</span>, <span class="st">&quot;random&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb431-21"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-21" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> study, <span class="at">y =</span> estimate)) <span class="sc">+</span></span>
<span id="cb431-22"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-22" tabindex="-1"></a>      <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> lim, <span class="at">breaks =</span> brk, <span class="at">labels =</span> lab) <span class="sc">+</span></span>
<span id="cb431-23"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-23" tabindex="-1"></a>      <span class="fu">scale_size_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="fl">2.5</span>, <span class="fl">1.5</span>)) <span class="sc">+</span></span>
<span id="cb431-24"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-24" tabindex="-1"></a>      <span class="fu">scale_shape_manual</span>(<span class="at">values =</span> shapes) <span class="sc">+</span> </span>
<span id="cb431-25"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-25" tabindex="-1"></a>      <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;blue&quot;</span>, <span class="st">&quot;black&quot;</span>)) <span class="sc">+</span></span>
<span id="cb431-26"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-26" tabindex="-1"></a>      <span class="fu">scale_linetype_manual</span>(<span class="at">values =</span> lt) <span class="sc">+</span></span>
<span id="cb431-27"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-27" tabindex="-1"></a>      <span class="fu">geom_hline</span>(<span class="fu">aes</span>(<span class="at">yintercept =</span> <span class="dv">0</span>), <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>) <span class="sc">+</span></span>
<span id="cb431-28"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-28" tabindex="-1"></a>      <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> conf.low, <span class="at">ymax =</span> conf.high, <span class="at">linetype =</span> term)</span>
<span id="cb431-29"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-29" tabindex="-1"></a>                    , <span class="at">width =</span> <span class="dv">0</span></span>
<span id="cb431-30"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-30" tabindex="-1"></a>                    , <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> .<span class="dv">9</span>)) <span class="sc">+</span> </span>
<span id="cb431-31"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-31" tabindex="-1"></a>      <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> type, <span class="at">size =</span> type, <span class="at">shape =</span> term)</span>
<span id="cb431-32"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-32" tabindex="-1"></a>                    , <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> .<span class="dv">9</span>)) <span class="sc">+</span></span>
<span id="cb431-33"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-33" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span></span>
<span id="cb431-34"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-34" tabindex="-1"></a>           , <span class="at">y =</span> <span class="st">&quot;Estimate (POMP)&quot;</span></span>
<span id="cb431-35"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-35" tabindex="-1"></a>           , <span class="at">title =</span> titl</span>
<span id="cb431-36"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-36" tabindex="-1"></a>           , <span class="at">subtitle =</span> <span class="st">&quot;Method 2B: Pooled Regression Using Random Effects&quot;</span></span>
<span id="cb431-37"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-37" tabindex="-1"></a>         ) <span class="sc">+</span></span>
<span id="cb431-38"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-38" tabindex="-1"></a>      <span class="fu">facet_wrap</span>(<span class="sc">~</span>Trait, <span class="at">scales =</span> <span class="st">&quot;free_y&quot;</span>, <span class="at">nrow =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb431-39"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-39" tabindex="-1"></a>      <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb431-40"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-40" tabindex="-1"></a>      <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb431-41"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-41" tabindex="-1"></a>      <span class="fu">theme</span>(<span class="at">legend.position =</span> leg,</span>
<span id="cb431-42"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-42" tabindex="-1"></a>            <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">1.2</span>), <span class="at">hjust =</span> .<span class="dv">5</span>)</span>
<span id="cb431-43"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-43" tabindex="-1"></a>            , <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">1.1</span>), <span class="at">hjust =</span> .<span class="dv">5</span>),</span>
<span id="cb431-44"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-44" tabindex="-1"></a>            <span class="at">strip.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;black&quot;</span>),</span>
<span id="cb431-45"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-45" tabindex="-1"></a>            <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">color =</span> <span class="st">&quot;white&quot;</span>),</span>
<span id="cb431-46"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-46" tabindex="-1"></a>            <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>))</span>
<span id="cb431-47"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-47" tabindex="-1"></a>  ht <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(df<span class="sc">$</span>study))</span>
<span id="cb431-48"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-48" tabindex="-1"></a>  local_path <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(df<span class="sc">$</span>Trait))</span>
<span id="cb431-49"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-49" tabindex="-1"></a>  <span class="fu">ggsave</span>(p, <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/4_ca_reptog/%s/figures/study specific forest/%s_%s_fixed.png&quot;</span></span>
<span id="cb431-50"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-50" tabindex="-1"></a>                          , local_path, type, mod, cov)</span>
<span id="cb431-51"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-51" tabindex="-1"></a>         , <span class="at">width =</span> local_path<span class="sc">*</span><span class="dv">2</span></span>
<span id="cb431-52"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-52" tabindex="-1"></a>         , <span class="at">height =</span> ht<span class="sc">*</span>.<span class="dv">75</span>)</span>
<span id="cb431-53"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-53" tabindex="-1"></a>  <span class="fu">rm</span>(p)</span>
<span id="cb431-54"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-54" tabindex="-1"></a>  <span class="fu">gc</span>()</span>
<span id="cb431-55"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-55" tabindex="-1"></a>  <span class="fu">return</span>(T)</span>
<span id="cb431-56"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-56" tabindex="-1"></a>}</span>
<span id="cb431-57"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-57" tabindex="-1"></a></span>
<span id="cb431-58"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-58" tabindex="-1"></a><span class="do">## fixed effects</span></span>
<span id="cb431-59"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-59" tabindex="-1"></a>nested_ipd4_ca <span class="sc">%&gt;%</span> </span>
<span id="cb431-60"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-60" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">term =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(term), names, term)) <span class="sc">%&gt;%</span></span>
<span id="cb431-61"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-61" tabindex="-1"></a>    <span class="co"># rename(names = term)</span></span>
<span id="cb431-62"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-62" tabindex="-1"></a>  <span class="do">## filter key terms</span></span>
<span id="cb431-63"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-63" tabindex="-1"></a>      <span class="fu">filter</span>(Moderator <span class="sc">%in%</span> moders<span class="sc">$</span>short_name) <span class="sc">%&gt;%</span></span>
<span id="cb431-64"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-64" tabindex="-1"></a>      <span class="fu">filter</span>((Moderator <span class="sc">==</span> <span class="st">&quot;none&quot;</span> <span class="sc">&amp;</span> term <span class="sc">==</span> <span class="st">&quot;p_value&quot;</span>)<span class="sc">|</span></span>
<span id="cb431-65"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-65" tabindex="-1"></a>             (Moderator <span class="sc">!=</span> <span class="st">&quot;none&quot;</span> <span class="sc">&amp;</span> <span class="fu">grepl</span>(<span class="st">&quot;^p_value:&quot;</span>, term))) <span class="sc">%&gt;%</span></span>
<span id="cb431-66"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-66" tabindex="-1"></a>  <span class="do">## significance</span></span>
<span id="cb431-67"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-67" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sig =</span> <span class="fu">ifelse</span>(<span class="fu">sign</span>(conf.low) <span class="sc">==</span> <span class="fu">sign</span>(conf.high), <span class="st">&quot;sig&quot;</span>, <span class="st">&quot;ns&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb431-68"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-68" tabindex="-1"></a>  <span class="do">## grouping for plotting</span></span>
<span id="cb431-69"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-69" tabindex="-1"></a>  <span class="fu">group_by</span>(Outcome, Moderator, type, Covariate) <span class="sc">%&gt;%</span></span>
<span id="cb431-70"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-70" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span></span>
<span id="cb431-71"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-71" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb431-72"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb431-72" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">pmap</span>(<span class="fu">list</span>(data, Outcome, Moderator, type, Covariate), ipd4_rx_plot_fun))</span></code></pre></div>
</div>
<div id="overall-simple-effects-plots-3" class="section level4 hasAnchor" number="6.3.4.3">
<h4><span class="header-section-number">6.3.4.3</span> Overall Simple Effects Plots<a href="method-3-one-stage-individual-participant-analyses-reported-together.html#overall-simple-effects-plots-3" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>There are no overall effects when coordinated analyses are reported together without random effects meta-analysis.</p>
<div class="sourceCode" id="cb432"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb432-1"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb432-1" tabindex="-1"></a>loadRData <span class="ot">&lt;-</span> <span class="cf">function</span>(fileName, type, obj, folder){</span>
<span id="cb432-2"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb432-2" tabindex="-1"></a><span class="co">#loads an RData file, and returns it</span></span>
<span id="cb432-3"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb432-3" tabindex="-1"></a>    path <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/4_ca_reptog/%s/%s/%s&quot;</span>, local_path, type, folder, fileName)</span>
<span id="cb432-4"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb432-4" tabindex="-1"></a>    <span class="co"># print(path)</span></span>
<span id="cb432-5"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb432-5" tabindex="-1"></a>    <span class="fu">load</span>(path)</span>
<span id="cb432-6"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb432-6" tabindex="-1"></a>    <span class="fu">get</span>(<span class="fu">ls</span>()[<span class="fu">grepl</span>(obj, <span class="fu">ls</span>())])</span>
<span id="cb432-7"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb432-7" tabindex="-1"></a>}</span>
<span id="cb432-8"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb432-8" tabindex="-1"></a></span>
<span id="cb432-9"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb432-9" tabindex="-1"></a><span class="do">## load in effect size data </span></span>
<span id="cb432-10"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb432-10" tabindex="-1"></a><span class="do">## first get file names</span></span>
<span id="cb432-11"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb432-11" tabindex="-1"></a>nested_ipd4_ca <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">type =</span> <span class="fu">c</span>(<span class="st">&quot;Frequentist&quot;</span>, <span class="st">&quot;Bayesian&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb432-12"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb432-12" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">file =</span> <span class="fu">map</span>(type, <span class="sc">~</span><span class="fu">list.files</span>(<span class="fu">sprintf</span>(<span class="st">&quot;%s/results/4_ca_reptog/%s/predicted&quot;</span>, local_path, .)))) <span class="sc">%&gt;%</span></span>
<span id="cb432-13"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb432-13" tabindex="-1"></a>  <span class="fu">unnest</span>(file) <span class="sc">%&gt;%</span></span>
<span id="cb432-14"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb432-14" tabindex="-1"></a>  <span class="fu">separate</span>(file, <span class="fu">c</span>(<span class="st">&quot;Outcome&quot;</span>, <span class="st">&quot;Trait&quot;</span>, <span class="st">&quot;Moderator&quot;</span>, <span class="st">&quot;Covariate&quot;</span>, <span class="st">&quot;study&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>, <span class="at">remove =</span> F) <span class="sc">%&gt;%</span> </span>
<span id="cb432-15"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb432-15" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(study)) <span class="sc">%&gt;%</span></span>
<span id="cb432-16"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb432-16" tabindex="-1"></a>  <span class="do">## read in the files</span></span>
<span id="cb432-17"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb432-17" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">study =</span> <span class="fu">str_remove</span>(study, <span class="st">&quot;.RData&quot;</span>),</span>
<span id="cb432-18"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb432-18" tabindex="-1"></a>         <span class="at">pred.rx =</span> <span class="fu">map2</span>(file, type, <span class="sc">~</span><span class="fu">loadRData</span>(.x, .y, <span class="st">&quot;pred.rx&quot;</span>, <span class="st">&quot;predicted&quot;</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb432-19"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb432-19" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>file) <span class="sc">%&gt;%</span></span>
<span id="cb432-20"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb432-20" tabindex="-1"></a>  <span class="fu">unnest</span>(pred.rx) <span class="sc">%&gt;%</span></span>
<span id="cb432-21"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb432-21" tabindex="-1"></a>  <span class="fu">group_by</span>(type, Trait, Outcome, Moderator, Covariate) <span class="sc">%&gt;%</span></span>
<span id="cb432-22"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb432-22" tabindex="-1"></a>  <span class="fu">nest</span>(<span class="at">pred.rx =</span> study<span class="sc">:</span>upper) <span class="sc">%&gt;%</span></span>
<span id="cb432-23"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb432-23" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code></pre></div>
</div>
<div id="study-specific-simple-effects-plots-3" class="section level4 hasAnchor" number="6.3.4.4">
<h4><span class="header-section-number">6.3.4.4</span> Study-Specific Simple Effects Plots<a href="method-3-one-stage-individual-participant-analyses-reported-together.html#study-specific-simple-effects-plots-3" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb433"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb433-1"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-1" tabindex="-1"></a>ipd4_std_se_plot_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(d, outcome, trait, mod, cov, type){</span>
<span id="cb433-2"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-2" tabindex="-1"></a>  <span class="co"># print(paste(int, mod, cov, random, imp))</span></span>
<span id="cb433-3"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-3" tabindex="-1"></a>  o <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(outcome, outcomes<span class="sc">$</span>short_name, outcomes<span class="sc">$</span>long_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb433-4"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-4" tabindex="-1"></a>  trt <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(trait, traits<span class="sc">$</span>short_name, traits<span class="sc">$</span>long_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb433-5"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-5" tabindex="-1"></a>  cv <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(cov, covars<span class="sc">$</span>short_name, covars<span class="sc">$</span>long_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb433-6"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-6" tabindex="-1"></a>  m <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(mod, moders<span class="sc">$</span>short_name, moders<span class="sc">$</span>long_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb433-7"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-7" tabindex="-1"></a>  titl <span class="ot">&lt;-</span> <span class="cf">if</span>(mod <span class="sc">==</span> <span class="st">&quot;none&quot;</span>){<span class="fu">sprintf</span>(<span class="st">&quot;%s: %s&quot;</span>, o, trt)} <span class="cf">else</span> {<span class="fu">sprintf</span>(<span class="st">&quot;%s: %s x %s Simple Effects&quot;</span>, o, trt, m)}</span>
<span id="cb433-8"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-8" tabindex="-1"></a>  d <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">study =</span> <span class="fu">mapvalues</span>(study, <span class="fu">c</span>(<span class="st">&quot;BASE-I&quot;</span>, <span class="st">&quot;OCTO-TWIN&quot;</span>), <span class="fu">c</span>(<span class="st">&quot;BASE&quot;</span>, <span class="st">&quot;OCTO-Twin&quot;</span>)),</span>
<span id="cb433-9"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-9" tabindex="-1"></a>                    <span class="at">study =</span> <span class="fu">factor</span>(study, <span class="at">levels =</span> stdcolors<span class="sc">$</span>studies))</span>
<span id="cb433-10"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-10" tabindex="-1"></a>  std <span class="ot">&lt;-</span> <span class="fu">unique</span>(d<span class="sc">$</span>study)</span>
<span id="cb433-11"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-11" tabindex="-1"></a>  cols <span class="ot">&lt;-</span> (stdcolors <span class="sc">%&gt;%</span> <span class="fu">filter</span>(studies <span class="sc">%in%</span> std))<span class="sc">$</span>colors</span>
<span id="cb433-12"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-12" tabindex="-1"></a>  lt <span class="ot">&lt;-</span> (stdcolors <span class="sc">%&gt;%</span> <span class="fu">filter</span>(studies <span class="sc">%in%</span> std))<span class="sc">$</span>lt</span>
<span id="cb433-13"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-13" tabindex="-1"></a>  d <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> unclass <span class="sc">%&gt;%</span> data.frame</span>
<span id="cb433-14"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-14" tabindex="-1"></a>  d<span class="sc">$</span>mod_value <span class="ot">&lt;-</span> d[,mod]</span>
<span id="cb433-15"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-15" tabindex="-1"></a>  d <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span><span class="fu">all_of</span>(mod)) <span class="sc">%&gt;%</span> as_tibble</span>
<span id="cb433-16"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-16" tabindex="-1"></a>  d <span class="ot">&lt;-</span> <span class="cf">if</span>(<span class="fu">class</span>(d<span class="sc">$</span>mod_value) <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;factor&quot;</span>, <span class="st">&quot;character&quot;</span>)){</span>
<span id="cb433-17"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-17" tabindex="-1"></a>    d <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">mod_fac =</span> <span class="fu">factor</span>(mod_value))</span>
<span id="cb433-18"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-18" tabindex="-1"></a>    } <span class="cf">else</span>{</span>
<span id="cb433-19"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-19" tabindex="-1"></a>      d <span class="sc">%&gt;%</span></span>
<span id="cb433-20"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-20" tabindex="-1"></a>      <span class="fu">full_join</span>(</span>
<span id="cb433-21"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-21" tabindex="-1"></a>        d <span class="sc">%&gt;%</span> <span class="fu">select</span>(study, mod_value) <span class="sc">%&gt;%</span> <span class="fu">distinct</span>() <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(study, mod_value) <span class="sc">%&gt;%</span></span>
<span id="cb433-22"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-22" tabindex="-1"></a>          <span class="fu">group_by</span>(study) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">mod_fac =</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">&quot;-1 SD&quot;</span>, <span class="st">&quot;M&quot;</span>, <span class="st">&quot;+1 SD&quot;</span>), <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;-1 SD&quot;</span>, <span class="st">&quot;M&quot;</span>, <span class="st">&quot;+1 SD&quot;</span>))) <span class="sc">%&gt;%</span> <span class="fu">ungroup</span>()</span>
<span id="cb433-23"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-23" tabindex="-1"></a>        )</span>
<span id="cb433-24"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-24" tabindex="-1"></a>  }</span>
<span id="cb433-25"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-25" tabindex="-1"></a>  ht <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(d<span class="sc">$</span>mod_fac))</span>
<span id="cb433-26"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-26" tabindex="-1"></a>  p <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> </span>
<span id="cb433-27"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-27" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> p_value, <span class="at">y =</span> pred)) <span class="sc">+</span> </span>
<span id="cb433-28"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-28" tabindex="-1"></a>      <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color =</span> study</span>
<span id="cb433-29"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-29" tabindex="-1"></a>                    , <span class="at">group =</span> <span class="fu">interaction</span>(study, mod_fac)</span>
<span id="cb433-30"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-30" tabindex="-1"></a>                    , <span class="at">linetype =</span> study)</span>
<span id="cb433-31"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-31" tabindex="-1"></a>                , <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb433-32"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-32" tabindex="-1"></a>      <span class="co"># geom_ribbon(aes(fill = study</span></span>
<span id="cb433-33"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-33" tabindex="-1"></a>      <span class="co">#                 , group = interaction(study, mod_fac)</span></span>
<span id="cb433-34"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-34" tabindex="-1"></a>      <span class="co">#                 , ymin = lower</span></span>
<span id="cb433-35"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-35" tabindex="-1"></a>      <span class="co">#                 , ymax = upper)</span></span>
<span id="cb433-36"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-36" tabindex="-1"></a>      <span class="co">#             , alpha = .25) + </span></span>
<span id="cb433-37"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-37" tabindex="-1"></a>      <span class="co"># stat_smooth(aes(weight = n)</span></span>
<span id="cb433-38"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-38" tabindex="-1"></a>      <span class="co">#             , method = &quot;lm&quot;</span></span>
<span id="cb433-39"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-39" tabindex="-1"></a>      <span class="co">#             , formula = y~x</span></span>
<span id="cb433-40"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-40" tabindex="-1"></a>      <span class="co">#             , size = 1.2</span></span>
<span id="cb433-41"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-41" tabindex="-1"></a>      <span class="co">#             , color = &quot;darkslateblue&quot;</span></span>
<span id="cb433-42"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-42" tabindex="-1"></a>      <span class="co">#             ) +</span></span>
<span id="cb433-43"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-43" tabindex="-1"></a>      <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">10</span>)</span>
<span id="cb433-44"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-44" tabindex="-1"></a>                         , <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">5</span>,<span class="dv">10</span>)</span>
<span id="cb433-45"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-45" tabindex="-1"></a>                         , <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">5</span>,<span class="dv">10</span>)) <span class="sc">+</span></span>
<span id="cb433-46"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-46" tabindex="-1"></a>      <span class="fu">scale_color_manual</span>(<span class="at">values =</span> cols) <span class="sc">+</span></span>
<span id="cb433-47"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-47" tabindex="-1"></a>      <span class="fu">scale_linetype_manual</span>(<span class="at">values =</span> lt) <span class="sc">+</span></span>
<span id="cb433-48"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-48" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Personality Score (POMP)&quot;</span></span>
<span id="cb433-49"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-49" tabindex="-1"></a>           , <span class="at">y =</span> <span class="st">&quot;Cognition Score (POMP)&quot;</span></span>
<span id="cb433-50"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-50" tabindex="-1"></a>           , <span class="at">color =</span> <span class="st">&quot;Study&quot;</span></span>
<span id="cb433-51"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-51" tabindex="-1"></a>           , <span class="at">fill =</span> <span class="st">&quot;Study&quot;</span></span>
<span id="cb433-52"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-52" tabindex="-1"></a>           , <span class="at">linetype =</span> <span class="st">&quot;Study&quot;</span></span>
<span id="cb433-53"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-53" tabindex="-1"></a>           , <span class="at">title =</span> titl</span>
<span id="cb433-54"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-54" tabindex="-1"></a>           , <span class="at">subtitle =</span> <span class="st">&quot;Method 4: Coordinated Analyses Reported Together&quot;</span></span>
<span id="cb433-55"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-55" tabindex="-1"></a>           )  <span class="sc">+</span></span>
<span id="cb433-56"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-56" tabindex="-1"></a>      <span class="fu">facet_wrap</span>(<span class="sc">~</span>mod_fac) <span class="sc">+</span> </span>
<span id="cb433-57"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-57" tabindex="-1"></a>      <span class="fu">theme_classic</span>() <span class="sc">+</span> </span>
<span id="cb433-58"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-58" tabindex="-1"></a>      <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span></span>
<span id="cb433-59"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-59" tabindex="-1"></a>            , <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">hjust =</span> .<span class="dv">5</span>, <span class="at">size =</span> <span class="fu">rel</span>(.<span class="dv">95</span>))</span>
<span id="cb433-60"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-60" tabindex="-1"></a>            , <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">1.1</span>), <span class="at">hjust =</span> .<span class="dv">5</span>)</span>
<span id="cb433-61"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-61" tabindex="-1"></a>            , <span class="at">strip.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;black&quot;</span>)</span>
<span id="cb433-62"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-62" tabindex="-1"></a>            , <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">color =</span> <span class="st">&quot;white&quot;</span>)</span>
<span id="cb433-63"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-63" tabindex="-1"></a>            , <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>))</span>
<span id="cb433-64"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-64" tabindex="-1"></a>  <span class="fu">ggsave</span>(<span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/4_ca_reptog/%s/figures/study specific simple effects/%s_%s_%s_%s.png&quot;</span>, local_path, type, outcome, trt, mod, cov), <span class="at">width =</span> <span class="dv">3</span><span class="sc">*</span>ht, <span class="at">height =</span> <span class="dv">5</span>)</span>
<span id="cb433-65"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-65" tabindex="-1"></a>}</span>
<span id="cb433-66"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-66" tabindex="-1"></a></span>
<span id="cb433-67"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-67" tabindex="-1"></a>nested_ipd4_ca <span class="sc">%&gt;%</span></span>
<span id="cb433-68"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb433-68" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">p =</span> <span class="fu">pmap</span>(<span class="fu">list</span>(pred.rx, Outcome, Trait, Moderator, Covariate, type), ipd4_std_se_plot_fun))</span></code></pre></div>
</div>
</div>
</div>
<div id="sample-results-section-5" class="section level2 hasAnchor" number="6.4">
<h2><span class="header-section-number">6.4</span> Sample Results Section<a href="method-3-one-stage-individual-participant-analyses-reported-together.html#sample-results-section-5" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We examined estimates of overall prospective associations between Big Five personality characteristics and crystallized abilities as well as participant and sample-level moderators of those associations using separate regression models of individual participant data of 11 studies. Fully adjusted Big Five personality trait-crystallized ability associations as well as participant- and sample-level moderators of these associations can be found in the forest plot in Figure S8. Of all estimates, openness was most consistently associated with later crystallized abilities, with positive associations in six of seven studies (all except ROS). Neuroticism (-) was somewhat consistently associated with crystallized abilities, demonstrating a negative association in five of the 11 samples. In contrast, extraversion and conscientiousness were less consistently associated with crystallized abilities with significant effects for at least one study in both directions. For extraversion, only two of nine studies were significant: a positive association in GSOEP and a negative association in HRS. Similarly, while there was a positive association between conscientiousness and crystallized abilities in HRS, MAP, and ROS but a negative association in SATSA.</p>
<div class="figure"><span style="display:block;" id="fig:unnamed-chunk-93"></span>
<img src="../../results/4_ca_reptog/Frequentist/figures/study specific forest/crystallized_none_all.png" alt="Figure S8. Forest plot of fully adjusted prospective associations between Big Five personality characteristics and crystallized abilities across samples for using one-stage pooled integrative data analysis via effects coded contrasts. Overall point estimates (squares) represent the grand-mean estimates of the association across samples, while sample point estimates represent regression terms or linear combinations of regression terms. Error bars capture the 95% CI around the point estimate. Arrows indicate the confidence band was truncated to better visualize the estimates." width="1500" />
<p class="caption">
Figure 6.1: Figure S8. Forest plot of fully adjusted prospective associations between Big Five personality characteristics and crystallized abilities across samples for using one-stage pooled integrative data analysis via effects coded contrasts. Overall point estimates (squares) represent the grand-mean estimates of the association across samples, while sample point estimates represent regression terms or linear combinations of regression terms. Error bars capture the 95% CI around the point estimate. Arrows indicate the confidence band was truncated to better visualize the estimates.
</p>
</div>
<p>Next, we examined participant-level moderators of the association between personality traits and crystallized abilities. Moderator associations in each sample can be seen in Table S6. For age, 12 of the 40 tested moderators were significant. Of these, the most consistent were for conscientiousness (3/7) and openness (3/7). However, for each of these, the overall pattern was less clear because moderator associations were in both directions. For example, for openness (see Figure S9), age negatively moderated the association between openness and crystallized abilities in HILDA and HRS such that associations were weaker for younger relative to older participants. In contrast, age positively moderated the association in ROS such that associations were stronger for older relative to younger participants.</p>
<table class=" lightable-classic" style="color: black; font-family: Times New Roman; width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-90">Table 6.1: </span><strong>Table X.</strong><br><em>Method 4 Coordinated Analyses Reported Together: Sample Age Moderation of Fully Adjusted Personality-Cognitive Domain Relationships</em>
</caption>
<thead>
<tr>
<th style="empty-cells: hide;" colspan="1">
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>E</strong>
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>A</strong>
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>C</strong>
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>N</strong>
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>O</strong>
</div>
</th>
</tr>
<tr>
<th style="text-align:right;">
Study
</th>
<th style="text-align:center;">
b [CI]
</th>
<th style="text-align:center;">
b [CI]
</th>
<th style="text-align:center;">
b [CI]
</th>
<th style="text-align:center;">
b [CI]
</th>
<th style="text-align:center;">
b [CI]
</th>
</tr>
</thead>
<tbody>
<tr grouplength="11">
<td colspan="6" style="border-bottom: 0;">
<strong>Crystallized Ability</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
BASE
</td>
<td style="text-align:center;">
0.002<br>[-0.03, 0.04]
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
0.01<br>[-0.01, 0.03]
</td>
<td style="text-align:center;">
-0.006<br>[-0.03, 0.02]
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
EAS
</td>
<td style="text-align:center;">
-0.005<br>[-0.02, 0.01]
</td>
<td style="text-align:center;">
-0.01<br>[-0.03, 0.007]
</td>
<td style="text-align:center;">
<strong>-0.03<br>[-0.05, -0.009]</strong>
</td>
<td style="text-align:center;">
<strong>0.02<br>[0.006, 0.04]</strong>
</td>
<td style="text-align:center;">
-0.007<br>[-0.03, 0.01]
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
GSOEP
</td>
<td style="text-align:center;">
-0.000<br>[-0.004, 0.003]
</td>
<td style="text-align:center;">
-0.002<br>[-0.005, 0.002]
</td>
<td style="text-align:center;">
0.004<br>[-0.000, 0.008]
</td>
<td style="text-align:center;">
0.001<br>[-0.002, 0.004]
</td>
<td style="text-align:center;">
-0.001<br>[-0.004, 0.002]
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
HILDA
</td>
<td style="text-align:center;">
<strong>0.001<br>[0.000, 0.003]</strong>
</td>
<td style="text-align:center;">
0.000<br>[-0.001, 0.002]
</td>
<td style="text-align:center;">
<strong>0.003<br>[0.002, 0.005]</strong>
</td>
<td style="text-align:center;">
<strong>-0.003<br>[-0.004, -0.001]</strong>
</td>
<td style="text-align:center;">
<strong>-0.002<br>[-0.003, -0.000]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
HRS
</td>
<td style="text-align:center;">
-0.002<br>[-0.005, 0.001]
</td>
<td style="text-align:center;">
-0.001<br>[-0.005, 0.002]
</td>
<td style="text-align:center;">
<strong>-0.006<br>[-0.010, -0.003]</strong>
</td>
<td style="text-align:center;">
0.002<br>[-0.001, 0.004]
</td>
<td style="text-align:center;">
<strong>-0.005<br>[-0.008, -0.002]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
LASA
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
-0.000<br>[-0.003, 0.002]
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
MAP
</td>
<td style="text-align:center;">
-0.002<br>[-0.009, 0.005]
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
0.003<br>[-0.006, 0.01]
</td>
<td style="text-align:center;">
-0.005<br>[-0.01, 0.002]
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
MARS
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
-0.01<br>[-0.03, 0.009]
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
OCTO-Twin
</td>
<td style="text-align:center;">
-0.01<br>[-0.06, 0.03]
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
0.03<br>[-0.01, 0.07]
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
ROS
</td>
<td style="text-align:center;">
0.004<br>[-0.006, 0.01]
</td>
<td style="text-align:center;">
<strong>0.01<br>[0.001, 0.03]</strong>
</td>
<td style="text-align:center;">
0.002<br>[-0.01, 0.01]
</td>
<td style="text-align:center;">
<strong>-0.01<br>[-0.02, -0.001]</strong>
</td>
<td style="text-align:center;">
<strong>0.02<br>[0.009, 0.04]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
SATSA
</td>
<td style="text-align:center;">
-0.007<br>[-0.02, 0.001]
</td>
<td style="text-align:center;">
-0.005<br>[-0.01, 0.005]
</td>
<td style="text-align:center;">
0.002<br>[-0.007, 0.01]
</td>
<td style="text-align:center;">
<strong>0.009<br>[0.001, 0.02]</strong>
</td>
<td style="text-align:center;">
0.006<br>[-0.007, 0.02]
</td>
</tr>
</tbody>
</table>
<div class="figure"><span style="display:block;" id="fig:unnamed-chunk-95"></span>
<img src="../../results/4_ca_reptog/Frequentist/figures/study specific simple effects/crystallized_Openness to Experience_age_all.png" alt="Figure S9. Prospective sample-specific and overall associations between extraversion (in POMP units, 0-10) and crystallized abilities (in POMP units, 0-10) across age (M = 60, +/- 1 SD in each sample). Different colors and line types indicate different samples." width="1350" />
<p class="caption">
Figure 6.2: Figure S9. Prospective sample-specific and overall associations between extraversion (in POMP units, 0-10) and crystallized abilities (in POMP units, 0-10) across age (M = 60, +/- 1 SD in each sample). Different colors and line types indicate different samples.
</p>
</div>
<p>For education, 12 of the 40 tested moderators were significant. Of these, the traits where education most consistently moderated the association with crystallized abilities included extraversion (3/9) and agreeableness (3/6). For agreeableness (see Figure S10), all of the moderator associations were in the same direction (-) suggested that more educated people had weaker associations than less educated people in those samples. In contrast, for extraversion, education negatively moderated the association in HILDA and GSOEP (i.e. the association was weaker for more educated people relative to less educated people) but positive for HRS (i.e. the association was less negative for more educated people relative to less educated people).</p>
<div class="figure"><span style="display:block;" id="fig:unnamed-chunk-96"></span>
<img src="../../results/4_ca_reptog/Frequentist/figures/study specific simple effects/crystallized_Agreeableness_education_all.png" alt="Figure S10. Prospective sample-specific and overall associations between extraversion (in POMP units, 0-10) and crystallized abilities (in POMP units, 0-10) across education (M = 12 years, +/- 1 SD in each sample). Different colors and line types indicate different samples. " width="1350" />
<p class="caption">
Figure 6.3: Figure S10. Prospective sample-specific and overall associations between extraversion (in POMP units, 0-10) and crystallized abilities (in POMP units, 0-10) across education (M = 12 years, +/- 1 SD in each sample). Different colors and line types indicate different samples.
</p>
</div>
<div class="sourceCode" id="cb434"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb434-1"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#cb434-1" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>()[<span class="fu">grepl</span>(<span class="st">&quot;ipd4&quot;</span>, <span class="fu">ls</span>())])</span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="method-3-two-stage-individual-participant-meta-analysis.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="method-3-one-stage-individual-participant-analyses-reported-together-1.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/05-coord_sep.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
