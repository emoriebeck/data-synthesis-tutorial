<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Method 2: Pooled One Stage Models with Study-Specific Effects | A Taxonomy of Data Synthesis: A Tutorial</title>
  <meta name="description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.37 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Method 2: Pooled One Stage Models with Study-Specific Effects | A Taxonomy of Data Synthesis: A Tutorial" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  <meta name="github-repo" content="emoriebeck/data-synthesis-tutorial" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Method 2: Pooled One Stage Models with Study-Specific Effects | A Taxonomy of Data Synthesis: A Tutorial" />
  
  <meta name="twitter:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  



<meta name="date" content="2024-05-16" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="runmodels.html"/>
<link rel="next" href="method-3-two-stage-individual-participant-meta-analysis.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Workspace</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#packages"><i class="fa fa-check"></i><b>1.1</b> Packages</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#directory-path"><i class="fa fa-check"></i><b>1.2</b> Directory Path</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#introduction"><i class="fa fa-check"></i><b>1.3</b> Introduction</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#codebook"><i class="fa fa-check"></i><b>1.4</b> Codebook</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#navigating-this-tutorial"><i class="fa fa-check"></i><b>1.5</b> Navigating This Tutorial</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="cleaning.html"><a href="cleaning.html"><i class="fa fa-check"></i><b>2</b> Data Cleaning</a>
<ul>
<li class="chapter" data-level="2.1" data-path="cleaning.html"><a href="cleaning.html#berlin-aging-study-base-i"><i class="fa fa-check"></i><b>2.1</b> Berlin Aging Study (BASE-I)</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="cleaning.html"><a href="cleaning.html#load-data"><i class="fa fa-check"></i><b>2.1.1</b> Load Data</a></li>
<li class="chapter" data-level="2.1.2" data-path="cleaning.html"><a href="cleaning.html#recoding-reverse-scoring"><i class="fa fa-check"></i><b>2.1.2</b> Recoding &amp; Reverse Scoring</a></li>
<li class="chapter" data-level="2.1.3" data-path="cleaning.html"><a href="cleaning.html#covariates"><i class="fa fa-check"></i><b>2.1.3</b> Covariates</a></li>
<li class="chapter" data-level="2.1.4" data-path="cleaning.html"><a href="cleaning.html#personality-variables"><i class="fa fa-check"></i><b>2.1.4</b> Personality Variables</a></li>
<li class="chapter" data-level="2.1.5" data-path="cleaning.html"><a href="cleaning.html#outcome-variables"><i class="fa fa-check"></i><b>2.1.5</b> Outcome Variables</a></li>
<li class="chapter" data-level="2.1.6" data-path="cleaning.html"><a href="cleaning.html#combine-data"><i class="fa fa-check"></i><b>2.1.6</b> Combine Data</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="cleaning.html"><a href="cleaning.html#einstein-aging-study-eas"><i class="fa fa-check"></i><b>2.2</b> Einstein Aging Study (EAS)</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="cleaning.html"><a href="cleaning.html#load-data-1"><i class="fa fa-check"></i><b>2.2.1</b> Load Data</a></li>
<li class="chapter" data-level="2.2.2" data-path="cleaning.html"><a href="cleaning.html#recoding-reverse-scoring-1"><i class="fa fa-check"></i><b>2.2.2</b> Recoding &amp; Reverse Scoring</a></li>
<li class="chapter" data-level="2.2.3" data-path="cleaning.html"><a href="cleaning.html#covariates-1"><i class="fa fa-check"></i><b>2.2.3</b> Covariates</a></li>
<li class="chapter" data-level="2.2.4" data-path="cleaning.html"><a href="cleaning.html#personality-variables-1"><i class="fa fa-check"></i><b>2.2.4</b> Personality Variables</a></li>
<li class="chapter" data-level="2.2.5" data-path="cleaning.html"><a href="cleaning.html#outcome-variables-1"><i class="fa fa-check"></i><b>2.2.5</b> Outcome Variables</a></li>
<li class="chapter" data-level="2.2.6" data-path="cleaning.html"><a href="cleaning.html#combine-data-1"><i class="fa fa-check"></i><b>2.2.6</b> Combine Data</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="cleaning.html"><a href="cleaning.html#german-socioeconomic-panel-gsoep"><i class="fa fa-check"></i><b>2.3</b> German Socioeconomic Panel (GSOEP)</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="cleaning.html"><a href="cleaning.html#load-data-2"><i class="fa fa-check"></i><b>2.3.1</b> Load Data</a></li>
<li class="chapter" data-level="2.3.2" data-path="cleaning.html"><a href="cleaning.html#recoding-reverse-scoring-2"><i class="fa fa-check"></i><b>2.3.2</b> Recoding &amp; Reverse Scoring</a></li>
<li class="chapter" data-level="2.3.3" data-path="cleaning.html"><a href="cleaning.html#covariates-2"><i class="fa fa-check"></i><b>2.3.3</b> Covariates</a></li>
<li class="chapter" data-level="2.3.4" data-path="cleaning.html"><a href="cleaning.html#personality-variables-2"><i class="fa fa-check"></i><b>2.3.4</b> Personality Variables</a></li>
<li class="chapter" data-level="2.3.5" data-path="cleaning.html"><a href="cleaning.html#outcome-variables-2"><i class="fa fa-check"></i><b>2.3.5</b> Outcome Variables</a></li>
<li class="chapter" data-level="2.3.6" data-path="cleaning.html"><a href="cleaning.html#combine-data-2"><i class="fa fa-check"></i><b>2.3.6</b> Combine Data</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="cleaning.html"><a href="cleaning.html#household-income-and-labour-dynamics-in-australia-hilda"><i class="fa fa-check"></i><b>2.4</b> Household, Income, and Labour Dynamics in Australia (HILDA)</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="cleaning.html"><a href="cleaning.html#load-data-3"><i class="fa fa-check"></i><b>2.4.1</b> Load Data</a></li>
<li class="chapter" data-level="2.4.2" data-path="cleaning.html"><a href="cleaning.html#recoding-reverse-scoring-3"><i class="fa fa-check"></i><b>2.4.2</b> Recoding &amp; Reverse Scoring</a></li>
<li class="chapter" data-level="2.4.3" data-path="cleaning.html"><a href="cleaning.html#covariates-3"><i class="fa fa-check"></i><b>2.4.3</b> Covariates</a></li>
<li class="chapter" data-level="2.4.4" data-path="cleaning.html"><a href="cleaning.html#personality-variables-3"><i class="fa fa-check"></i><b>2.4.4</b> Personality Variables</a></li>
<li class="chapter" data-level="2.4.5" data-path="cleaning.html"><a href="cleaning.html#outcome-variables-3"><i class="fa fa-check"></i><b>2.4.5</b> Outcome Variables</a></li>
<li class="chapter" data-level="2.4.6" data-path="cleaning.html"><a href="cleaning.html#combine-data-3"><i class="fa fa-check"></i><b>2.4.6</b> Combine Data</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="cleaning.html"><a href="cleaning.html#health-and-retirement-study-hrs"><i class="fa fa-check"></i><b>2.5</b> Health and Retirement Study (HRS)</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="cleaning.html"><a href="cleaning.html#load-data-4"><i class="fa fa-check"></i><b>2.5.1</b> Load Data</a></li>
<li class="chapter" data-level="2.5.2" data-path="cleaning.html"><a href="cleaning.html#recoding-reverse-scoring-4"><i class="fa fa-check"></i><b>2.5.2</b> Recoding &amp; Reverse Scoring</a></li>
<li class="chapter" data-level="2.5.3" data-path="cleaning.html"><a href="cleaning.html#covariates-4"><i class="fa fa-check"></i><b>2.5.3</b> Covariates</a></li>
<li class="chapter" data-level="2.5.4" data-path="cleaning.html"><a href="cleaning.html#personality-variables-4"><i class="fa fa-check"></i><b>2.5.4</b> Personality Variables</a></li>
<li class="chapter" data-level="2.5.5" data-path="cleaning.html"><a href="cleaning.html#outcome-variables-4"><i class="fa fa-check"></i><b>2.5.5</b> Outcome Variables</a></li>
<li class="chapter" data-level="2.5.6" data-path="cleaning.html"><a href="cleaning.html#combine-data-4"><i class="fa fa-check"></i><b>2.5.6</b> Combine Data</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="cleaning.html"><a href="cleaning.html#longitudinal-aging-study-amsterdam-lasa"><i class="fa fa-check"></i><b>2.6</b> Longitudinal Aging Study Amsterdam (LASA)</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="cleaning.html"><a href="cleaning.html#load-data-5"><i class="fa fa-check"></i><b>2.6.1</b> Load Data</a></li>
<li class="chapter" data-level="2.6.2" data-path="cleaning.html"><a href="cleaning.html#recoding-reverse-scoring-5"><i class="fa fa-check"></i><b>2.6.2</b> Recoding &amp; Reverse Scoring</a></li>
<li class="chapter" data-level="2.6.3" data-path="cleaning.html"><a href="cleaning.html#covariates-5"><i class="fa fa-check"></i><b>2.6.3</b> Covariates</a></li>
<li class="chapter" data-level="2.6.4" data-path="cleaning.html"><a href="cleaning.html#personality-variables-5"><i class="fa fa-check"></i><b>2.6.4</b> Personality Variables</a></li>
<li class="chapter" data-level="2.6.5" data-path="cleaning.html"><a href="cleaning.html#outcome-variables-5"><i class="fa fa-check"></i><b>2.6.5</b> Outcome Variables</a></li>
<li class="chapter" data-level="2.6.6" data-path="cleaning.html"><a href="cleaning.html#combine-data-5"><i class="fa fa-check"></i><b>2.6.6</b> Combine Data</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="cleaning.html"><a href="cleaning.html#map"><i class="fa fa-check"></i><b>2.7</b> MAP</a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="cleaning.html"><a href="cleaning.html#load-data-6"><i class="fa fa-check"></i><b>2.7.1</b> Load Data</a></li>
<li class="chapter" data-level="2.7.2" data-path="cleaning.html"><a href="cleaning.html#recoding-reverse-scoring-6"><i class="fa fa-check"></i><b>2.7.2</b> Recoding &amp; Reverse Scoring</a></li>
<li class="chapter" data-level="2.7.3" data-path="cleaning.html"><a href="cleaning.html#covariates-6"><i class="fa fa-check"></i><b>2.7.3</b> Covariates</a></li>
<li class="chapter" data-level="2.7.4" data-path="cleaning.html"><a href="cleaning.html#personality-variables-6"><i class="fa fa-check"></i><b>2.7.4</b> Personality Variables</a></li>
<li class="chapter" data-level="2.7.5" data-path="cleaning.html"><a href="cleaning.html#outcome-variables-6"><i class="fa fa-check"></i><b>2.7.5</b> Outcome Variables</a></li>
<li class="chapter" data-level="2.7.6" data-path="cleaning.html"><a href="cleaning.html#combine-data-6"><i class="fa fa-check"></i><b>2.7.6</b> Combine Data</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="cleaning.html"><a href="cleaning.html#mars"><i class="fa fa-check"></i><b>2.8</b> MARS</a>
<ul>
<li class="chapter" data-level="2.8.1" data-path="cleaning.html"><a href="cleaning.html#recoding-reverse-scoring-7"><i class="fa fa-check"></i><b>2.8.1</b> Recoding &amp; Reverse Scoring</a></li>
<li class="chapter" data-level="2.8.2" data-path="cleaning.html"><a href="cleaning.html#covariates-7"><i class="fa fa-check"></i><b>2.8.2</b> Covariates</a></li>
<li class="chapter" data-level="2.8.3" data-path="cleaning.html"><a href="cleaning.html#personality-variables-7"><i class="fa fa-check"></i><b>2.8.3</b> Personality Variables</a></li>
<li class="chapter" data-level="2.8.4" data-path="cleaning.html"><a href="cleaning.html#outcome-variables-7"><i class="fa fa-check"></i><b>2.8.4</b> Outcome Variables</a></li>
<li class="chapter" data-level="2.8.5" data-path="cleaning.html"><a href="cleaning.html#combine-data-7"><i class="fa fa-check"></i><b>2.8.5</b> Combine Data</a></li>
</ul></li>
<li class="chapter" data-level="2.9" data-path="cleaning.html"><a href="cleaning.html#ros"><i class="fa fa-check"></i><b>2.9</b> ROS</a>
<ul>
<li class="chapter" data-level="2.9.1" data-path="cleaning.html"><a href="cleaning.html#load-data-7"><i class="fa fa-check"></i><b>2.9.1</b> Load Data</a></li>
<li class="chapter" data-level="2.9.2" data-path="cleaning.html"><a href="cleaning.html#recoding-reverse-scoring-8"><i class="fa fa-check"></i><b>2.9.2</b> Recoding &amp; Reverse Scoring</a></li>
<li class="chapter" data-level="2.9.3" data-path="cleaning.html"><a href="cleaning.html#covariates-8"><i class="fa fa-check"></i><b>2.9.3</b> Covariates</a></li>
<li class="chapter" data-level="2.9.4" data-path="cleaning.html"><a href="cleaning.html#personality-variables-8"><i class="fa fa-check"></i><b>2.9.4</b> Personality Variables</a></li>
<li class="chapter" data-level="2.9.5" data-path="cleaning.html"><a href="cleaning.html#outcome-variables-8"><i class="fa fa-check"></i><b>2.9.5</b> Outcome Variables</a></li>
<li class="chapter" data-level="2.9.6" data-path="cleaning.html"><a href="cleaning.html#combine-data-8"><i class="fa fa-check"></i><b>2.9.6</b> Combine Data</a></li>
</ul></li>
<li class="chapter" data-level="2.10" data-path="cleaning.html"><a href="cleaning.html#origins-of-the-variances-of-the-oldest-old-octogenarian-twins-octo-twin"><i class="fa fa-check"></i><b>2.10</b> Origins of the Variances of the Oldest-Old: Octogenarian Twins (OCTO-TWIN)</a>
<ul>
<li class="chapter" data-level="2.10.1" data-path="cleaning.html"><a href="cleaning.html#load-data-8"><i class="fa fa-check"></i><b>2.10.1</b> Load Data</a></li>
<li class="chapter" data-level="2.10.2" data-path="cleaning.html"><a href="cleaning.html#recoding-reverse-scoring-9"><i class="fa fa-check"></i><b>2.10.2</b> Recoding &amp; Reverse Scoring</a></li>
<li class="chapter" data-level="2.10.3" data-path="cleaning.html"><a href="cleaning.html#covariates-9"><i class="fa fa-check"></i><b>2.10.3</b> Covariates</a></li>
<li class="chapter" data-level="2.10.4" data-path="cleaning.html"><a href="cleaning.html#personality-variables-9"><i class="fa fa-check"></i><b>2.10.4</b> Personality Variables</a></li>
<li class="chapter" data-level="2.10.5" data-path="cleaning.html"><a href="cleaning.html#outcome-variables-9"><i class="fa fa-check"></i><b>2.10.5</b> Outcome Variables</a></li>
<li class="chapter" data-level="2.10.6" data-path="cleaning.html"><a href="cleaning.html#combine-data-9"><i class="fa fa-check"></i><b>2.10.6</b> Combine Data</a></li>
</ul></li>
<li class="chapter" data-level="2.11" data-path="cleaning.html"><a href="cleaning.html#swedish-adoption-twin-study-of-aging-satsa"><i class="fa fa-check"></i><b>2.11</b> Swedish Adoption Twin Study of Aging (SATSA)</a>
<ul>
<li class="chapter" data-level="2.11.1" data-path="cleaning.html"><a href="cleaning.html#load-data-9"><i class="fa fa-check"></i><b>2.11.1</b> Load Data</a></li>
<li class="chapter" data-level="2.11.2" data-path="cleaning.html"><a href="cleaning.html#recoding-reverse-scoring-10"><i class="fa fa-check"></i><b>2.11.2</b> Recoding &amp; Reverse Scoring</a></li>
<li class="chapter" data-level="2.11.3" data-path="cleaning.html"><a href="cleaning.html#covariates-10"><i class="fa fa-check"></i><b>2.11.3</b> Covariates</a></li>
<li class="chapter" data-level="2.11.4" data-path="cleaning.html"><a href="cleaning.html#personality-variables-10"><i class="fa fa-check"></i><b>2.11.4</b> Personality Variables</a></li>
<li class="chapter" data-level="2.11.5" data-path="cleaning.html"><a href="cleaning.html#outcome-variables-10"><i class="fa fa-check"></i><b>2.11.5</b> Outcome Variables</a></li>
<li class="chapter" data-level="2.11.6" data-path="cleaning.html"><a href="cleaning.html#combine-data-10"><i class="fa fa-check"></i><b>2.11.6</b> Combine Data</a></li>
</ul></li>
<li class="chapter" data-level="2.12" data-path="cleaning.html"><a href="cleaning.html#seattle-longitudinal-study-sls"><i class="fa fa-check"></i><b>2.12</b> Seattle Longitudinal Study (SLS)</a></li>
<li class="chapter" data-level="2.13" data-path="cleaning.html"><a href="cleaning.html#descriptives-of-all-studies"><i class="fa fa-check"></i><b>2.13</b> Descriptives of All Studies</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="runmodels.html"><a href="runmodels.html"><i class="fa fa-check"></i><b>3</b> Method 1: Pooled One Stage Models without Study-Specific Effects</a>
<ul>
<li class="chapter" data-level="3.1" data-path="runmodels.html"><a href="runmodels.html#step-1-combine-data"><i class="fa fa-check"></i><b>3.1</b> Step 1: Combine Data</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="runmodels.html"><a href="runmodels.html#study-level-moderators"><i class="fa fa-check"></i><b>3.1.1</b> Study-Level Moderators</a></li>
<li class="chapter" data-level="3.1.2" data-path="runmodels.html"><a href="runmodels.html#harmonize-data"><i class="fa fa-check"></i><b>3.1.2</b> Harmonize Data</a></li>
<li class="chapter" data-level="3.1.3" data-path="runmodels.html"><a href="runmodels.html#save-data-files"><i class="fa fa-check"></i><b>3.1.3</b> Save Data Files</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="runmodels.html"><a href="runmodels.html#step-2-run-models-and-extract-results"><i class="fa fa-check"></i><b>3.2</b> Step 2: Run Models and Extract Results</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="runmodels.html"><a href="runmodels.html#method-1a-linear-regression"><i class="fa fa-check"></i><b>3.2.1</b> Method 1A: Linear Regression</a></li>
<li class="chapter" data-level="3.2.2" data-path="runmodels.html"><a href="runmodels.html#part-1b-pooled-linear-regression-with-cluster-robust-standard-errors"><i class="fa fa-check"></i><b>3.2.2</b> Part 1B: Pooled Linear Regression with Cluster Robust Standard Errors</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="method-2-pooled-one-stage-models-with-study-specific-effects.html"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html"><i class="fa fa-check"></i><b>4</b> Method 2: Pooled One Stage Models with Study-Specific Effects</a>
<ul>
<li class="chapter" data-level="4.1" data-path="method-2-pooled-one-stage-models-with-study-specific-effects.html"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#step-1-combine-data-1"><i class="fa fa-check"></i><b>4.1</b> Step 1: Combine Data</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="method-2-pooled-one-stage-models-with-study-specific-effects.html"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#study-level-moderators-1"><i class="fa fa-check"></i><b>4.1.1</b> Study-Level Moderators</a></li>
<li class="chapter" data-level="4.1.2" data-path="method-2-pooled-one-stage-models-with-study-specific-effects.html"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#harmonize-data-1"><i class="fa fa-check"></i><b>4.1.2</b> Harmonize Data</a></li>
<li class="chapter" data-level="4.1.3" data-path="method-2-pooled-one-stage-models-with-study-specific-effects.html"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#save-data-files-1"><i class="fa fa-check"></i><b>4.1.3</b> Save Data Files</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="method-2-pooled-one-stage-models-with-study-specific-effects.html"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#step-2-run-models-and-extract-results-1"><i class="fa fa-check"></i><b>4.2</b> Step 2: Run Models and Extract Results</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="method-2-pooled-one-stage-models-with-study-specific-effects.html"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#method-2a-pooled-one-stage-models-with-dummy-codes"><i class="fa fa-check"></i><b>4.2.1</b> Method 2A: Pooled One Stage Models with Dummy Codes</a></li>
<li class="chapter" data-level="4.2.2" data-path="method-2-pooled-one-stage-models-with-study-specific-effects.html"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#method-2b-pooled-one-stage-models-with-random-effects"><i class="fa fa-check"></i><b>4.2.2</b> Method 2B: Pooled One Stage Models with Random Effects</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html"><i class="fa fa-check"></i><b>5</b> Method 3: Two-Stage Individual Participant Meta-Analysis</a>
<ul>
<li class="chapter" data-level="5.1" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#analytic-plan-4"><i class="fa fa-check"></i><b>5.1</b> Analytic Plan</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#sample-specific-statistical-modeling"><i class="fa fa-check"></i><b>5.1.1</b> 1. Sample-Specific Statistical Modeling</a></li>
<li class="chapter" data-level="5.1.2" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#results-pooling-using-meta-analysis"><i class="fa fa-check"></i><b>5.1.2</b> 2. Results Pooling Using Meta-Analysis</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#step-1-combine-data-2"><i class="fa fa-check"></i><b>5.2</b> Step 1: Combine Data</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#study-level-moderators-2"><i class="fa fa-check"></i><b>5.2.1</b> Study-Level Moderators</a></li>
<li class="chapter" data-level="5.2.2" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#harmonize-data-2"><i class="fa fa-check"></i><b>5.2.2</b> Harmonize Data</a></li>
<li class="chapter" data-level="5.2.3" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#save-data-files-2"><i class="fa fa-check"></i><b>5.2.3</b> Save Data Files</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#step-2-run-models-for-each-study"><i class="fa fa-check"></i><b>5.3</b> Step 2: Run Models for Each Study</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#functions"><i class="fa fa-check"></i><b>5.3.1</b> Functions</a></li>
<li class="chapter" data-level="5.3.2" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#run-models"><i class="fa fa-check"></i><b>5.3.2</b> Run Models</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#step-3-meta-analyze-results"><i class="fa fa-check"></i><b>5.4</b> Step 3: Meta-Analyze Results</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#functions-1"><i class="fa fa-check"></i><b>5.4.1</b> Functions</a></li>
<li class="chapter" data-level="5.4.2" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#run-meta-analysis-and-meta-regression-models"><i class="fa fa-check"></i><b>5.4.2</b> Run Meta-Analysis and Meta-Regression Models</a></li>
<li class="chapter" data-level="5.4.3" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#compile-results-4"><i class="fa fa-check"></i><b>5.4.3</b> Compile Results</a></li>
<li class="chapter" data-level="5.4.4" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#figures-4"><i class="fa fa-check"></i><b>5.4.4</b> Figures</a></li>
<li class="chapter" data-level="5.4.5" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#table-meta-analytic-heterogeneity"><i class="fa fa-check"></i><b>5.4.5</b> Table Meta-Analytic Heterogeneity</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#sample-results-section-4"><i class="fa fa-check"></i><b>5.5</b> Sample Results Section</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="method-3-one-stage-individual-participant-analyses-reported-together.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html"><i class="fa fa-check"></i><b>6</b> Method 3: One-Stage Individual Participant Analyses Reported Together</a>
<ul>
<li class="chapter" data-level="6.1" data-path="method-3-one-stage-individual-participant-analyses-reported-together.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#analytic-plan-5"><i class="fa fa-check"></i><b>6.1</b> Analytic Plan</a></li>
<li class="chapter" data-level="6.2" data-path="method-3-one-stage-individual-participant-analyses-reported-together.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#step-1-combine-data-3"><i class="fa fa-check"></i><b>6.2</b> Step 1: Combine Data</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="method-3-one-stage-individual-participant-analyses-reported-together.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#harmonize-data-3"><i class="fa fa-check"></i><b>6.2.1</b> Harmonize Data</a></li>
<li class="chapter" data-level="6.2.2" data-path="method-3-one-stage-individual-participant-analyses-reported-together.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#save-data-files-3"><i class="fa fa-check"></i><b>6.2.2</b> Save Data Files</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="method-3-one-stage-individual-participant-analyses-reported-together.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#step-2-run-models-for-each-study-1"><i class="fa fa-check"></i><b>6.3</b> Step 2: Run Models for Each Study</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="method-3-one-stage-individual-participant-analyses-reported-together.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#functions-2"><i class="fa fa-check"></i><b>6.3.1</b> Functions</a></li>
<li class="chapter" data-level="6.3.2" data-path="method-3-one-stage-individual-participant-analyses-reported-together.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#run-models-1"><i class="fa fa-check"></i><b>6.3.2</b> Run Models</a></li>
<li class="chapter" data-level="6.3.3" data-path="method-3-one-stage-individual-participant-analyses-reported-together.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#compile-results-5"><i class="fa fa-check"></i><b>6.3.3</b> Compile Results</a></li>
<li class="chapter" data-level="6.3.4" data-path="method-3-one-stage-individual-participant-analyses-reported-together.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#figures-5"><i class="fa fa-check"></i><b>6.3.4</b> Figures</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="method-3-one-stage-individual-participant-analyses-reported-together.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#sample-results-section-5"><i class="fa fa-check"></i><b>6.4</b> Sample Results Section</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="method-3-one-stage-individual-participant-analyses-reported-together-1.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together-1.html"><i class="fa fa-check"></i><b>7</b> Method 3: One-Stage Individual Participant Analyses Reported Together</a>
<ul>
<li class="chapter" data-level="7.1" data-path="method-3-one-stage-individual-participant-analyses-reported-together-1.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together-1.html#comparisons-across-the-taxonomy"><i class="fa fa-check"></i><b>7.1</b> Comparisons Across the Taxonomy</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="method-3-one-stage-individual-participant-analyses-reported-together-1.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together-1.html#tables-6"><i class="fa fa-check"></i><b>7.1.1</b> Tables</a></li>
<li class="chapter" data-level="7.1.2" data-path="method-3-one-stage-individual-participant-analyses-reported-together-1.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together-1.html#figures-6"><i class="fa fa-check"></i><b>7.1.2</b> Figures</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="method-3-one-stage-individual-participant-analyses-reported-together-1.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together-1.html#comparisons-across-methods-bayesian-versus-frequentist"><i class="fa fa-check"></i><b>7.2</b> Comparisons Across Methods: Bayesian versus Frequentist</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="method-3-one-stage-individual-participant-analyses-reported-together-1.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together-1.html#tables-7"><i class="fa fa-check"></i><b>7.2.1</b> Tables</a></li>
<li class="chapter" data-level="7.2.2" data-path="method-3-one-stage-individual-participant-analyses-reported-together-1.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together-1.html#figures-7"><i class="fa fa-check"></i><b>7.2.2</b> Figures</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">A Taxonomy of Data Synthesis: A Tutorial</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="method-2-pooled-one-stage-models-with-study-specific-effects" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">Chapter 4</span> Method 2: Pooled One Stage Models with Study-Specific Effects<a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#method-2-pooled-one-stage-models-with-study-specific-effects" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>The structure of the data for models with and without study-specific effects is identical, so we can directly proceed to step 2 and run the models. However, for the purposes of making each chapter somewhat standalone, the code from Method 1, Step 1 setup will be duplicated below.</p>
<div id="step-1-combine-data-1" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> Step 1: Combine Data<a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#step-1-combine-data-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb275"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb275-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb275-1" tabindex="-1"></a>loadRData <span class="ot">&lt;-</span> <span class="cf">function</span>(fileName, type){</span>
<span id="cb275-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb275-2" tabindex="-1"></a><span class="co">#loads an RData file, and returns it</span></span>
<span id="cb275-3"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb275-3" tabindex="-1"></a>    path <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/data/clean/%s_cleaned.RData&quot;</span>, local_path, fileName)</span>
<span id="cb275-4"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb275-4" tabindex="-1"></a>    <span class="fu">load</span>(path)</span>
<span id="cb275-5"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb275-5" tabindex="-1"></a>    <span class="fu">get</span>(<span class="fu">ls</span>()[<span class="fu">grepl</span>(type, <span class="fu">ls</span>())])</span>
<span id="cb275-6"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb275-6" tabindex="-1"></a>}</span>
<span id="cb275-7"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb275-7" tabindex="-1"></a></span>
<span id="cb275-8"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb275-8" tabindex="-1"></a>ipd_reg_data <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb275-9"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb275-9" tabindex="-1"></a>  <span class="at">study =</span> studies[<span class="sc">!</span>studies <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;CNLSY&quot;</span>, <span class="st">&quot;SLS&quot;</span>)]</span>
<span id="cb275-10"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb275-10" tabindex="-1"></a>  , <span class="at">data =</span> <span class="fu">map</span>(<span class="fu">str_to_lower</span>(study), <span class="sc">~</span><span class="fu">loadRData</span>(., <span class="st">&quot;combined&quot;</span>))</span>
<span id="cb275-11"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb275-11" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb275-12"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb275-12" tabindex="-1"></a>    <span class="at">data =</span> <span class="fu">map</span>(data, <span class="sc">~</span>(.) <span class="sc">%&gt;%</span> </span>
<span id="cb275-13"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb275-13" tabindex="-1"></a>                 <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb275-14"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb275-14" tabindex="-1"></a>                 <span class="fu">mutate</span>(<span class="at">SID =</span> <span class="fu">as.character</span>(SID)))</span>
<span id="cb275-15"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb275-15" tabindex="-1"></a>    , <span class="at">study =</span> <span class="fu">mapvalues</span>(study, studies, studies_long)</span>
<span id="cb275-16"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb275-16" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb275-17"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb275-17" tabindex="-1"></a>  <span class="fu">unnest</span>(data) <span class="sc">%&gt;%</span></span>
<span id="cb275-18"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb275-18" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">age =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(age), p_year <span class="sc">-</span> yearBrth, age))</span>
<span id="cb275-19"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb275-19" tabindex="-1"></a></span>
<span id="cb275-20"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb275-20" tabindex="-1"></a>ipd_reg_data</span></code></pre></div>
<pre><code>## # A tibble: 119,597 × 13
##    study Trait p_value p_year SID   Outcome      o_value o_year education gender SRhealth yearBrth   age
##    &lt;chr&gt; &lt;chr&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;          &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;
##  1 BASE  E        3.83   1990 10004 crystallized   2.17    2000        17      0        4     1918    72
##  2 BASE  E        3.83   1990 10010 crystallized   3.08    1995        11      0        2     1911    79
##  3 BASE  E        2.5    1990 10033 crystallized   0.909   1997         8      1        5     1910    80
##  4 BASE  E        3      1990 10034 crystallized   6.54    1995        10      0        5     1914    76
##  5 BASE  E        2.5    1990 10111 crystallized   6.54    1995        13      1        4     1901    89
##  6 BASE  E        3.17   1990 10115 crystallized  10       1995        11      0        2     1918    72
##  7 BASE  E        3      1990 10116 crystallized   3.85    1995        10      0        4     1917    73
##  8 BASE  E        3      1990 10145 crystallized   6.36    1997        10      1        5     1897    93
##  9 BASE  E        3.33   1990 10175 crystallized   2.31    1995         8      1        3     1911    79
## 10 BASE  E        3.33   1990 10188 crystallized   5.77    2004        10      1        2     1903    87
## # ℹ 119,587 more rows</code></pre>
<div id="study-level-moderators-1" class="section level3 hasAnchor" number="4.1.1">
<h3><span class="header-section-number">4.1.1</span> Study-Level Moderators<a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#study-level-moderators-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>First, we need to bring in a few study-level moderators from Table 4, which includes information about the continent and country of origin, and the type of personality scale. Then we’ll join those data with cleaned data from each study in order to calculate the average age at baseline, the average baseline year, and the average interval between personality and cogntiive measurements. Because these vary within studies across personality traits and outcomes, we calculate baseline age, year, and prediction interval for all combinations of these separately.</p>
<div class="sourceCode" id="cb277"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb277-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb277-1" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">&quot;https://github.com/emoriebeck/data-synthesis-tutorial/raw/main/codebooks/crystallized_tables.xlsx&quot;</span></span>
<span id="cb277-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb277-2" tabindex="-1"></a>destfile <span class="ot">&lt;-</span> <span class="st">&quot;tables.xlsx&quot;</span></span>
<span id="cb277-3"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb277-3" tabindex="-1"></a>curl<span class="sc">::</span><span class="fu">curl_download</span>(url, destfile)</span>
<span id="cb277-4"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb277-4" tabindex="-1"></a></span>
<span id="cb277-5"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb277-5" tabindex="-1"></a>ipd_reg_data <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">read_xlsx</span>(destfile, <span class="at">sheet =</span> <span class="st">&quot;Table 4&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb277-6"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb277-6" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Category, <span class="sc">-</span>Construct, <span class="sc">-</span>category) <span class="sc">%&gt;%</span></span>
<span id="cb277-7"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb277-7" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(<span class="st">&quot;BASE-I&quot;</span><span class="sc">:</span><span class="st">&quot;SATSA&quot;</span>)</span>
<span id="cb277-8"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb277-8" tabindex="-1"></a>               , <span class="at">names_to =</span> <span class="st">&quot;study&quot;</span></span>
<span id="cb277-9"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb277-9" tabindex="-1"></a>               , <span class="at">values_to =</span> <span class="st">&quot;value&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb277-10"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb277-10" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">&quot;name&quot;</span></span>
<span id="cb277-11"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb277-11" tabindex="-1"></a>              , <span class="at">values_from =</span> <span class="st">&quot;value&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb277-12"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb277-12" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">continent =</span> <span class="fu">relevel</span>(<span class="fu">factor</span>(continent), <span class="at">ref =</span> <span class="st">&quot;North America&quot;</span>)</span>
<span id="cb277-13"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb277-13" tabindex="-1"></a>         , <span class="at">country =</span> <span class="fu">relevel</span>(<span class="fu">factor</span>(country), <span class="at">ref =</span> <span class="st">&quot;United States&quot;</span>)</span>
<span id="cb277-14"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb277-14" tabindex="-1"></a>         , <span class="at">scale =</span> <span class="fu">relevel</span>(<span class="fu">factor</span>(scale), <span class="at">ref =</span> <span class="st">&quot;NEO-FFI&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb277-15"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb277-15" tabindex="-1"></a>  <span class="co"># mutate(p_year = as.numeric(p_year)) %&gt;%</span></span>
<span id="cb277-16"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb277-16" tabindex="-1"></a>  <span class="fu">right_join</span>(ipd_reg_data) <span class="sc">%&gt;%</span></span>
<span id="cb277-17"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb277-17" tabindex="-1"></a>  <span class="fu">group_by</span>(study, Trait, Outcome) <span class="sc">%&gt;%</span></span>
<span id="cb277-18"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb277-18" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">baseAge =</span> <span class="fu">mean</span>(age, <span class="at">na.rm =</span> T) <span class="sc">-</span> <span class="dv">60</span>, <span class="co"># center at age 60</span></span>
<span id="cb277-19"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb277-19" tabindex="-1"></a>         <span class="at">predInt =</span> <span class="fu">mean</span>(o_year <span class="sc">-</span> p_year) <span class="sc">-</span> <span class="dv">5</span>, <span class="co"># center at 5 years</span></span>
<span id="cb277-20"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb277-20" tabindex="-1"></a>         <span class="at">baseYear =</span> <span class="fu">mean</span>(p_year) <span class="sc">-</span> <span class="dv">2000</span>) <span class="sc">%&gt;%</span> <span class="co"># center at 2000</span></span>
<span id="cb277-21"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb277-21" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code></pre></div>
</div>
<div id="harmonize-data-1" class="section level3 hasAnchor" number="4.1.2">
<h3><span class="header-section-number">4.1.2</span> Harmonize Data<a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#harmonize-data-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Next, we need to harmonize the data across studies. As we preregistered, continuous variables (personality, cognition, and self-rated health) will be calclulated as percentages of maximum possible separately for each study, Trait and outcome. Unlike standardization procedures, that have a mean of zero and unit variance and can be misleading when data are skewed, POMP does not rescale sample variance based on the observed data, which overly relies on deviations from the mean. Instead, POMP relies on the ratio between the difference between a score and the minimum and the maximum and minimum, or</p>
<p>POMP = <span class="math inline">\(\frac{observed-minimum}{maximum-minimum}\)</span>*10.</p>
<p>In addition, gender will be dummy coded with male as the reference group, education will be centered at 12 years of education, and age will be grand mean-centered in each study (also for each trait and outcome combination).</p>
<div class="sourceCode" id="cb278"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb278-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb278-1" tabindex="-1"></a>ipd_reg_data <span class="ot">&lt;-</span> ipd_reg_data <span class="sc">%&gt;%</span></span>
<span id="cb278-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb278-2" tabindex="-1"></a>  <span class="fu">group_by</span>(study, Trait, Outcome) <span class="sc">%&gt;%</span></span>
<span id="cb278-3"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb278-3" tabindex="-1"></a>  <span class="fu">mutate_at</span>(<span class="fu">vars</span>(p_value, o_value), </span>
<span id="cb278-4"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb278-4" tabindex="-1"></a>        <span class="sc">~</span>((. <span class="sc">-</span> <span class="fu">min</span>(., <span class="at">na.rm =</span> T))<span class="sc">/</span>(<span class="fu">max</span>(., <span class="at">na.rm =</span> T) <span class="sc">-</span> <span class="fu">min</span>(., <span class="at">na.rm =</span> T))<span class="sc">*</span><span class="dv">10</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb278-5"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb278-5" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gender =</span> <span class="fu">factor</span>(gender, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;Male&quot;</span>, <span class="st">&quot;Female&quot;</span>)),</span>
<span id="cb278-6"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb278-6" tabindex="-1"></a>         <span class="at">education =</span> education <span class="sc">-</span> <span class="dv">12</span>, <span class="co"># center at 12 years of education</span></span>
<span id="cb278-7"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb278-7" tabindex="-1"></a>         <span class="at">age =</span> age <span class="sc">-</span> <span class="fu">mean</span>(age, <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span> <span class="co"># center </span></span>
<span id="cb278-8"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb278-8" tabindex="-1"></a>  <span class="fu">ungroup</span>()  <span class="sc">%&gt;%</span></span>
<span id="cb278-9"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb278-9" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>yearBrth)</span></code></pre></div>
</div>
<div id="save-data-files-1" class="section level3 hasAnchor" number="4.1.3">
<h3><span class="header-section-number">4.1.3</span> Save Data Files<a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#save-data-files-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Now, we’ll save these data files into separate data files for each trait, outcome combination. This makes it easier to track each data set that will be used in subsequent analyses.</p>
<div class="sourceCode" id="cb279"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb279-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb279-1" tabindex="-1"></a>save_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(d, trait, outcome){</span>
<span id="cb279-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb279-2" tabindex="-1"></a>  <span class="fu">save</span>(d, <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/data/one_stage/%s_%s.RData&quot;</span>, local_path, trait, outcome))</span>
<span id="cb279-3"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb279-3" tabindex="-1"></a>}</span>
<span id="cb279-4"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb279-4" tabindex="-1"></a></span>
<span id="cb279-5"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb279-5" tabindex="-1"></a>ipd_reg_data <span class="sc">%&gt;%</span></span>
<span id="cb279-6"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb279-6" tabindex="-1"></a>  <span class="fu">group_by</span>(Trait, Outcome) <span class="sc">%&gt;%</span></span>
<span id="cb279-7"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb279-7" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span></span>
<span id="cb279-8"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb279-8" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb279-9"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb279-9" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">data =</span> <span class="fu">pmap</span>(<span class="fu">list</span>(data, Trait, Outcome), save_fun))</span></code></pre></div>
<pre><code>## # A tibble: 5 × 3
##   Trait Outcome      data  
##   &lt;chr&gt; &lt;chr&gt;        &lt;list&gt;
## 1 A     crystallized &lt;NULL&gt;
## 2 C     crystallized &lt;NULL&gt;
## 3 E     crystallized &lt;NULL&gt;
## 4 N     crystallized &lt;NULL&gt;
## 5 O     crystallized &lt;NULL&gt;</code></pre>
</div>
</div>
<div id="step-2-run-models-and-extract-results-1" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> Step 2: Run Models and Extract Results<a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#step-2-run-models-and-extract-results-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Once the data are prepped, we are ready to begin running models! For Method 2: Pooled One Stage Models with Study-Specific Effects, we will run two variants. The first mimics a dummy coding procedure often seen in the economics literature where study-specific effects are captured by including studies as fixed effects. The second is a multilevel model in which particiants are nested within studies, and studies are treated as random effects, rather than fixed effects, as in Method 2A. Both of of use when study-specific effects are of interest, but Method 2B is of particular use when wanting to mimic heterogeneity estimates and meta regression techniques of traditional meta analyses.</p>
<div id="method-2a-pooled-one-stage-models-with-dummy-codes" class="section level3 hasAnchor" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> Method 2A: Pooled One Stage Models with Dummy Codes<a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#method-2a-pooled-one-stage-models-with-dummy-codes" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="analytic-plan-2" class="section level4 hasAnchor" number="4.2.1.1">
<h4><span class="header-section-number">4.2.1.1</span> Analytic Plan<a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#analytic-plan-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In the present study, we estimate associations between the Big Five personality traits and crystallized cognitive abilities using a one-stage, fully pooled regression approach with effects coded contrasts for study and individual participant data. The procedure is as follows:</p>
<p>To estimate sample-specific effects using regression contrasts, there are a variety of coding procedures that could be used. We used effects codes, which result in a term that captures the overall estimated effect and k-1 terms capturing sample-specific deviations from the overall estimate (all sample estimates can then be recovered via linear combinations). Using effects codes allows us to statistically test whether each sample (minus one) differs from the overall effect. Although dummy codes are most frequently used in regression-based approaches, effects code are the means by which regression is linked to analysis of variance in order to estimate marginal means. For example, if there were only three samples under investigation the matrix of effect codes would look like:</p>
<p><span class="math display">\[
\begin{array}{rr}
d_1 &amp; d_2 \\
.5 &amp; 0 \\   
0 &amp; .5 \\
-.5 &amp; -.5
\end{array}  
\]</span>,</p>
<p>where each column <span class="math inline">\(j\)</span> is an indicator in the model and each row <span class="math inline">\(k\)</span> represents a different sample. The first coefficient would capture the difference between the first sample and the overall estimate, while the second coefficient would capture the difference between the second sample and the overall estimate. By additionally adding an interaction between the effects coded terms and the key term (i.e. personality traits in the present study), we can additionally test for sample-specific estimates of key associations in the regression.
2. Statistical Modeling. Models were run separately for each personality characteristic, outcome, covariate, and moderator (10; 3 participant-level) combination. Using the R programming language, we created a series of functions to (1) set up and run the model and extract model coefficients and (2) extract overall simple-effects predictions for participant-level moderator models (i.e. predicted values across levels of the moderator values). In addition, to estimate sample-specific effects using effects codes, we created additional functions to (3) set up the effects codes and ensure interpretable variable labels, (4) set up and run a series of linear combinations of the effect-coded terms to get personality-crystallized abilities associations or moderators of their association for each sample, and (5) extract sample-specific simple-effects prediction for the participant-level moderators. Each of these functions were designed to flexibly handle different classes of covariates and moderators (e.g., nominal, numeric) and to wrangle the results into easily combined and understandable data frames. The functions and more detail on them can be found in the online materials.
The basic form of the model is as follows:</p>
<p><span class="math display">\[Y_{ij} = b_0 + b_1\ast predictor_{ij}+b2\ast study{\ 1}_{ij}+\ldots+b_k\ast study{k}_{ij}+
b_{k+1}\ast predictor_{ij}\ast study\ 1_{ij}+\ldots+b_{2\ast k}\ast predictor_{ij}\ast study{k}_{ij}+\epsilon_{ij}\]</span>
<span class="math inline">\(\varepsilon_{ij}\sim\mathcal{N}(0, \sigma^2)\)</span>,</p>
<p>where <span class="math inline">\(k\)</span> indicates the number of samples - 1. Of interest are two key sets of terms. <span class="math inline">\(b_1\)</span> indicates the average personality-cognition relationship, and <span class="math inline">\(b_{k+1}\)</span> to <span class="math inline">\(b_{2k}\)</span> represent effect coded sample-specific differences in outcome associations (i.e. the estimate for a sample is <span class="math inline">\(b_1+b_{2k}\)</span>). All other terms capture sample-specific differences in overall cognitive ability levels, if any. There is no measure of cross-sample heterogeneity, and residuals are assumed to be homogeneous.</p>
<p>Models were tested using the base R <code>lm()</code> function in <code>R</code>, and the <code>tidy()</code> function from the broom package to extract model coefficients and confidence intervals (CI). Inferences were made based on the 95% confidence intervals. Overall simple-effects predictions were calculated by providing the full range of personality (0-10) and average levels of the covariates from the data used to estimate the model as the “newdata” argument in the base <code>R</code> <code>predict()</code> function. For sample-specific effects, effects coded linear combinations for each sample were provided to the <code>glht()</code> function from the <code>multcomp</code> package (version 1.4.20; Hothorn et al., 2008).</p>
</div>
<div id="model-function-2" class="section level4 hasAnchor" number="4.2.1.2">
<h4><span class="header-section-number">4.2.1.2</span> Model Function<a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#model-function-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The first thing we need is a function that will bring in the data, create a formula in the model based on input on the type (Frequentist or Bayesian), moderators (none, age, gender, SRhealth, and education), and combinations of covariates (single or fully adjusted based on age, gender, SRhealth, and education). This case is slightly complicated given that we are using dummy codes for each study. We want to get an overall estimate as well as study-specific estimates. So we’ll have to build contrasts that give us these. Then we run the model, extract its fixed and study-specific effect estimates, and save both for later. By saving the results, it will make it easier and faster for us to extract the necessary model results later while still retaining all information from the original model.</p>
<div class="sourceCode" id="cb281"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb281-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb281-1" tabindex="-1"></a>ipd2a_mod_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(trait, outcome, type, mod, cov){</span>
<span id="cb281-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb281-2" tabindex="-1"></a>  <span class="do">## load the data</span></span>
<span id="cb281-3"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb281-3" tabindex="-1"></a>  <span class="fu">load</span>(<span class="fu">sprintf</span>(<span class="st">&quot;%s/data/one_stage/%s_%s.RData&quot;</span>, local_path, trait, outcome))</span>
<span id="cb281-4"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb281-4" tabindex="-1"></a>  </span>
<span id="cb281-5"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb281-5" tabindex="-1"></a>  <span class="do">## Applt effects codes  </span></span>
<span id="cb281-6"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb281-6" tabindex="-1"></a>  d <span class="ot">&lt;-</span> <span class="fu">contr_fun</span>(d)</span>
<span id="cb281-7"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb281-7" tabindex="-1"></a>  </span>
<span id="cb281-8"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb281-8" tabindex="-1"></a>  <span class="do">## compiled Bayesian model to speed up processing and avoid crashing</span></span>
<span id="cb281-9"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb281-9" tabindex="-1"></a>  <span class="cf">if</span>(type <span class="sc">==</span> <span class="st">&quot;Bayesian&quot;</span>) <span class="fu">load</span>(<span class="fu">sprintf</span>(<span class="st">&quot;%s/results/2a_ipd_dc/bayes_sample_mod.RData&quot;</span>, local_path))</span>
<span id="cb281-10"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb281-10" tabindex="-1"></a>  </span>
<span id="cb281-11"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb281-11" tabindex="-1"></a>  <span class="co"># get the model formula</span></span>
<span id="cb281-12"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb281-12" tabindex="-1"></a>  <span class="do">## model formula </span></span>
<span id="cb281-13"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb281-13" tabindex="-1"></a>  <span class="cf">if</span> (cov <span class="sc">==</span> <span class="st">&quot;all&quot;</span>) cv <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;age&quot;</span>, <span class="st">&quot;gender&quot;</span>, <span class="st">&quot;education&quot;</span>)</span>
<span id="cb281-14"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb281-14" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span>cov <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;all&quot;</span>, <span class="st">&quot;none&quot;</span>)) cv <span class="ot">&lt;-</span> cov</span>
<span id="cb281-15"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb281-15" tabindex="-1"></a>  rhs <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;p_value&quot;</span>, <span class="st">&quot;study&quot;</span>, <span class="st">&quot;p_value:study&quot;</span>)</span>
<span id="cb281-16"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb281-16" tabindex="-1"></a>  rhs <span class="ot">&lt;-</span> <span class="cf">if</span>(cov <span class="sc">!=</span> <span class="st">&quot;none&quot;</span>) <span class="fu">c</span>(rhs, cv) <span class="cf">else</span> rhs</span>
<span id="cb281-17"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb281-17" tabindex="-1"></a>  <span class="cf">if</span>(<span class="sc">!</span>mod <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;none&quot;</span>, stdyModers<span class="sc">$</span>short_name)){rhs <span class="ot">&lt;-</span> <span class="fu">c</span>(rhs, <span class="fu">paste</span>(<span class="st">&quot;p_value&quot;</span>, mod, <span class="st">&quot;study&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;*&quot;</span>))}</span>
<span id="cb281-18"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb281-18" tabindex="-1"></a>  <span class="cf">if</span>(mod <span class="sc">%in%</span> stdyModers<span class="sc">$</span>short_name){rhs <span class="ot">&lt;-</span> <span class="fu">c</span>(rhs, mod, <span class="fu">paste</span>(<span class="st">&quot;p_value&quot;</span>, mod, <span class="at">sep =</span> <span class="st">&quot;:&quot;</span>))}</span>
<span id="cb281-19"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb281-19" tabindex="-1"></a>  rhs <span class="ot">&lt;-</span> <span class="fu">paste</span>(rhs, <span class="at">collapse =</span> <span class="st">&quot; + &quot;</span>)</span>
<span id="cb281-20"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb281-20" tabindex="-1"></a>  f <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;o_value ~ &quot;</span>, rhs, <span class="at">collapse =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb281-21"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb281-21" tabindex="-1"></a>  </span>
<span id="cb281-22"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb281-22" tabindex="-1"></a>  <span class="do">## run the models &amp; save</span></span>
<span id="cb281-23"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb281-23" tabindex="-1"></a>  m <span class="ot">&lt;-</span> <span class="cf">if</span>(type <span class="sc">==</span> <span class="st">&quot;Frequentist&quot;</span>){<span class="fu">do.call</span>(<span class="st">&quot;lm&quot;</span>, <span class="fu">list</span>(<span class="at">formula =</span> f, <span class="at">data =</span> <span class="fu">quote</span>(d)))} <span class="cf">else</span> {<span class="fu">update</span>(m, <span class="at">formula =</span> f, <span class="at">newdata =</span> d, <span class="at">iter =</span> <span class="dv">2000</span></span>
<span id="cb281-24"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb281-24" tabindex="-1"></a>            , <span class="at">warmup =</span> <span class="dv">1000</span>)}</span>
<span id="cb281-25"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb281-25" tabindex="-1"></a>  <span class="fu">closeAllConnections</span>()</span>
<span id="cb281-26"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb281-26" tabindex="-1"></a>  <span class="fu">save</span>(m, <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/2a_ipd_dc/%s/models/%s_%s_%s_%s.RData&quot;</span></span>
<span id="cb281-27"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb281-27" tabindex="-1"></a>                         , local_path, type, outcome, trait, mod, cov))</span>
<span id="cb281-28"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb281-28" tabindex="-1"></a>  </span>
<span id="cb281-29"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb281-29" tabindex="-1"></a>  <span class="do">## extract model terms and confidence intervals &amp; save</span></span>
<span id="cb281-30"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb281-30" tabindex="-1"></a>  fx <span class="ot">&lt;-</span> <span class="fu">tidy</span>(m, <span class="at">conf.int =</span> T) <span class="sc">%&gt;%</span></span>
<span id="cb281-31"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb281-31" tabindex="-1"></a>    <span class="fu">select</span>(term, estimate, conf.low, conf.high)</span>
<span id="cb281-32"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb281-32" tabindex="-1"></a>  rx <span class="ot">&lt;-</span> <span class="cf">if</span>(mod <span class="sc">!=</span> stdyModers<span class="sc">$</span>short_name) <span class="fu">std_eff_fun</span>(m, type, mod) <span class="cf">else</span> <span class="cn">NA</span></span>
<span id="cb281-33"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb281-33" tabindex="-1"></a>  <span class="fu">save</span>(fx, rx, <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/2a_ipd_dc/%s/summary/%s_%s_%s_%s.RData&quot;</span></span>
<span id="cb281-34"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb281-34" tabindex="-1"></a>                              , local_path, type, outcome, trait, mod, cov))</span>
<span id="cb281-35"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb281-35" tabindex="-1"></a>  </span>
<span id="cb281-36"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb281-36" tabindex="-1"></a>  <span class="cf">if</span>(mod <span class="sc">!=</span> <span class="st">&quot;none&quot;</span>){</span>
<span id="cb281-37"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb281-37" tabindex="-1"></a>    <span class="fu">load</span>(<span class="fu">sprintf</span>(<span class="st">&quot;%s/results/2a_ipd_dc/%s/models/%s_%s_%s_%s.RData&quot;</span>, local_path, type, outcome, trait, mod, cov))</span>
<span id="cb281-38"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb281-38" tabindex="-1"></a>    pred.fx <span class="ot">&lt;-</span> <span class="fu">ipd2a_simpeff_fun</span>(m, mod, type)</span>
<span id="cb281-39"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb281-39" tabindex="-1"></a>    pred.rx <span class="ot">&lt;-</span> <span class="cf">if</span>(mod <span class="sc">%in%</span> stdyModers<span class="sc">$</span>short_name) <span class="cn">NULL</span> <span class="cf">else</span> <span class="fu">ipd2a_rx_pred_fun</span>(m, mod, type)</span>
<span id="cb281-40"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb281-40" tabindex="-1"></a>    <span class="fu">save</span>(pred.fx, pred.rx, <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/2a_ipd_dc/%s/predicted/%s_%s_%s_%s.RData&quot;</span></span>
<span id="cb281-41"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb281-41" tabindex="-1"></a>                          , local_path, type, outcome, trait, mod, cov))</span>
<span id="cb281-42"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb281-42" tabindex="-1"></a>  }</span>
<span id="cb281-43"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb281-43" tabindex="-1"></a>  </span>
<span id="cb281-44"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb281-44" tabindex="-1"></a>  <span class="do">## clean up the local function environment</span></span>
<span id="cb281-45"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb281-45" tabindex="-1"></a>  <span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">c</span>(<span class="st">&quot;d&quot;</span>, <span class="st">&quot;f&quot;</span>, <span class="st">&quot;rhs&quot;</span>, <span class="st">&quot;m&quot;</span>, <span class="st">&quot;fx&quot;</span>, <span class="st">&quot;rx&quot;</span>))</span>
<span id="cb281-46"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb281-46" tabindex="-1"></a>  <span class="fu">gc</span>()</span>
<span id="cb281-47"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb281-47" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="contrasts-function" class="section level4 hasAnchor" number="4.2.1.3">
<h4><span class="header-section-number">4.2.1.3</span> Contrasts Function<a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#contrasts-function" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>One function we will call in the modeling function for Method 2A is one that creates the contrasts that we’ll use for the models we’ll run. Because the contrasts necessary to get study-specific estimates and an overall estimate are not orthogonal, we will necessarily have to use two steps to get all these estimates. As a result, the method we use for contrasts doesn’t matter that much. We’ll use effects coding, as we pre-registered, because it will give us the overall estimate in the main model, as well as estimates of how S - 1 studies differ from that overall estimate.</p>
<p>Basically, teh function below will:<br />
1. Get names of all those studies.<br />
2. Use the <code>contr.sum()</code> function to create effects codes (i.e. a S-1 x S matrix of codes)
3. Set the row and column names to the studies we are examining
4. Save that contrast matrix to the study column of teh data frame</p>
<div class="sourceCode" id="cb282"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb282-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb282-1" tabindex="-1"></a>contr_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(d){</span>
<span id="cb282-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb282-2" tabindex="-1"></a>  <span class="do">## effect code the data  </span></span>
<span id="cb282-3"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb282-3" tabindex="-1"></a>  d <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span></span>
<span id="cb282-4"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb282-4" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">study =</span> <span class="fu">str_remove_all</span>(study, <span class="st">&quot;-&quot;</span>)</span>
<span id="cb282-5"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb282-5" tabindex="-1"></a>           , <span class="at">study =</span> <span class="fu">factor</span>(study))</span>
<span id="cb282-6"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb282-6" tabindex="-1"></a>  std <span class="ot">&lt;-</span> <span class="fu">rownames</span>(<span class="fu">contrasts</span>(d<span class="sc">$</span>study))</span>
<span id="cb282-7"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb282-7" tabindex="-1"></a>  cntr <span class="ot">&lt;-</span> <span class="fu">contr.sum</span>(<span class="fu">length</span>(std)); <span class="fu">rownames</span>(cntr) <span class="ot">&lt;-</span> std; <span class="fu">colnames</span>(cntr) <span class="ot">&lt;-</span> std[<span class="dv">1</span><span class="sc">:</span>(<span class="fu">length</span>(std)<span class="sc">-</span><span class="dv">1</span>)]</span>
<span id="cb282-8"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb282-8" tabindex="-1"></a>  <span class="fu">contrasts</span>(d<span class="sc">$</span>study) <span class="ot">&lt;-</span> cntr</span>
<span id="cb282-9"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb282-9" tabindex="-1"></a>  <span class="fu">return</span>(d)</span>
<span id="cb282-10"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb282-10" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="study-specific-effects-function" class="section level4 hasAnchor" number="4.2.1.4">
<h4><span class="header-section-number">4.2.1.4</span> Study-Specific Effects Function<a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#study-specific-effects-function" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>As noted previously, once we run the model, we will have to use a second step to get the study-specific estimates for all studies. To make this flexible for both Frequentist and Bayesian estimates, overall personality-outcome associations, and moderator associations is somewhat complicated. So we’ll start by getting names of the terms from the model. Then we’ll find the key term (either personality-outcome association or moderator effect) and the studies linked to these terms. For those studies, then getting the contrast formula is straightforward (overall effect + study effect). For the study without a model term, the formula is more complicated (overall effect - (S-1 study effects)).</p>
<p>Once we have these, they can easily be fed to the <code>glht()</code> function in the <code>multcomp</code> package (frequentist) or the <code>hypothesis()</code> function in the <code>brms</code> package (bayesian) to get all study-specific estimates and confidence / certainty intervals.</p>
<p>Before we do this, though, let’s try to better understand where these terms come from. Consider the case of four samples used to estimate an effect. This would require 3 effects coded contrast terms (<span class="math inline">\(d_1\)</span> to <span class="math inline">\(d_3\)</span>)in the model coded as follows:</p>
<p><span class="math display">\[
\begin{array}{rr}
d_1 &amp; d_2 &amp; d_3 \\
1 &amp; 0 &amp; 0\\   
0 &amp; 1 &amp; 0\\
0 &amp; 0 &amp; 1\\
-1 &amp; -1 &amp; -1
\end{array}  
\]</span>,</p>
<p>where <span class="math inline">\(d_1\)</span> to <span class="math inline">\(d_{k-1}\)</span> indicates the difference between samples 1 to <span class="math inline">\(k-1\)</span> and the grand mean. Thus, to recover the study-specific estimates, we can return to the equation for the model for the four sample case:</p>
<p><span class="math inline">\(Y_{ij}= b_0 + b_1*predictor_{ij} + b2*study1_{ij} + b3*study2_{ij} + b4*study3_{ij} + b_{5}*predictor_{ij}*study1_{ij} + b_{6}*predictor_{ij}*study2_{ij} + b_{7}*predictor_{ij}*study3_{ij} + \epsilon_{ij}\)</span>,</p>
<p>where <span class="math inline">\(b_5\)</span> to b_7 indicates the difference in the persoanlity-cognitive ability association between the average association across studies and samples 1-3, respectively. Then, to recover the estimate for samples 1-3, we simply need to sum the term for the overall association with the term for the difference in the association between that and samples 1-3, or:</p>
<p>Sample 1: <span class="math inline">\(b_1 + b_5\)</span><br />
Sample 2: <span class="math inline">\(b_1 + b_6\)</span><br />
Sample 3: <span class="math inline">\(b_1 + b_7\)</span></p>
<p>Lastly, to recover the estiamte for sample 4, we must subtract the estimates of differences for samples 1-3 from the grand mean, or:</p>
<p>Sample 4: <span class="math inline">\(b_1 - b_5 - b_6 - b_7\)</span></p>
<p>The function below extracts each of these and saves the estimates and their confidence intervals according to study names for easy combination and understanding.</p>
<div class="sourceCode" id="cb283"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb283-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb283-1" tabindex="-1"></a>std_eff_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(m, type, mod){</span>
<span id="cb283-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb283-2" tabindex="-1"></a>  <span class="cf">if</span>(type <span class="sc">==</span> <span class="st">&quot;Bayesian&quot;</span>){</span>
<span id="cb283-3"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb283-3" tabindex="-1"></a>    std <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">unique</span>(m<span class="sc">$</span>data<span class="sc">$</span>study)) <span class="co"># vector of studies</span></span>
<span id="cb283-4"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb283-4" tabindex="-1"></a>    nc <span class="ot">&lt;-</span> <span class="fu">nrow</span>(<span class="fu">fixef</span>(m)); nr <span class="ot">&lt;-</span> <span class="fu">length</span>(std) <span class="co"># number of rows and columns</span></span>
<span id="cb283-5"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb283-5" tabindex="-1"></a>    trms <span class="ot">&lt;-</span> <span class="fu">rownames</span>(<span class="fu">fixef</span>(m))</span>
<span id="cb283-6"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb283-6" tabindex="-1"></a>  } <span class="cf">else</span>{</span>
<span id="cb283-7"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb283-7" tabindex="-1"></a>    std <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">unique</span>(m<span class="sc">$</span>model<span class="sc">$</span>study)) <span class="co"># vector of studies</span></span>
<span id="cb283-8"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb283-8" tabindex="-1"></a>    nc <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">coef</span>(m)); nr <span class="ot">&lt;-</span> <span class="fu">length</span>(std) <span class="co"># number of rows and columns</span></span>
<span id="cb283-9"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb283-9" tabindex="-1"></a>    trms <span class="ot">&lt;-</span> <span class="fu">names</span>(<span class="fu">coef</span>(m))</span>
<span id="cb283-10"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb283-10" tabindex="-1"></a>  }</span>
<span id="cb283-11"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb283-11" tabindex="-1"></a>  </span>
<span id="cb283-12"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb283-12" tabindex="-1"></a>  modtrm <span class="ot">&lt;-</span> <span class="cf">if</span>(mod <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;none&quot;</span>, stdyModers<span class="sc">$</span>short_name)) <span class="st">&quot;p_value&quot;</span> <span class="cf">else</span> trms[<span class="fu">grepl</span>(<span class="fu">paste0</span>(<span class="st">&quot;p_value:&quot;</span>, mod), trms)]</span>
<span id="cb283-13"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb283-13" tabindex="-1"></a>  stdtrms <span class="ot">&lt;-</span> trms[<span class="fu">grepl</span>(<span class="st">&quot;p_value:study&quot;</span>, trms)]</span>
<span id="cb283-14"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb283-14" tabindex="-1"></a>  stdtrms <span class="ot">&lt;-</span> <span class="cf">if</span> (mod <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;none&quot;</span>, stdyModers<span class="sc">$</span>short_name)) stdtrms <span class="cf">else</span> stdtrms[<span class="fu">grepl</span>(mod, stdtrms)]</span>
<span id="cb283-15"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb283-15" tabindex="-1"></a>  </span>
<span id="cb283-16"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb283-16" tabindex="-1"></a>  <span class="co"># create character contrasts </span></span>
<span id="cb283-17"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb283-17" tabindex="-1"></a>  cntrm <span class="ot">&lt;-</span> <span class="fu">paste</span>(stdtrms, <span class="st">&quot;+&quot;</span>, modtrm, <span class="st">&quot; = 0&quot;</span>)</span>
<span id="cb283-18"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb283-18" tabindex="-1"></a>  cntrm <span class="ot">&lt;-</span> <span class="fu">c</span>(cntrm, <span class="fu">paste0</span>(<span class="st">&quot; - &quot;</span>, stdtrms, <span class="at">collapse =</span> <span class="st">&quot;&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb283-19"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb283-19" tabindex="-1"></a>    <span class="fu">paste</span>(modtrm, ., <span class="at">collapse =</span> <span class="st">&quot;&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb283-20"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb283-20" tabindex="-1"></a>    <span class="fu">paste</span>(., <span class="st">&quot;= 0&quot;</span>, <span class="at">collapse =</span> <span class="st">&quot;&quot;</span>))</span>
<span id="cb283-21"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb283-21" tabindex="-1"></a>  <span class="fu">names</span>(cntrm) <span class="ot">&lt;-</span> std</span>
<span id="cb283-22"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb283-22" tabindex="-1"></a>  </span>
<span id="cb283-23"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb283-23" tabindex="-1"></a>  <span class="co"># Run the contrasts and rename to match overall model coefficient tables </span></span>
<span id="cb283-24"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb283-24" tabindex="-1"></a>  h <span class="ot">&lt;-</span> <span class="cf">if</span>(type <span class="sc">==</span> <span class="st">&quot;Bayesian&quot;</span>) {</span>
<span id="cb283-25"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb283-25" tabindex="-1"></a>    <span class="fu">hypothesis</span>(m, cntrm)<span class="sc">$</span>hypothesis <span class="sc">%&gt;%</span> <span class="co"># brms hypothesis function</span></span>
<span id="cb283-26"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb283-26" tabindex="-1"></a>      <span class="fu">select</span>(<span class="at">study =</span> Hypothesis, <span class="at">estimate =</span> Estimate, </span>
<span id="cb283-27"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb283-27" tabindex="-1"></a>             <span class="at">conf.low =</span> CI.Lower, <span class="at">conf.high =</span> CI.Upper) <span class="sc">%&gt;%</span></span>
<span id="cb283-28"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb283-28" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">term =</span> modtrm) <span class="sc">%&gt;%</span></span>
<span id="cb283-29"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb283-29" tabindex="-1"></a>      <span class="fu">as_tibble</span>()</span>
<span id="cb283-30"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb283-30" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb283-31"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb283-31" tabindex="-1"></a>    (multcomp<span class="sc">::</span><span class="fu">glht</span>(m, cntrm) <span class="sc">%&gt;%</span> <span class="co"># multcomp hypothesis function</span></span>
<span id="cb283-32"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb283-32" tabindex="-1"></a>      <span class="fu">confint</span>(., <span class="at">calpha =</span> multcomp<span class="sc">::</span><span class="fu">univariate_calpha</span>()))<span class="sc">$</span>confint <span class="sc">%&gt;%</span></span>
<span id="cb283-33"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb283-33" tabindex="-1"></a>      <span class="fu">data.frame</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb283-34"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb283-34" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">study =</span> std, </span>
<span id="cb283-35"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb283-35" tabindex="-1"></a>             <span class="at">term =</span> modtrm) <span class="sc">%&gt;%</span></span>
<span id="cb283-36"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb283-36" tabindex="-1"></a>      <span class="fu">rename</span>(<span class="at">estimate =</span> Estimate, <span class="at">conf.low =</span> lwr, <span class="at">conf.high =</span> upr) <span class="sc">%&gt;%</span></span>
<span id="cb283-37"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb283-37" tabindex="-1"></a>      <span class="fu">as_tibble</span>()</span>
<span id="cb283-38"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb283-38" tabindex="-1"></a>  }</span>
<span id="cb283-39"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb283-39" tabindex="-1"></a>  <span class="fu">return</span>(h)</span>
<span id="cb283-40"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb283-40" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="simple-effects-function-2" class="section level4 hasAnchor" number="4.2.1.5">
<h4><span class="header-section-number">4.2.1.5</span> Simple Effects Function<a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#simple-effects-function-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="overall-effects" class="section level5 hasAnchor" number="4.2.1.5.1">
<h5><span class="header-section-number">4.2.1.5.1</span> Overall Effects<a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#overall-effects" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb284"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb284-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-1" tabindex="-1"></a>fx_lm_pred_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(m, newdata){</span>
<span id="cb284-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-2" tabindex="-1"></a>  tt <span class="ot">&lt;-</span> <span class="fu">terms</span>(m)</span>
<span id="cb284-3"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-3" tabindex="-1"></a>  Terms <span class="ot">&lt;-</span> <span class="fu">delete.response</span>(tt)</span>
<span id="cb284-4"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-4" tabindex="-1"></a>  mf <span class="ot">&lt;-</span> <span class="fu">model.frame</span>(Terms, newdata, <span class="at">xlev =</span> m<span class="sc">$</span>xlevels)</span>
<span id="cb284-5"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-5" tabindex="-1"></a>  X <span class="ot">&lt;-</span> <span class="fu">model.matrix</span>(Terms, mf, <span class="at">contrasts.arg =</span> m<span class="sc">$</span>contrasts)</span>
<span id="cb284-6"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-6" tabindex="-1"></a>  X[,<span class="fu">grepl</span>(<span class="st">&quot;study&quot;</span>, <span class="fu">colnames</span>(X))]  <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb284-7"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-7" tabindex="-1"></a>  p <span class="ot">&lt;-</span> m<span class="sc">$</span>rank</span>
<span id="cb284-8"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-8" tabindex="-1"></a>  p1 <span class="ot">&lt;-</span> <span class="fu">seq_len</span>(p)</span>
<span id="cb284-9"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-9" tabindex="-1"></a>  piv <span class="ot">&lt;-</span> m<span class="sc">$</span>qr<span class="sc">$</span>pivot[p1] </span>
<span id="cb284-10"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-10" tabindex="-1"></a>  beta <span class="ot">&lt;-</span> m<span class="sc">$</span>coefficients</span>
<span id="cb284-11"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-11" tabindex="-1"></a>  predictor <span class="ot">&lt;-</span> <span class="fu">drop</span>(X[, piv, <span class="at">drop =</span> <span class="cn">FALSE</span>] <span class="sc">%*%</span> beta[piv])</span>
<span id="cb284-12"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-12" tabindex="-1"></a>  </span>
<span id="cb284-13"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-13" tabindex="-1"></a>  w <span class="ot">&lt;-</span> m<span class="sc">$</span>weights</span>
<span id="cb284-14"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-14" tabindex="-1"></a>  res.var <span class="ot">&lt;-</span> {</span>
<span id="cb284-15"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-15" tabindex="-1"></a>    r <span class="ot">&lt;-</span> m<span class="sc">$</span>residuals</span>
<span id="cb284-16"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-16" tabindex="-1"></a>    rss <span class="ot">&lt;-</span> <span class="fu">sum</span>(r<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb284-17"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-17" tabindex="-1"></a>    df <span class="ot">&lt;-</span> m<span class="sc">$</span>df.residual</span>
<span id="cb284-18"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-18" tabindex="-1"></a>    rss<span class="sc">/</span>df</span>
<span id="cb284-19"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-19" tabindex="-1"></a>  }</span>
<span id="cb284-20"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-20" tabindex="-1"></a>    </span>
<span id="cb284-21"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-21" tabindex="-1"></a>  XRinv <span class="ot">&lt;-</span> X[, piv] <span class="sc">%*%</span> <span class="fu">qr.solve</span>(<span class="fu">qr.R</span>(m<span class="sc">$</span>qr)[p1, p1])</span>
<span id="cb284-22"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-22" tabindex="-1"></a>  ip <span class="ot">&lt;-</span> <span class="fu">drop</span>(XRinv<span class="sc">^</span><span class="dv">2</span> <span class="sc">%*%</span> <span class="fu">rep</span>(res.var, p))</span>
<span id="cb284-23"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-23" tabindex="-1"></a>        </span>
<span id="cb284-24"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-24" tabindex="-1"></a>  tfrac <span class="ot">&lt;-</span> <span class="fu">qt</span>((.<span class="dv">05</span>)<span class="sc">/</span><span class="dv">2</span>, df)</span>
<span id="cb284-25"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-25" tabindex="-1"></a>  hwid <span class="ot">&lt;-</span> tfrac <span class="sc">*</span> <span class="fu">sqrt</span>(ip)</span>
<span id="cb284-26"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-26" tabindex="-1"></a>  predictor <span class="ot">&lt;-</span> <span class="fu">cbind</span>(predictor, predictor <span class="sc">+</span> hwid <span class="sc">%o%</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="sc">-</span><span class="dv">1</span>))</span>
<span id="cb284-27"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-27" tabindex="-1"></a>  <span class="fu">colnames</span>(predictor) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;fit&quot;</span>, <span class="st">&quot;lwr&quot;</span>, <span class="st">&quot;upr&quot;</span>)</span>
<span id="cb284-28"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-28" tabindex="-1"></a>  <span class="fu">return</span>(predictor)</span>
<span id="cb284-29"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-29" tabindex="-1"></a>}</span>
<span id="cb284-30"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-30" tabindex="-1"></a></span>
<span id="cb284-31"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-31" tabindex="-1"></a>fx_bayes_pred_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(m, newdata){</span>
<span id="cb284-32"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-32" tabindex="-1"></a>  ps <span class="ot">&lt;-</span> <span class="fu">posterior_samples</span>(m, <span class="st">&quot;^b&quot;</span>, <span class="at">as.matrix =</span> T) </span>
<span id="cb284-33"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-33" tabindex="-1"></a>  X <span class="ot">&lt;-</span> <span class="fu">prepare_predictions</span>(</span>
<span id="cb284-34"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-34" tabindex="-1"></a>    m, newdata <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">o_value =</span> <span class="dv">1</span>)</span>
<span id="cb284-35"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-35" tabindex="-1"></a>    )<span class="sc">$</span>dpars<span class="sc">$</span>mu<span class="sc">$</span>fe<span class="sc">$</span>X[,<span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(ps), drop <span class="ot">=</span> <span class="cn">FALSE</span>]</span>
<span id="cb284-36"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-36" tabindex="-1"></a>  X[,<span class="fu">grepl</span>(<span class="st">&quot;study&quot;</span>, <span class="fu">colnames</span>(X))]  <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb284-37"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-37" tabindex="-1"></a>  predictor <span class="ot">&lt;-</span> X <span class="sc">%*%</span> <span class="fu">t</span>(ps)</span>
<span id="cb284-38"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-38" tabindex="-1"></a>  predictor <span class="ot">&lt;-</span> <span class="fu">posterior_summary</span>(<span class="fu">t</span>(predictor))</span>
<span id="cb284-39"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-39" tabindex="-1"></a>  <span class="fu">return</span>(predictor)</span>
<span id="cb284-40"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-40" tabindex="-1"></a>}</span>
<span id="cb284-41"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-41" tabindex="-1"></a></span>
<span id="cb284-42"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-42" tabindex="-1"></a>ipd2a_simpeff_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(m, moder, type){</span>
<span id="cb284-43"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-43" tabindex="-1"></a>  d <span class="ot">&lt;-</span> <span class="cf">if</span>(type <span class="sc">==</span> <span class="st">&quot;Bayesian&quot;</span>) m<span class="sc">$</span>data <span class="cf">else</span> m<span class="sc">$</span>model</span>
<span id="cb284-44"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-44" tabindex="-1"></a>  std_lev <span class="ot">&lt;-</span> <span class="fu">rev</span>(<span class="fu">levels</span>(d<span class="sc">$</span>study))[<span class="dv">1</span>]</span>
<span id="cb284-45"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-45" tabindex="-1"></a>  d <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>o_value, <span class="sc">-</span>p_value, <span class="sc">-</span>study)</span>
<span id="cb284-46"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-46" tabindex="-1"></a>  cols <span class="ot">&lt;-</span> <span class="fu">colnames</span>(d)</span>
<span id="cb284-47"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-47" tabindex="-1"></a>  md_cl <span class="ot">&lt;-</span> <span class="fu">class</span>(d[,moder])</span>
<span id="cb284-48"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-48" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">any</span>(<span class="fu">sapply</span>(d, class) <span class="sc">==</span> <span class="st">&quot;numeric&quot;</span>)){</span>
<span id="cb284-49"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-49" tabindex="-1"></a>    msd <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span></span>
<span id="cb284-50"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-50" tabindex="-1"></a>      <span class="fu">select_if</span>(is.numeric) <span class="sc">%&gt;%</span></span>
<span id="cb284-51"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-51" tabindex="-1"></a>      <span class="fu">pivot_longer</span>(<span class="fu">everything</span>()</span>
<span id="cb284-52"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-52" tabindex="-1"></a>                   , <span class="at">names_to =</span> <span class="st">&quot;item&quot;</span></span>
<span id="cb284-53"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-53" tabindex="-1"></a>                   , <span class="at">values_to =</span> <span class="st">&quot;value&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb284-54"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-54" tabindex="-1"></a>      <span class="fu">group_by</span>(item) <span class="sc">%&gt;%</span></span>
<span id="cb284-55"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-55" tabindex="-1"></a>      <span class="fu">summarize_at</span>(<span class="fu">vars</span>(value), <span class="fu">lst</span>(mean, sd)) <span class="sc">%&gt;%</span></span>
<span id="cb284-56"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-56" tabindex="-1"></a>      <span class="fu">ungroup</span>()</span>
<span id="cb284-57"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-57" tabindex="-1"></a>  }</span>
<span id="cb284-58"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-58" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">any</span>(<span class="fu">sapply</span>(d, class) <span class="sc">==</span> <span class="st">&quot;factor&quot;</span>)){</span>
<span id="cb284-59"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-59" tabindex="-1"></a>    fct_lev <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> </span>
<span id="cb284-60"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-60" tabindex="-1"></a>      <span class="fu">select_if</span>(is.factor) <span class="sc">%&gt;%</span></span>
<span id="cb284-61"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-61" tabindex="-1"></a>      <span class="fu">summarize_all</span>(<span class="sc">~</span><span class="fu">list</span>(<span class="fu">unique</span>(.)))</span>
<span id="cb284-62"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-62" tabindex="-1"></a>  }</span>
<span id="cb284-63"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-63" tabindex="-1"></a>  </span>
<span id="cb284-64"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-64" tabindex="-1"></a>  d <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span><span class="fu">one_of</span>(moder))</span>
<span id="cb284-65"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-65" tabindex="-1"></a>  md_levs <span class="ot">&lt;-</span> <span class="cf">if</span>(md_cl <span class="sc">==</span> <span class="st">&quot;numeric&quot;</span>){</span>
<span id="cb284-66"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-66" tabindex="-1"></a>    <span class="cf">if</span>(moder <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;age&quot;</span>, <span class="st">&quot;baseAge&quot;</span>, <span class="st">&quot;baseYear&quot;</span>)) {</span>
<span id="cb284-67"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-67" tabindex="-1"></a>      <span class="fu">c</span>(<span class="sc">-</span><span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">10</span>)</span>
<span id="cb284-68"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-68" tabindex="-1"></a>      } <span class="cf">else</span> <span class="cf">if</span> (moder <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;predInt&quot;</span>, <span class="st">&quot;education&quot;</span>)) {</span>
<span id="cb284-69"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-69" tabindex="-1"></a>      <span class="fu">c</span>(<span class="sc">-</span><span class="dv">5</span>, <span class="dv">0</span>, <span class="dv">5</span>) </span>
<span id="cb284-70"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-70" tabindex="-1"></a>      } <span class="cf">else</span> {</span>
<span id="cb284-71"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-71" tabindex="-1"></a>        <span class="fu">with</span>(msd, <span class="fu">c</span>(mean[item <span class="sc">==</span> moder] <span class="sc">-</span> sd[item <span class="sc">==</span> moder], mean[item <span class="sc">==</span> moder], mean[item <span class="sc">==</span> moder] <span class="sc">+</span> sd[item <span class="sc">==</span> moder]))</span>
<span id="cb284-72"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-72" tabindex="-1"></a>      }</span>
<span id="cb284-73"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-73" tabindex="-1"></a>  } <span class="cf">else</span> { </span>
<span id="cb284-74"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-74" tabindex="-1"></a>    <span class="fu">unique</span>(fct_lev[,moder][[<span class="dv">1</span>]])</span>
<span id="cb284-75"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-75" tabindex="-1"></a>  }</span>
<span id="cb284-76"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-76" tabindex="-1"></a>  </span>
<span id="cb284-77"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-77" tabindex="-1"></a>  mod_frame <span class="ot">&lt;-</span> <span class="fu">crossing</span>(</span>
<span id="cb284-78"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-78" tabindex="-1"></a>    <span class="at">p_value =</span> <span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">10</span>,.<span class="dv">5</span>)</span>
<span id="cb284-79"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-79" tabindex="-1"></a>    , <span class="at">modvalue =</span> md_levs</span>
<span id="cb284-80"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-80" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> <span class="fu">setNames</span>(<span class="fu">c</span>(<span class="st">&quot;p_value&quot;</span>, moder)) <span class="sc">%&gt;%</span></span>
<span id="cb284-81"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-81" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">study =</span> std_lev)</span>
<span id="cb284-82"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-82" tabindex="-1"></a>  </span>
<span id="cb284-83"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-83" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">ncol</span>(d) <span class="sc">&gt;</span> <span class="dv">0</span>){</span>
<span id="cb284-84"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-84" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">any</span>(<span class="fu">sapply</span>(d, class) <span class="sc">==</span> <span class="st">&quot;numeric&quot;</span>)){</span>
<span id="cb284-85"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-85" tabindex="-1"></a>      mod_frame <span class="ot">&lt;-</span> <span class="fu">tibble</span>(mod_frame, d <span class="sc">%&gt;%</span> <span class="fu">select_if</span>(is.numeric) <span class="sc">%&gt;%</span> <span class="fu">summarize_all</span>(mean))</span>
<span id="cb284-86"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-86" tabindex="-1"></a>    } </span>
<span id="cb284-87"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-87" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">any</span>(<span class="fu">sapply</span>(d, class) <span class="sc">==</span> <span class="st">&quot;factor&quot;</span>)){</span>
<span id="cb284-88"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-88" tabindex="-1"></a>      mod_frame <span class="ot">&lt;-</span> <span class="fu">tibble</span>(mod_frame, d <span class="sc">%&gt;%</span> <span class="fu">select_if</span>(is.factor) <span class="sc">%&gt;%</span> <span class="fu">summarize_all</span>(<span class="sc">~</span><span class="fu">levels</span>(.)[<span class="dv">1</span>]))</span>
<span id="cb284-89"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-89" tabindex="-1"></a>    }</span>
<span id="cb284-90"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-90" tabindex="-1"></a>  }</span>
<span id="cb284-91"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-91" tabindex="-1"></a>  </span>
<span id="cb284-92"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-92" tabindex="-1"></a>  pred.fx <span class="ot">&lt;-</span> <span class="cf">if</span>(type <span class="sc">==</span> <span class="st">&quot;Bayesian&quot;</span>){</span>
<span id="cb284-93"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-93" tabindex="-1"></a>    <span class="fu">bind_cols</span>(</span>
<span id="cb284-94"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-94" tabindex="-1"></a>      mod_frame <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>study), </span>
<span id="cb284-95"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-95" tabindex="-1"></a>      <span class="fu">fx_bayes_pred_fun</span>(m, <span class="at">newdata =</span> mod_frame) <span class="sc">%&gt;%</span> data.frame</span>
<span id="cb284-96"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-96" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb284-97"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-97" tabindex="-1"></a>      <span class="fu">select</span>(<span class="fu">one_of</span>(<span class="fu">colnames</span>(m<span class="sc">$</span>data)), <span class="at">pred =</span> Estimate, <span class="at">lower =</span> Q2<span class="fl">.5</span>, <span class="at">upper =</span> Q97<span class="fl">.5</span>)</span>
<span id="cb284-98"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-98" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb284-99"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-99" tabindex="-1"></a>    <span class="fu">bind_cols</span>(</span>
<span id="cb284-100"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-100" tabindex="-1"></a>      mod_frame <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>study), </span>
<span id="cb284-101"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-101" tabindex="-1"></a>      <span class="fu">fx_lm_pred_fun</span>(m, <span class="at">newdata =</span> mod_frame) <span class="sc">%&gt;%</span> data.frame </span>
<span id="cb284-102"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-102" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb284-103"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-103" tabindex="-1"></a>      <span class="fu">select</span>(<span class="fu">one_of</span>(<span class="fu">colnames</span>(m<span class="sc">$</span>model)), <span class="at">pred =</span> fit, <span class="at">lower =</span> lwr, <span class="at">upper =</span> upr)</span>
<span id="cb284-104"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-104" tabindex="-1"></a>  }</span>
<span id="cb284-105"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-105" tabindex="-1"></a>  </span>
<span id="cb284-106"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-106" tabindex="-1"></a>  <span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">c</span>(<span class="st">&quot;m&quot;</span>, <span class="st">&quot;mod_frame&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;md_levs&quot;</span>))</span>
<span id="cb284-107"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-107" tabindex="-1"></a>  <span class="fu">gc</span>()</span>
<span id="cb284-108"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-108" tabindex="-1"></a>  <span class="fu">return</span>(pred.fx)</span>
<span id="cb284-109"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb284-109" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="study-specific-effects-2" class="section level5 hasAnchor" number="4.2.1.5.2">
<h5><span class="header-section-number">4.2.1.5.2</span> Study-Specific Effects<a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#study-specific-effects-2" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb285"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb285-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-1" tabindex="-1"></a><span class="co"># short function  to get crossings of continuous personality and moderator levels</span></span>
<span id="cb285-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-2" tabindex="-1"></a><span class="co"># crossing_fun &lt;- function(df, mod, mod_lev){</span></span>
<span id="cb285-3"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-3" tabindex="-1"></a><span class="co">#   pred.rx &lt;- crossing(</span></span>
<span id="cb285-4"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-4" tabindex="-1"></a><span class="co">#     p_value = seq(0,10,.5),</span></span>
<span id="cb285-5"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-5" tabindex="-1"></a><span class="co">#     mod_value = mod_lev</span></span>
<span id="cb285-6"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-6" tabindex="-1"></a><span class="co">#     ) %&gt;%</span></span>
<span id="cb285-7"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-7" tabindex="-1"></a><span class="co">#     setNames(c(&quot;p_value&quot;, mod))</span></span>
<span id="cb285-8"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-8" tabindex="-1"></a><span class="co">#   return(pred.rx)</span></span>
<span id="cb285-9"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-9" tabindex="-1"></a><span class="co"># }</span></span>
<span id="cb285-10"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-10" tabindex="-1"></a></span>
<span id="cb285-11"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-11" tabindex="-1"></a>ipd2a_rx_pred_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(m, moder, type){</span>
<span id="cb285-12"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-12" tabindex="-1"></a>  d <span class="ot">&lt;-</span> <span class="cf">if</span>(type <span class="sc">==</span> <span class="st">&quot;Bayesian&quot;</span>) m<span class="sc">$</span>data <span class="cf">else</span> m<span class="sc">$</span>model</span>
<span id="cb285-13"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-13" tabindex="-1"></a>  d <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>o_value, <span class="sc">-</span>p_value)</span>
<span id="cb285-14"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-14" tabindex="-1"></a>  cols <span class="ot">&lt;-</span> <span class="fu">colnames</span>(d)</span>
<span id="cb285-15"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-15" tabindex="-1"></a>  md_cl <span class="ot">&lt;-</span> <span class="fu">class</span>(d[,moder])</span>
<span id="cb285-16"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-16" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">any</span>(<span class="fu">sapply</span>(d, class) <span class="sc">==</span> <span class="st">&quot;numeric&quot;</span>)){</span>
<span id="cb285-17"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-17" tabindex="-1"></a>    msd <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span></span>
<span id="cb285-18"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-18" tabindex="-1"></a>      <span class="fu">group_by</span>(study) <span class="sc">%&gt;%</span></span>
<span id="cb285-19"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-19" tabindex="-1"></a>      <span class="fu">select_if</span>(is.numeric) <span class="sc">%&gt;%</span></span>
<span id="cb285-20"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-20" tabindex="-1"></a>      <span class="fu">pivot_longer</span>(<span class="sc">-</span>study</span>
<span id="cb285-21"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-21" tabindex="-1"></a>                   , <span class="at">names_to =</span> <span class="st">&quot;item&quot;</span></span>
<span id="cb285-22"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-22" tabindex="-1"></a>                   , <span class="at">values_to =</span> <span class="st">&quot;value&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb285-23"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-23" tabindex="-1"></a>      <span class="fu">group_by</span>(study, item) <span class="sc">%&gt;%</span></span>
<span id="cb285-24"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-24" tabindex="-1"></a>      <span class="fu">summarize_at</span>(<span class="fu">vars</span>(value), <span class="fu">lst</span>(mean, sd), <span class="at">na.rm =</span> T) <span class="sc">%&gt;%</span></span>
<span id="cb285-25"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-25" tabindex="-1"></a>      <span class="fu">ungroup</span>() </span>
<span id="cb285-26"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-26" tabindex="-1"></a>  }</span>
<span id="cb285-27"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-27" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">any</span>(<span class="fu">sapply</span>(d, class) <span class="sc">==</span> <span class="st">&quot;factor&quot;</span>)){</span>
<span id="cb285-28"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-28" tabindex="-1"></a>    fct_lev <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> </span>
<span id="cb285-29"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-29" tabindex="-1"></a>      <span class="fu">group_by</span>(study) <span class="sc">%&gt;%</span></span>
<span id="cb285-30"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-30" tabindex="-1"></a>      <span class="fu">select_if</span>(is.factor) <span class="sc">%&gt;%</span></span>
<span id="cb285-31"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-31" tabindex="-1"></a>      <span class="fu">summarize_all</span>(<span class="sc">~</span><span class="fu">list</span>(<span class="fu">unique</span>(.))) <span class="sc">%&gt;%</span></span>
<span id="cb285-32"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-32" tabindex="-1"></a>      <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb285-33"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-33" tabindex="-1"></a>      <span class="fu">data.frame</span>()</span>
<span id="cb285-34"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-34" tabindex="-1"></a>  }</span>
<span id="cb285-35"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-35" tabindex="-1"></a>  </span>
<span id="cb285-36"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-36" tabindex="-1"></a>  d <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span><span class="fu">one_of</span>(moder))</span>
<span id="cb285-37"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-37" tabindex="-1"></a>  </span>
<span id="cb285-38"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-38" tabindex="-1"></a>  md_levs <span class="ot">&lt;-</span> <span class="cf">if</span>(md_cl <span class="sc">==</span> <span class="st">&quot;numeric&quot;</span>){</span>
<span id="cb285-39"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-39" tabindex="-1"></a>    <span class="cf">if</span>(moder <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;age&quot;</span>, <span class="st">&quot;baseAge&quot;</span>, <span class="st">&quot;baseYear&quot;</span>)) {</span>
<span id="cb285-40"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-40" tabindex="-1"></a>      <span class="fu">c</span>(<span class="sc">-</span><span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">10</span>)</span>
<span id="cb285-41"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-41" tabindex="-1"></a>      } <span class="cf">else</span> <span class="cf">if</span> (moder <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;predInt&quot;</span>, <span class="st">&quot;education&quot;</span>)) {</span>
<span id="cb285-42"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-42" tabindex="-1"></a>      <span class="fu">c</span>(<span class="sc">-</span><span class="dv">5</span>, <span class="dv">0</span>, <span class="dv">5</span>) </span>
<span id="cb285-43"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-43" tabindex="-1"></a>      } <span class="cf">else</span> {</span>
<span id="cb285-44"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-44" tabindex="-1"></a>        <span class="fu">with</span>(msd, <span class="fu">c</span>(mean[item <span class="sc">==</span> moder] <span class="sc">-</span> sd[item <span class="sc">==</span> moder], mean[item <span class="sc">==</span> moder], mean[item <span class="sc">==</span> moder] <span class="sc">+</span> sd[item <span class="sc">==</span> moder]))</span>
<span id="cb285-45"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-45" tabindex="-1"></a>      }</span>
<span id="cb285-46"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-46" tabindex="-1"></a>  } <span class="cf">else</span> { </span>
<span id="cb285-47"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-47" tabindex="-1"></a>    <span class="fu">unique</span>(fct_lev[,moder][[<span class="dv">1</span>]])</span>
<span id="cb285-48"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-48" tabindex="-1"></a>  }</span>
<span id="cb285-49"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-49" tabindex="-1"></a>  </span>
<span id="cb285-50"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-50" tabindex="-1"></a>  mod_frame <span class="ot">&lt;-</span> <span class="cf">if</span>(md_cl <span class="sc">==</span> <span class="st">&quot;numeric&quot;</span>) {</span>
<span id="cb285-51"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-51" tabindex="-1"></a>    <span class="fu">crossing</span>(</span>
<span id="cb285-52"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-52" tabindex="-1"></a>      <span class="at">p_value =</span> <span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">10</span>,.<span class="dv">5</span>),</span>
<span id="cb285-53"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-53" tabindex="-1"></a>      <span class="at">modvalue =</span> md_levs,</span>
<span id="cb285-54"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-54" tabindex="-1"></a>      <span class="at">study =</span> <span class="fu">unique</span>(d<span class="sc">$</span>study)</span>
<span id="cb285-55"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-55" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> <span class="fu">setNames</span>(<span class="fu">c</span>(<span class="st">&quot;p_value&quot;</span>, moder, <span class="st">&quot;study&quot;</span>))<span class="co">#%&gt;% full_join(</span></span>
<span id="cb285-56"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-56" tabindex="-1"></a>    <span class="co">#   msd %&gt;% </span></span>
<span id="cb285-57"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-57" tabindex="-1"></a>    <span class="co">#     filter(item == moder) %&gt;%</span></span>
<span id="cb285-58"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-58" tabindex="-1"></a>    <span class="co">#     mutate(lower = mean - sd, upper = mean + sd) %&gt;%</span></span>
<span id="cb285-59"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-59" tabindex="-1"></a>    <span class="co">#     select(-sd) %&gt;% </span></span>
<span id="cb285-60"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-60" tabindex="-1"></a>    <span class="co">#     pivot_longer(cols = c(mean, lower, upper)</span></span>
<span id="cb285-61"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-61" tabindex="-1"></a>    <span class="co">#                  , names_to = &quot;meas&quot;</span></span>
<span id="cb285-62"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-62" tabindex="-1"></a>    <span class="co">#                  , values_to = &quot;modvalue&quot;) %&gt;%</span></span>
<span id="cb285-63"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-63" tabindex="-1"></a>    <span class="co">#     pivot_wider(names_from = &quot;item&quot;, values_from = &quot;modvalue&quot;) %&gt;%</span></span>
<span id="cb285-64"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-64" tabindex="-1"></a>    <span class="co">#     select(study, one_of(moder))</span></span>
<span id="cb285-65"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-65" tabindex="-1"></a>    <span class="co"># )</span></span>
<span id="cb285-66"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-66" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb285-67"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-67" tabindex="-1"></a>    <span class="fu">crossing</span>(</span>
<span id="cb285-68"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-68" tabindex="-1"></a>      <span class="at">p_value =</span> <span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">10</span>,.<span class="dv">5</span>)</span>
<span id="cb285-69"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-69" tabindex="-1"></a>      , <span class="at">mod_value =</span> md_levs<span class="co">#unique(fct_lev[,moder][[1]])</span></span>
<span id="cb285-70"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-70" tabindex="-1"></a>      , <span class="at">study =</span> <span class="fu">unique</span>(d<span class="sc">$</span>study)</span>
<span id="cb285-71"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-71" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb285-72"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-72" tabindex="-1"></a>      <span class="fu">setNames</span>(<span class="fu">c</span>(<span class="st">&quot;p_value&quot;</span>, moder, <span class="st">&quot;study&quot;</span>))</span>
<span id="cb285-73"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-73" tabindex="-1"></a>    }</span>
<span id="cb285-74"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-74" tabindex="-1"></a></span>
<span id="cb285-75"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-75" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">ncol</span>(d) <span class="sc">&gt;</span> <span class="dv">0</span>){</span>
<span id="cb285-76"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-76" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">any</span>(<span class="fu">sapply</span>(d, class) <span class="sc">==</span> <span class="st">&quot;numeric&quot;</span>)){</span>
<span id="cb285-77"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-77" tabindex="-1"></a>      mod_frame <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> </span>
<span id="cb285-78"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-78" tabindex="-1"></a>        <span class="fu">group_by</span>(study) <span class="sc">%&gt;%</span> </span>
<span id="cb285-79"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-79" tabindex="-1"></a>        <span class="fu">select_if</span>(is.numeric) <span class="sc">%&gt;%</span> </span>
<span id="cb285-80"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-80" tabindex="-1"></a>        <span class="fu">summarize_all</span>(mean, <span class="at">na.rm =</span> T) <span class="sc">%&gt;%</span></span>
<span id="cb285-81"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-81" tabindex="-1"></a>        <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb285-82"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-82" tabindex="-1"></a>        <span class="fu">full_join</span>(mod_frame)</span>
<span id="cb285-83"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-83" tabindex="-1"></a>    } </span>
<span id="cb285-84"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-84" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">any</span>(<span class="fu">sapply</span>(d, class) <span class="sc">==</span> <span class="st">&quot;factor&quot;</span>)){</span>
<span id="cb285-85"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-85" tabindex="-1"></a>      mod_frame <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> </span>
<span id="cb285-86"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-86" tabindex="-1"></a>        <span class="fu">group_by</span>(study) <span class="sc">%&gt;%</span></span>
<span id="cb285-87"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-87" tabindex="-1"></a>        <span class="fu">select_if</span>(is.factor) <span class="sc">%&gt;%</span> </span>
<span id="cb285-88"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-88" tabindex="-1"></a>        <span class="fu">summarize_all</span>(<span class="sc">~</span><span class="fu">levels</span>(.)) <span class="sc">%&gt;%</span></span>
<span id="cb285-89"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-89" tabindex="-1"></a>        <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb285-90"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-90" tabindex="-1"></a>        <span class="fu">full_join</span>(mod_frame) </span>
<span id="cb285-91"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-91" tabindex="-1"></a>    }</span>
<span id="cb285-92"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-92" tabindex="-1"></a>  }</span>
<span id="cb285-93"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-93" tabindex="-1"></a>  </span>
<span id="cb285-94"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-94" tabindex="-1"></a>  pred.rx <span class="ot">&lt;-</span> <span class="cf">if</span>(type <span class="sc">==</span> <span class="st">&quot;Bayesian&quot;</span>){</span>
<span id="cb285-95"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-95" tabindex="-1"></a>    <span class="fu">bind_cols</span>(</span>
<span id="cb285-96"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-96" tabindex="-1"></a>      mod_frame, </span>
<span id="cb285-97"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-97" tabindex="-1"></a>      <span class="fu">fitted</span>(m</span>
<span id="cb285-98"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-98" tabindex="-1"></a>             , <span class="at">newdata =</span> mod_frame) <span class="sc">%&gt;%</span> data.frame</span>
<span id="cb285-99"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-99" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb285-100"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-100" tabindex="-1"></a>      <span class="fu">select</span>(<span class="fu">one_of</span>(<span class="fu">colnames</span>(m<span class="sc">$</span>data)), <span class="at">pred =</span> Estimate, <span class="at">lower =</span> Q2<span class="fl">.5</span>, <span class="at">upper =</span> Q97<span class="fl">.5</span>)</span>
<span id="cb285-101"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-101" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb285-102"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-102" tabindex="-1"></a>    <span class="fu">bind_cols</span>(</span>
<span id="cb285-103"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-103" tabindex="-1"></a>      mod_frame, </span>
<span id="cb285-104"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-104" tabindex="-1"></a>      <span class="fu">predict</span>(m, <span class="at">newdata =</span> mod_frame, <span class="at">interval =</span> <span class="st">&quot;confidence&quot;</span>) <span class="sc">%&gt;%</span> data.frame </span>
<span id="cb285-105"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-105" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb285-106"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-106" tabindex="-1"></a>      <span class="fu">select</span>(<span class="fu">one_of</span>(<span class="fu">colnames</span>(m<span class="sc">$</span>model)), <span class="at">pred =</span> fit, <span class="at">lower =</span> lwr, <span class="at">upper =</span> upr)</span>
<span id="cb285-107"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-107" tabindex="-1"></a>  }</span>
<span id="cb285-108"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-108" tabindex="-1"></a>  </span>
<span id="cb285-109"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-109" tabindex="-1"></a>  <span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">c</span>(<span class="st">&quot;m&quot;</span>, <span class="st">&quot;mod_frame&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;md_levs&quot;</span>))</span>
<span id="cb285-110"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-110" tabindex="-1"></a>  <span class="fu">gc</span>()</span>
<span id="cb285-111"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-111" tabindex="-1"></a>  <span class="fu">return</span>(pred.rx)</span>
<span id="cb285-112"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb285-112" tabindex="-1"></a>}</span></code></pre></div>
<!-- ```{r} -->
<!-- if(type == "Bayesian"){ -->
<!--     std <- as.character(unique(m$data$study)) # vector of studies -->
<!--     nc <- nrow(fixef(m)); nr <- length(std) # number of rows and columns -->
<!--     trms <- rownames(fixef(m)) -->
<!--   } else{ -->
<!--     std <- as.character(unique(m$model$study)) # vector of studies -->
<!--     nc <- length(coef(m)); nr <- length(std) # number of rows and columns -->
<!--     trms <- names(coef(m)) -->
<!--   } -->
<!--   modname <- trms[grepl(paste0("^", mod), trms)] -->
<!--   modtrm <- if(mod %in% c("none", stdyModers$short_name)) "p_value" else trms[grepl(paste0("p_value:", mod), trms)] -->
<!--   stdtrms <- trms[grepl("p_value:study", trms)] -->
<!--   stdmodtrms <- if (mod %in% c("none", stdyModers$short_name)) stdtrms else stdtrms[grepl(mod, stdtrms)] -->
<!--   stdtrms <- if (mod %in% c("none", stdyModers$short_name)) stdtrms else stdtrms[!grepl(mod, stdtrms)] -->
<!-- cntrm <- c("p_value" # men overall -->
<!--   , paste("p_value", modtrm, sep = " + ") # female overall -->
<!--   , paste("p_value", stdtrms, sep = " + ") # male study specific 1 to k-1 -->
<!--   , paste("p_value", stdtrms, modtrm, sep = " + ") # female study specific 1 to k-1 -->
<!--   , paste0("p_value", paste0(" - ", stdtrms, collapse = "")) -->
<!--   , paste0("p_value + ", paste0(modtrm, " - "), paste0(" - ", stdtrms, collapse = ""), paste0(" - ", stdmodtrms, collapse = "")) # female study k -->
<!--   )  -->
<!-- cntrm <- paste0(cntrm, " = 0") -->
<!-- trms <- c("Men-Overall", "Women-Overall", paste("Men", std[1:(length(std) - 1)], sep = "-"),  -->
<!--                   paste("Women", std[1:(length(std) - 1)], sep = "-"), -->
<!--                   paste("Men", std[length(std)], sep = "-"), -->
<!--                   paste("Women", std[length(std)], sep = "-")) -->
<!-- (multcomp::glht(m, cntrm) %>% # multcomp hypothesis function -->
<!--       confint(., calpha = multcomp::univariate_calpha()))$confint %>% -->
<!--       data.frame() %>% -->
<!--   mutate(name = trms) %>% -->
<!--   as_tibble() -->
<!-- ``` -->
</div>
</div>
<div id="run-models-and-summaries-2" class="section level4 hasAnchor" number="4.2.1.6">
<h4><span class="header-section-number">4.2.1.6</span> Run Models and Summaries<a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#run-models-and-summaries-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The code below generates all possible preregistrered combinations of traits, outcomes, types, moderators, and covariates. Then these combinations are fed serially to the model function written previously, which will run and save the results.</p>
<div class="sourceCode" id="cb286"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb286-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb286-1" tabindex="-1"></a><span class="fu">load</span>(<span class="fu">sprintf</span>(<span class="st">&quot;%s/data/one_stage/E_crystallized.RData&quot;</span>, local_path))</span>
<span id="cb286-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb286-2" tabindex="-1"></a></span>
<span id="cb286-3"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb286-3" tabindex="-1"></a><span class="co"># clean data &amp; keep only needed columns and a subset of the used variables</span></span>
<span id="cb286-4"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb286-4" tabindex="-1"></a>d <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span></span>
<span id="cb286-5"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb286-5" tabindex="-1"></a>  <span class="fu">group_by</span>(study) <span class="sc">%&gt;%</span></span>
<span id="cb286-6"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb286-6" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span></span>
<span id="cb286-7"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb286-7" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb286-8"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb286-8" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">data =</span> <span class="fu">map</span>(data, <span class="sc">~</span>(.) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">row_number</span>() <span class="sc">%in%</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(.), <span class="dv">100</span>, <span class="at">replace =</span> F)))) <span class="sc">%&gt;%</span></span>
<span id="cb286-9"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb286-9" tabindex="-1"></a>  <span class="fu">unnest</span>(data) </span>
<span id="cb286-10"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb286-10" tabindex="-1"></a></span>
<span id="cb286-11"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb286-11" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">contr_fun</span>(d)</span>
<span id="cb286-12"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb286-12" tabindex="-1"></a></span>
<span id="cb286-13"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb286-13" tabindex="-1"></a>cv <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;age&quot;</span>, <span class="st">&quot;gender&quot;</span>, <span class="st">&quot;education&quot;</span>)</span>
<span id="cb286-14"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb286-14" tabindex="-1"></a>rhs <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;p_value&quot;</span>, <span class="st">&quot;study&quot;</span>, <span class="st">&quot;p_value:study&quot;</span>)</span>
<span id="cb286-15"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb286-15" tabindex="-1"></a>rhs <span class="ot">&lt;-</span> <span class="fu">c</span>(rhs, cv) </span>
<span id="cb286-16"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb286-16" tabindex="-1"></a>rhs <span class="ot">&lt;-</span> <span class="fu">paste</span>(rhs, <span class="at">collapse =</span> <span class="st">&quot; + &quot;</span>)</span>
<span id="cb286-17"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb286-17" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;o_value ~ &quot;</span>, rhs, <span class="at">collapse =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb286-18"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb286-18" tabindex="-1"></a></span>
<span id="cb286-19"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb286-19" tabindex="-1"></a><span class="co"># set priors &amp; model specifications </span></span>
<span id="cb286-20"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb286-20" tabindex="-1"></a>Prior <span class="ot">&lt;-</span>  <span class="fu">c</span>(<span class="fu">set_prior</span>(<span class="st">&quot;student_t(3, 0, 2)&quot;</span>, <span class="at">class =</span> <span class="st">&quot;b&quot;</span>),</span>
<span id="cb286-21"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb286-21" tabindex="-1"></a>            <span class="fu">set_prior</span>(<span class="st">&quot;student_t(3, 0, 5)&quot;</span>, <span class="at">class =</span> <span class="st">&quot;Intercept&quot;</span>))</span>
<span id="cb286-22"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb286-22" tabindex="-1"></a>Iter <span class="ot">&lt;-</span> <span class="dv">30</span>; Warmup <span class="ot">&lt;-</span> <span class="dv">21</span>; treedepth <span class="ot">&lt;-</span> <span class="dv">20</span></span>
<span id="cb286-23"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb286-23" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">bf</span>(f)</span>
<span id="cb286-24"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb286-24" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">brm</span>(<span class="at">formula =</span> f</span>
<span id="cb286-25"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb286-25" tabindex="-1"></a>            , <span class="at">data =</span> d</span>
<span id="cb286-26"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb286-26" tabindex="-1"></a>            , <span class="at">prior =</span> Prior</span>
<span id="cb286-27"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb286-27" tabindex="-1"></a>            , <span class="at">iter =</span> Iter</span>
<span id="cb286-28"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb286-28" tabindex="-1"></a>            , <span class="at">warmup =</span> Warmup</span>
<span id="cb286-29"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb286-29" tabindex="-1"></a>            , <span class="at">cores =</span> <span class="dv">4</span>)</span>
<span id="cb286-30"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb286-30" tabindex="-1"></a><span class="fu">save</span>(m, <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/2a_ipd_dc/bayes_sample_mod.RData&quot;</span>, local_path))</span>
<span id="cb286-31"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb286-31" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">c</span>(<span class="st">&quot;d&quot;</span>, <span class="st">&quot;Prior&quot;</span>, <span class="st">&quot;Iter&quot;</span>, <span class="st">&quot;Warmup&quot;</span>, <span class="st">&quot;treedepth&quot;</span>, <span class="st">&quot;f&quot;</span>, <span class="st">&quot;m&quot;</span>, <span class="st">&quot;rhs&quot;</span>, <span class="st">&quot;cv&quot;</span>))</span></code></pre></div>
<div class="sourceCode" id="cb287"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb287-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-1" tabindex="-1"></a><span class="co"># plan(multisession(workers = 8L))</span></span>
<span id="cb287-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-2" tabindex="-1"></a>nested_ipd2a_reg <span class="ot">&lt;-</span> </span>
<span id="cb287-3"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-3" tabindex="-1"></a>  <span class="co"># moderator result combinations</span></span>
<span id="cb287-4"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-4" tabindex="-1"></a>  <span class="fu">crossing</span>(</span>
<span id="cb287-5"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-5" tabindex="-1"></a>    <span class="at">Trait =</span> traits<span class="sc">$</span>short_name</span>
<span id="cb287-6"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-6" tabindex="-1"></a>    , <span class="at">Outcome =</span> outcomes<span class="sc">$</span>short_name</span>
<span id="cb287-7"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-7" tabindex="-1"></a>    , <span class="at">type =</span> <span class="fu">c</span>(<span class="st">&quot;Frequentist&quot;</span>, <span class="st">&quot;Bayesian&quot;</span>)</span>
<span id="cb287-8"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-8" tabindex="-1"></a>    , <span class="at">Moderator =</span> <span class="fu">c</span>(<span class="st">&quot;age&quot;</span>, <span class="st">&quot;gender&quot;</span>, <span class="st">&quot;education&quot;</span>)</span>
<span id="cb287-9"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-9" tabindex="-1"></a>    , <span class="at">Covariate =</span> <span class="fu">c</span>(<span class="st">&quot;none&quot;</span>, <span class="st">&quot;all&quot;</span>)</span>
<span id="cb287-10"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-10" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb287-11"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-11" tabindex="-1"></a>  <span class="fu">full_join</span>(</span>
<span id="cb287-12"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-12" tabindex="-1"></a>    <span class="co"># personality-outcome association results across covariates</span></span>
<span id="cb287-13"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-13" tabindex="-1"></a>    <span class="fu">crossing</span>(</span>
<span id="cb287-14"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-14" tabindex="-1"></a>      <span class="at">Trait =</span> traits<span class="sc">$</span>short_name</span>
<span id="cb287-15"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-15" tabindex="-1"></a>      , <span class="at">Outcome =</span> outcomes<span class="sc">$</span>short_name</span>
<span id="cb287-16"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-16" tabindex="-1"></a>      , <span class="at">type =</span> <span class="fu">c</span>(<span class="st">&quot;Frequentist&quot;</span>, <span class="st">&quot;Bayesian&quot;</span>)</span>
<span id="cb287-17"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-17" tabindex="-1"></a>      , <span class="at">Moderator =</span> <span class="fu">c</span>(<span class="st">&quot;none&quot;</span>, <span class="fu">unique</span>(stdyModers<span class="sc">$</span>short_name))</span>
<span id="cb287-18"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-18" tabindex="-1"></a>      , <span class="at">Covariate =</span> <span class="fu">c</span>(<span class="st">&quot;none&quot;</span>, <span class="st">&quot;age&quot;</span>, <span class="st">&quot;gender&quot;</span>, <span class="st">&quot;education&quot;</span>, <span class="st">&quot;all&quot;</span>)</span>
<span id="cb287-19"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-19" tabindex="-1"></a>      )</span>
<span id="cb287-20"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-20" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb287-21"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-21" tabindex="-1"></a>  <span class="co"># full_join(done) %&gt;% filter(is.na(done)) %&gt;%</span></span>
<span id="cb287-22"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-22" tabindex="-1"></a>  <span class="co"># filter(Trait == &quot;N&quot;) %&gt;%</span></span>
<span id="cb287-23"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-23" tabindex="-1"></a>  <span class="fu">filter</span>(type <span class="sc">==</span> <span class="st">&quot;Bayesian&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb287-24"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-24" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">run =</span> </span>
<span id="cb287-25"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-25" tabindex="-1"></a>           <span class="co"># future_pmap(list(Trait, Outcome, type, Moderator, Covariate)</span></span>
<span id="cb287-26"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-26" tabindex="-1"></a>           <span class="fu">pmap</span>(<span class="fu">list</span>(Trait, Outcome, type, Moderator, Covariate)</span>
<span id="cb287-27"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-27" tabindex="-1"></a>                           , <span class="fu">possibly</span>(ipd2a_mod_fun, <span class="st">&quot;uh oh&quot;</span>)</span>
<span id="cb287-28"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-28" tabindex="-1"></a>             <span class="co">#    , .progress = T</span></span>
<span id="cb287-29"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-29" tabindex="-1"></a>             <span class="co"># , .options = furrr_options(</span></span>
<span id="cb287-30"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-30" tabindex="-1"></a>             <span class="co">#                        globals = c(&quot;ipd2a_mod_fun&quot;</span></span>
<span id="cb287-31"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-31" tabindex="-1"></a>             <span class="co">#                                    , &quot;std_eff_fun&quot;</span></span>
<span id="cb287-32"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-32" tabindex="-1"></a>             <span class="co">#                                    , &quot;fx_lm_pred_fun&quot;</span></span>
<span id="cb287-33"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-33" tabindex="-1"></a>             <span class="co">#                                    , &quot;fx_bayes_pred_fun&quot;</span></span>
<span id="cb287-34"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-34" tabindex="-1"></a>             <span class="co">#                                    , &quot;ipd2a_simpeff_fun&quot;</span></span>
<span id="cb287-35"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-35" tabindex="-1"></a>             <span class="co">#                                    , &quot;crossing_fun&quot;</span></span>
<span id="cb287-36"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-36" tabindex="-1"></a>             <span class="co">#                                    , &quot;contr_fun&quot;</span></span>
<span id="cb287-37"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-37" tabindex="-1"></a>             <span class="co">#                                    , &quot;ipd2a_rx_pred_fun&quot;</span></span>
<span id="cb287-38"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-38" tabindex="-1"></a>             <span class="co">#                                    , &quot;read_path&quot;</span></span>
<span id="cb287-39"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-39" tabindex="-1"></a>             <span class="co">#                                    , &quot;local_path&quot;</span></span>
<span id="cb287-40"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-40" tabindex="-1"></a>             <span class="co">#                                    , &quot;res_path&quot;</span></span>
<span id="cb287-41"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-41" tabindex="-1"></a>             <span class="co">#                                    , &quot;codebook&quot;</span></span>
<span id="cb287-42"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-42" tabindex="-1"></a>             <span class="co">#                                    , &quot;covars&quot;</span></span>
<span id="cb287-43"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-43" tabindex="-1"></a>             <span class="co">#                                    , &quot;moders&quot;</span></span>
<span id="cb287-44"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-44" tabindex="-1"></a>             <span class="co">#                                    , &quot;outcomes&quot;</span></span>
<span id="cb287-45"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-45" tabindex="-1"></a>             <span class="co">#                                    , &quot;studies&quot;</span></span>
<span id="cb287-46"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-46" tabindex="-1"></a>             <span class="co">#                                    , &quot;stdyModers&quot;</span></span>
<span id="cb287-47"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-47" tabindex="-1"></a>             <span class="co">#                                    , &quot;traits&quot;</span></span>
<span id="cb287-48"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-48" tabindex="-1"></a>             <span class="co">#                                    , &quot;data_path&quot;)</span></span>
<span id="cb287-49"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-49" tabindex="-1"></a>             <span class="co">#                      , packages = c(&quot;lme4&quot;</span></span>
<span id="cb287-50"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-50" tabindex="-1"></a>             <span class="co">#                                     , &quot;broom&quot;</span></span>
<span id="cb287-51"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-51" tabindex="-1"></a>             <span class="co">#                                     , &quot;psych&quot;</span></span>
<span id="cb287-52"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-52" tabindex="-1"></a>             <span class="co">#                                     , &quot;knitr&quot;</span></span>
<span id="cb287-53"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-53" tabindex="-1"></a>             <span class="co">#                                     , &quot;broom.mixed&quot;</span></span>
<span id="cb287-54"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-54" tabindex="-1"></a>             <span class="co">#                                     , &quot;brms&quot;</span></span>
<span id="cb287-55"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-55" tabindex="-1"></a>             <span class="co">#                                     #, &quot;tidybayes&quot;</span></span>
<span id="cb287-56"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-56" tabindex="-1"></a>             <span class="co">#                                     #, &quot;bootpredictlme4&quot;</span></span>
<span id="cb287-57"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-57" tabindex="-1"></a>             <span class="co">#                                     , &quot;rstan&quot;</span></span>
<span id="cb287-58"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-58" tabindex="-1"></a>             <span class="co">#                                     , &quot;estimatr&quot;</span></span>
<span id="cb287-59"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-59" tabindex="-1"></a>             <span class="co">#                                     #, &quot;merTools&quot;</span></span>
<span id="cb287-60"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-60" tabindex="-1"></a>             <span class="co">#                                     , &quot;plyr&quot;</span></span>
<span id="cb287-61"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-61" tabindex="-1"></a>             <span class="co">#                                     , &quot;tidyverse&quot;))</span></span>
<span id="cb287-62"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-62" tabindex="-1"></a>             ))</span>
<span id="cb287-63"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-63" tabindex="-1"></a><span class="fu">closeAllConnections</span>()</span>
<span id="cb287-64"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-64" tabindex="-1"></a></span>
<span id="cb287-65"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-65" tabindex="-1"></a>nested_ipd2a_reg <span class="sc">%&gt;%</span> </span>
<span id="cb287-66"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-66" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>Moderator <span class="sc">%in%</span> stdyModers<span class="sc">$</span>short_name) <span class="sc">%&gt;%</span></span>
<span id="cb287-67"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-67" tabindex="-1"></a>  <span class="fu">write.table</span>(.</span>
<span id="cb287-68"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-68" tabindex="-1"></a>              , <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/scripts/cluster/args/bayesian/ipd2a_bayesian.txt&quot;</span>, local_path)</span>
<span id="cb287-69"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb287-69" tabindex="-1"></a>              , <span class="at">row.names =</span> F)</span></code></pre></div>
</div>
<div id="compile-results-2" class="section level4 hasAnchor" number="4.2.1.7">
<h4><span class="header-section-number">4.2.1.7</span> Compile Results<a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#compile-results-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Once all the models are run, we are ready to compile all their results. By saving the fixed and study-level effects results previously, we are able to simply load those results and ignore the models. However, because we also saved the models, we can also recall and extract information from them if and when needed.</p>
<div class="sourceCode" id="cb288"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb288-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb288-1" tabindex="-1"></a>loadRData <span class="ot">&lt;-</span> <span class="cf">function</span>(fileName, type, obj, folder){</span>
<span id="cb288-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb288-2" tabindex="-1"></a><span class="co">#loads an RData file, and returns it</span></span>
<span id="cb288-3"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb288-3" tabindex="-1"></a>    path <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/2a_ipd_dc/%s/%s/%s&quot;</span>, local_path, type, folder, fileName)</span>
<span id="cb288-4"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb288-4" tabindex="-1"></a>    <span class="fu">load</span>(path)</span>
<span id="cb288-5"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb288-5" tabindex="-1"></a>    <span class="fu">get</span>(<span class="fu">ls</span>()[<span class="fu">grepl</span>(obj, <span class="fu">ls</span>())])</span>
<span id="cb288-6"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb288-6" tabindex="-1"></a>}</span>
<span id="cb288-7"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb288-7" tabindex="-1"></a></span>
<span id="cb288-8"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb288-8" tabindex="-1"></a>n_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(fileName, type){</span>
<span id="cb288-9"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb288-9" tabindex="-1"></a>  m <span class="ot">&lt;-</span> <span class="fu">loadRData</span>(fileName, type, <span class="st">&quot;^m&quot;</span>, <span class="st">&quot;models&quot;</span>)</span>
<span id="cb288-10"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb288-10" tabindex="-1"></a>  d <span class="ot">&lt;-</span> <span class="cf">if</span>(type <span class="sc">==</span> <span class="st">&quot;Bayesian&quot;</span>) m<span class="sc">$</span>data <span class="cf">else</span> m<span class="sc">$</span>model</span>
<span id="cb288-11"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb288-11" tabindex="-1"></a>  n <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(study) <span class="sc">%&gt;%</span> <span class="fu">tally</span>() <span class="sc">%&gt;%</span> <span class="fu">ungroup</span>()</span>
<span id="cb288-12"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb288-12" tabindex="-1"></a>  <span class="fu">return</span>(n)</span>
<span id="cb288-13"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb288-13" tabindex="-1"></a>}</span>
<span id="cb288-14"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb288-14" tabindex="-1"></a></span>
<span id="cb288-15"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb288-15" tabindex="-1"></a><span class="do">## load in &quot;fixed&quot; effects</span></span>
<span id="cb288-16"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb288-16" tabindex="-1"></a><span class="do">## first get file names</span></span>
<span id="cb288-17"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb288-17" tabindex="-1"></a>nested_ipd2a_reg <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">type =</span> <span class="fu">c</span>(<span class="st">&quot;Frequentist&quot;</span>, <span class="st">&quot;Bayesian&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb288-18"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb288-18" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">file =</span> <span class="fu">map</span>(type, <span class="sc">~</span><span class="fu">list.files</span>(<span class="fu">sprintf</span>(<span class="st">&quot;%s/results/2a_ipd_dc/%s/models&quot;</span>, local_path, .)))) <span class="sc">%&gt;%</span></span>
<span id="cb288-19"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb288-19" tabindex="-1"></a>  <span class="fu">unnest</span>(file) <span class="sc">%&gt;%</span></span>
<span id="cb288-20"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb288-20" tabindex="-1"></a>  <span class="fu">separate</span>(file, <span class="fu">c</span>(<span class="st">&quot;Outcome&quot;</span>, <span class="st">&quot;Trait&quot;</span>, <span class="st">&quot;Moderator&quot;</span>, <span class="st">&quot;Covariate&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>, <span class="at">remove =</span> F) <span class="sc">%&gt;%</span> </span>
<span id="cb288-21"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb288-21" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>Moderator <span class="sc">%in%</span> stdyModers<span class="sc">$</span>short_name) <span class="sc">%&gt;%</span></span>
<span id="cb288-22"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb288-22" tabindex="-1"></a>  <span class="do">## read in the files</span></span>
<span id="cb288-23"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb288-23" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Covariate =</span> <span class="fu">str_remove</span>(Covariate, <span class="st">&quot;.RData&quot;</span>),</span>
<span id="cb288-24"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb288-24" tabindex="-1"></a>         <span class="at">fx =</span> <span class="fu">map2</span>(file, type, <span class="sc">~</span><span class="fu">loadRData</span>(.x, .y, <span class="st">&quot;fx&quot;</span>, <span class="st">&quot;summary&quot;</span>)),</span>
<span id="cb288-25"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb288-25" tabindex="-1"></a>         <span class="at">rx =</span> <span class="fu">map2</span>(file, type, <span class="sc">~</span><span class="fu">loadRData</span>(.x, .y, <span class="st">&quot;rx&quot;</span>, <span class="st">&quot;summary&quot;</span>)),</span>
<span id="cb288-26"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb288-26" tabindex="-1"></a>         <span class="at">n =</span> <span class="fu">map2</span>(file, type, n_fun)) <span class="sc">%&gt;%</span></span>
<span id="cb288-27"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb288-27" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>file) </span></code></pre></div>
<div id="tables-2" class="section level5 hasAnchor" number="4.2.1.7.1">
<h5><span class="header-section-number">4.2.1.7.1</span> Tables<a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#tables-2" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Next, we want to format the study results in APA table format. In this case, we are interested in the fixed and study-specific effects of personality predicting cognitive ability when there were no moderators, and the personality x moderator interaction when there was a moderator. We’ll anticipate a need to present both just fixed effects as well as fixed and study-specific effects by creating tables for each.</p>
<p>First, let’s format the data.</p>
<div class="sourceCode" id="cb289"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb289-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb289-1" tabindex="-1"></a>ipd2a_reg_tab <span class="ot">&lt;-</span> </span>
<span id="cb289-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb289-2" tabindex="-1"></a>  <span class="do">### fixed effects </span></span>
<span id="cb289-3"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb289-3" tabindex="-1"></a>  nested_ipd2a_reg <span class="sc">%&gt;%</span></span>
<span id="cb289-4"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb289-4" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>rx, <span class="sc">-</span>n) <span class="sc">%&gt;%</span></span>
<span id="cb289-5"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb289-5" tabindex="-1"></a>  <span class="fu">unnest</span>(fx) <span class="sc">%&gt;%</span> <span class="co"># unnesting </span></span>
<span id="cb289-6"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb289-6" tabindex="-1"></a>  <span class="co"># keep key terms</span></span>
<span id="cb289-7"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb289-7" tabindex="-1"></a>  <span class="fu">filter</span>((Moderator <span class="sc">==</span> <span class="st">&quot;none&quot;</span> <span class="sc">&amp;</span> term <span class="sc">==</span> <span class="st">&quot;p_value&quot;</span>) <span class="sc">|</span></span>
<span id="cb289-8"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb289-8" tabindex="-1"></a>         (Moderator <span class="sc">!=</span> <span class="st">&quot;none&quot;</span> <span class="sc">&amp;</span> <span class="fu">grepl</span>(<span class="st">&quot;p_value:&quot;</span>, term) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">grepl</span>(<span class="st">&quot;p_value:study&quot;</span>, term))) <span class="sc">%&gt;%</span></span>
<span id="cb289-9"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb289-9" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">study =</span> <span class="st">&quot;Overall&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb289-10"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb289-10" tabindex="-1"></a>  <span class="do">### study specific effects </span></span>
<span id="cb289-11"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb289-11" tabindex="-1"></a>  <span class="fu">full_join</span>(</span>
<span id="cb289-12"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb289-12" tabindex="-1"></a>    nested_ipd2a_reg <span class="sc">%&gt;%</span></span>
<span id="cb289-13"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb289-13" tabindex="-1"></a>      <span class="fu">select</span>(<span class="sc">-</span>fx, <span class="sc">-</span>n) <span class="sc">%&gt;%</span></span>
<span id="cb289-14"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb289-14" tabindex="-1"></a>      <span class="fu">unnest</span>(rx) <span class="sc">%&gt;%</span> <span class="co"># unnesting </span></span>
<span id="cb289-15"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb289-15" tabindex="-1"></a>      <span class="fu">filter</span>((Moderator <span class="sc">==</span> <span class="st">&quot;none&quot;</span> <span class="sc">&amp;</span> term <span class="sc">==</span> <span class="st">&quot;p_value&quot;</span>) <span class="sc">|</span></span>
<span id="cb289-16"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb289-16" tabindex="-1"></a>             (Moderator <span class="sc">!=</span> <span class="st">&quot;none&quot;</span> <span class="sc">&amp;</span> <span class="fu">grepl</span>(<span class="st">&quot;p_value:&quot;</span>, term) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">grepl</span>(<span class="st">&quot;p_value:study&quot;</span>, term))) <span class="sc">%&gt;%</span></span>
<span id="cb289-17"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb289-17" tabindex="-1"></a>      <span class="fu">mutate</span>( )</span>
<span id="cb289-18"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb289-18" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb289-19"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb289-19" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(term)) <span class="sc">%&gt;%</span></span>
<span id="cb289-20"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb289-20" tabindex="-1"></a>  <span class="co"># reformatting: mark significance, prettify Trait, covariate, and moderator names</span></span>
<span id="cb289-21"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb289-21" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sig =</span> <span class="fu">ifelse</span>(<span class="fu">sign</span>(conf.low) <span class="sc">==</span> <span class="fu">sign</span>(conf.high), <span class="st">&quot;sig&quot;</span>, <span class="st">&quot;ns&quot;</span>),</span>
<span id="cb289-22"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb289-22" tabindex="-1"></a>         <span class="at">Trait =</span> <span class="fu">factor</span>(Trait, traits<span class="sc">$</span>short_name),</span>
<span id="cb289-23"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb289-23" tabindex="-1"></a>         <span class="at">Outcome =</span> <span class="fu">factor</span>(Outcome, outcomes<span class="sc">$</span>short_name, outcomes<span class="sc">$</span>long_name),</span>
<span id="cb289-24"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb289-24" tabindex="-1"></a>         <span class="at">Moderator =</span> <span class="fu">factor</span>(Moderator, <span class="fu">c</span>(moders<span class="sc">$</span>short_name, stdyModers<span class="sc">$</span>short_name),</span>
<span id="cb289-25"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb289-25" tabindex="-1"></a>                            <span class="fu">c</span>(moders<span class="sc">$</span>long_name, stdyModers<span class="sc">$</span>long_name)),</span>
<span id="cb289-26"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb289-26" tabindex="-1"></a>         <span class="at">Covariate =</span> <span class="fu">factor</span>(Covariate, covars<span class="sc">$</span>short_name, <span class="fu">str_wrap</span>(covars<span class="sc">$</span>long_name, <span class="dv">15</span>)),</span>
<span id="cb289-27"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb289-27" tabindex="-1"></a>         <span class="at">term =</span> <span class="fu">str_remove_all</span>(term, <span class="st">&quot;p_value:&quot;</span>),</span>
<span id="cb289-28"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb289-28" tabindex="-1"></a>         <span class="at">term =</span> <span class="fu">mapvalues</span>(term, <span class="fu">c</span>(<span class="st">&quot;scaleBFIMS&quot;</span>, <span class="st">&quot;scaleIPIPNEO&quot;</span>, <span class="st">&quot;scaleTDAM40&quot;</span>, <span class="st">&quot;countryTheNetherlands&quot;</span>)</span>
<span id="cb289-29"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb289-29" tabindex="-1"></a>                          , <span class="fu">c</span>(<span class="st">&quot;scaleBFI-S&quot;</span>, <span class="st">&quot;scaleIPIP NEO&quot;</span>, <span class="st">&quot;scaleTDA-40&quot;</span>, <span class="st">&quot;countryThe Netherlands&quot;</span>)),</span>
<span id="cb289-30"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb289-30" tabindex="-1"></a>         <span class="at">term2 =</span> <span class="fu">factor</span>(term, <span class="fu">c</span>(moders<span class="sc">$</span>short_term, stdyModers<span class="sc">$</span>short_term),</span>
<span id="cb289-31"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb289-31" tabindex="-1"></a>                       <span class="fu">c</span>(moders<span class="sc">$</span>long_term, stdyModers<span class="sc">$</span>long_term))) <span class="sc">%&gt;%</span></span>
<span id="cb289-32"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb289-32" tabindex="-1"></a>  <span class="co"># prettify the number format</span></span>
<span id="cb289-33"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb289-33" tabindex="-1"></a>  <span class="fu">mutate_at</span>(<span class="fu">vars</span>(estimate, conf.low, conf.high), </span>
<span id="cb289-34"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb289-34" tabindex="-1"></a>            <span class="sc">~</span><span class="fu">ifelse</span>(<span class="fu">abs</span>(.) <span class="sc">&lt;</span> .<span class="dv">001</span>, <span class="fu">sprintf</span>(<span class="st">&quot;%.3f&quot;</span>, .), <span class="fu">sprintf</span>(<span class="st">&quot;%.2f&quot;</span>, .))) <span class="sc">%&gt;%</span></span>
<span id="cb289-35"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb289-35" tabindex="-1"></a>  <span class="co"># combine the effects, bold significance, factor and label study-specfic effects </span></span>
<span id="cb289-36"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb289-36" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">est =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s&lt;br&gt;[%s, %s]&quot;</span>, estimate, conf.low, conf.high),</span>
<span id="cb289-37"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb289-37" tabindex="-1"></a>         <span class="at">est =</span> <span class="fu">ifelse</span>(sig <span class="sc">==</span> <span class="st">&quot;sig&quot;</span>, <span class="fu">sprintf</span>(<span class="st">&quot;&lt;strong&gt;%s&lt;/strong&gt;&quot;</span>, est), est),</span>
<span id="cb289-38"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb289-38" tabindex="-1"></a>  <span class="co"># mutate(est = sprintf(&quot;%s [%s, %s]&quot;, estimate, conf.low, conf.high),</span></span>
<span id="cb289-39"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb289-39" tabindex="-1"></a>  <span class="co">#        est = ifelse(sig == &quot;sig&quot;, sprintf(&quot;\\textbf{%s}&quot;, est), est),</span></span>
<span id="cb289-40"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb289-40" tabindex="-1"></a>         <span class="at">study =</span> <span class="fu">factor</span>(study, <span class="at">levels =</span> <span class="fu">c</span>(studies_long, <span class="st">&quot;Overall&quot;</span>),</span>
<span id="cb289-41"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb289-41" tabindex="-1"></a>                        <span class="at">labels =</span> <span class="fu">c</span>(studies_long, <span class="st">&quot;Overall&quot;</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb289-42"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb289-42" tabindex="-1"></a>  <span class="co"># reshaping: remove extra columns, arrange by key variables, and make wide</span></span>
<span id="cb289-43"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb289-43" tabindex="-1"></a>  <span class="fu">select</span>(type, Outcome, Trait, Moderator, Covariate, study, term2, est) <span class="sc">%&gt;%</span></span>
<span id="cb289-44"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb289-44" tabindex="-1"></a>  <span class="fu">arrange</span>(type, Outcome, Trait, Moderator, Covariate, study, term2) <span class="sc">%&gt;%</span></span>
<span id="cb289-45"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb289-45" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">&quot;Trait&quot;</span>, <span class="at">values_from =</span> <span class="st">&quot;est&quot;</span>)</span>
<span id="cb289-46"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb289-46" tabindex="-1"></a>  <span class="co"># filter(row_number() %in% c(9, 10))</span></span>
<span id="cb289-47"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb289-47" tabindex="-1"></a>  <span class="co"># spread(Trait, est)</span></span>
<span id="cb289-48"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb289-48" tabindex="-1"></a>ipd2a_reg_tab</span></code></pre></div>
<pre><code>## # A tibble: 242 × 11
##    type     Outcome              Moderator Covariate  study   term2       E         A         C         N         O        
##    &lt;chr&gt;    &lt;fct&gt;                &lt;fct&gt;     &lt;fct&gt;      &lt;fct&gt;   &lt;fct&gt;       &lt;list&gt;    &lt;list&gt;    &lt;list&gt;    &lt;list&gt;    &lt;list&gt;   
##  1 Bayesian Crystallized Ability None      Unadjusted EAS     Personality &lt;chr [1]&gt; &lt;chr [1]&gt; &lt;chr [1]&gt; &lt;chr [1]&gt; &lt;chr [1]&gt;
##  2 Bayesian Crystallized Ability None      Unadjusted GSOEP   Personality &lt;chr [1]&gt; &lt;chr [1]&gt; &lt;chr [1]&gt; &lt;chr [1]&gt; &lt;chr [1]&gt;
##  3 Bayesian Crystallized Ability None      Unadjusted HILDA   Personality &lt;chr [1]&gt; &lt;chr [1]&gt; &lt;chr [1]&gt; &lt;chr [1]&gt; &lt;chr [1]&gt;
##  4 Bayesian Crystallized Ability None      Unadjusted HRS     Personality &lt;chr [1]&gt; &lt;chr [1]&gt; &lt;chr [1]&gt; &lt;chr [1]&gt; &lt;chr [1]&gt;
##  5 Bayesian Crystallized Ability None      Unadjusted MAP     Personality &lt;chr [1]&gt; &lt;NULL&gt;    &lt;chr [1]&gt; &lt;chr [1]&gt; &lt;NULL&gt;   
##  6 Bayesian Crystallized Ability None      Unadjusted ROS     Personality &lt;chr [1]&gt; &lt;chr [1]&gt; &lt;chr [1]&gt; &lt;chr [1]&gt; &lt;chr [1]&gt;
##  7 Bayesian Crystallized Ability None      Unadjusted SATSA   Personality &lt;chr [1]&gt; &lt;chr [1]&gt; &lt;chr [1]&gt; &lt;chr [1]&gt; &lt;chr [1]&gt;
##  8 Bayesian Crystallized Ability None      Unadjusted Overall Personality &lt;chr [1]&gt; &lt;chr [1]&gt; &lt;chr [1]&gt; &lt;chr [1]&gt; &lt;chr [1]&gt;
##  9 Bayesian Crystallized Ability None      Unadjusted &lt;NA&gt;    Personality &lt;chr [2]&gt; &lt;NULL&gt;    &lt;NULL&gt;    &lt;chr [2]&gt; &lt;chr [1]&gt;
## 10 Bayesian Crystallized Ability None      Age        EAS     Personality &lt;chr [1]&gt; &lt;chr [1]&gt; &lt;chr [1]&gt; &lt;chr [1]&gt; &lt;chr [1]&gt;
## # ℹ 232 more rows</code></pre>
<div class="sourceCode" id="cb291"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb291-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb291-1" tabindex="-1"></a>ipd2a_res <span class="ot">&lt;-</span> nested_ipd2a_reg <span class="sc">%&gt;%</span></span>
<span id="cb291-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb291-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>rx, <span class="sc">-</span>n) <span class="sc">%&gt;%</span></span>
<span id="cb291-3"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb291-3" tabindex="-1"></a>  <span class="fu">unnest</span>(fx) <span class="sc">%&gt;%</span> <span class="co"># unnesting </span></span>
<span id="cb291-4"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb291-4" tabindex="-1"></a>  <span class="co"># keep key terms</span></span>
<span id="cb291-5"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb291-5" tabindex="-1"></a>  <span class="fu">filter</span>((Moderator <span class="sc">==</span> <span class="st">&quot;none&quot;</span> <span class="sc">&amp;</span> term <span class="sc">==</span> <span class="st">&quot;p_value&quot;</span>) <span class="sc">|</span></span>
<span id="cb291-6"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb291-6" tabindex="-1"></a>         (Moderator <span class="sc">!=</span> <span class="st">&quot;none&quot;</span> <span class="sc">&amp;</span> <span class="fu">grepl</span>(<span class="st">&quot;p_value:&quot;</span>, term) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">grepl</span>(<span class="st">&quot;p_value:study&quot;</span>, term))) <span class="sc">%&gt;%</span></span>
<span id="cb291-7"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb291-7" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">study =</span> <span class="st">&quot;Overall&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb291-8"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb291-8" tabindex="-1"></a>  <span class="fu">mutate_at</span>(<span class="fu">vars</span>(estimate, conf.low, conf.high), </span>
<span id="cb291-9"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb291-9" tabindex="-1"></a>            <span class="sc">~</span><span class="fu">ifelse</span>(<span class="fu">abs</span>(.) <span class="sc">&lt;</span> .<span class="dv">01</span>, <span class="fu">sprintf</span>(<span class="st">&quot;%.3f&quot;</span>, .), <span class="fu">sprintf</span>(<span class="st">&quot;%.2f&quot;</span>, .))) <span class="sc">%&gt;%</span></span>
<span id="cb291-10"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb291-10" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">est =</span> <span class="fu">sprintf</span>(<span class="st">&quot;</span><span class="sc">\\</span><span class="st">textit{b} = %s, 95</span><span class="sc">\\</span><span class="st">%% CI [%s, %s]&quot;</span>, estimate, conf.low, conf.high)) </span></code></pre></div>
<p>Now that we’ve formatted the values, we can group by moderators and save results as separate tables. Even though additional information could be included given that we have one outcome, we’ll stick with this split because it will make it easier for those using this tutorial who multiple traits, outcomes, covariates, and moderators.</p>
<div id="fixed-effects-2" class="section level6 hasAnchor" number="4.2.1.7.1.1">
<h6><span class="header-section-number">4.2.1.7.1.1</span> Fixed Effects<a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#fixed-effects-2" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<div class="sourceCode" id="cb292"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb292-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb292-1" tabindex="-1"></a><span class="do">## table function </span></span>
<span id="cb292-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb292-2" tabindex="-1"></a>ipd2a_fx_tab_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(d, type, moder){</span>
<span id="cb292-3"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb292-3" tabindex="-1"></a>  md <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(moder, moders<span class="sc">$</span>long_name, moders<span class="sc">$</span>short_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb292-4"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb292-4" tabindex="-1"></a>  rs <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Outcome) <span class="sc">%&gt;%</span> <span class="fu">tally</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb292-5"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb292-5" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">end =</span> <span class="fu">cumsum</span>(n), <span class="at">start =</span> <span class="fu">lag</span>(end) <span class="sc">+</span> <span class="dv">1</span>, <span class="at">start =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(start), <span class="dv">1</span>, start))</span>
<span id="cb292-6"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb292-6" tabindex="-1"></a>  cs <span class="ot">&lt;-</span> <span class="cf">if</span>(<span class="fu">length</span>(<span class="fu">unique</span>(d<span class="sc">$</span>term2)) <span class="sc">==</span> <span class="dv">1</span>)  <span class="fu">rep</span>(<span class="dv">1</span>,<span class="dv">6</span>) <span class="cf">else</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="fu">rep</span>(<span class="dv">1</span>,<span class="dv">5</span>)) </span>
<span id="cb292-7"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb292-7" tabindex="-1"></a>  <span class="fu">names</span>(cs) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot; &quot;</span>, <span class="fu">paste0</span>(<span class="st">&quot;&lt;strong&gt;&quot;</span>, traits<span class="sc">$</span>long_name, <span class="st">&quot;&lt;/strong&gt;&quot;</span>))</span>
<span id="cb292-8"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb292-8" tabindex="-1"></a>  cln <span class="ot">&lt;-</span> <span class="cf">if</span>(<span class="fu">length</span>(<span class="fu">unique</span>(d<span class="sc">$</span>term2)) <span class="sc">==</span> <span class="dv">1</span>) <span class="fu">c</span>(<span class="st">&quot;Covariates&quot;</span>, <span class="fu">rep</span>(<span class="st">&quot;&lt;em&gt;b&lt;/em&gt; [CI]&quot;</span>, <span class="dv">5</span>)) <span class="cf">else</span> <span class="fu">c</span>(<span class="st">&quot;Covariates&quot;</span>, <span class="st">&quot;Term&quot;</span>, <span class="fu">rep</span>(<span class="st">&quot;&lt;em&gt;b&lt;/em&gt; [CI]&quot;</span>, <span class="dv">5</span>))</span>
<span id="cb292-9"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb292-9" tabindex="-1"></a>  <span class="co"># cln &lt;- if(length(unique(d$term2)) == 1) c(&quot;Covariates&quot;, rep(&quot;\\textit{b} [CI]&quot;, 5)) else c(&quot;Covariates&quot;, &quot;Term&quot;, rep(&quot;\\textit{b} [CI]&quot;, 5))</span></span>
<span id="cb292-10"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb292-10" tabindex="-1"></a>  al <span class="ot">&lt;-</span> <span class="cf">if</span>(<span class="fu">length</span>(<span class="fu">unique</span>(d<span class="sc">$</span>term2)) <span class="sc">==</span> <span class="dv">1</span>) <span class="fu">c</span>(<span class="st">&quot;r&quot;</span>, <span class="fu">rep</span>(<span class="st">&quot;c&quot;</span>, <span class="dv">5</span>)) <span class="cf">else</span> <span class="fu">c</span>(<span class="st">&quot;r&quot;</span>, <span class="st">&quot;r&quot;</span>, <span class="fu">rep</span>(<span class="st">&quot;c&quot;</span>, <span class="dv">5</span>))</span>
<span id="cb292-11"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb292-11" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">length</span>(<span class="fu">unique</span>(d<span class="sc">$</span>term2)) <span class="sc">==</span> <span class="dv">1</span>) d <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>term2)</span>
<span id="cb292-12"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb292-12" tabindex="-1"></a>  cap <span class="ot">&lt;-</span> <span class="cf">if</span>(md <span class="sc">==</span> <span class="st">&quot;none&quot;</span>) <span class="st">&quot;2A Pooled One Stage Models with Dummy Codes: Overall Effects of Personality-Crystallized Domain Associations&quot;</span> <span class="cf">else</span> <span class="fu">sprintf</span>(<span class="st">&quot;2A Pooled One Stage Models with Dummy Codes: Overall %s Moderation of Personality-Crystallized Domain Associations&quot;</span>, md)</span>
<span id="cb292-13"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb292-13" tabindex="-1"></a>  tab <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span></span>
<span id="cb292-14"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb292-14" tabindex="-1"></a>    <span class="fu">arrange</span>(Outcome) <span class="sc">%&gt;%</span></span>
<span id="cb292-15"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb292-15" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>Outcome) <span class="sc">%&gt;%</span></span>
<span id="cb292-16"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb292-16" tabindex="-1"></a>    <span class="fu">kable</span>(., <span class="st">&quot;html&quot;</span></span>
<span id="cb292-17"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb292-17" tabindex="-1"></a>    <span class="co"># kable(., &quot;latex&quot;</span></span>
<span id="cb292-18"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb292-18" tabindex="-1"></a>          , <span class="at">booktabs =</span> T</span>
<span id="cb292-19"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb292-19" tabindex="-1"></a>          , <span class="at">escape =</span> F</span>
<span id="cb292-20"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb292-20" tabindex="-1"></a>          , <span class="at">col.names =</span> cln</span>
<span id="cb292-21"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb292-21" tabindex="-1"></a>          , <span class="at">align =</span> al</span>
<span id="cb292-22"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb292-22" tabindex="-1"></a>          , <span class="at">caption =</span> cap</span>
<span id="cb292-23"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb292-23" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb292-24"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb292-24" tabindex="-1"></a>    <span class="fu">kable_classic</span>(<span class="at">full_width =</span> F, <span class="at">html_font =</span> <span class="st">&quot;Times New Roman&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb292-25"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb292-25" tabindex="-1"></a>    <span class="co"># kable_styling(full_width = F, font_size = 7) %&gt;%</span></span>
<span id="cb292-26"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb292-26" tabindex="-1"></a>    <span class="fu">add_header_above</span>(cs, <span class="at">escape =</span> F) </span>
<span id="cb292-27"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb292-27" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(rs)) {</span>
<span id="cb292-28"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb292-28" tabindex="-1"></a>    tab <span class="ot">&lt;-</span> tab <span class="sc">%&gt;%</span> kableExtra<span class="sc">::</span><span class="fu">group_rows</span>(rs<span class="sc">$</span>Outcome[i], rs<span class="sc">$</span>start[i], rs<span class="sc">$</span>end[i])</span>
<span id="cb292-29"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb292-29" tabindex="-1"></a>  }</span>
<span id="cb292-30"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb292-30" tabindex="-1"></a>  <span class="fu">save_kable</span>(tab, <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/2a_ipd_dc/%s/tables/overall/%s.html&quot;</span></span>
<span id="cb292-31"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb292-31" tabindex="-1"></a>                                 , local_path, type, md))</span>
<span id="cb292-32"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb292-32" tabindex="-1"></a>  <span class="fu">return</span>(tab)</span>
<span id="cb292-33"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb292-33" tabindex="-1"></a>}</span>
<span id="cb292-34"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb292-34" tabindex="-1"></a></span>
<span id="cb292-35"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb292-35" tabindex="-1"></a>ipd2a_fx_tab <span class="ot">&lt;-</span> ipd2a_reg_tab <span class="sc">%&gt;%</span></span>
<span id="cb292-36"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb292-36" tabindex="-1"></a>  <span class="fu">filter</span>(study <span class="sc">==</span> <span class="st">&quot;Overall&quot;</span> <span class="sc">&amp;</span> <span class="sc">!</span>Moderator <span class="sc">%in%</span> stdyModers<span class="sc">$</span>long_name) <span class="sc">%&gt;%</span></span>
<span id="cb292-37"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb292-37" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>study) <span class="sc">%&gt;%</span></span>
<span id="cb292-38"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb292-38" tabindex="-1"></a>  <span class="fu">group_by</span>(type, Moderator) <span class="sc">%&gt;%</span></span>
<span id="cb292-39"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb292-39" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span></span>
<span id="cb292-40"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb292-40" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb292-41"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb292-41" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">tab =</span> <span class="fu">pmap</span>(<span class="fu">list</span>(data, type, Moderator), ipd2a_fx_tab_fun))</span>
<span id="cb292-42"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb292-42" tabindex="-1"></a>ipd2a_fx_tab</span></code></pre></div>
<pre><code>## # A tibble: 8 × 4
##   type        Moderator data             tab           
##   &lt;chr&gt;       &lt;fct&gt;     &lt;list&gt;           &lt;list&gt;        
## 1 Bayesian    None      &lt;tibble [5 × 8]&gt; &lt;kablExtr [1]&gt;
## 2 Bayesian    Age       &lt;tibble [2 × 8]&gt; &lt;kablExtr [1]&gt;
## 3 Bayesian    Gender    &lt;tibble [2 × 8]&gt; &lt;kablExtr [1]&gt;
## 4 Bayesian    Education &lt;tibble [2 × 8]&gt; &lt;kablExtr [1]&gt;
## 5 Frequentist None      &lt;tibble [5 × 8]&gt; &lt;kablExtr [1]&gt;
## 6 Frequentist Age       &lt;tibble [2 × 8]&gt; &lt;kablExtr [1]&gt;
## 7 Frequentist Gender    &lt;tibble [2 × 8]&gt; &lt;kablExtr [1]&gt;
## 8 Frequentist Education &lt;tibble [2 × 8]&gt; &lt;kablExtr [1]&gt;</code></pre>
<div class="sourceCode" id="cb294"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb294-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb294-1" tabindex="-1"></a><span class="co"># save(ipd2a_fx_tab, ipd2a_res, file = sprintf(&quot;%s/manuscript/results/ipd2a_fx_tab.RData&quot;, res_path))</span></span>
<span id="cb294-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb294-2" tabindex="-1"></a></span>
<span id="cb294-3"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb294-3" tabindex="-1"></a><span class="do">## Frequentist</span></span>
<span id="cb294-4"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb294-4" tabindex="-1"></a>(ipd2a_fx_tab <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Moderator <span class="sc">==</span> <span class="st">&quot;None&quot;</span> <span class="sc">&amp;</span> type <span class="sc">==</span> <span class="st">&quot;Frequentist&quot;</span>))<span class="sc">$</span>tab[[<span class="dv">1</span>]]</span></code></pre></div>
<table class=" lightable-classic" style="color: black; font-family: Times New Roman; width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-40">Table 4.1: </span>2A Pooled One Stage Models with Dummy Codes: Overall Effects of Personality-Crystallized Domain Associations
</caption>
<thead>
<tr>
<th style="empty-cells: hide;" colspan="1">
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>Extraversion</strong>
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>Agreeableness</strong>
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>Conscientiousness</strong>
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>Neuroticism</strong>
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>Openness to Experience</strong>
</div>
</th>
</tr>
<tr>
<th style="text-align:right;">
Covariates
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
</tr>
</thead>
<tbody>
<tr grouplength="5">
<td colspan="6" style="border-bottom: 0;">
<strong>Crystallized Ability</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Unadjusted
</td>
<td style="text-align:center;">
<strong>0.05<br>[0.02, 0.08]</strong>
</td>
<td style="text-align:center;">
-0.00<br>[-0.03, 0.03]
</td>
<td style="text-align:center;">
<strong>0.04<br>[0.02, 0.07]</strong>
</td>
<td style="text-align:center;">
<strong>-0.13<br>[-0.15, -0.11]</strong>
</td>
<td style="text-align:center;">
<strong>0.29<br>[0.25, 0.32]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Age
</td>
<td style="text-align:center;">
<strong>0.05<br>[0.02, 0.08]</strong>
</td>
<td style="text-align:center;">
0.01<br>[-0.02, 0.04]
</td>
<td style="text-align:center;">
<strong>0.04<br>[0.01, 0.07]</strong>
</td>
<td style="text-align:center;">
<strong>-0.13<br>[-0.16, -0.11]</strong>
</td>
<td style="text-align:center;">
<strong>0.30<br>[0.26, 0.33]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Gender
</td>
<td style="text-align:center;">
<strong>0.05<br>[0.02, 0.08]</strong>
</td>
<td style="text-align:center;">
0.01<br>[-0.02, 0.04]
</td>
<td style="text-align:center;">
<strong>0.04<br>[0.01, 0.07]</strong>
</td>
<td style="text-align:center;">
<strong>-0.13<br>[-0.15, -0.11]</strong>
</td>
<td style="text-align:center;">
<strong>0.29<br>[0.26, 0.33]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Education
</td>
<td style="text-align:center;">
0.02<br>[-0.01, 0.05]
</td>
<td style="text-align:center;">
-0.001<br>[-0.03, 0.03]
</td>
<td style="text-align:center;">
0.01<br>[-0.02, 0.04]
</td>
<td style="text-align:center;">
<strong>-0.07<br>[-0.09, -0.04]</strong>
</td>
<td style="text-align:center;">
<strong>0.17<br>[0.14, 0.21]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Fully Adjusted
</td>
<td style="text-align:center;">
0.02<br>[-0.01, 0.05]
</td>
<td style="text-align:center;">
-0.01<br>[-0.04, 0.02]
</td>
<td style="text-align:center;">
0.01<br>[-0.02, 0.04]
</td>
<td style="text-align:center;">
<strong>-0.07<br>[-0.09, -0.05]</strong>
</td>
<td style="text-align:center;">
<strong>0.17<br>[0.14, 0.21]</strong>
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb295"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb295-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb295-1" tabindex="-1"></a><span class="do">## bayesian</span></span>
<span id="cb295-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb295-2" tabindex="-1"></a>(ipd2a_fx_tab <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Moderator <span class="sc">==</span> <span class="st">&quot;None&quot;</span> <span class="sc">&amp;</span> type <span class="sc">==</span> <span class="st">&quot;Bayesian&quot;</span>))<span class="sc">$</span>tab[[<span class="dv">1</span>]]</span></code></pre></div>
<table class=" lightable-classic" style="color: black; font-family: Times New Roman; width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-40">Table 4.1: </span>2A Pooled One Stage Models with Dummy Codes: Overall Effects of Personality-Crystallized Domain Associations
</caption>
<thead>
<tr>
<th style="empty-cells: hide;" colspan="1">
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>Extraversion</strong>
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>Agreeableness</strong>
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>Conscientiousness</strong>
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>Neuroticism</strong>
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>Openness to Experience</strong>
</div>
</th>
</tr>
<tr>
<th style="text-align:right;">
Covariates
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
</tr>
</thead>
<tbody>
<tr grouplength="5">
<td colspan="6" style="border-bottom: 0;">
<strong>Crystallized Ability</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Unadjusted
</td>
<td style="text-align:center;">
<strong>0.05<br>[0.02, 0.08]</strong>
</td>
<td style="text-align:center;">
-0.00<br>[-0.03, 0.02]
</td>
<td style="text-align:center;">
<strong>0.04<br>[0.02, 0.06]</strong>
</td>
<td style="text-align:center;">
<strong>-0.13<br>[-0.15, -0.11]</strong>
</td>
<td style="text-align:center;">
<strong>0.29<br>[0.25, 0.32]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Age
</td>
<td style="text-align:center;">
<strong>0.05<br>[0.02, 0.08]</strong>
</td>
<td style="text-align:center;">
0.01<br>[-0.02, 0.04]
</td>
<td style="text-align:center;">
<strong>0.04<br>[0.01, 0.07]</strong>
</td>
<td style="text-align:center;">
<strong>-0.13<br>[-0.16, -0.11]</strong>
</td>
<td style="text-align:center;">
<strong>0.30<br>[0.26, 0.33]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Gender
</td>
<td style="text-align:center;">
<strong>0.05<br>[0.02, 0.08]</strong>
</td>
<td style="text-align:center;">
0.01<br>[-0.02, 0.04]
</td>
<td style="text-align:center;">
<strong>0.04<br>[0.01, 0.07]</strong>
</td>
<td style="text-align:center;">
<strong>-0.13<br>[-0.15, -0.11]</strong>
</td>
<td style="text-align:center;">
<strong>0.29<br>[0.26, 0.33]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Education
</td>
<td style="text-align:center;">
0.02<br>[-0.01, 0.05]
</td>
<td style="text-align:center;">
-0.00<br>[-0.03, 0.03]
</td>
<td style="text-align:center;">
0.01<br>[-0.02, 0.04]
</td>
<td style="text-align:center;">
<strong>-0.07<br>[-0.09, -0.04]</strong>
</td>
<td style="text-align:center;">
<strong>0.17<br>[0.14, 0.21]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Fully Adjusted
</td>
<td style="text-align:center;">
0.02<br>[-0.01, 0.05]
</td>
<td style="text-align:center;">
-0.01<br>[-0.04, 0.02]
</td>
<td style="text-align:center;">
0.01<br>[-0.02, 0.04]
</td>
<td style="text-align:center;">
<strong>-0.07<br>[-0.09, -0.05]</strong>
</td>
<td style="text-align:center;">
<strong>0.17<br>[0.14, 0.21]</strong>
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb296"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb296-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb296-1" tabindex="-1"></a>ipd2a_tab_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(d, type, cov){</span>
<span id="cb296-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb296-2" tabindex="-1"></a>  <span class="co"># long outcome name</span></span>
<span id="cb296-3"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb296-3" tabindex="-1"></a>  covar <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(cov, covars<span class="sc">$</span>long_name, covars<span class="sc">$</span>short_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb296-4"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb296-4" tabindex="-1"></a>  <span class="co"># getting row numbers for later grouping</span></span>
<span id="cb296-5"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb296-5" tabindex="-1"></a>  rs <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Moderator) <span class="sc">%&gt;%</span> <span class="fu">tally</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb296-6"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb296-6" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">end =</span> <span class="fu">cumsum</span>(n), <span class="at">start =</span> <span class="fu">lag</span>(end) <span class="sc">+</span> <span class="dv">1</span>, <span class="at">start =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(start), <span class="dv">1</span>, start))</span>
<span id="cb296-7"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb296-7" tabindex="-1"></a>  <span class="co"># number and name of columns for span columns </span></span>
<span id="cb296-8"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb296-8" tabindex="-1"></a>  cs <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">1</span>,<span class="dv">6</span>)</span>
<span id="cb296-9"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb296-9" tabindex="-1"></a>  <span class="fu">names</span>(cs) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot; &quot;</span>, <span class="fu">paste0</span>(<span class="st">&quot;&lt;strong&gt;&quot;</span>, traits<span class="sc">$</span>short_name, <span class="st">&quot;&lt;/strong&gt;&quot;</span>))</span>
<span id="cb296-10"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb296-10" tabindex="-1"></a>  <span class="co"># cln &lt;- if(length(unique(d$term2)) == 1) c(&quot;Covariate&quot;, rep(&quot;\\textit{b} [CI]&quot;, 5)) else c(&quot; &quot;, &quot;Term&quot;, rep(&quot;\\textit{b} [CI]&quot;, 5))</span></span>
<span id="cb296-11"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb296-11" tabindex="-1"></a>  cln <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Term&quot;</span>, <span class="fu">rep</span>(<span class="st">&quot;&lt;em&gt;b&lt;/em&gt; [CI]&quot;</span>, <span class="dv">5</span>))</span>
<span id="cb296-12"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb296-12" tabindex="-1"></a>  al <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;r&quot;</span>, <span class="fu">rep</span>(<span class="st">&quot;c&quot;</span>, <span class="dv">5</span>))</span>
<span id="cb296-13"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb296-13" tabindex="-1"></a>  <span class="co"># caption </span></span>
<span id="cb296-14"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb296-14" tabindex="-1"></a>  cap <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">&quot;2A Pooled One Stage Models with Dummy Codes: Fixed Effect Estimates of %s Personality-Crystallized Domain Associations&quot;</span>, cov)</span>
<span id="cb296-15"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb296-15" tabindex="-1"></a>  <span class="co"># kable the table</span></span>
<span id="cb296-16"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb296-16" tabindex="-1"></a>  tab <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span></span>
<span id="cb296-17"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb296-17" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>Moderator, <span class="sc">-</span>study) <span class="sc">%&gt;%</span></span>
<span id="cb296-18"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb296-18" tabindex="-1"></a>    <span class="fu">kable</span>(., <span class="st">&quot;html&quot;</span></span>
<span id="cb296-19"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb296-19" tabindex="-1"></a>    <span class="co"># kable(., &quot;latex&quot;</span></span>
<span id="cb296-20"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb296-20" tabindex="-1"></a>          , <span class="at">booktabs =</span> T</span>
<span id="cb296-21"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb296-21" tabindex="-1"></a>          , <span class="at">escape =</span> F</span>
<span id="cb296-22"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb296-22" tabindex="-1"></a>          , <span class="at">col.names =</span> cln</span>
<span id="cb296-23"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb296-23" tabindex="-1"></a>          , <span class="at">align =</span> al</span>
<span id="cb296-24"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb296-24" tabindex="-1"></a>          , <span class="at">caption =</span> cap</span>
<span id="cb296-25"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb296-25" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb296-26"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb296-26" tabindex="-1"></a>    <span class="fu">kable_classic</span>(<span class="at">full_width =</span> F, <span class="at">html_font =</span> <span class="st">&quot;Times New Roman&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb296-27"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb296-27" tabindex="-1"></a>    <span class="co"># kable_styling(full_width = F, font_size = 7) %&gt;%</span></span>
<span id="cb296-28"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb296-28" tabindex="-1"></a>    <span class="fu">add_header_above</span>(cs, <span class="at">escape =</span> F)</span>
<span id="cb296-29"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb296-29" tabindex="-1"></a>  <span class="co"># for loop to add grouped sections </span></span>
<span id="cb296-30"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb296-30" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(rs)){</span>
<span id="cb296-31"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb296-31" tabindex="-1"></a>    tab <span class="ot">&lt;-</span> tab <span class="sc">%&gt;%</span> </span>
<span id="cb296-32"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb296-32" tabindex="-1"></a>      kableExtra<span class="sc">::</span><span class="fu">group_rows</span>(rs<span class="sc">$</span>Moderator[i], rs<span class="sc">$</span>start[i], rs<span class="sc">$</span>end[i]) </span>
<span id="cb296-33"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb296-33" tabindex="-1"></a>  }</span>
<span id="cb296-34"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb296-34" tabindex="-1"></a>  <span class="co"># save the resulting html table</span></span>
<span id="cb296-35"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb296-35" tabindex="-1"></a>  <span class="fu">save_kable</span>(tab, <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/2a_ipd_dc/%s/tables/key terms/%s.html&quot;</span></span>
<span id="cb296-36"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb296-36" tabindex="-1"></a>                                 , local_path, type, covar))</span>
<span id="cb296-37"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb296-37" tabindex="-1"></a>  <span class="fu">return</span>(tab) <span class="co"># return the html table</span></span>
<span id="cb296-38"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb296-38" tabindex="-1"></a>}</span>
<span id="cb296-39"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb296-39" tabindex="-1"></a></span>
<span id="cb296-40"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb296-40" tabindex="-1"></a>ipd2a_fx_tab2 <span class="ot">&lt;-</span> ipd2a_reg_tab <span class="sc">%&gt;%</span></span>
<span id="cb296-41"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb296-41" tabindex="-1"></a>  <span class="fu">filter</span>(study <span class="sc">==</span> <span class="st">&quot;Overall&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb296-42"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb296-42" tabindex="-1"></a>  <span class="fu">arrange</span>(Moderator, term2) <span class="sc">%&gt;%</span></span>
<span id="cb296-43"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb296-43" tabindex="-1"></a>  <span class="fu">filter</span>(Covariate <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Unadjusted&quot;</span>, <span class="st">&quot;Fully Adjusted&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb296-44"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb296-44" tabindex="-1"></a>  <span class="fu">group_by</span>(Outcome, type, Covariate) <span class="sc">%&gt;%</span> </span>
<span id="cb296-45"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb296-45" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span></span>
<span id="cb296-46"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb296-46" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb296-47"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb296-47" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">tab =</span> <span class="fu">pmap</span>(<span class="fu">list</span>(data, type, Covariate), ipd2a_tab_fun))</span>
<span id="cb296-48"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb296-48" tabindex="-1"></a></span>
<span id="cb296-49"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb296-49" tabindex="-1"></a><span class="do">## Frequentist, no moderator</span></span>
<span id="cb296-50"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb296-50" tabindex="-1"></a>(ipd2a_fx_tab2 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(type <span class="sc">==</span> <span class="st">&quot;Frequentist&quot;</span> <span class="sc">&amp;</span> Covariate <span class="sc">==</span> <span class="st">&quot;Fully Adjusted&quot;</span>))<span class="sc">$</span>tab[[<span class="dv">1</span>]]</span></code></pre></div>
<table class=" lightable-classic" style="color: black; font-family: Times New Roman; width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-41">Table 4.2: </span>2A Pooled One Stage Models with Dummy Codes: Fixed Effect Estimates of Fully Adjusted Personality-Crystallized Domain Associations
</caption>
<thead>
<tr>
<th style="empty-cells: hide;" colspan="1">
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>E</strong>
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>A</strong>
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>C</strong>
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>N</strong>
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>O</strong>
</div>
</th>
</tr>
<tr>
<th style="text-align:right;">
Term
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
</tr>
</thead>
<tbody>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>None</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Personality
</td>
<td style="text-align:center;">
0.02<br>[-0.01, 0.05]
</td>
<td style="text-align:center;">
-0.01<br>[-0.04, 0.02]
</td>
<td style="text-align:center;">
0.01<br>[-0.02, 0.04]
</td>
<td style="text-align:center;">
<strong>-0.07<br>[-0.09, -0.05]</strong>
</td>
<td style="text-align:center;">
<strong>0.17<br>[0.14, 0.21]</strong>
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Age</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Age
</td>
<td style="text-align:center;">
-0.00<br>[-0.01, 0.00]
</td>
<td style="text-align:center;">
-0.000<br>[-0.00, 0.00]
</td>
<td style="text-align:center;">
-0.00<br>[-0.01, 0.001]
</td>
<td style="text-align:center;">
0.00<br>[-0.000, 0.01]
</td>
<td style="text-align:center;">
0.000<br>[-0.00, 0.01]
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Gender</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Gender (Male v Female)
</td>
<td style="text-align:center;">
<strong>0.06<br>[0.001, 0.12]</strong>
</td>
<td style="text-align:center;">
0.02<br>[-0.04, 0.08]
</td>
<td style="text-align:center;">
-0.00<br>[-0.06, 0.05]
</td>
<td style="text-align:center;">
-0.04<br>[-0.09, 0.01]
</td>
<td style="text-align:center;">
-0.01<br>[-0.08, 0.06]
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Education</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Education (Years)
</td>
<td style="text-align:center;">
-0.00<br>[-0.01, 0.01]
</td>
<td style="text-align:center;">
-0.00<br>[-0.02, 0.01]
</td>
<td style="text-align:center;">
0.01<br>[-0.001, 0.02]
</td>
<td style="text-align:center;">
-0.00<br>[-0.01, 0.01]
</td>
<td style="text-align:center;">
-0.00<br>[-0.02, 0.01]
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb297"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb297-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb297-1" tabindex="-1"></a><span class="do">## bayesian</span></span>
<span id="cb297-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb297-2" tabindex="-1"></a>(ipd2a_fx_tab2 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(type <span class="sc">==</span> <span class="st">&quot;Bayesian&quot;</span> <span class="sc">&amp;</span> Covariate <span class="sc">==</span> <span class="st">&quot;Fully Adjusted&quot;</span>))<span class="sc">$</span>tab[[<span class="dv">1</span>]]</span></code></pre></div>
<table class=" lightable-classic" style="color: black; font-family: Times New Roman; width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-41">Table 4.2: </span>2A Pooled One Stage Models with Dummy Codes: Fixed Effect Estimates of Fully Adjusted Personality-Crystallized Domain Associations
</caption>
<thead>
<tr>
<th style="empty-cells: hide;" colspan="1">
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>E</strong>
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>A</strong>
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>C</strong>
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>N</strong>
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>O</strong>
</div>
</th>
</tr>
<tr>
<th style="text-align:right;">
Term
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
</tr>
</thead>
<tbody>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>None</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Personality
</td>
<td style="text-align:center;">
0.02<br>[-0.01, 0.05]
</td>
<td style="text-align:center;">
-0.01<br>[-0.04, 0.02]
</td>
<td style="text-align:center;">
0.01<br>[-0.02, 0.04]
</td>
<td style="text-align:center;">
<strong>-0.07<br>[-0.09, -0.05]</strong>
</td>
<td style="text-align:center;">
<strong>0.17<br>[0.14, 0.21]</strong>
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Age</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Age
</td>
<td style="text-align:center;">
-0.00<br>[-0.01, 0.00]
</td>
<td style="text-align:center;">
-0.000<br>[-0.00, 0.00]
</td>
<td style="text-align:center;">
-0.00<br>[-0.01, 0.001]
</td>
<td style="text-align:center;">
0.00<br>[-0.001, 0.01]
</td>
<td style="text-align:center;">
0.000<br>[-0.00, 0.01]
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Gender</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Gender (Male v Female)
</td>
<td style="text-align:center;">
<strong>0.06<br>[0.00, 0.12]</strong>
</td>
<td style="text-align:center;">
0.02<br>[-0.04, 0.08]
</td>
<td style="text-align:center;">
-0.00<br>[-0.06, 0.05]
</td>
<td style="text-align:center;">
-0.04<br>[-0.09, 0.01]
</td>
<td style="text-align:center;">
-0.01<br>[-0.08, 0.07]
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Education</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Education (Years)
</td>
<td style="text-align:center;">
-0.00<br>[-0.01, 0.01]
</td>
<td style="text-align:center;">
-0.00<br>[-0.02, 0.01]
</td>
<td style="text-align:center;">
0.01<br>[-0.001, 0.02]
</td>
<td style="text-align:center;">
-0.00<br>[-0.01, 0.01]
</td>
<td style="text-align:center;">
-0.00<br>[-0.02, 0.01]
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb298"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb298-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb298-1" tabindex="-1"></a><span class="co"># save(ipd1a_fx_tab, ipd1a_fx_tab2, ipd1a_res, file = sprintf(&quot;%s/manuscript/results/ipd1b_fx_tab.RData&quot;, res_path))</span></span></code></pre></div>
</div>
<div id="study-specific-effects-3" class="section level6 hasAnchor" number="4.2.1.7.1.2">
<h6><span class="header-section-number">4.2.1.7.1.2</span> Study-Specific Effects<a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#study-specific-effects-3" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<div class="sourceCode" id="cb299"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb299-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb299-1" tabindex="-1"></a><span class="do">## table function </span></span>
<span id="cb299-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb299-2" tabindex="-1"></a>ipd2a_rx_tab_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(d, type, moder){</span>
<span id="cb299-3"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb299-3" tabindex="-1"></a>  md <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(moder, moders<span class="sc">$</span>long_name, moders<span class="sc">$</span>short_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb299-4"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb299-4" tabindex="-1"></a>  rs <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Outcome) <span class="sc">%&gt;%</span> <span class="fu">tally</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb299-5"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb299-5" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">end =</span> <span class="fu">cumsum</span>(n), <span class="at">start =</span> <span class="fu">lag</span>(end) <span class="sc">+</span> <span class="dv">1</span>, <span class="at">start =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(start), <span class="dv">1</span>, start))</span>
<span id="cb299-6"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb299-6" tabindex="-1"></a>  cs <span class="ot">&lt;-</span> <span class="cf">if</span>(<span class="fu">length</span>(<span class="fu">unique</span>(d<span class="sc">$</span>term2)) <span class="sc">==</span> <span class="dv">1</span>)  <span class="fu">c</span>(<span class="dv">2</span>, <span class="fu">rep</span>(<span class="dv">1</span>,<span class="dv">5</span>)) <span class="cf">else</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="fu">rep</span>(<span class="dv">1</span>,<span class="dv">5</span>)) </span>
<span id="cb299-7"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb299-7" tabindex="-1"></a>  <span class="fu">names</span>(cs) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot; &quot;</span>, traits<span class="sc">$</span>short_name)</span>
<span id="cb299-8"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb299-8" tabindex="-1"></a>  cln <span class="ot">&lt;-</span> <span class="cf">if</span>(<span class="fu">length</span>(<span class="fu">unique</span>(d<span class="sc">$</span>term2)) <span class="sc">==</span> <span class="dv">1</span>) <span class="fu">c</span>(<span class="st">&quot;Covariates&quot;</span>, <span class="st">&quot;Study&quot;</span>, <span class="fu">rep</span>(<span class="st">&quot;&lt;em&gt;b&lt;/em&gt; [CI]&quot;</span>, <span class="dv">5</span>)) <span class="cf">else</span> <span class="fu">c</span>(<span class="st">&quot;Covariates&quot;</span>, <span class="st">&quot;Study&quot;</span>, <span class="st">&quot;Term&quot;</span>, <span class="fu">rep</span>(<span class="st">&quot;&lt;em&gt;b&lt;/em&gt; [CI]&quot;</span>, <span class="dv">5</span>))</span>
<span id="cb299-9"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb299-9" tabindex="-1"></a>  <span class="co"># cln &lt;- if(length(unique(d$term2)) == 1) c(&quot;Covariates&quot;, rep(&quot;\\textit{b} [CI]&quot;, 5)) else c(&quot;Covariates&quot;, &quot;Term&quot;, rep(&quot;\\textit{b} [CI]&quot;, 5))</span></span>
<span id="cb299-10"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb299-10" tabindex="-1"></a>  al <span class="ot">&lt;-</span> <span class="cf">if</span>(<span class="fu">length</span>(<span class="fu">unique</span>(d<span class="sc">$</span>term2)) <span class="sc">==</span> <span class="dv">1</span>) <span class="fu">c</span>(<span class="st">&quot;r&quot;</span>, <span class="st">&quot;r&quot;</span>, <span class="fu">rep</span>(<span class="st">&quot;c&quot;</span>, <span class="dv">5</span>)) <span class="cf">else</span> <span class="fu">c</span>(<span class="st">&quot;r&quot;</span>, <span class="st">&quot;r&quot;</span>, <span class="st">&quot;r&quot;</span>, <span class="fu">rep</span>(<span class="st">&quot;c&quot;</span>, <span class="dv">5</span>))</span>
<span id="cb299-11"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb299-11" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">length</span>(<span class="fu">unique</span>(d<span class="sc">$</span>term2)) <span class="sc">==</span> <span class="dv">1</span>) d <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>term2)</span>
<span id="cb299-12"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb299-12" tabindex="-1"></a>  <span class="co"># caption </span></span>
<span id="cb299-13"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb299-13" tabindex="-1"></a>  cap <span class="ot">&lt;-</span> <span class="cf">if</span>(md <span class="sc">==</span> <span class="st">&quot;none&quot;</span>) <span class="st">&quot;2A Pooled One Stage Models with Dummy Codes: Overall Effects of Personality-Crystallized Domain Associations&quot;</span> <span class="cf">else</span> <span class="fu">sprintf</span>(<span class="st">&quot;2A Pooled One Stage Models with Dummy Codes: Overall %s Moderation of Personality-Crystallized Domain Associations&quot;</span>, moder)</span>
<span id="cb299-14"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb299-14" tabindex="-1"></a>  tab <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span></span>
<span id="cb299-15"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb299-15" tabindex="-1"></a>    <span class="fu">arrange</span>(Outcome) <span class="sc">%&gt;%</span></span>
<span id="cb299-16"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb299-16" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>Outcome) <span class="sc">%&gt;%</span></span>
<span id="cb299-17"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb299-17" tabindex="-1"></a>    <span class="fu">kable</span>(., <span class="st">&quot;html&quot;</span></span>
<span id="cb299-18"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb299-18" tabindex="-1"></a>    <span class="co"># kable(., &quot;latex&quot;</span></span>
<span id="cb299-19"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb299-19" tabindex="-1"></a>          , <span class="at">booktabs =</span> T</span>
<span id="cb299-20"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb299-20" tabindex="-1"></a>          , <span class="at">escape =</span> F</span>
<span id="cb299-21"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb299-21" tabindex="-1"></a>          , <span class="at">col.names =</span> cln</span>
<span id="cb299-22"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb299-22" tabindex="-1"></a>          , <span class="at">align =</span> al</span>
<span id="cb299-23"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb299-23" tabindex="-1"></a>          , <span class="at">caption =</span> cap</span>
<span id="cb299-24"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb299-24" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb299-25"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb299-25" tabindex="-1"></a>    <span class="fu">kable_classic</span>(<span class="at">full_width =</span> F, <span class="at">html_font =</span> <span class="st">&quot;Times New Roman&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb299-26"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb299-26" tabindex="-1"></a>    <span class="fu">collapse_rows</span>(<span class="dv">1</span>, <span class="st">&quot;top&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb299-27"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb299-27" tabindex="-1"></a>    <span class="fu">add_header_above</span>(cs) </span>
<span id="cb299-28"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb299-28" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(rs)) {</span>
<span id="cb299-29"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb299-29" tabindex="-1"></a>    tab <span class="ot">&lt;-</span> tab <span class="sc">%&gt;%</span> kableExtra<span class="sc">::</span><span class="fu">group_rows</span>(rs<span class="sc">$</span>Outcome[i], rs<span class="sc">$</span>start[i], rs<span class="sc">$</span>end[i])</span>
<span id="cb299-30"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb299-30" tabindex="-1"></a>  }</span>
<span id="cb299-31"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb299-31" tabindex="-1"></a>  <span class="fu">save_kable</span>(tab, <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/2a_ipd_dc/%s/tables/study-specific/%s.html&quot;</span></span>
<span id="cb299-32"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb299-32" tabindex="-1"></a>                                 , local_path, type, md))</span>
<span id="cb299-33"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb299-33" tabindex="-1"></a>  <span class="fu">return</span>(tab)</span>
<span id="cb299-34"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb299-34" tabindex="-1"></a>}</span>
<span id="cb299-35"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb299-35" tabindex="-1"></a></span>
<span id="cb299-36"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb299-36" tabindex="-1"></a>ipd2a_rx_tab <span class="ot">&lt;-</span> ipd2a_reg_tab <span class="sc">%&gt;%</span></span>
<span id="cb299-37"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb299-37" tabindex="-1"></a>  <span class="fu">filter</span>(study <span class="sc">!=</span> <span class="st">&quot;Overall&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb299-38"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb299-38" tabindex="-1"></a>  <span class="fu">arrange</span>(type, Outcome, Moderator, Covariate, study, term2) <span class="sc">%&gt;%</span></span>
<span id="cb299-39"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb299-39" tabindex="-1"></a>  <span class="fu">group_by</span>(type, Moderator) <span class="sc">%&gt;%</span></span>
<span id="cb299-40"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb299-40" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span></span>
<span id="cb299-41"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb299-41" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb299-42"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb299-42" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">tab =</span> <span class="fu">pmap</span>(<span class="fu">list</span>(data, type, Moderator), ipd2a_rx_tab_fun))</span>
<span id="cb299-43"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb299-43" tabindex="-1"></a>ipd2a_fx_tab</span></code></pre></div>
<pre><code>## # A tibble: 8 × 4
##   type        Moderator data             tab           
##   &lt;chr&gt;       &lt;fct&gt;     &lt;list&gt;           &lt;list&gt;        
## 1 Bayesian    None      &lt;tibble [5 × 8]&gt; &lt;kablExtr [1]&gt;
## 2 Bayesian    Age       &lt;tibble [2 × 8]&gt; &lt;kablExtr [1]&gt;
## 3 Bayesian    Gender    &lt;tibble [2 × 8]&gt; &lt;kablExtr [1]&gt;
## 4 Bayesian    Education &lt;tibble [2 × 8]&gt; &lt;kablExtr [1]&gt;
## 5 Frequentist None      &lt;tibble [5 × 8]&gt; &lt;kablExtr [1]&gt;
## 6 Frequentist Age       &lt;tibble [2 × 8]&gt; &lt;kablExtr [1]&gt;
## 7 Frequentist Gender    &lt;tibble [2 × 8]&gt; &lt;kablExtr [1]&gt;
## 8 Frequentist Education &lt;tibble [2 × 8]&gt; &lt;kablExtr [1]&gt;</code></pre>
<div class="sourceCode" id="cb301"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb301-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb301-1" tabindex="-1"></a>(ipd2a_rx_tab <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Moderator <span class="sc">==</span> <span class="st">&quot;None&quot;</span> <span class="sc">&amp;</span> type <span class="sc">==</span> <span class="st">&quot;Frequentist&quot;</span>))<span class="sc">$</span>tab[[<span class="dv">1</span>]]</span></code></pre></div>
<table class=" lightable-classic" style="color: black; font-family: Times New Roman; width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-42">Table 4.3: </span>2A Pooled One Stage Models with Dummy Codes: Overall Effects of Personality-Crystallized Domain Associations
</caption>
<thead>
<tr>
<th style="empty-cells: hide;" colspan="2">
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
E
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
A
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
C
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
N
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
O
</div>
</th>
</tr>
<tr>
<th style="text-align:right;">
Covariates
</th>
<th style="text-align:right;">
Study
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
</tr>
</thead>
<tbody>
<tr grouplength="45">
<td colspan="7" style="border-bottom: 0;">
<strong>Crystallized Ability</strong>
</td>
</tr>
<tr>
<td style="text-align:right;vertical-align: top !important;padding-left: 2em;" rowspan="9" indentlevel="1">
Unadjusted
</td>
<td style="text-align:right;">
EAS
</td>
<td style="text-align:center;">
<strong>0.13<br>[0.08, 0.19]</strong>
</td>
<td style="text-align:center;">
0.02<br>[-0.03, 0.07]
</td>
<td style="text-align:center;">
0.02<br>[-0.03, 0.07]
</td>
<td style="text-align:center;">
<strong>-0.13<br>[-0.18, -0.08]</strong>
</td>
<td style="text-align:center;">
<strong>0.37<br>[0.32, 0.42]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
GSOEP
</td>
<td style="text-align:center;">
<strong>0.08<br>[0.03, 0.13]</strong>
</td>
<td style="text-align:center;">
-0.02<br>[-0.07, 0.03]
</td>
<td style="text-align:center;">
-0.03<br>[-0.08, 0.03]
</td>
<td style="text-align:center;">
<strong>-0.06<br>[-0.11, -0.02]</strong>
</td>
<td style="text-align:center;">
<strong>0.10<br>[0.05, 0.14]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
HILDA
</td>
<td style="text-align:center;">
0.01<br>[-0.01, 0.04]
</td>
<td style="text-align:center;">
<strong>0.05<br>[0.02, 0.08]</strong>
</td>
<td style="text-align:center;">
<strong>0.07<br>[0.04, 0.09]</strong>
</td>
<td style="text-align:center;">
<strong>-0.15<br>[-0.18, -0.13]</strong>
</td>
<td style="text-align:center;">
<strong>0.27<br>[0.25, 0.30]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
HRS
</td>
<td style="text-align:center;">
-0.00<br>[-0.03, 0.02]
</td>
<td style="text-align:center;">
<strong>0.06<br>[0.03, 0.09]</strong>
</td>
<td style="text-align:center;">
<strong>0.16<br>[0.13, 0.19]</strong>
</td>
<td style="text-align:center;">
<strong>-0.07<br>[-0.10, -0.05]</strong>
</td>
<td style="text-align:center;">
<strong>0.21<br>[0.19, 0.24]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
LASA
</td>
<td style="text-align:center;">
NULL
</td>
<td style="text-align:center;">
NULL
</td>
<td style="text-align:center;">
NULL
</td>
<td style="text-align:center;">
<strong>-0.13<br>[-0.17, -0.09]</strong>
</td>
<td style="text-align:center;">
NULL
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
MAP
</td>
<td style="text-align:center;">
0.03<br>[-0.03, 0.09]
</td>
<td style="text-align:center;">
NULL
</td>
<td style="text-align:center;">
<strong>0.10<br>[0.02, 0.19]</strong>
</td>
<td style="text-align:center;">
<strong>-0.16<br>[-0.22, -0.09]</strong>
</td>
<td style="text-align:center;">
NULL
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
MARS
</td>
<td style="text-align:center;">
NULL
</td>
<td style="text-align:center;">
NULL
</td>
<td style="text-align:center;">
NULL
</td>
<td style="text-align:center;">
<strong>-0.28<br>[-0.39, -0.18]</strong>
</td>
<td style="text-align:center;">
NULL
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
ROS
</td>
<td style="text-align:center;">
-0.01<br>[-0.07, 0.06]
</td>
<td style="text-align:center;">
<strong>0.12<br>[0.04, 0.20]</strong>
</td>
<td style="text-align:center;">
<strong>0.13<br>[0.05, 0.21]</strong>
</td>
<td style="text-align:center;">
<strong>-0.09<br>[-0.15, -0.02]</strong>
</td>
<td style="text-align:center;">
<strong>0.18<br>[0.10, 0.27]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
SATSA
</td>
<td style="text-align:center;">
0.04<br>[-0.05, 0.14]
</td>
<td style="text-align:center;">
<strong>-0.23<br>[-0.35, -0.12]</strong>
</td>
<td style="text-align:center;">
<strong>-0.17<br>[-0.27, -0.07]</strong>
</td>
<td style="text-align:center;">
<strong>-0.09<br>[-0.19, -0.00]</strong>
</td>
<td style="text-align:center;">
<strong>0.44<br>[0.30, 0.58]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;vertical-align: top !important;padding-left: 2em;" rowspan="9" indentlevel="1">
Age
</td>
<td style="text-align:right;">
EAS
</td>
<td style="text-align:center;">
<strong>0.12<br>[0.03, 0.21]</strong>
</td>
<td style="text-align:center;">
<strong>0.09<br>[0.01, 0.18]</strong>
</td>
<td style="text-align:center;">
0.01<br>[-0.08, 0.09]
</td>
<td style="text-align:center;">
<strong>-0.13<br>[-0.21, -0.05]</strong>
</td>
<td style="text-align:center;">
<strong>0.42<br>[0.34, 0.51]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
GSOEP
</td>
<td style="text-align:center;">
<strong>0.08<br>[0.03, 0.13]</strong>
</td>
<td style="text-align:center;">
-0.02<br>[-0.07, 0.03]
</td>
<td style="text-align:center;">
-0.03<br>[-0.08, 0.02]
</td>
<td style="text-align:center;">
<strong>-0.06<br>[-0.11, -0.02]</strong>
</td>
<td style="text-align:center;">
<strong>0.10<br>[0.05, 0.14]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
HILDA
</td>
<td style="text-align:center;">
0.01<br>[-0.01, 0.04]
</td>
<td style="text-align:center;">
<strong>0.04<br>[0.01, 0.07]</strong>
</td>
<td style="text-align:center;">
<strong>0.07<br>[0.04, 0.09]</strong>
</td>
<td style="text-align:center;">
<strong>-0.16<br>[-0.19, -0.14]</strong>
</td>
<td style="text-align:center;">
<strong>0.28<br>[0.25, 0.30]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
HRS
</td>
<td style="text-align:center;">
-0.00<br>[-0.03, 0.02]
</td>
<td style="text-align:center;">
<strong>0.06<br>[0.03, 0.09]</strong>
</td>
<td style="text-align:center;">
<strong>0.16<br>[0.14, 0.19]</strong>
</td>
<td style="text-align:center;">
<strong>-0.08<br>[-0.10, -0.05]</strong>
</td>
<td style="text-align:center;">
<strong>0.22<br>[0.19, 0.24]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
LASA
</td>
<td style="text-align:center;">
NULL
</td>
<td style="text-align:center;">
NULL
</td>
<td style="text-align:center;">
NULL
</td>
<td style="text-align:center;">
<strong>-0.12<br>[-0.17, -0.08]</strong>
</td>
<td style="text-align:center;">
NULL
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
MAP
</td>
<td style="text-align:center;">
0.03<br>[-0.03, 0.09]
</td>
<td style="text-align:center;">
NULL
</td>
<td style="text-align:center;">
<strong>0.10<br>[0.02, 0.19]</strong>
</td>
<td style="text-align:center;">
<strong>-0.16<br>[-0.22, -0.09]</strong>
</td>
<td style="text-align:center;">
NULL
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
MARS
</td>
<td style="text-align:center;">
NULL
</td>
<td style="text-align:center;">
NULL
</td>
<td style="text-align:center;">
NULL
</td>
<td style="text-align:center;">
<strong>-0.28<br>[-0.38, -0.18]</strong>
</td>
<td style="text-align:center;">
NULL
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
ROS
</td>
<td style="text-align:center;">
-0.01<br>[-0.08, 0.06]
</td>
<td style="text-align:center;">
<strong>0.12<br>[0.04, 0.20]</strong>
</td>
<td style="text-align:center;">
<strong>0.13<br>[0.06, 0.21]</strong>
</td>
<td style="text-align:center;">
<strong>-0.09<br>[-0.16, -0.02]</strong>
</td>
<td style="text-align:center;">
<strong>0.19<br>[0.11, 0.27]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
SATSA
</td>
<td style="text-align:center;">
0.04<br>[-0.05, 0.14]
</td>
<td style="text-align:center;">
<strong>-0.23<br>[-0.35, -0.12]</strong>
</td>
<td style="text-align:center;">
<strong>-0.17<br>[-0.27, -0.07]</strong>
</td>
<td style="text-align:center;">
<strong>-0.09<br>[-0.18, -0.00]</strong>
</td>
<td style="text-align:center;">
<strong>0.45<br>[0.30, 0.59]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;vertical-align: top !important;padding-left: 2em;" rowspan="9" indentlevel="1">
Gender
</td>
<td style="text-align:right;">
EAS
</td>
<td style="text-align:center;">
<strong>0.12<br>[0.03, 0.21]</strong>
</td>
<td style="text-align:center;">
<strong>0.10<br>[0.01, 0.18]</strong>
</td>
<td style="text-align:center;">
0.01<br>[-0.08, 0.09]
</td>
<td style="text-align:center;">
<strong>-0.13<br>[-0.22, -0.05]</strong>
</td>
<td style="text-align:center;">
<strong>0.42<br>[0.34, 0.51]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
GSOEP
</td>
<td style="text-align:center;">
<strong>0.08<br>[0.03, 0.13]</strong>
</td>
<td style="text-align:center;">
-0.02<br>[-0.07, 0.03]
</td>
<td style="text-align:center;">
-0.03<br>[-0.08, 0.02]
</td>
<td style="text-align:center;">
<strong>-0.06<br>[-0.11, -0.02]</strong>
</td>
<td style="text-align:center;">
<strong>0.10<br>[0.05, 0.14]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
HILDA
</td>
<td style="text-align:center;">
0.01<br>[-0.02, 0.04]
</td>
<td style="text-align:center;">
<strong>0.05<br>[0.02, 0.08]</strong>
</td>
<td style="text-align:center;">
<strong>0.07<br>[0.04, 0.09]</strong>
</td>
<td style="text-align:center;">
<strong>-0.15<br>[-0.18, -0.13]</strong>
</td>
<td style="text-align:center;">
<strong>0.27<br>[0.25, 0.30]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
HRS
</td>
<td style="text-align:center;">
-0.00<br>[-0.03, 0.02]
</td>
<td style="text-align:center;">
<strong>0.06<br>[0.03, 0.09]</strong>
</td>
<td style="text-align:center;">
<strong>0.16<br>[0.13, 0.19]</strong>
</td>
<td style="text-align:center;">
<strong>-0.07<br>[-0.10, -0.05]</strong>
</td>
<td style="text-align:center;">
<strong>0.21<br>[0.19, 0.24]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
LASA
</td>
<td style="text-align:center;">
NULL
</td>
<td style="text-align:center;">
NULL
</td>
<td style="text-align:center;">
NULL
</td>
<td style="text-align:center;">
<strong>-0.13<br>[-0.17, -0.09]</strong>
</td>
<td style="text-align:center;">
NULL
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
MAP
</td>
<td style="text-align:center;">
0.03<br>[-0.03, 0.09]
</td>
<td style="text-align:center;">
NULL
</td>
<td style="text-align:center;">
<strong>0.10<br>[0.02, 0.19]</strong>
</td>
<td style="text-align:center;">
<strong>-0.16<br>[-0.22, -0.10]</strong>
</td>
<td style="text-align:center;">
NULL
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
MARS
</td>
<td style="text-align:center;">
NULL
</td>
<td style="text-align:center;">
NULL
</td>
<td style="text-align:center;">
NULL
</td>
<td style="text-align:center;">
<strong>-0.28<br>[-0.39, -0.18]</strong>
</td>
<td style="text-align:center;">
NULL
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
ROS
</td>
<td style="text-align:center;">
-0.01<br>[-0.08, 0.06]
</td>
<td style="text-align:center;">
<strong>0.12<br>[0.04, 0.20]</strong>
</td>
<td style="text-align:center;">
<strong>0.13<br>[0.06, 0.21]</strong>
</td>
<td style="text-align:center;">
<strong>-0.09<br>[-0.16, -0.02]</strong>
</td>
<td style="text-align:center;">
<strong>0.19<br>[0.11, 0.27]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
SATSA
</td>
<td style="text-align:center;">
0.05<br>[-0.05, 0.14]
</td>
<td style="text-align:center;">
<strong>-0.23<br>[-0.35, -0.12]</strong>
</td>
<td style="text-align:center;">
<strong>-0.17<br>[-0.27, -0.07]</strong>
</td>
<td style="text-align:center;">
<strong>-0.09<br>[-0.18, -0.00]</strong>
</td>
<td style="text-align:center;">
<strong>0.44<br>[0.30, 0.58]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;vertical-align: top !important;padding-left: 2em;" rowspan="9" indentlevel="1">
Education
</td>
<td style="text-align:right;">
EAS
</td>
<td style="text-align:center;">
0.07<br>[-0.01, 0.16]
</td>
<td style="text-align:center;">
0.05<br>[-0.03, 0.13]
</td>
<td style="text-align:center;">
-0.04<br>[-0.13, 0.04]
</td>
<td style="text-align:center;">
-0.06<br>[-0.14, 0.02]
</td>
<td style="text-align:center;">
<strong>0.19<br>[0.11, 0.27]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
GSOEP
</td>
<td style="text-align:center;">
<strong>0.09<br>[0.01, 0.17]</strong>
</td>
<td style="text-align:center;">
0.03<br>[-0.06, 0.12]
</td>
<td style="text-align:center;">
0.01<br>[-0.08, 0.10]
</td>
<td style="text-align:center;">
-0.03<br>[-0.10, 0.05]
</td>
<td style="text-align:center;">
0.06<br>[-0.02, 0.13]
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
HILDA
</td>
<td style="text-align:center;">
0.01<br>[-0.01, 0.04]
</td>
<td style="text-align:center;">
<strong>0.04<br>[0.01, 0.07]</strong>
</td>
<td style="text-align:center;">
<strong>0.03<br>[0.01, 0.06]</strong>
</td>
<td style="text-align:center;">
<strong>-0.14<br>[-0.16, -0.11]</strong>
</td>
<td style="text-align:center;">
<strong>0.19<br>[0.17, 0.22]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
HRS
</td>
<td style="text-align:center;">
<strong>-0.03<br>[-0.06, -0.01]</strong>
</td>
<td style="text-align:center;">
<strong>0.04<br>[0.01, 0.06]</strong>
</td>
<td style="text-align:center;">
<strong>0.09<br>[0.06, 0.11]</strong>
</td>
<td style="text-align:center;">
<strong>-0.02<br>[-0.04, -0.00]</strong>
</td>
<td style="text-align:center;">
<strong>0.10<br>[0.08, 0.13]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
LASA
</td>
<td style="text-align:center;">
NULL
</td>
<td style="text-align:center;">
NULL
</td>
<td style="text-align:center;">
NULL
</td>
<td style="text-align:center;">
<strong>-0.05<br>[-0.09, -0.01]</strong>
</td>
<td style="text-align:center;">
NULL
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
MAP
</td>
<td style="text-align:center;">
0.01<br>[-0.05, 0.07]
</td>
<td style="text-align:center;">
NULL
</td>
<td style="text-align:center;">
0.06<br>[-0.02, 0.14]
</td>
<td style="text-align:center;">
-0.03<br>[-0.09, 0.03]
</td>
<td style="text-align:center;">
NULL
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
MARS
</td>
<td style="text-align:center;">
NULL
</td>
<td style="text-align:center;">
NULL
</td>
<td style="text-align:center;">
NULL
</td>
<td style="text-align:center;">
<strong>-0.13<br>[-0.23, -0.03]</strong>
</td>
<td style="text-align:center;">
NULL
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
ROS
</td>
<td style="text-align:center;">
<strong>-0.08<br>[-0.14, -0.01]</strong>
</td>
<td style="text-align:center;">
0.03<br>[-0.04, 0.11]
</td>
<td style="text-align:center;">
<strong>0.08<br>[0.00, 0.15]</strong>
</td>
<td style="text-align:center;">
-0.01<br>[-0.07, 0.06]
</td>
<td style="text-align:center;">
-0.01<br>[-0.09, 0.07]
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
SATSA
</td>
<td style="text-align:center;">
0.02<br>[-0.07, 0.12]
</td>
<td style="text-align:center;">
<strong>-0.19<br>[-0.30, -0.08]</strong>
</td>
<td style="text-align:center;">
<strong>-0.14<br>[-0.24, -0.05]</strong>
</td>
<td style="text-align:center;">
-0.07<br>[-0.15, 0.02]
</td>
<td style="text-align:center;">
<strong>0.31<br>[0.17, 0.45]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;vertical-align: top !important;padding-left: 2em;" rowspan="9" indentlevel="1">
Fully Adjusted
</td>
<td style="text-align:right;">
EAS
</td>
<td style="text-align:center;">
0.07<br>[-0.01, 0.16]
</td>
<td style="text-align:center;">
0.05<br>[-0.03, 0.13]
</td>
<td style="text-align:center;">
-0.04<br>[-0.13, 0.04]
</td>
<td style="text-align:center;">
-0.06<br>[-0.14, 0.02]
</td>
<td style="text-align:center;">
<strong>0.19<br>[0.11, 0.27]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
GSOEP
</td>
<td style="text-align:center;">
<strong>0.08<br>[0.01, 0.16]</strong>
</td>
<td style="text-align:center;">
0.02<br>[-0.06, 0.11]
</td>
<td style="text-align:center;">
0.00<br>[-0.09, 0.10]
</td>
<td style="text-align:center;">
-0.03<br>[-0.10, 0.05]
</td>
<td style="text-align:center;">
0.06<br>[-0.01, 0.13]
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
HILDA
</td>
<td style="text-align:center;">
0.01<br>[-0.01, 0.03]
</td>
<td style="text-align:center;">
0.03<br>[-0.00, 0.05]
</td>
<td style="text-align:center;">
<strong>0.03<br>[0.00, 0.05]</strong>
</td>
<td style="text-align:center;">
<strong>-0.14<br>[-0.16, -0.11]</strong>
</td>
<td style="text-align:center;">
<strong>0.20<br>[0.17, 0.22]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
HRS
</td>
<td style="text-align:center;">
<strong>-0.03<br>[-0.06, -0.01]</strong>
</td>
<td style="text-align:center;">
<strong>0.03<br>[0.00, 0.06]</strong>
</td>
<td style="text-align:center;">
<strong>0.08<br>[0.06, 0.11]</strong>
</td>
<td style="text-align:center;">
<strong>-0.02<br>[-0.05, -0.00]</strong>
</td>
<td style="text-align:center;">
<strong>0.10<br>[0.08, 0.13]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
LASA
</td>
<td style="text-align:center;">
NULL
</td>
<td style="text-align:center;">
NULL
</td>
<td style="text-align:center;">
NULL
</td>
<td style="text-align:center;">
<strong>-0.05<br>[-0.09, -0.01]</strong>
</td>
<td style="text-align:center;">
NULL
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
MAP
</td>
<td style="text-align:center;">
0.01<br>[-0.05, 0.07]
</td>
<td style="text-align:center;">
NULL
</td>
<td style="text-align:center;">
0.06<br>[-0.02, 0.14]
</td>
<td style="text-align:center;">
-0.03<br>[-0.09, 0.03]
</td>
<td style="text-align:center;">
NULL
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
MARS
</td>
<td style="text-align:center;">
NULL
</td>
<td style="text-align:center;">
NULL
</td>
<td style="text-align:center;">
NULL
</td>
<td style="text-align:center;">
<strong>-0.13<br>[-0.23, -0.03]</strong>
</td>
<td style="text-align:center;">
NULL
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
ROS
</td>
<td style="text-align:center;">
<strong>-0.08<br>[-0.14, -0.01]</strong>
</td>
<td style="text-align:center;">
0.04<br>[-0.04, 0.11]
</td>
<td style="text-align:center;">
<strong>0.08<br>[0.01, 0.15]</strong>
</td>
<td style="text-align:center;">
-0.00<br>[-0.07, 0.06]
</td>
<td style="text-align:center;">
-0.01<br>[-0.08, 0.07]
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
SATSA
</td>
<td style="text-align:center;">
0.03<br>[-0.07, 0.12]
</td>
<td style="text-align:center;">
<strong>-0.20<br>[-0.31, -0.09]</strong>
</td>
<td style="text-align:center;">
<strong>-0.14<br>[-0.24, -0.05]</strong>
</td>
<td style="text-align:center;">
-0.07<br>[-0.16, 0.02]
</td>
<td style="text-align:center;">
<strong>0.31<br>[0.17, 0.45]</strong>
</td>
</tr>
</tbody>
</table>
</div>
<div id="heterogeneity-estimates-2" class="section level6 hasAnchor" number="4.2.1.7.1.3">
<h6><span class="header-section-number">4.2.1.7.1.3</span> Heterogeneity Estimates<a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#heterogeneity-estimates-2" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<p>This header is here to simply emphasize that this method does not provide heterogeneity estimates because it does not provide study-specific estimates, unlike Methods 2b, 3, and 4.</p>
</div>
<div id="all-model-terms-2" class="section level6 hasAnchor" number="4.2.1.7.1.4">
<h6><span class="header-section-number">4.2.1.7.1.4</span> All Model Terms<a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#all-model-terms-2" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<div class="sourceCode" id="cb302"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb302-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-1" tabindex="-1"></a>ipd2a_mod_tab <span class="ot">&lt;-</span> nested_ipd2a_reg <span class="sc">%&gt;%</span></span>
<span id="cb302-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>rx, <span class="sc">-</span>n) <span class="sc">%&gt;%</span></span>
<span id="cb302-3"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-3" tabindex="-1"></a>  <span class="fu">unnest</span>(fx) <span class="sc">%&gt;%</span></span>
<span id="cb302-4"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-4" tabindex="-1"></a>  <span class="co"># keep key terms </span></span>
<span id="cb302-5"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-5" tabindex="-1"></a>  <span class="co"># mark significance and prettify trait, outcome, and covariate names</span></span>
<span id="cb302-6"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-6" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sig =</span> <span class="fu">ifelse</span>(<span class="fu">sign</span>(conf.low) <span class="sc">==</span> <span class="fu">sign</span>(conf.high), <span class="st">&quot;sig&quot;</span>, <span class="st">&quot;ns&quot;</span>),</span>
<span id="cb302-7"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-7" tabindex="-1"></a>         <span class="at">Trait =</span> <span class="fu">factor</span>(Trait, traits<span class="sc">$</span>short_name),</span>
<span id="cb302-8"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-8" tabindex="-1"></a>         <span class="at">Outcome =</span> <span class="fu">factor</span>(Outcome, outcomes<span class="sc">$</span>short_name, outcomes<span class="sc">$</span>long_name),</span>
<span id="cb302-9"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-9" tabindex="-1"></a>         <span class="at">Moderator =</span> <span class="fu">factor</span>(Moderator, <span class="fu">c</span>(moders<span class="sc">$</span>short_name, stdyModers<span class="sc">$</span>short_name), <span class="fu">c</span>(moders<span class="sc">$</span>long_name, stdyModers<span class="sc">$</span>long_name)),</span>
<span id="cb302-10"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-10" tabindex="-1"></a>         <span class="at">Covariate =</span> <span class="fu">factor</span>(Covariate, covars<span class="sc">$</span>short_name, <span class="fu">str_wrap</span>(covars<span class="sc">$</span>long_name, <span class="dv">15</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb302-11"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-11" tabindex="-1"></a>  <span class="co"># format values as text, combine estimates and CI&#39;s, bold significance</span></span>
<span id="cb302-12"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-12" tabindex="-1"></a>  <span class="fu">mutate_at</span>(<span class="fu">vars</span>(estimate, conf.low, conf.high), </span>
<span id="cb302-13"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-13" tabindex="-1"></a>            <span class="sc">~</span><span class="fu">ifelse</span>(<span class="fu">abs</span>(.) <span class="sc">&lt;</span> .<span class="dv">01</span>, <span class="fu">sprintf</span>(<span class="st">&quot;%.3f&quot;</span>, .), <span class="fu">sprintf</span>(<span class="st">&quot;%.2f&quot;</span>, .))) <span class="sc">%&gt;%</span></span>
<span id="cb302-14"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-14" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">est =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s&lt;br&gt;[%s, %s]&quot;</span>, estimate, conf.low, conf.high),</span>
<span id="cb302-15"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-15" tabindex="-1"></a>         <span class="at">est =</span> <span class="fu">ifelse</span>(sig <span class="sc">==</span> <span class="st">&quot;sig&quot;</span>, <span class="fu">sprintf</span>(<span class="st">&quot;&lt;strong&gt;%s&lt;/strong&gt;&quot;</span>, est), est)) <span class="sc">%&gt;%</span></span>
<span id="cb302-16"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-16" tabindex="-1"></a>  <span class="co"># mutate(est = sprintf(&quot;%s [%s, %s]&quot;, estimate, conf.low, conf.high),</span></span>
<span id="cb302-17"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-17" tabindex="-1"></a>  <span class="co"># est = ifelse(sig == &quot;sig&quot;, sprintf(&quot;\\textbf{%s}&quot;, est), est)) %&gt;%</span></span>
<span id="cb302-18"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-18" tabindex="-1"></a>  <span class="co"># final reshaping, remove extra columns, arrange values, and change to wide format</span></span>
<span id="cb302-19"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-19" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>estimate, <span class="sc">-</span>conf.low, <span class="sc">-</span>conf.high, <span class="sc">-</span>sig) <span class="sc">%&gt;%</span></span>
<span id="cb302-20"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-20" tabindex="-1"></a>  <span class="fu">arrange</span>(type, Outcome, Trait, Moderator, Covariate, term) <span class="sc">%&gt;%</span></span>
<span id="cb302-21"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-21" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">&quot;Trait&quot;</span>, <span class="at">values_from =</span> <span class="st">&quot;est&quot;</span>) </span>
<span id="cb302-22"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-22" tabindex="-1"></a></span>
<span id="cb302-23"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-23" tabindex="-1"></a>ipd2a_mod_tab_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(d, type, out, moder, cov){</span>
<span id="cb302-24"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-24" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(type, out, moder, cov))</span>
<span id="cb302-25"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-25" tabindex="-1"></a>  md <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(moder, moders<span class="sc">$</span>long_name, moders<span class="sc">$</span>short_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb302-26"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-26" tabindex="-1"></a>  o <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(out, outcomes<span class="sc">$</span>long_name, outcomes<span class="sc">$</span>short_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb302-27"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-27" tabindex="-1"></a>  cv <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(cov, covars<span class="sc">$</span>long_name, covars<span class="sc">$</span>short_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb302-28"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-28" tabindex="-1"></a>  cs <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">1</span>,<span class="dv">6</span>)</span>
<span id="cb302-29"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-29" tabindex="-1"></a>  <span class="fu">names</span>(cs) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot; &quot;</span>, <span class="fu">paste0</span>(<span class="st">&quot;&lt;strong&gt;&quot;</span>, traits<span class="sc">$</span>long_name, <span class="st">&quot;&lt;/strong&gt;&quot;</span>))</span>
<span id="cb302-30"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-30" tabindex="-1"></a>  <span class="co"># cln &lt;- if(length(unique(d$term2)) == 1) c(&quot;Covariate&quot;, rep(&quot;\\textit{b} [CI]&quot;, 5)) else c(&quot; &quot;, &quot;Term&quot;, rep(&quot;\\textit{b} [CI]&quot;, 5))</span></span>
<span id="cb302-31"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-31" tabindex="-1"></a>  cln <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Term&quot;</span>, <span class="fu">rep</span>(<span class="st">&quot;&lt;em&gt;b&lt;/em&gt; [CI]&quot;</span>, <span class="dv">5</span>))</span>
<span id="cb302-32"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-32" tabindex="-1"></a>  al <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;r&quot;</span>, <span class="fu">rep</span>(<span class="st">&quot;c&quot;</span>, <span class="dv">5</span>))</span>
<span id="cb302-33"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-33" tabindex="-1"></a>  <span class="co"># caption </span></span>
<span id="cb302-34"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-34" tabindex="-1"></a>  cap <span class="ot">&lt;-</span> <span class="cf">if</span>(md <span class="sc">==</span> <span class="st">&quot;none&quot;</span>) <span class="st">&quot;2A Pooled One Stage Models with Dummy Codes: All Model Estimates of Fixed Effect Personality-Crystallized Domain Associations&quot;</span> <span class="cf">else</span> <span class="fu">sprintf</span>(<span class="st">&quot;2A Pooled One Stage Models with Dummy Codes: All Model Estimates of Fixed Effect %s Moderation of Personality-Crystallized Domain Associations&quot;</span>, md)</span>
<span id="cb302-35"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-35" tabindex="-1"></a>  </span>
<span id="cb302-36"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-36" tabindex="-1"></a>  <span class="co"># kable the table</span></span>
<span id="cb302-37"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-37" tabindex="-1"></a>  tab <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span></span>
<span id="cb302-38"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-38" tabindex="-1"></a>    <span class="fu">arrange</span>(term) <span class="sc">%&gt;%</span></span>
<span id="cb302-39"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-39" tabindex="-1"></a>    <span class="fu">kable</span>(., <span class="st">&quot;html&quot;</span></span>
<span id="cb302-40"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-40" tabindex="-1"></a>    <span class="co"># kable(., &quot;latex&quot;</span></span>
<span id="cb302-41"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-41" tabindex="-1"></a>          , <span class="at">booktabs =</span> T</span>
<span id="cb302-42"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-42" tabindex="-1"></a>          , <span class="at">escape =</span> F</span>
<span id="cb302-43"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-43" tabindex="-1"></a>          , <span class="at">col.names =</span> cln</span>
<span id="cb302-44"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-44" tabindex="-1"></a>          , <span class="at">align =</span> al</span>
<span id="cb302-45"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-45" tabindex="-1"></a>          , <span class="at">caption =</span> cap</span>
<span id="cb302-46"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-46" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb302-47"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-47" tabindex="-1"></a>    <span class="fu">kable_classic</span>(<span class="at">full_width =</span> F, <span class="at">html_font =</span> <span class="st">&quot;Times New Roman&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb302-48"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-48" tabindex="-1"></a>    <span class="co"># kable_styling(full_width = F, font_size = 7) %&gt;%</span></span>
<span id="cb302-49"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-49" tabindex="-1"></a>    <span class="fu">add_header_above</span>(cs, <span class="at">escape =</span> F)</span>
<span id="cb302-50"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-50" tabindex="-1"></a>  <span class="co"># save the resulting html table</span></span>
<span id="cb302-51"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-51" tabindex="-1"></a>  <span class="fu">save_kable</span>(tab, <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/2a_ipd_dc/%s/tables/all terms/%s-%s-%s.html&quot;</span></span>
<span id="cb302-52"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-52" tabindex="-1"></a>                                 , local_path, type, o, md, cv))</span>
<span id="cb302-53"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-53" tabindex="-1"></a>  <span class="fu">return</span>(tab) <span class="co"># return the html table</span></span>
<span id="cb302-54"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-54" tabindex="-1"></a>}</span>
<span id="cb302-55"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-55" tabindex="-1"></a></span>
<span id="cb302-56"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-56" tabindex="-1"></a>ipd2a_mod_tab <span class="ot">&lt;-</span> ipd2a_mod_tab <span class="sc">%&gt;%</span></span>
<span id="cb302-57"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-57" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>Moderator <span class="sc">%in%</span> stdyModers<span class="sc">$</span>long_name) <span class="sc">%&gt;%</span></span>
<span id="cb302-58"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-58" tabindex="-1"></a>  <span class="fu">group_by</span>(type, Outcome, Moderator, Covariate) <span class="sc">%&gt;%</span></span>
<span id="cb302-59"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-59" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span></span>
<span id="cb302-60"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-60" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb302-61"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb302-61" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">tab =</span> <span class="fu">pmap</span>(<span class="fu">list</span>(data, type, Outcome, Moderator, Covariate), ipd2a_mod_tab_fun))</span></code></pre></div>
<pre><code>## [1] &quot;Bayesian Crystallized Ability None Unadjusted&quot;
## [1] &quot;Bayesian Crystallized Ability None Age&quot;
## [1] &quot;Bayesian Crystallized Ability None Gender&quot;
## [1] &quot;Bayesian Crystallized Ability None Education&quot;
## [1] &quot;Bayesian Crystallized Ability None Fully Adjusted&quot;
## [1] &quot;Bayesian Crystallized Ability Age Unadjusted&quot;
## [1] &quot;Bayesian Crystallized Ability Age Fully Adjusted&quot;
## [1] &quot;Bayesian Crystallized Ability Gender Unadjusted&quot;
## [1] &quot;Bayesian Crystallized Ability Gender Fully Adjusted&quot;
## [1] &quot;Bayesian Crystallized Ability Education Unadjusted&quot;
## [1] &quot;Bayesian Crystallized Ability Education Fully Adjusted&quot;
## [1] &quot;Frequentist Crystallized Ability None Unadjusted&quot;
## [1] &quot;Frequentist Crystallized Ability None Age&quot;
## [1] &quot;Frequentist Crystallized Ability None Gender&quot;
## [1] &quot;Frequentist Crystallized Ability None Education&quot;
## [1] &quot;Frequentist Crystallized Ability None Fully Adjusted&quot;
## [1] &quot;Frequentist Crystallized Ability Age Unadjusted&quot;
## [1] &quot;Frequentist Crystallized Ability Age Fully Adjusted&quot;
## [1] &quot;Frequentist Crystallized Ability Gender Unadjusted&quot;
## [1] &quot;Frequentist Crystallized Ability Gender Fully Adjusted&quot;
## [1] &quot;Frequentist Crystallized Ability Education Unadjusted&quot;
## [1] &quot;Frequentist Crystallized Ability Education Fully Adjusted&quot;</code></pre>
</div>
</div>
<div id="figures-2" class="section level5 hasAnchor" number="4.2.1.7.2">
<h5><span class="header-section-number">4.2.1.7.2</span> Figures<a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#figures-2" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div id="overall-forest-2" class="section level6 hasAnchor" number="4.2.1.7.2.1">
<h6><span class="header-section-number">4.2.1.7.2.1</span> Overall Forest<a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#overall-forest-2" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<div class="sourceCode" id="cb304"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb304-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-1" tabindex="-1"></a>ipd2a_fx_plot_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(df, mod, type, cov){</span>
<span id="cb304-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-2" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(mod, type, cov))</span>
<span id="cb304-3"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-3" tabindex="-1"></a>  m <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(mod, moders<span class="sc">$</span>short_name, moders<span class="sc">$</span>long_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb304-4"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-4" tabindex="-1"></a>  cv <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(cov, covars<span class="sc">$</span>short_name, covars<span class="sc">$</span>long_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb304-5"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-5" tabindex="-1"></a>  d <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">max</span>(<span class="fu">abs</span>(<span class="fu">min</span>(df<span class="sc">$</span>estimate)), <span class="fu">abs</span>(<span class="fu">max</span>(df<span class="sc">$</span>estimate))), <span class="dv">3</span>)</span>
<span id="cb304-6"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-6" tabindex="-1"></a>  lim <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span><span class="sc">-</span>d<span class="sc">-</span>(d<span class="sc">/</span><span class="fl">2.5</span>), <span class="dv">0</span><span class="sc">+</span>d<span class="sc">+</span>(d<span class="sc">/</span><span class="fl">2.5</span>))</span>
<span id="cb304-7"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-7" tabindex="-1"></a>  brk <span class="ot">&lt;-</span> <span class="cf">if</span>(d <span class="sc">&gt;</span> .<span class="dv">01</span>) <span class="fu">round</span>(<span class="fu">c</span>(<span class="dv">0</span><span class="sc">-</span>d<span class="sc">-</span>(d<span class="sc">/</span><span class="dv">5</span>), <span class="dv">0</span>, <span class="dv">0</span><span class="sc">+</span>d<span class="sc">+</span>(d<span class="sc">/</span><span class="dv">5</span>)),<span class="dv">2</span>) <span class="cf">else</span> <span class="fu">round</span>(<span class="fu">c</span>(<span class="dv">0</span><span class="sc">-</span>d<span class="sc">-</span>(d<span class="sc">/</span><span class="dv">5</span>), <span class="dv">0</span>, <span class="dv">0</span><span class="sc">+</span>d<span class="sc">+</span>(d<span class="sc">/</span><span class="dv">5</span>)),<span class="dv">3</span>) </span>
<span id="cb304-8"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-8" tabindex="-1"></a>  <span class="co"># lim_high &lt;- lim[2]*4</span></span>
<span id="cb304-9"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-9" tabindex="-1"></a>  lab <span class="ot">&lt;-</span> <span class="fu">str_replace</span>(brk, <span class="st">&quot;^0.&quot;</span>, <span class="st">&quot;.&quot;</span>)</span>
<span id="cb304-10"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-10" tabindex="-1"></a>  shapes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">16</span>, <span class="dv">17</span>, <span class="dv">18</span>)[<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(<span class="fu">unique</span>(df<span class="sc">$</span>term))]</span>
<span id="cb304-11"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-11" tabindex="-1"></a>  lt <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">&quot;solid&quot;</span>, <span class="fu">length</span>(<span class="fu">unique</span>(df<span class="sc">$</span>term)))</span>
<span id="cb304-12"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-12" tabindex="-1"></a>  titl <span class="ot">&lt;-</span> <span class="cf">if</span>(mod <span class="sc">==</span> <span class="st">&quot;none&quot;</span>){<span class="cn">NULL</span>} <span class="cf">else</span> {<span class="fu">sprintf</span>(<span class="st">&quot;%s Moderation of Personality-Outcome Associations&quot;</span>, m)}</span>
<span id="cb304-13"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-13" tabindex="-1"></a>  titl <span class="ot">&lt;-</span> <span class="cf">if</span>(<span class="sc">!</span>cov <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;none&quot;</span>, <span class="st">&quot;all&quot;</span>)) <span class="fu">paste</span>(cv, <span class="st">&quot;Adjusted&quot;</span>, titl, <span class="at">collapse =</span> <span class="st">&quot; &quot;</span>) <span class="cf">else</span> <span class="fu">paste</span>(cv, titl, <span class="at">collapse =</span> <span class="st">&quot; &quot;</span>)</span>
<span id="cb304-14"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-14" tabindex="-1"></a>  leg <span class="ot">&lt;-</span> <span class="cf">if</span>(<span class="fu">length</span>(<span class="fu">unique</span>(df<span class="sc">$</span>term)) <span class="sc">&gt;</span> <span class="dv">1</span>){<span class="st">&quot;bottom&quot;</span>} <span class="cf">else</span> {<span class="st">&quot;none&quot;</span>}</span>
<span id="cb304-15"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-15" tabindex="-1"></a>  p <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb304-16"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-16" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">conf.low =</span> <span class="fu">ifelse</span>(conf.low <span class="sc">&lt;</span> lim[<span class="dv">1</span>], lim[<span class="dv">1</span>], conf.low),</span>
<span id="cb304-17"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-17" tabindex="-1"></a>           <span class="at">conf.high =</span> <span class="fu">ifelse</span>(conf.high <span class="sc">&gt;</span> lim[<span class="dv">2</span>], lim[<span class="dv">2</span>], conf.high)) <span class="sc">%&gt;%</span> </span>
<span id="cb304-18"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-18" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Outcome, <span class="at">y =</span> estimate)) <span class="sc">+</span></span>
<span id="cb304-19"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-19" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> lim, <span class="at">breaks =</span> brk, <span class="at">labels =</span> lab) <span class="sc">+</span> </span>
<span id="cb304-20"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-20" tabindex="-1"></a>    <span class="fu">scale_size_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="fl">1.8</span>, <span class="fl">1.3</span>)) <span class="sc">+</span></span>
<span id="cb304-21"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-21" tabindex="-1"></a>    <span class="fu">scale_shape_manual</span>(<span class="at">values =</span> shapes) <span class="sc">+</span></span>
<span id="cb304-22"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-22" tabindex="-1"></a>    <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;blue&quot;</span>, <span class="st">&quot;black&quot;</span>)) <span class="sc">+</span></span>
<span id="cb304-23"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-23" tabindex="-1"></a>    <span class="fu">scale_linetype_manual</span>(<span class="at">values =</span> lt) <span class="sc">+</span></span>
<span id="cb304-24"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-24" tabindex="-1"></a>    <span class="fu">geom_hline</span>(<span class="fu">aes</span>(<span class="at">yintercept =</span> <span class="dv">0</span>), <span class="at">size =</span> .<span class="dv">25</span>, <span class="at">color =</span> <span class="st">&quot;gray50&quot;</span>) <span class="sc">+</span></span>
<span id="cb304-25"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-25" tabindex="-1"></a>    <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> conf.low, <span class="at">ymax =</span> conf.high, <span class="at">linetype =</span> term)</span>
<span id="cb304-26"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-26" tabindex="-1"></a>                  , <span class="at">width =</span> <span class="dv">0</span></span>
<span id="cb304-27"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-27" tabindex="-1"></a>                  , <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> .<span class="dv">9</span>)) <span class="sc">+</span> </span>
<span id="cb304-28"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-28" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> sig, <span class="at">size =</span> sig, <span class="at">shape =</span> term)</span>
<span id="cb304-29"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-29" tabindex="-1"></a>                  , <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> .<span class="dv">9</span>)) <span class="sc">+</span></span>
<span id="cb304-30"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-30" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span></span>
<span id="cb304-31"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-31" tabindex="-1"></a>         , <span class="at">y =</span> <span class="st">&quot;Estimate (POMP)&quot;</span></span>
<span id="cb304-32"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-32" tabindex="-1"></a>         , <span class="at">title =</span> titl</span>
<span id="cb304-33"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-33" tabindex="-1"></a>         , <span class="at">subtitle =</span> <span class="st">&quot;Method 2A: Pooled Regression Using Dummy Codes&quot;</span>) <span class="sc">+</span></span>
<span id="cb304-34"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-34" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">shape =</span> <span class="st">&quot;none&quot;</span>, <span class="at">color =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb304-35"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-35" tabindex="-1"></a>    <span class="fu">facet_grid</span>(<span class="sc">~</span>Trait, <span class="at">scales =</span> <span class="st">&quot;free_y&quot;</span>, <span class="at">space =</span> <span class="st">&quot;free&quot;</span>) <span class="sc">+</span></span>
<span id="cb304-36"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-36" tabindex="-1"></a>    <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb304-37"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-37" tabindex="-1"></a>    <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb304-38"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-38" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> leg,</span>
<span id="cb304-39"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-39" tabindex="-1"></a>          <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">1.2</span>), <span class="at">hjust =</span> .<span class="dv">5</span>)</span>
<span id="cb304-40"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-40" tabindex="-1"></a>            , <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">1.1</span>), <span class="at">hjust =</span> .<span class="dv">5</span>),</span>
<span id="cb304-41"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-41" tabindex="-1"></a>          <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;white&quot;</span>),</span>
<span id="cb304-42"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-42" tabindex="-1"></a>          <span class="at">strip.background =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb304-43"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-43" tabindex="-1"></a>          <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">1.4</span>)),</span>
<span id="cb304-44"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-44" tabindex="-1"></a>          <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>),</span>
<span id="cb304-45"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-45" tabindex="-1"></a>          <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="fu">rel</span>(<span class="dv">1</span>)))</span>
<span id="cb304-46"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-46" tabindex="-1"></a>  ht <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(df<span class="sc">$</span>Outcome)); ht2 <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(df<span class="sc">$</span>term))</span>
<span id="cb304-47"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-47" tabindex="-1"></a>  local_path <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(df<span class="sc">$</span>Trait))</span>
<span id="cb304-48"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-48" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/2a_ipd_dc/%s/figures/overall forest/%s_%s_fixed.png&quot;</span>, local_path, type, mod, cov), <span class="at">width =</span> local_path<span class="sc">*</span><span class="dv">2</span>, <span class="at">height =</span> ht<span class="sc">+</span>ht2)</span>
<span id="cb304-49"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-49" tabindex="-1"></a><span class="fu">rm</span>(p)</span>
<span id="cb304-50"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-50" tabindex="-1"></a><span class="fu">gc</span>()</span>
<span id="cb304-51"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-51" tabindex="-1"></a><span class="fu">return</span>(T)</span>
<span id="cb304-52"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-52" tabindex="-1"></a>}</span>
<span id="cb304-53"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-53" tabindex="-1"></a></span>
<span id="cb304-54"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-54" tabindex="-1"></a>nested_ipd2a_reg <span class="sc">%&gt;%</span></span>
<span id="cb304-55"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-55" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>Moderator <span class="sc">%in%</span> stdyModers<span class="sc">$</span>short_name) <span class="sc">%&gt;%</span></span>
<span id="cb304-56"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-56" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>rx) <span class="sc">%&gt;%</span></span>
<span id="cb304-57"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-57" tabindex="-1"></a>  <span class="fu">unnest</span>(fx) <span class="sc">%&gt;%</span></span>
<span id="cb304-58"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-58" tabindex="-1"></a>    <span class="fu">filter</span>((Moderator <span class="sc">==</span> <span class="st">&quot;none&quot;</span> <span class="sc">&amp;</span> term <span class="sc">==</span> <span class="st">&quot;p_value&quot;</span>)<span class="sc">|</span></span>
<span id="cb304-59"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-59" tabindex="-1"></a>          (Moderator <span class="sc">!=</span> <span class="st">&quot;none&quot;</span> <span class="sc">&amp;</span> <span class="fu">grepl</span>(<span class="st">&quot;^p_value:&quot;</span>, term) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">grepl</span>(<span class="st">&quot;study&quot;</span>, term))) <span class="sc">%&gt;%</span></span>
<span id="cb304-60"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-60" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">sig =</span> <span class="fu">ifelse</span>(<span class="fu">sign</span>(conf.low) <span class="sc">==</span> <span class="fu">sign</span>(conf.high), <span class="st">&quot;sig&quot;</span>, <span class="st">&quot;ns&quot;</span>),</span>
<span id="cb304-61"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-61" tabindex="-1"></a>           <span class="at">sig =</span> <span class="fu">factor</span>(sig, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;sig&quot;</span>,<span class="st">&quot;ns&quot;</span>)),</span>
<span id="cb304-62"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-62" tabindex="-1"></a>           <span class="at">Trait =</span> <span class="fu">factor</span>(Trait, <span class="at">levels =</span> traits<span class="sc">$</span>short_name),</span>
<span id="cb304-63"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-63" tabindex="-1"></a>           <span class="at">Outcome =</span> <span class="fu">factor</span>(Outcome, <span class="at">levels =</span> outcomes<span class="sc">$</span>short_name, <span class="at">labels =</span> <span class="fu">str_wrap</span>(outcomes<span class="sc">$</span>long_name, <span class="dv">15</span>)),</span>
<span id="cb304-64"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-64" tabindex="-1"></a>           <span class="at">Outcome =</span> forcats<span class="sc">::</span><span class="fu">fct_rev</span>(Outcome))  <span class="sc">%&gt;%</span></span>
<span id="cb304-65"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-65" tabindex="-1"></a>  <span class="fu">group_by</span>(type, Moderator, Covariate) <span class="sc">%&gt;%</span></span>
<span id="cb304-66"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-66" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span></span>
<span id="cb304-67"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-67" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb304-68"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb304-68" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">pmap</span>(<span class="fu">list</span>(data, Moderator, type, Covariate), <span class="fu">possibly</span>(ipd2a_fx_plot_fun, <span class="cn">NA_real_</span>)))</span></code></pre></div>
</div>
<div id="study-specific-forest" class="section level6 hasAnchor" number="4.2.1.7.2.2">
<h6><span class="header-section-number">4.2.1.7.2.2</span> Study-Specific Forest<a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#study-specific-forest" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<div class="sourceCode" id="cb305"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb305-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-1" tabindex="-1"></a>ipd2a_rx_plot_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(df, outcome, mod, type, cov, trait){</span>
<span id="cb305-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-2" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(outcome, mod))</span>
<span id="cb305-3"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-3" tabindex="-1"></a>  trt <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(trait, traits<span class="sc">$</span>short_name, traits<span class="sc">$</span>long_name)</span>
<span id="cb305-4"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-4" tabindex="-1"></a>  m <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(mod, moders<span class="sc">$</span>short_name, moders<span class="sc">$</span>long_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb305-5"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-5" tabindex="-1"></a>  d <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">max</span>(<span class="fu">abs</span>(<span class="fu">min</span>(df<span class="sc">$</span>estimate)), <span class="fu">abs</span>(<span class="fu">max</span>(df<span class="sc">$</span>estimate))), <span class="dv">3</span>)</span>
<span id="cb305-6"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-6" tabindex="-1"></a>  <span class="co"># stds &lt;- unique(df$study)</span></span>
<span id="cb305-7"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-7" tabindex="-1"></a>  lim <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span><span class="sc">-</span>d<span class="sc">-</span>(d<span class="sc">/</span><span class="fl">2.5</span>), <span class="dv">0</span><span class="sc">+</span>d<span class="sc">+</span>(d<span class="sc">/</span><span class="fl">2.5</span>))</span>
<span id="cb305-8"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-8" tabindex="-1"></a>  brk <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">c</span>(<span class="dv">0</span><span class="sc">-</span>d<span class="sc">-</span>(d<span class="sc">/</span><span class="dv">5</span>), <span class="dv">0</span>, <span class="dv">0</span><span class="sc">+</span>d<span class="sc">+</span>(d<span class="sc">/</span><span class="dv">5</span>)),<span class="dv">2</span>)</span>
<span id="cb305-9"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-9" tabindex="-1"></a>  lab <span class="ot">&lt;-</span> <span class="fu">str_remove</span>(<span class="fu">round</span>(<span class="fu">c</span>(<span class="dv">0</span><span class="sc">-</span>d<span class="sc">-</span>(d<span class="sc">/</span><span class="dv">5</span>), <span class="dv">0</span>, <span class="dv">0</span><span class="sc">+</span>d<span class="sc">+</span>(d<span class="sc">/</span><span class="dv">5</span>)),<span class="dv">2</span>), <span class="st">&quot;^0&quot;</span>)</span>
<span id="cb305-10"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-10" tabindex="-1"></a>  shapes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">16</span>, <span class="dv">17</span>, <span class="dv">18</span>)[<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(<span class="fu">unique</span>(df<span class="sc">$</span>term))]</span>
<span id="cb305-11"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-11" tabindex="-1"></a>  lt <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">&quot;solid&quot;</span>, <span class="fu">length</span>(<span class="fu">unique</span>(df<span class="sc">$</span>term)))</span>
<span id="cb305-12"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-12" tabindex="-1"></a>  titl <span class="ot">&lt;-</span> <span class="cf">if</span>(mod <span class="sc">==</span> <span class="st">&quot;none&quot;</span>){trt} <span class="cf">else</span> {<span class="fu">sprintf</span>(<span class="st">&quot;%s x %s&quot;</span>, trt, m)}</span>
<span id="cb305-13"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-13" tabindex="-1"></a>  leg <span class="ot">&lt;-</span> <span class="cf">if</span>(<span class="fu">length</span>(<span class="fu">unique</span>(df<span class="sc">$</span>term)) <span class="sc">&gt;</span> <span class="dv">1</span>){<span class="st">&quot;bottom&quot;</span>} <span class="cf">else</span> {<span class="st">&quot;none&quot;</span>}</span>
<span id="cb305-14"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-14" tabindex="-1"></a>  df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">full_join</span>(<span class="fu">tibble</span>(<span class="at">study =</span> <span class="st">&quot; &quot;</span>, <span class="at">estimate =</span> <span class="cn">NA</span>, <span class="at">n =</span> <span class="cn">NA</span>))</span>
<span id="cb305-15"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-15" tabindex="-1"></a>  df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(estimate)</span>
<span id="cb305-16"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-16" tabindex="-1"></a>  stds <span class="ot">&lt;-</span> df<span class="sc">$</span>study[<span class="sc">!</span>df<span class="sc">$</span>study <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;  Overall&quot;</span>, <span class="st">&quot; &quot;</span>)]</span>
<span id="cb305-17"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-17" tabindex="-1"></a>  df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb305-18"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-18" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">study =</span> <span class="fu">factor</span>(study, <span class="fu">rev</span>(<span class="fu">c</span>(<span class="st">&quot; &quot;</span>, stds, <span class="st">&quot;  Overall&quot;</span>)))</span>
<span id="cb305-19"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-19" tabindex="-1"></a>           <span class="co"># , conf.low = ifelse(conf.low &lt; lim[1], lim[1], conf.low)</span></span>
<span id="cb305-20"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-20" tabindex="-1"></a>           <span class="co"># , conf.high = ifelse(conf.high &gt; lim[2], lim[2], conf.high)</span></span>
<span id="cb305-21"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-21" tabindex="-1"></a>           , <span class="at">lb =</span> <span class="fu">ifelse</span>(conf.low <span class="sc">&lt;</span> lim[<span class="dv">1</span>], <span class="st">&quot;lower&quot;</span>, <span class="st">&quot;no&quot;</span>)</span>
<span id="cb305-22"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-22" tabindex="-1"></a>           , <span class="at">ub =</span> <span class="fu">ifelse</span>(conf.high <span class="sc">&gt;</span> lim[<span class="dv">2</span>], <span class="st">&quot;upper&quot;</span>, <span class="st">&quot;no&quot;</span>)</span>
<span id="cb305-23"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-23" tabindex="-1"></a>           , <span class="at">conf.low2 =</span> <span class="fu">ifelse</span>(conf.low <span class="sc">&lt;</span> lim[<span class="dv">1</span>], lim[<span class="dv">1</span>], conf.low)</span>
<span id="cb305-24"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-24" tabindex="-1"></a>           , <span class="at">conf.high2 =</span> <span class="fu">ifelse</span>(conf.high <span class="sc">&gt;</span> lim[<span class="dv">2</span>], lim[<span class="dv">2</span>], conf.high)</span>
<span id="cb305-25"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-25" tabindex="-1"></a>           <span class="co"># , study = factor(study, levels = str_remove_all(c(&quot;Overall&quot;, studies_long), &quot;-&quot;), labels = c(&quot;Overall&quot;, studies_long))</span></span>
<span id="cb305-26"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-26" tabindex="-1"></a>           <span class="co"># Trait = factor(Trait, levels = traits$short_name, labels = traits$long_name),</span></span>
<span id="cb305-27"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-27" tabindex="-1"></a>           , <span class="at">type =</span> <span class="fu">ifelse</span>(study <span class="sc">==</span> <span class="st">&quot;  Overall&quot;</span>, <span class="st">&quot;fixed&quot;</span>, <span class="st">&quot;random&quot;</span>))</span>
<span id="cb305-28"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-28" tabindex="-1"></a>  p1 <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb305-29"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-29" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> study, <span class="at">y =</span> estimate)) <span class="sc">+</span> </span>
<span id="cb305-30"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-30" tabindex="-1"></a>    <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> conf.low, <span class="at">ymax =</span> conf.high)</span>
<span id="cb305-31"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-31" tabindex="-1"></a>                  , <span class="at">position =</span> <span class="st">&quot;dodge&quot;</span></span>
<span id="cb305-32"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-32" tabindex="-1"></a>                  , <span class="at">width =</span> .<span class="dv">2</span>) <span class="sc">+</span> </span>
<span id="cb305-33"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-33" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">shape =</span> term, <span class="at">size =</span> term)) <span class="sc">+</span> </span>
<span id="cb305-34"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-34" tabindex="-1"></a>    <span class="fu">geom_segment</span>(<span class="at">data =</span> df <span class="sc">%&gt;%</span> <span class="fu">filter</span>(lb <span class="sc">==</span> <span class="st">&quot;lower&quot;</span>)</span>
<span id="cb305-35"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-35" tabindex="-1"></a>                 , <span class="fu">aes</span>(<span class="at">y =</span> conf.high2, <span class="at">yend =</span> conf.low2, <span class="at">xend =</span> study)</span>
<span id="cb305-36"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-36" tabindex="-1"></a>                 , <span class="at">arrow =</span> <span class="fu">arrow</span>(<span class="at">type =</span> <span class="st">&quot;closed&quot;</span>, <span class="at">length =</span> <span class="fu">unit</span>(<span class="fl">0.1</span>, <span class="st">&quot;cm&quot;</span>))) <span class="sc">+</span></span>
<span id="cb305-37"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-37" tabindex="-1"></a>    <span class="fu">geom_segment</span>(<span class="at">data =</span> df <span class="sc">%&gt;%</span> <span class="fu">filter</span>(ub <span class="sc">==</span> <span class="st">&quot;upper&quot;</span>)</span>
<span id="cb305-38"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-38" tabindex="-1"></a>                 , <span class="fu">aes</span>(<span class="at">y =</span> conf.low2, <span class="at">yend =</span> conf.high2, <span class="at">xend =</span> study)</span>
<span id="cb305-39"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-39" tabindex="-1"></a>                 , <span class="at">arrow =</span> <span class="fu">arrow</span>(<span class="at">type =</span> <span class="st">&quot;closed&quot;</span>, <span class="at">length =</span> <span class="fu">unit</span>(<span class="fl">0.1</span>, <span class="st">&quot;cm&quot;</span>))) <span class="sc">+</span></span>
<span id="cb305-40"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-40" tabindex="-1"></a>    <span class="fu">geom_hline</span>(<span class="fu">aes</span>(<span class="at">yintercept =</span> <span class="dv">0</span>), <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>, <span class="at">size =</span> .<span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb305-41"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-41" tabindex="-1"></a>    <span class="fu">geom_vline</span>(<span class="fu">aes</span>(<span class="at">xintercept =</span> <span class="fl">1.5</span>)) <span class="sc">+</span></span>
<span id="cb305-42"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-42" tabindex="-1"></a>    <span class="fu">geom_vline</span>(<span class="fu">aes</span>(<span class="at">xintercept =</span> <span class="fu">length</span>(stds) <span class="sc">+</span> <span class="fl">1.5</span>)) <span class="sc">+</span></span>
<span id="cb305-43"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-43" tabindex="-1"></a>    <span class="fu">annotate</span>(<span class="st">&quot;rect&quot;</span>, <span class="at">xmin =</span> <span class="fu">length</span>(stds) <span class="sc">+</span> <span class="fl">1.6</span>, <span class="at">xmax =</span> <span class="cn">Inf</span>, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>, <span class="at">fill =</span> <span class="st">&quot;white&quot;</span>) <span class="sc">+</span></span>
<span id="cb305-44"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-44" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> lim, <span class="at">breaks =</span> brk, <span class="at">labels =</span> lab) <span class="sc">+</span> </span>
<span id="cb305-45"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-45" tabindex="-1"></a>    <span class="fu">scale_size_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">2</span>)) <span class="sc">+</span> </span>
<span id="cb305-46"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-46" tabindex="-1"></a>    <span class="fu">scale_shape_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">16</span>)) <span class="sc">+</span></span>
<span id="cb305-47"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-47" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span></span>
<span id="cb305-48"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-48" tabindex="-1"></a>         , <span class="at">y =</span> <span class="st">&quot;Estimate&quot;</span></span>
<span id="cb305-49"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-49" tabindex="-1"></a>         <span class="co"># , title = &quot;  &quot;</span></span>
<span id="cb305-50"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-50" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb305-51"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-51" tabindex="-1"></a>    <span class="fu">coord_flip</span>() <span class="sc">+</span> </span>
<span id="cb305-52"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-52" tabindex="-1"></a>    <span class="fu">theme_classic</span>() <span class="sc">+</span> </span>
<span id="cb305-53"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-53" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb305-54"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-54" tabindex="-1"></a>          , <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb305-55"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-55" tabindex="-1"></a>          , <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb305-56"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-56" tabindex="-1"></a>          , <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">hjust =</span> .<span class="dv">5</span>)</span>
<span id="cb305-57"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-57" tabindex="-1"></a>          , <span class="at">axis.ticks.y =</span> <span class="fu">element_blank</span>()</span>
<span id="cb305-58"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-58" tabindex="-1"></a>          , <span class="at">axis.line.y =</span> <span class="fu">element_blank</span>()</span>
<span id="cb305-59"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-59" tabindex="-1"></a>          , <span class="at">axis.line.x.top =</span> <span class="fu">element_line</span>(<span class="at">size =</span> <span class="dv">1</span>))</span>
<span id="cb305-60"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-60" tabindex="-1"></a>  </span>
<span id="cb305-61"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-61" tabindex="-1"></a>  d2 <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb305-62"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-62" tabindex="-1"></a>    <span class="fu">mutate_at</span>(<span class="fu">vars</span>(estimate, conf.low, conf.high)</span>
<span id="cb305-63"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-63" tabindex="-1"></a>              , <span class="sc">~</span><span class="fu">ifelse</span>(<span class="fu">abs</span>(.) <span class="sc">&lt;</span> .<span class="dv">01</span>, <span class="fu">sprintf</span>(<span class="st">&quot;%.3f&quot;</span>, .), <span class="fu">sprintf</span>(<span class="st">&quot;%.2f&quot;</span>, .))) <span class="sc">%&gt;%</span></span>
<span id="cb305-64"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-64" tabindex="-1"></a>    <span class="fu">mutate_at</span>(<span class="fu">vars</span>(estimate, conf.low, conf.high), <span class="sc">~</span><span class="fu">str_replace_all</span>(., <span class="st">&quot;^0.&quot;</span>, <span class="st">&quot;.&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb305-65"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-65" tabindex="-1"></a>    <span class="fu">mutate_at</span>(<span class="fu">vars</span>(estimate, conf.low, conf.high), <span class="sc">~</span><span class="fu">str_replace_all</span>(., <span class="st">&quot;^-0.&quot;</span>, <span class="st">&quot;-.&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb305-66"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-66" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">est =</span> <span class="fu">ifelse</span>(study <span class="sc">!=</span> <span class="st">&quot; &quot;</span>, <span class="fu">sprintf</span>(<span class="st">&quot;%s [%s, %s]      &quot;</span>, estimate, conf.low, conf.high), <span class="st">&quot;&quot;</span>)</span>
<span id="cb305-67"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-67" tabindex="-1"></a>           , <span class="at">n =</span> <span class="fu">as.character</span>(n)</span>
<span id="cb305-68"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-68" tabindex="-1"></a>           ) <span class="sc">%&gt;%</span></span>
<span id="cb305-69"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-69" tabindex="-1"></a>    <span class="fu">select</span>(study, n, est) <span class="sc">%&gt;%</span></span>
<span id="cb305-70"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-70" tabindex="-1"></a>    <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(n, est), <span class="at">names_to =</span> <span class="st">&quot;est&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;value&quot;</span>)</span>
<span id="cb305-71"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-71" tabindex="-1"></a>  p2 <span class="ot">&lt;-</span> d2 <span class="sc">%&gt;%</span></span>
<span id="cb305-72"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-72" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> study, <span class="at">y =</span> est)) <span class="sc">+</span></span>
<span id="cb305-73"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-73" tabindex="-1"></a>      <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> value), <span class="at">hjust =</span> .<span class="dv">5</span>, <span class="at">size =</span> <span class="fl">3.5</span>) <span class="sc">+</span> </span>
<span id="cb305-74"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-74" tabindex="-1"></a>      <span class="fu">annotate</span>(<span class="st">&quot;text&quot;</span>, <span class="at">label =</span> <span class="st">&quot;b [CI]&quot;</span>, <span class="at">x =</span> <span class="fu">length</span>(stds) <span class="sc">+</span> <span class="fl">1.75</span>, <span class="at">y =</span> <span class="st">&quot;est&quot;</span>, <span class="at">hjust =</span> .<span class="dv">5</span>, <span class="at">vjust =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb305-75"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-75" tabindex="-1"></a>      <span class="fu">annotate</span>(<span class="st">&quot;text&quot;</span>, <span class="at">label =</span> <span class="st">&quot;N&quot;</span>, <span class="at">x =</span> <span class="fu">length</span>(stds) <span class="sc">+</span> <span class="fl">1.75</span>, <span class="at">y =</span> <span class="st">&quot;n&quot;</span>, <span class="at">hjust =</span> .<span class="dv">5</span>, <span class="at">vjust =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb305-76"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-76" tabindex="-1"></a>      <span class="fu">geom_vline</span>(<span class="fu">aes</span>(<span class="at">xintercept =</span> <span class="fl">1.5</span>)) <span class="sc">+</span></span>
<span id="cb305-77"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-77" tabindex="-1"></a>      <span class="fu">geom_vline</span>(<span class="fu">aes</span>(<span class="at">xintercept =</span> <span class="fu">length</span>(stds) <span class="sc">+</span> <span class="fl">1.5</span>)) <span class="sc">+</span></span>
<span id="cb305-78"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-78" tabindex="-1"></a>      <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb305-79"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-79" tabindex="-1"></a>      <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb305-80"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-80" tabindex="-1"></a>      <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">hjust =</span> <span class="dv">0</span>)</span>
<span id="cb305-81"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-81" tabindex="-1"></a>            , <span class="at">axis.text =</span> <span class="fu">element_blank</span>()</span>
<span id="cb305-82"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-82" tabindex="-1"></a>            , <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>()</span>
<span id="cb305-83"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-83" tabindex="-1"></a>            , <span class="at">axis.title =</span> <span class="fu">element_blank</span>())</span>
<span id="cb305-84"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-84" tabindex="-1"></a>  </span>
<span id="cb305-85"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-85" tabindex="-1"></a>  my_theme <span class="ot">&lt;-</span> <span class="cf">function</span>(...) {</span>
<span id="cb305-86"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-86" tabindex="-1"></a>    <span class="fu">theme_classic</span>() <span class="sc">+</span> </span>
<span id="cb305-87"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-87" tabindex="-1"></a>      <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;italic&quot;</span>))</span>
<span id="cb305-88"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-88" tabindex="-1"></a>  }</span>
<span id="cb305-89"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-89" tabindex="-1"></a>  title_theme <span class="ot">&lt;-</span> <span class="fu">calc_element</span>(<span class="st">&quot;plot.title&quot;</span>, <span class="fu">my_theme</span>())</span>
<span id="cb305-90"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-90" tabindex="-1"></a>  ttl <span class="ot">&lt;-</span> <span class="fu">ggdraw</span>() <span class="sc">+</span> </span>
<span id="cb305-91"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-91" tabindex="-1"></a>      <span class="fu">draw_label</span>(</span>
<span id="cb305-92"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-92" tabindex="-1"></a>          titl,</span>
<span id="cb305-93"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-93" tabindex="-1"></a>          <span class="at">fontfamily =</span> title_theme<span class="sc">$</span>family,</span>
<span id="cb305-94"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-94" tabindex="-1"></a>          <span class="at">fontface =</span> title_theme<span class="sc">$</span>face,</span>
<span id="cb305-95"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-95" tabindex="-1"></a>          <span class="at">size =</span> title_theme<span class="sc">$</span>size <span class="sc">-</span> <span class="dv">2</span></span>
<span id="cb305-96"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-96" tabindex="-1"></a>      )</span>
<span id="cb305-97"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-97" tabindex="-1"></a></span>
<span id="cb305-98"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-98" tabindex="-1"></a>  p3 <span class="ot">&lt;-</span> cowplot<span class="sc">::</span><span class="fu">plot_grid</span>(p1, p2</span>
<span id="cb305-99"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-99" tabindex="-1"></a>                     , <span class="at">rel_widths =</span> <span class="fu">c</span>(.<span class="dv">5</span>, .<span class="dv">5</span>)<span class="co">#c(.4, .6)</span></span>
<span id="cb305-100"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-100" tabindex="-1"></a>                     , <span class="at">axis =</span> <span class="st">&quot;tblr&quot;</span></span>
<span id="cb305-101"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-101" tabindex="-1"></a>                     , <span class="at">align =</span> <span class="st">&quot;h&quot;</span></span>
<span id="cb305-102"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-102" tabindex="-1"></a>                     )</span>
<span id="cb305-103"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-103" tabindex="-1"></a>  <span class="co"># p &lt;- cowplot::plot_grid(ttl, subttl, p3, rel_heights = c(.05, .05, .9), nrow = 3)</span></span>
<span id="cb305-104"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-104" tabindex="-1"></a>  p <span class="ot">&lt;-</span> cowplot<span class="sc">::</span><span class="fu">plot_grid</span>(ttl, p3, <span class="at">rel_heights =</span> <span class="fu">c</span>(.<span class="dv">05</span>, .<span class="dv">95</span>), <span class="at">nrow =</span> <span class="dv">2</span>)</span>
<span id="cb305-105"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-105" tabindex="-1"></a>  <span class="fu">gc</span>()</span>
<span id="cb305-106"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-106" tabindex="-1"></a>  <span class="fu">save</span>(p</span>
<span id="cb305-107"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-107" tabindex="-1"></a>       , <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/2a_ipd_dc/%s/figures/study specific forest/rdata/%s_%s_%s_%s.RData&quot;</span>, local_path, type, outcome, trait, mod, cov))</span>
<span id="cb305-108"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-108" tabindex="-1"></a>  <span class="fu">return</span>(p)</span>
<span id="cb305-109"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-109" tabindex="-1"></a>}</span>
<span id="cb305-110"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-110" tabindex="-1"></a></span>
<span id="cb305-111"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-111" tabindex="-1"></a><span class="do">## fixed effects</span></span>
<span id="cb305-112"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-112" tabindex="-1"></a>nested_ipd2a_reg_fp <span class="ot">&lt;-</span> nested_ipd2a_reg <span class="sc">%&gt;%</span></span>
<span id="cb305-113"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-113" tabindex="-1"></a>  <span class="fu">filter</span>(Moderator <span class="sc">%in%</span> moders<span class="sc">$</span>short_name) <span class="sc">%&gt;%</span></span>
<span id="cb305-114"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-114" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>rx, <span class="sc">-</span>n) <span class="sc">%&gt;%</span></span>
<span id="cb305-115"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-115" tabindex="-1"></a>  <span class="fu">unnest</span>(fx) <span class="sc">%&gt;%</span></span>
<span id="cb305-116"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-116" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">study =</span> <span class="st">&quot;  Overall&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb305-117"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-117" tabindex="-1"></a>  <span class="do">## random effects</span></span>
<span id="cb305-118"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-118" tabindex="-1"></a>  <span class="fu">full_join</span>(</span>
<span id="cb305-119"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-119" tabindex="-1"></a>    nested_ipd2a_reg <span class="sc">%&gt;%</span></span>
<span id="cb305-120"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-120" tabindex="-1"></a>      <span class="fu">filter</span>(Moderator <span class="sc">%in%</span> moders<span class="sc">$</span>short_name) <span class="sc">%&gt;%</span></span>
<span id="cb305-121"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-121" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">rx =</span> <span class="fu">map2</span>(rx, n, <span class="sc">~</span>(.x) <span class="sc">%&gt;%</span> <span class="fu">full_join</span>(.y))) <span class="sc">%&gt;%</span></span>
<span id="cb305-122"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-122" tabindex="-1"></a>      <span class="fu">select</span>(<span class="sc">-</span>fx, <span class="sc">-</span>n) <span class="sc">%&gt;%</span></span>
<span id="cb305-123"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-123" tabindex="-1"></a>      <span class="fu">unnest</span>(rx) <span class="sc">%&gt;%</span></span>
<span id="cb305-124"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-124" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">study =</span> <span class="fu">mapvalues</span>(study, <span class="fu">c</span>(<span class="st">&quot;OCTOTWIN&quot;</span>, <span class="st">&quot;BASEI&quot;</span>), <span class="fu">c</span>(<span class="st">&quot;OCTO-Twin&quot;</span>, <span class="st">&quot;BASE&quot;</span>))</span>
<span id="cb305-125"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-125" tabindex="-1"></a>             , <span class="at">study =</span> <span class="fu">mapvalues</span>(study, studies_long, studies_sp, <span class="at">warn_missing =</span> F))</span>
<span id="cb305-126"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-126" tabindex="-1"></a>      <span class="co"># mutate(term = ifelse(Moderator != &quot;none&quot;, paste(term, mapvalues(Moderator, moders$short_name, moders$short_term, warn_missing = F), sep = &quot;:&quot;), term))</span></span>
<span id="cb305-127"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-127" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb305-128"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-128" tabindex="-1"></a>  <span class="do">## filter key terms</span></span>
<span id="cb305-129"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-129" tabindex="-1"></a>  <span class="fu">filter</span>((Moderator <span class="sc">==</span> <span class="st">&quot;none&quot;</span> <span class="sc">&amp;</span> term <span class="sc">==</span> <span class="st">&quot;p_value&quot;</span>)<span class="sc">|</span></span>
<span id="cb305-130"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-130" tabindex="-1"></a>         (Moderator <span class="sc">!=</span> <span class="st">&quot;none&quot;</span> <span class="sc">&amp;</span> <span class="fu">grepl</span>(<span class="st">&quot;^p_value:&quot;</span>, term) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">grepl</span>(<span class="st">&quot;study&quot;</span>, term))) <span class="sc">%&gt;%</span></span>
<span id="cb305-131"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-131" tabindex="-1"></a>  <span class="do">## significance</span></span>
<span id="cb305-132"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-132" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sig =</span> <span class="fu">ifelse</span>(<span class="fu">sign</span>(conf.low) <span class="sc">==</span> <span class="fu">sign</span>(conf.high), <span class="st">&quot;sig&quot;</span>, <span class="st">&quot;ns&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb305-133"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-133" tabindex="-1"></a>  <span class="do">## grouping for plotting</span></span>
<span id="cb305-134"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-134" tabindex="-1"></a>  <span class="fu">group_by</span>(Outcome, Moderator, type, Covariate, Trait) <span class="sc">%&gt;%</span></span>
<span id="cb305-135"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-135" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span></span>
<span id="cb305-136"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-136" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb305-137"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-137" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">p =</span> <span class="fu">pmap</span>(<span class="fu">list</span>(data, Outcome, Moderator, type, Covariate, Trait), ipd2a_rx_plot_fun))</span>
<span id="cb305-138"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-138" tabindex="-1"></a></span>
<span id="cb305-139"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-139" tabindex="-1"></a>ipd2a_rx_plot_comb_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(outcome, cov, mod, type, d){</span>
<span id="cb305-140"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-140" tabindex="-1"></a>  o <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(outcome, outcomes<span class="sc">$</span>short_name, outcomes<span class="sc">$</span>long_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb305-141"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-141" tabindex="-1"></a>  cv <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(cov, covars<span class="sc">$</span>short_name, covars<span class="sc">$</span>long_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb305-142"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-142" tabindex="-1"></a>  titl <span class="ot">&lt;-</span> <span class="fu">paste0</span>(o, <span class="st">&quot;,&quot;</span>)</span>
<span id="cb305-143"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-143" tabindex="-1"></a>  titl <span class="ot">&lt;-</span> <span class="cf">if</span>(<span class="sc">!</span>cov <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;none&quot;</span>, <span class="st">&quot;all&quot;</span>)) <span class="fu">paste</span>(titl, cv, <span class="st">&quot;Adjusted&quot;</span>, <span class="at">collapse =</span> <span class="st">&quot;, &quot;</span>) <span class="cf">else</span> <span class="fu">paste</span>(titl, cv, <span class="at">collapse =</span> <span class="st">&quot;, &quot;</span>)</span>
<span id="cb305-144"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-144" tabindex="-1"></a>  p1 <span class="ot">&lt;-</span> <span class="fu">plot_grid</span>(</span>
<span id="cb305-145"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-145" tabindex="-1"></a>    d<span class="sc">$</span>p[[<span class="dv">1</span>]]</span>
<span id="cb305-146"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-146" tabindex="-1"></a>    , d<span class="sc">$</span>p[[<span class="dv">2</span>]]</span>
<span id="cb305-147"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-147" tabindex="-1"></a>    , d<span class="sc">$</span>p[[<span class="dv">3</span>]]</span>
<span id="cb305-148"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-148" tabindex="-1"></a>    , d<span class="sc">$</span>p[[<span class="dv">4</span>]]</span>
<span id="cb305-149"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-149" tabindex="-1"></a>    , d<span class="sc">$</span>p[[<span class="dv">5</span>]]</span>
<span id="cb305-150"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-150" tabindex="-1"></a>    , <span class="at">nrow =</span> <span class="dv">3</span></span>
<span id="cb305-151"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-151" tabindex="-1"></a>    , <span class="at">ncol =</span> <span class="dv">2</span></span>
<span id="cb305-152"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-152" tabindex="-1"></a>    , <span class="at">axis =</span> <span class="st">&quot;tblr&quot;</span></span>
<span id="cb305-153"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-153" tabindex="-1"></a>    , <span class="at">align =</span> <span class="st">&quot;hv&quot;</span></span>
<span id="cb305-154"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-154" tabindex="-1"></a>    )</span>
<span id="cb305-155"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-155" tabindex="-1"></a>  my_theme <span class="ot">&lt;-</span> <span class="cf">function</span>(...) {</span>
<span id="cb305-156"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-156" tabindex="-1"></a>    <span class="fu">theme_classic</span>() <span class="sc">+</span> </span>
<span id="cb305-157"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-157" tabindex="-1"></a>      <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>))</span>
<span id="cb305-158"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-158" tabindex="-1"></a>  }</span>
<span id="cb305-159"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-159" tabindex="-1"></a>  title_theme <span class="ot">&lt;-</span> <span class="fu">calc_element</span>(<span class="st">&quot;plot.title&quot;</span>, <span class="fu">my_theme</span>())</span>
<span id="cb305-160"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-160" tabindex="-1"></a>  ttl <span class="ot">&lt;-</span> <span class="fu">ggdraw</span>() <span class="sc">+</span> </span>
<span id="cb305-161"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-161" tabindex="-1"></a>      <span class="fu">draw_label</span>(</span>
<span id="cb305-162"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-162" tabindex="-1"></a>          titl,</span>
<span id="cb305-163"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-163" tabindex="-1"></a>          <span class="at">fontfamily =</span> title_theme<span class="sc">$</span>family,</span>
<span id="cb305-164"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-164" tabindex="-1"></a>          <span class="at">fontface =</span> title_theme<span class="sc">$</span>face,</span>
<span id="cb305-165"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-165" tabindex="-1"></a>          <span class="at">size =</span> title_theme<span class="sc">$</span>size</span>
<span id="cb305-166"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-166" tabindex="-1"></a>      )</span>
<span id="cb305-167"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-167" tabindex="-1"></a>  my_theme <span class="ot">&lt;-</span> <span class="cf">function</span>(...) {</span>
<span id="cb305-168"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-168" tabindex="-1"></a>    <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb305-169"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-169" tabindex="-1"></a>      <span class="fu">theme</span>(<span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>))</span>
<span id="cb305-170"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-170" tabindex="-1"></a>  }</span>
<span id="cb305-171"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-171" tabindex="-1"></a>  subtitle_theme <span class="ot">&lt;-</span> <span class="fu">calc_element</span>(<span class="st">&quot;subplot.title&quot;</span>, <span class="fu">my_theme</span>())</span>
<span id="cb305-172"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-172" tabindex="-1"></a>  subttl <span class="ot">&lt;-</span> <span class="fu">ggdraw</span>() <span class="sc">+</span></span>
<span id="cb305-173"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-173" tabindex="-1"></a>      <span class="fu">draw_label</span>(</span>
<span id="cb305-174"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-174" tabindex="-1"></a>          <span class="st">&quot;Method 2A: Pooled Regression Using Dummy Codes&quot;</span>,</span>
<span id="cb305-175"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-175" tabindex="-1"></a>          <span class="at">fontfamily =</span> subtitle_theme<span class="sc">$</span>family,</span>
<span id="cb305-176"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-176" tabindex="-1"></a>          <span class="at">fontface =</span> subtitle_theme<span class="sc">$</span>face,</span>
<span id="cb305-177"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-177" tabindex="-1"></a>          <span class="at">size =</span> subtitle_theme<span class="sc">$</span>size</span>
<span id="cb305-178"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-178" tabindex="-1"></a>      )</span>
<span id="cb305-179"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-179" tabindex="-1"></a>  p <span class="ot">&lt;-</span> cowplot<span class="sc">::</span><span class="fu">plot_grid</span>(ttl, subttl, p1, <span class="at">rel_heights =</span> <span class="fu">c</span>(.<span class="dv">03</span>, .<span class="dv">03</span>, .<span class="dv">94</span>), <span class="at">nrow =</span> <span class="dv">3</span>)</span>
<span id="cb305-180"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-180" tabindex="-1"></a>  <span class="fu">ggsave</span>(p </span>
<span id="cb305-181"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-181" tabindex="-1"></a>         , <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/2a_ipd_dc/%s/figures/study specific forest/%s_%s_%s.png&quot;</span>, local_path, type, outcome, mod, cov)</span>
<span id="cb305-182"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-182" tabindex="-1"></a>         , <span class="at">width =</span> <span class="dv">10</span>, <span class="at">height =</span> <span class="dv">10</span>)</span>
<span id="cb305-183"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-183" tabindex="-1"></a>  <span class="fu">ggsave</span>(p </span>
<span id="cb305-184"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-184" tabindex="-1"></a>         , <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/2a_ipd_dc/%s/figures/study specific forest/%s_%s_%s.pdf&quot;</span>, local_path, type, outcome, mod, cov)</span>
<span id="cb305-185"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-185" tabindex="-1"></a>         , <span class="at">width =</span> <span class="dv">10</span>, <span class="at">height =</span> <span class="dv">10</span>)</span>
<span id="cb305-186"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-186" tabindex="-1"></a>  <span class="fu">return</span>(T)</span>
<span id="cb305-187"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-187" tabindex="-1"></a>}</span>
<span id="cb305-188"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-188" tabindex="-1"></a></span>
<span id="cb305-189"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-189" tabindex="-1"></a>nested_ipd2a_reg_fp <span class="sc">%&gt;%</span></span>
<span id="cb305-190"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-190" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Trait =</span> <span class="fu">factor</span>(Trait, traits<span class="sc">$</span>short_name)) <span class="sc">%&gt;%</span></span>
<span id="cb305-191"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-191" tabindex="-1"></a>  <span class="fu">arrange</span>(Trait) <span class="sc">%&gt;%</span></span>
<span id="cb305-192"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-192" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>data) <span class="sc">%&gt;%</span></span>
<span id="cb305-193"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-193" tabindex="-1"></a>  <span class="fu">group_by</span>(type, Outcome, Moderator, Covariate) <span class="sc">%&gt;%</span></span>
<span id="cb305-194"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-194" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb305-195"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-195" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb305-196"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb305-196" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">p =</span> <span class="fu">pmap</span>(<span class="fu">list</span>(Outcome, Covariate, Moderator, type, data), ipd2a_rx_plot_comb_fun))</span></code></pre></div>
</div>
<div id="overall-simple-effects" class="section level6 hasAnchor" number="4.2.1.7.2.3">
<h6><span class="header-section-number">4.2.1.7.2.3</span> Overall Simple Effects<a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#overall-simple-effects" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<div class="sourceCode" id="cb306"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb306-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb306-1" tabindex="-1"></a>loadRData <span class="ot">&lt;-</span> <span class="cf">function</span>(fileName, type, obj, folder){</span>
<span id="cb306-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb306-2" tabindex="-1"></a><span class="co">#loads an RData file, and returns it</span></span>
<span id="cb306-3"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb306-3" tabindex="-1"></a>    path <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/2a_ipd_dc/%s/%s/%s&quot;</span>, local_path, type, folder, fileName)</span>
<span id="cb306-4"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb306-4" tabindex="-1"></a>    <span class="fu">load</span>(path)</span>
<span id="cb306-5"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb306-5" tabindex="-1"></a>    <span class="fu">get</span>(<span class="fu">ls</span>()[<span class="fu">grepl</span>(obj, <span class="fu">ls</span>())])</span>
<span id="cb306-6"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb306-6" tabindex="-1"></a>}</span>
<span id="cb306-7"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb306-7" tabindex="-1"></a></span>
<span id="cb306-8"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb306-8" tabindex="-1"></a><span class="do">## load in &quot;fixed&quot; effects</span></span>
<span id="cb306-9"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb306-9" tabindex="-1"></a><span class="do">## first get file names</span></span>
<span id="cb306-10"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb306-10" tabindex="-1"></a>nested_ipd2a_simp <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">type =</span> <span class="fu">c</span>(<span class="st">&quot;Frequentist&quot;</span>, <span class="st">&quot;Bayesian&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb306-11"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb306-11" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">file =</span> <span class="fu">map</span>(type, <span class="sc">~</span><span class="fu">list.files</span>(<span class="fu">sprintf</span>(<span class="st">&quot;%s/results/2a_ipd_dc/%s/predicted&quot;</span>, local_path, .)))) <span class="sc">%&gt;%</span></span>
<span id="cb306-12"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb306-12" tabindex="-1"></a>  <span class="fu">unnest</span>(file) <span class="sc">%&gt;%</span></span>
<span id="cb306-13"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb306-13" tabindex="-1"></a>  <span class="fu">separate</span>(file, <span class="fu">c</span>(<span class="st">&quot;Outcome&quot;</span>, <span class="st">&quot;Trait&quot;</span>, <span class="st">&quot;Moderator&quot;</span>, <span class="st">&quot;Covariate&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>, <span class="at">remove =</span> F) <span class="sc">%&gt;%</span> </span>
<span id="cb306-14"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb306-14" tabindex="-1"></a>  <span class="do">## read in the files</span></span>
<span id="cb306-15"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb306-15" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Covariate =</span> <span class="fu">str_remove</span>(Covariate, <span class="st">&quot;.RData&quot;</span>),</span>
<span id="cb306-16"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb306-16" tabindex="-1"></a>         <span class="at">pred.fx =</span> <span class="fu">map2</span>(file, type, <span class="sc">~</span><span class="fu">loadRData</span>(.x, .y, <span class="st">&quot;pred.fx&quot;</span>, <span class="st">&quot;predicted&quot;</span>)),</span>
<span id="cb306-17"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb306-17" tabindex="-1"></a>         <span class="at">pred.rx =</span> <span class="fu">map2</span>(file, type, <span class="sc">~</span><span class="fu">loadRData</span>(.x, .y, <span class="st">&quot;pred.rx&quot;</span>, <span class="st">&quot;predicted&quot;</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb306-18"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb306-18" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>file) </span>
<span id="cb306-19"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb306-19" tabindex="-1"></a>nested_ipd2a_simp</span></code></pre></div>
<div class="sourceCode" id="cb307"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb307-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-1" tabindex="-1"></a>ipd2a_se_plot_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(df, outcome, mod, type, cov){</span>
<span id="cb307-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-2" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(outcome, mod))</span>
<span id="cb307-3"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-3" tabindex="-1"></a>  o <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(outcome, outcomes<span class="sc">$</span>short_name, outcomes<span class="sc">$</span>long_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb307-4"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-4" tabindex="-1"></a>  cv <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(cov, covars<span class="sc">$</span>short_name, covars<span class="sc">$</span>long_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb307-5"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-5" tabindex="-1"></a>  m <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(mod, moders<span class="sc">$</span>short_name, moders<span class="sc">$</span>long_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb307-6"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-6" tabindex="-1"></a>  d <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">max</span>(<span class="fu">abs</span>(<span class="fu">min</span>(df<span class="sc">$</span>pred)), <span class="fu">abs</span>(<span class="fu">max</span>(df<span class="sc">$</span>pred))), <span class="dv">3</span>)</span>
<span id="cb307-7"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-7" tabindex="-1"></a>  <span class="co"># mini &lt;- if(d &gt; 2) .05 else 0-(d+(d/5)) </span></span>
<span id="cb307-8"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-8" tabindex="-1"></a>  <span class="co"># maxi &lt;- if(d &gt; 2) 2.05 else 0+d+(d/5)</span></span>
<span id="cb307-9"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-9" tabindex="-1"></a>  <span class="co"># lim &lt;- c(mini, maxi)</span></span>
<span id="cb307-10"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-10" tabindex="-1"></a>  <span class="co"># brk &lt;- if(d &gt; 2) c(0, 1, 2) else{round(c(0-d-(d/10), 0, 0+d+(d/10)),2)}</span></span>
<span id="cb307-11"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-11" tabindex="-1"></a>  <span class="co"># lab &lt;- if(d &gt; 2){c(&quot;0&quot;, &quot;1&quot;, &quot;2&quot;)} else{str_remove(c(round(0-d-(d/10),2), 0, round(0+d+(d/10),2)), &quot;^0&quot;)}</span></span>
<span id="cb307-12"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-12" tabindex="-1"></a>  titl <span class="ot">&lt;-</span> <span class="cf">if</span>(mod <span class="sc">==</span> <span class="st">&quot;none&quot;</span>){o} <span class="cf">else</span> {<span class="fu">sprintf</span>(<span class="st">&quot;%s: Personality x %s Simple Effects&quot;</span>, o, m)}</span>
<span id="cb307-13"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-13" tabindex="-1"></a>  <span class="co"># colnames(df)[colnames(df) == mod] &lt;- &quot;mod_value&quot;</span></span>
<span id="cb307-14"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-14" tabindex="-1"></a>  df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> unclass <span class="sc">%&gt;%</span> data.frame</span>
<span id="cb307-15"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-15" tabindex="-1"></a>  df<span class="sc">$</span>mod_value <span class="ot">&lt;-</span> df[,mod]</span>
<span id="cb307-16"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-16" tabindex="-1"></a>  df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span><span class="fu">all_of</span>(mod)) <span class="sc">%&gt;%</span> as_tibble</span>
<span id="cb307-17"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-17" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">class</span>(df<span class="sc">$</span>mod_value) <span class="sc">==</span> <span class="st">&quot;factor&quot;</span>){df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">mod_fac =</span> <span class="fu">factor</span>(mod_value))} </span>
<span id="cb307-18"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-18" tabindex="-1"></a>  <span class="cf">else</span>{df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb307-19"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-19" tabindex="-1"></a>    <span class="fu">group_by</span>(Trait) <span class="sc">%&gt;%</span></span>
<span id="cb307-20"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-20" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">mod_fac =</span> <span class="fu">factor</span>(mod_value, <span class="at">levels =</span> <span class="fu">unique</span>(mod_value), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;-1 SD&quot;</span>, <span class="st">&quot;M&quot;</span>, <span class="st">&quot;+1 SD&quot;</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb307-21"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-21" tabindex="-1"></a>    <span class="fu">ungroup</span>()</span>
<span id="cb307-22"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-22" tabindex="-1"></a>  }</span>
<span id="cb307-23"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-23" tabindex="-1"></a>  lt <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;dotted&quot;</span>, <span class="st">&quot;solid&quot;</span>, <span class="st">&quot;dashed&quot;</span>)[<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(<span class="fu">unique</span>(df<span class="sc">$</span>mod_fac))]</span>
<span id="cb307-24"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-24" tabindex="-1"></a>  </span>
<span id="cb307-25"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-25" tabindex="-1"></a>  df <span class="sc">%&gt;%</span></span>
<span id="cb307-26"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-26" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Trait =</span> <span class="fu">factor</span>(Trait, <span class="at">levels =</span> traits<span class="sc">$</span>short_name, <span class="at">labels =</span> traits<span class="sc">$</span>long_name),</span>
<span id="cb307-27"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-27" tabindex="-1"></a>           <span class="at">lower =</span> <span class="fu">ifelse</span>(lower <span class="sc">&lt;</span> <span class="dv">4</span>, <span class="dv">4</span>, lower),</span>
<span id="cb307-28"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-28" tabindex="-1"></a>           <span class="at">upper =</span> <span class="fu">ifelse</span>(upper <span class="sc">&gt;</span> <span class="dv">10</span>, <span class="dv">10</span>, upper)) <span class="sc">%&gt;%</span></span>
<span id="cb307-29"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-29" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> p_value</span>
<span id="cb307-30"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-30" tabindex="-1"></a>               , <span class="at">y =</span> pred</span>
<span id="cb307-31"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-31" tabindex="-1"></a>               , <span class="at">group  =</span> mod_fac))  <span class="sc">+</span></span>
<span id="cb307-32"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-32" tabindex="-1"></a>      <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">10</span>)</span>
<span id="cb307-33"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-33" tabindex="-1"></a>                         , <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">10</span>)</span>
<span id="cb307-34"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-34" tabindex="-1"></a>                         , <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">10</span>)) <span class="sc">+</span></span>
<span id="cb307-35"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-35" tabindex="-1"></a>      <span class="fu">scale_linetype_manual</span>(<span class="at">values =</span> lt) <span class="sc">+</span></span>
<span id="cb307-36"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-36" tabindex="-1"></a>      <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> lower</span>
<span id="cb307-37"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-37" tabindex="-1"></a>                      , <span class="at">ymax =</span> upper</span>
<span id="cb307-38"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-38" tabindex="-1"></a>                      , <span class="at">fill =</span> mod_fac)</span>
<span id="cb307-39"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-39" tabindex="-1"></a>                  , <span class="at">alpha =</span> .<span class="dv">25</span>) <span class="sc">+</span></span>
<span id="cb307-40"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-40" tabindex="-1"></a>      <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">linetype =</span> mod_fac)) <span class="sc">+</span></span>
<span id="cb307-41"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-41" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Personality (POMP)&quot;</span></span>
<span id="cb307-42"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-42" tabindex="-1"></a>           , <span class="at">y =</span> <span class="fu">paste</span>(o, <span class="st">&quot;(POMP)&quot;</span>)</span>
<span id="cb307-43"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-43" tabindex="-1"></a>           , <span class="at">title =</span> titl</span>
<span id="cb307-44"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-44" tabindex="-1"></a>           , <span class="at">linetype =</span> m</span>
<span id="cb307-45"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-45" tabindex="-1"></a>           , <span class="at">fill =</span> m</span>
<span id="cb307-46"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-46" tabindex="-1"></a>           , <span class="at">subtitle =</span> <span class="st">&quot;Method 2A: Pooled Regression Using Dummy Codes&quot;</span>) <span class="sc">+</span></span>
<span id="cb307-47"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-47" tabindex="-1"></a>      <span class="fu">facet_wrap</span>(<span class="sc">~</span>Trait, <span class="at">nrow =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb307-48"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-48" tabindex="-1"></a>      <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb307-49"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-49" tabindex="-1"></a>      <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span></span>
<span id="cb307-50"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-50" tabindex="-1"></a>            , <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">1.2</span>), <span class="at">hjust =</span> .<span class="dv">5</span>)</span>
<span id="cb307-51"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-51" tabindex="-1"></a>            , <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">1.1</span>), <span class="at">hjust =</span> .<span class="dv">5</span>)</span>
<span id="cb307-52"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-52" tabindex="-1"></a>            , <span class="at">strip.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;black&quot;</span>)</span>
<span id="cb307-53"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-53" tabindex="-1"></a>            , <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">color =</span> <span class="st">&quot;white&quot;</span>)</span>
<span id="cb307-54"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-54" tabindex="-1"></a>            , <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>))</span>
<span id="cb307-55"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-55" tabindex="-1"></a>  <span class="fu">ggsave</span>(<span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/2a_ipd_dc/%s/figures/overall simple effects/%s_%s_%s.png&quot;</span>, local_path, type, outcome, mod, cov), <span class="at">width =</span> <span class="dv">6</span>, <span class="at">height =</span> <span class="dv">6</span>)</span>
<span id="cb307-56"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-56" tabindex="-1"></a>}</span>
<span id="cb307-57"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-57" tabindex="-1"></a></span>
<span id="cb307-58"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-58" tabindex="-1"></a>ipd2a_se_plot <span class="ot">&lt;-</span> nested_ipd2a_simp <span class="sc">%&gt;%</span></span>
<span id="cb307-59"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-59" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>pred.rx) <span class="sc">%&gt;%</span></span>
<span id="cb307-60"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-60" tabindex="-1"></a>  <span class="fu">group_by</span>(type, Outcome, Moderator, Covariate) <span class="sc">%&gt;%</span></span>
<span id="cb307-61"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-61" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span></span>
<span id="cb307-62"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-62" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb307-63"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-63" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">data =</span> <span class="fu">map</span>(data, <span class="sc">~</span>(.) <span class="sc">%&gt;%</span> <span class="fu">unnest</span>(pred.fx)),</span>
<span id="cb307-64"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb307-64" tabindex="-1"></a>         <span class="at">plot =</span> <span class="fu">pmap</span>(<span class="fu">list</span>(data, Outcome, Moderator, type, Covariate), ipd2a_se_plot_fun))</span></code></pre></div>
</div>
<div id="study-specific-simple-effects" class="section level6 hasAnchor" number="4.2.1.7.2.4">
<h6><span class="header-section-number">4.2.1.7.2.4</span> Study-Specific Simple Effects<a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#study-specific-simple-effects" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<div class="sourceCode" id="cb308"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb308-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-1" tabindex="-1"></a>ipd2a_std_se_plot_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(df, outcome, trait, mod, cov, type){</span>
<span id="cb308-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-2" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(outcome, mod))</span>
<span id="cb308-3"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-3" tabindex="-1"></a>  o <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(outcome, outcomes<span class="sc">$</span>short_name, outcomes<span class="sc">$</span>long_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb308-4"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-4" tabindex="-1"></a>  trt <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(trait, traits<span class="sc">$</span>short_name, traits<span class="sc">$</span>long_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb308-5"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-5" tabindex="-1"></a>  cv <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(cov, covars<span class="sc">$</span>short_name, covars<span class="sc">$</span>long_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb308-6"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-6" tabindex="-1"></a>  m <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(mod, moders<span class="sc">$</span>short_name, moders<span class="sc">$</span>long_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb308-7"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-7" tabindex="-1"></a>  d <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">max</span>(<span class="fu">abs</span>(<span class="fu">min</span>(df<span class="sc">$</span>pred)), <span class="fu">abs</span>(<span class="fu">max</span>(df<span class="sc">$</span>pred))), <span class="dv">3</span>)</span>
<span id="cb308-8"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-8" tabindex="-1"></a>  <span class="co"># mini &lt;- if(d &gt; 2) .05 else 0-(d+(d/5)) </span></span>
<span id="cb308-9"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-9" tabindex="-1"></a>  <span class="co"># maxi &lt;- if(d &gt; 2) 2.05 else 0+d+(d/5)</span></span>
<span id="cb308-10"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-10" tabindex="-1"></a>  <span class="co"># lim &lt;- c(mini, maxi)</span></span>
<span id="cb308-11"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-11" tabindex="-1"></a>  <span class="co"># brk &lt;- if(d &gt; 2) c(0, 1, 2) else{round(c(0-d-(d/10), 0, 0+d+(d/10)),2)}</span></span>
<span id="cb308-12"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-12" tabindex="-1"></a>  <span class="co"># lab &lt;- if(d &gt; 2){c(&quot;0&quot;, &quot;1&quot;, &quot;2&quot;)} else{str_remove(c(round(0-d-(d/10),2), 0, round(0+d+(d/10),2)), &quot;^0&quot;)}</span></span>
<span id="cb308-13"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-13" tabindex="-1"></a>  titl <span class="ot">&lt;-</span> <span class="cf">if</span>(mod <span class="sc">==</span> <span class="st">&quot;none&quot;</span>){<span class="fu">sprintf</span>(<span class="st">&quot;%s: %s&quot;</span>, o, trt)} <span class="cf">else</span> {<span class="fu">sprintf</span>(<span class="st">&quot;%s: %s x %s Simple Effects&quot;</span>, o, trt, m)}</span>
<span id="cb308-14"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-14" tabindex="-1"></a>  <span class="co"># colnames(df)[colnames(df) == mod] &lt;- &quot;mod_value&quot;</span></span>
<span id="cb308-15"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-15" tabindex="-1"></a>  df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">study =</span> <span class="fu">mapvalues</span>(study, <span class="fu">c</span>(<span class="st">&quot;BASEI&quot;</span>, <span class="st">&quot;OCTOTWIN&quot;</span>), <span class="fu">c</span>(<span class="st">&quot;BASE&quot;</span>, <span class="st">&quot;OCTO-Twin&quot;</span>)))</span>
<span id="cb308-16"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-16" tabindex="-1"></a>  df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> unclass <span class="sc">%&gt;%</span> data.frame</span>
<span id="cb308-17"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-17" tabindex="-1"></a>  df<span class="sc">$</span>mod_value <span class="ot">&lt;-</span> df[,mod]</span>
<span id="cb308-18"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-18" tabindex="-1"></a>  df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span><span class="fu">all_of</span>(mod)) <span class="sc">%&gt;%</span> as_tibble</span>
<span id="cb308-19"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-19" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">class</span>(df<span class="sc">$</span>mod_value) <span class="sc">==</span> <span class="st">&quot;factor&quot;</span>){df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">mod_fac =</span> <span class="fu">factor</span>(mod_value))} </span>
<span id="cb308-20"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-20" tabindex="-1"></a>  <span class="cf">else</span>{df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb308-21"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-21" tabindex="-1"></a>    <span class="fu">group_by</span>(study) <span class="sc">%&gt;%</span></span>
<span id="cb308-22"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-22" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">mod_fac =</span> <span class="fu">factor</span>(mod_value, <span class="at">levels =</span> <span class="fu">unique</span>(mod_value), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;-1 SD&quot;</span>, <span class="st">&quot;M&quot;</span>, <span class="st">&quot;+1 SD&quot;</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb308-23"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-23" tabindex="-1"></a>    <span class="fu">ungroup</span>()</span>
<span id="cb308-24"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-24" tabindex="-1"></a>  }</span>
<span id="cb308-25"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-25" tabindex="-1"></a>  <span class="co"># lt &lt;- c(&quot;dotted&quot;, &quot;solid&quot;, &quot;dashed&quot;)[1:length(unique(df$mod_fac))]</span></span>
<span id="cb308-26"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-26" tabindex="-1"></a>  std <span class="ot">&lt;-</span> <span class="fu">unique</span>(df<span class="sc">$</span>study)</span>
<span id="cb308-27"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-27" tabindex="-1"></a>  cols <span class="ot">&lt;-</span> (stdcolors <span class="sc">%&gt;%</span> <span class="fu">filter</span>(studies <span class="sc">%in%</span> std))<span class="sc">$</span>colors</span>
<span id="cb308-28"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-28" tabindex="-1"></a>  lt <span class="ot">&lt;-</span> (stdcolors <span class="sc">%&gt;%</span> <span class="fu">filter</span>(studies <span class="sc">%in%</span> std))<span class="sc">$</span>lt</span>
<span id="cb308-29"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-29" tabindex="-1"></a>  ht <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(df<span class="sc">$</span>mod_fac))</span>
<span id="cb308-30"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-30" tabindex="-1"></a>  df <span class="sc">%&gt;%</span></span>
<span id="cb308-31"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-31" tabindex="-1"></a>    <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span></span>
<span id="cb308-32"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-32" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">gr =</span> <span class="fu">ifelse</span>(study <span class="sc">==</span> <span class="st">&quot;Overall&quot;</span>, <span class="st">&quot;Overall&quot;</span>, <span class="st">&quot;study&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb308-33"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-33" tabindex="-1"></a>    <span class="fu">group_by</span>(p_value, mod_fac, study, gr) <span class="sc">%&gt;%</span></span>
<span id="cb308-34"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-34" tabindex="-1"></a>    <span class="fu">summarize_at</span>(<span class="fu">vars</span>(pred, lower, upper), mean, <span class="at">na.rm =</span> T) <span class="sc">%&gt;%</span></span>
<span id="cb308-35"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-35" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">study =</span> <span class="fu">factor</span>(study</span>
<span id="cb308-36"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-36" tabindex="-1"></a>                          , <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;Overall&quot;</span>, studies_long),</span>
<span id="cb308-37"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-37" tabindex="-1"></a>                          , <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;Overall&quot;</span>, studies_long)),</span>
<span id="cb308-38"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-38" tabindex="-1"></a>           <span class="at">lower =</span> <span class="fu">ifelse</span>(lower <span class="sc">&lt;</span> <span class="dv">4</span>, <span class="dv">4</span>, lower),</span>
<span id="cb308-39"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-39" tabindex="-1"></a>           <span class="at">upper =</span> <span class="fu">ifelse</span>(upper <span class="sc">&gt;</span> <span class="dv">10</span>, <span class="dv">10</span>, upper)) <span class="sc">%&gt;%</span></span>
<span id="cb308-40"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-40" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> p_value</span>
<span id="cb308-41"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-41" tabindex="-1"></a>               , <span class="at">y =</span> pred</span>
<span id="cb308-42"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-42" tabindex="-1"></a>               , <span class="at">group  =</span> study))  <span class="sc">+</span></span>
<span id="cb308-43"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-43" tabindex="-1"></a>      <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">10</span>)</span>
<span id="cb308-44"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-44" tabindex="-1"></a>                         , <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">10</span>)</span>
<span id="cb308-45"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-45" tabindex="-1"></a>                         , <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">10</span>)) <span class="sc">+</span></span>
<span id="cb308-46"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-46" tabindex="-1"></a>      <span class="fu">scale_linetype_manual</span>(<span class="at">values =</span> lt) <span class="sc">+</span></span>
<span id="cb308-47"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-47" tabindex="-1"></a>      <span class="fu">scale_color_manual</span>(<span class="at">values =</span> cols) <span class="sc">+</span> </span>
<span id="cb308-48"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-48" tabindex="-1"></a>      <span class="fu">scale_size_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="dv">2</span>,.<span class="dv">8</span>)) <span class="sc">+</span></span>
<span id="cb308-49"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-49" tabindex="-1"></a>      <span class="co"># geom_ribbon(aes(ymin = lower</span></span>
<span id="cb308-50"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-50" tabindex="-1"></a>      <span class="co">#                 , ymax = upper</span></span>
<span id="cb308-51"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-51" tabindex="-1"></a>      <span class="co">#                 , fill = study)</span></span>
<span id="cb308-52"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-52" tabindex="-1"></a>      <span class="co">#             , alpha = .25) +</span></span>
<span id="cb308-53"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-53" tabindex="-1"></a>      <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">linetype =</span> study, <span class="at">color =</span> study, <span class="at">size =</span> gr)) <span class="sc">+</span></span>
<span id="cb308-54"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-54" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">x =</span> <span class="fu">paste</span>(trt, <span class="st">&quot;(POMP)&quot;</span>)</span>
<span id="cb308-55"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-55" tabindex="-1"></a>           , <span class="at">y =</span> <span class="fu">paste</span>(o, <span class="st">&quot;(POMP)&quot;</span>)</span>
<span id="cb308-56"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-56" tabindex="-1"></a>           , <span class="at">title =</span> titl</span>
<span id="cb308-57"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-57" tabindex="-1"></a>           , <span class="at">linetype =</span> <span class="st">&quot;Study&quot;</span></span>
<span id="cb308-58"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-58" tabindex="-1"></a>           , <span class="at">fill =</span> <span class="st">&quot;Study&quot;</span></span>
<span id="cb308-59"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-59" tabindex="-1"></a>           , <span class="at">color =</span> <span class="st">&quot;Study&quot;</span></span>
<span id="cb308-60"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-60" tabindex="-1"></a>           , <span class="at">subtitle =</span> <span class="st">&quot;Method 2A: Pooled Regression Using Dummy Codes&quot;</span>) <span class="sc">+</span></span>
<span id="cb308-61"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-61" tabindex="-1"></a>      <span class="fu">guides</span>(<span class="at">size =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb308-62"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-62" tabindex="-1"></a>      <span class="fu">facet_wrap</span>(<span class="sc">~</span>mod_fac, <span class="at">nrow =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb308-63"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-63" tabindex="-1"></a>      <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb308-64"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-64" tabindex="-1"></a>      <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span></span>
<span id="cb308-65"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-65" tabindex="-1"></a>            , <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">1.2</span>), <span class="at">hjust =</span> .<span class="dv">5</span>)</span>
<span id="cb308-66"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-66" tabindex="-1"></a>            , <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">1.1</span>), <span class="at">hjust =</span> .<span class="dv">5</span>)</span>
<span id="cb308-67"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-67" tabindex="-1"></a>            , <span class="at">strip.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;black&quot;</span>)</span>
<span id="cb308-68"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-68" tabindex="-1"></a>            , <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">color =</span> <span class="st">&quot;white&quot;</span>)</span>
<span id="cb308-69"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-69" tabindex="-1"></a>            , <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>))</span>
<span id="cb308-70"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-70" tabindex="-1"></a>  <span class="fu">ggsave</span>(<span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/2a_ipd_dc/%s/figures/study specific simple effects/%s_%s_%s_%s.png&quot;</span>, local_path, type, outcome, trt, mod, cov), <span class="at">width =</span> <span class="dv">3</span><span class="sc">*</span>ht, <span class="at">height =</span> <span class="dv">5</span>)</span>
<span id="cb308-71"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-71" tabindex="-1"></a>}</span>
<span id="cb308-72"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-72" tabindex="-1"></a></span>
<span id="cb308-73"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-73" tabindex="-1"></a>nested_ipd2a_simp <span class="sc">%&gt;%</span></span>
<span id="cb308-74"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-74" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>Moderator <span class="sc">%in%</span> stdyModers<span class="sc">$</span>short_name) <span class="sc">%&gt;%</span></span>
<span id="cb308-75"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-75" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pred.fx =</span> <span class="fu">map</span>(pred.fx, <span class="sc">~</span>(.) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">study =</span> <span class="st">&quot;Overall&quot;</span>)),</span>
<span id="cb308-76"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-76" tabindex="-1"></a>         <span class="at">comb.fx =</span> <span class="fu">map2</span>(pred.fx, pred.rx, full_join)) <span class="sc">%&gt;%</span></span>
<span id="cb308-77"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-77" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>pred.fx, <span class="sc">-</span>pred.rx) <span class="sc">%&gt;%</span></span>
<span id="cb308-78"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb308-78" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">pmap</span>(<span class="fu">list</span>(comb.fx, Outcome, Trait, Moderator, Covariate, type), <span class="fu">possibly</span>(ipd2a_std_se_plot_fun, <span class="cn">NA_real_</span>)))</span></code></pre></div>
</div>
</div>
</div>
<div id="sample-results-section-2" class="section level4 hasAnchor" number="4.2.1.8">
<h4><span class="header-section-number">4.2.1.8</span> Sample Results Section<a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#sample-results-section-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>We examined estimates of overall prospective associations between Big Five personality characteristics and crystallized abilities as well as participant-level moderators of those associations using fully pooled, one-stage regression models with effects codes to capture sample-specific estimates using individual participant data in 11 studies. Heterogeneity was indirectly estimated by extracting sample-level estimates of associations and examining dispersion measures.</p>
<p>Table S3 presents the fully adjusted estimates of the key terms from all prospective Big Five personality characteristic-crystallized abilities associations and participant-level moderators of those associations. Across the 20 key terms, four (20%) were significant. For unmoderated personality-cognition associations, neuroticism (-) and openness (+) were significantly associated with later crystallized abilities. In other words, higher neuroticism was prospectively associated with lower crystallized abilities across samples, while higher openness was prospectively associated with higher crystallized abilities across samples.</p>
<table class=" lightable-classic" style="color: black; font-family: Times New Roman; width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-41">Table 4.2: </span>2A Pooled One Stage Models with Dummy Codes: Fixed Effect Estimates of Fully Adjusted Personality-Crystallized Domain Associations
</caption>
<thead>
<tr>
<th style="empty-cells: hide;" colspan="1">
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>E</strong>
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>A</strong>
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>C</strong>
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>N</strong>
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>O</strong>
</div>
</th>
</tr>
<tr>
<th style="text-align:right;">
Term
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
</tr>
</thead>
<tbody>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>None</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Personality
</td>
<td style="text-align:center;">
0.02<br>[-0.01, 0.05]
</td>
<td style="text-align:center;">
-0.01<br>[-0.04, 0.02]
</td>
<td style="text-align:center;">
0.01<br>[-0.02, 0.04]
</td>
<td style="text-align:center;">
<strong>-0.07<br>[-0.09, -0.05]</strong>
</td>
<td style="text-align:center;">
<strong>0.17<br>[0.14, 0.21]</strong>
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Age</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Age
</td>
<td style="text-align:center;">
-0.00<br>[-0.01, 0.00]
</td>
<td style="text-align:center;">
-0.000<br>[-0.00, 0.00]
</td>
<td style="text-align:center;">
-0.00<br>[-0.01, 0.001]
</td>
<td style="text-align:center;">
0.00<br>[-0.000, 0.01]
</td>
<td style="text-align:center;">
0.000<br>[-0.00, 0.01]
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Gender</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Gender (Male v Female)
</td>
<td style="text-align:center;">
<strong>0.06<br>[0.001, 0.12]</strong>
</td>
<td style="text-align:center;">
0.02<br>[-0.04, 0.08]
</td>
<td style="text-align:center;">
-0.00<br>[-0.06, 0.05]
</td>
<td style="text-align:center;">
-0.04<br>[-0.09, 0.01]
</td>
<td style="text-align:center;">
-0.01<br>[-0.08, 0.06]
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Education</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Education (Years)
</td>
<td style="text-align:center;">
-0.00<br>[-0.01, 0.01]
</td>
<td style="text-align:center;">
-0.00<br>[-0.02, 0.01]
</td>
<td style="text-align:center;">
0.01<br>[-0.001, 0.02]
</td>
<td style="text-align:center;">
-0.00<br>[-0.01, 0.01]
</td>
<td style="text-align:center;">
-0.00<br>[-0.02, 0.01]
</td>
</tr>
</tbody>
</table>
<p>In addition to the overall effects, we also examined those same effects at the sample level. Figure S3 presents the forest plot of fully adjusted sample-specific and overall prospective associations between the Big Five and crystallized abilities across all methods. Forest plots for all participant-level moderators are available in the online materials and the web app. As shown in the forest plot, openness was most consistently associated with crystallized ability, with five of seven samples showing a positive and significant prospective association between openness and crystallized abilities. Other associations, such as those with extraversion and conscientiousness, were less consistent, with at least one significant association in different directions across samples. For example, although there was no overall association between conscientiousness and crystallized abilities, SATSA showed a significant negative association, and HILDA, ROS, and HRS showed positive associations.</p>
<div class="figure"><span style="display:block;" id="fig:unnamed-chunk-45"></span>
<img src="../../results/2a_ipd_dc/Frequentist/figures/study specific forest/crystallized_none_all.png" alt="Figure S3. Forest plot of fully adjusted prospective associations between Big Five personality characteristics and crystallized abilities across samples for using one-stage pooled integrative data analysis via effects coded contrasts. Overall point estimates (squares) represent the grand-mean estimates of the association across samples, while sample point estimates represent regression terms or linear combinations of regression terms. Error bars capture the 95% CI around the point estimate. Arrows indicate the confidence band was truncated to better visualize the estimates." width="1500" />
<p class="caption">
Figure 4.1: Figure S3. Forest plot of fully adjusted prospective associations between Big Five personality characteristics and crystallized abilities across samples for using one-stage pooled integrative data analysis via effects coded contrasts. Overall point estimates (squares) represent the grand-mean estimates of the association across samples, while sample point estimates represent regression terms or linear combinations of regression terms. Error bars capture the 95% CI around the point estimate. Arrows indicate the confidence band was truncated to better visualize the estimates.
</p>
</div>
<p>Finally, we also examined the consistency of simple effects across samples for each moderator. Figure S4 displays the fully adjusted predicted crystallized abilities levels at different levels of extraversion across samples for those who identified as male or female. The pattern suggests a positive association for females and null association for males. This holds for females in EAS (b = 0.22, 95% CI [0.09, 0.34]) and GSOEP (b = 0.14, 95% CI [0.02, 0.25]), while all other samples demonstrate null associations. For men, the associations seem somewhat less consistent, with three samples demonstrating significant negative associations (HILDA, b = -0.04, 95% CI [-0.08, -0.005]; HRS, b = -0.04, 95% CI [-0.08, -0.006]; ROS, b = -0.08, 95% CI [-0.16, -0.008]) one sample demonstrating a positive association (EAS, b = 0.16, 95% CI [0.03, 0.29]), and four samples demonstrating null associations (GSOEP, b = 0.08, 95% CI [-0.04, 0.19]; MAP, b = 0.009, 95% CI [-0.06, 0.08]; OCTO-Twin, b = 0.08, 95% CI [-0.07, 0.22]; BASE, b = -0.14, 95% CI [-0.37, 0.10]).</p>
<div class="figure"><span style="display:block;" id="fig:unnamed-chunk-46"></span>
<img src="../../results/2a_ipd_dc/Frequentist/figures/study specific simple effects/crystallized_Extraversion_gender_all.png" alt="Figure S4. Prospective sample-specific and overall associations between extraversion (in POMP units, 0-10) and crystallized abilities (in POMP units, 0-10) across genders (male, female). Different colors and line types indicate different samples. Thicker, black lines indicate the average association across samples, while thinner lines indicate sample-specific associations." width="900" />
<p class="caption">
Figure 4.2: Figure S4. Prospective sample-specific and overall associations between extraversion (in POMP units, 0-10) and crystallized abilities (in POMP units, 0-10) across genders (male, female). Different colors and line types indicate different samples. Thicker, black lines indicate the average association across samples, while thinner lines indicate sample-specific associations.
</p>
</div>
<div class="sourceCode" id="cb309"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb309-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb309-1" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>()[<span class="fu">grepl</span>(<span class="st">&quot;ipd2a&quot;</span>, <span class="fu">ls</span>())])</span></code></pre></div>
</div>
</div>
<div id="method-2b-pooled-one-stage-models-with-random-effects" class="section level3 hasAnchor" number="4.2.2">
<h3><span class="header-section-number">4.2.2</span> Method 2B: Pooled One Stage Models with Random Effects<a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#method-2b-pooled-one-stage-models-with-random-effects" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>For Method 2B, we’ll be estimating overall and study-specific effects using multilevel models in which participants are nested within studies. In a basic sense, these differ from using dummy codes in that those models are estimated using OLS, while multilevel models are estimated using maximum likelihood. In addition, unlike OLS, linear models, ML MLM treats nesting units as a distribution centered around the overall effect and shrinks random effects toward 0.</p>
<div id="analytic-plan-3" class="section level4 hasAnchor" number="4.2.2.1">
<h4><span class="header-section-number">4.2.2.1</span> Analytic Plan<a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#analytic-plan-3" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In the present study, we estimate associations between the Big Five personality traits and crystallized cognitive abilities using a one-stage, fully pooled, multilevel regression approach with participants nested within sample using individual participant data. The procedure is as follows:</p>
<div id="statistical-modeling-2" class="section level5 hasAnchor" number="4.2.2.1.1">
<h5><span class="header-section-number">4.2.2.1.1</span> Statistical Modeling<a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#statistical-modeling-2" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Models are estimated separately for each personality characteristic, outcome, covariate, and moderator combination. Because these multilevel models provide both sample-specific estimates and estimates of cross-sample heterogeneity, we created a series of functions in the R programming language to (1) set up and run the model and extract model coefficients and (2) extract overall simple-effects predictions for participant- and sample-level moderator models (i.e. predicted values across levels of the moderator values), (3) extract the sample-specific effects, (4) extract sample-specific simple-effects prediction for the participant-level moderators, and (5) extract estimates of heterogeneity. Each of these functions were designed to flexibly handle different classes of covariates and moderators (e.g., nominal, numeric) and to wrangle the results into easily combined and understandable data frames. The functions and more detail on them can be found in the online materials.</p>
<p>The simple unadjusted personality characteristic-crystallized abilities model is as follows:</p>
<p>Level 1
<span class="math inline">\(Y_{ij}=\beta_{0J}+\beta_{1J}*predictor_{ij}+\epsilon_{ij}\)</span></p>
<p>Level 2
<span class="math inline">\(\beta_{0j}=\gamma_{00}+u_{0j}\)</span>
<span class="math inline">\(\beta_{1J}=\gamma_{10}+u_{1j}\)</span></p>
<p><span class="math inline">\(\epsilon_{ij}\sim\mathcal{N}\left(0,\sigma^2\right)\)</span>
<span class="math inline">\(\begin{matrix}u_{0j}\\\ u_{1j}\\\end{matrix}\ \sim\mathcal{N}\left(\begin{matrix}\tau_{00}^2\ \ &amp;\tau_{10}\\\ \tau_{10}&amp;\tau_{11}^2\\\end{matrix}\ \right)\)</span>,</p>
<p>where the prospective associations for each sample will be captured by <span class="math inline">\(\beta_{1j}\)</span>, <span class="math inline">\(j\)</span> indicates each sample 1 to <span class="math inline">\(j\)</span>, and <span class="math inline">\(u_{1j}\)</span> captures the sample specific deviation from the overall estimate of the personality-cognition relationship <span class="math inline">\(\gamma_{10}\)</span>. The multilevel models decompose the residual variance into different sources, in this case, participant-level residual variance (<span class="math inline">\(\sigma^2\)</span>) and sample-level residual variance (<span class="math inline">\(\tau_{00}^2\)</span> and <span class="math inline">\(\tau_{11}^2\)</span>). The models also use partial pooling, which pools information across samples and shrinks sample-level estimates toward the fixed effect. Participant-level moderators will be added at Level 1 with random effects at Level 2. For example, two new Level 1 terms were added for baseline age (centered at 60): <span class="math inline">\(\beta_{2J}\)</span>, which indicates the sample-specific estimate of the main effect of age, and <span class="math inline">\(\beta_{3J}\)</span>, which indicates the difference in the sample-specific estimate of the prospective personality-outcome association as a function of age. For each, we will include random slopes (<span class="math inline">\(u_{2j}\)</span> and <span class="math inline">\(u_{3j}\)</span>) to allow these to vary across samples. The overall main effect of the moderator and the moderator estimate will be captured by <span class="math inline">\(\gamma_{20}\)</span> and <span class="math inline">\(\gamma_{30}\)</span>, respectively.</p>
<p>Heterogeneity estimates are captured in <span class="math inline">\(\tau\)</span> matrix, where <span class="math inline">\(\tau_{00}^2\)</span> captures the variance in the random intercepts (i.e. variance in average levels of cognitive ability across samples), <span class="math inline">\(\tau_{11}^2\)</span> captures the variance in random slope (i.e. variance in the personality-cognitive ability association across samples), and <span class="math inline">\(\tau_{01}\)</span> captures the correlation between average levels of cognitive ability and personality-cognitive ability associations across samples (e.g., is the association stronger in samples with higher average crystallized ability). Moderators, but not covariates, were included as random slopes and allowed to covary with other random terms.</p>
<p>Models were tested using the <code>lme4</code> package in <code>R</code>, and the <code>tidy()</code> function from the broom.mixed package to extract model coefficients and confidence intervals (CI) of fixed effects and heterogeneity estimates. . In order to extract the random effects (i.e. Level 2 variances) and interval estimates, the effects argument was set to <code>"ran_pars,"</code> the <code>conf.int</code> argument was set to <code>TRUE</code>, the <code>conf.method</code> argument was set to <code>"boot"</code>, and the <code>n.sim</code> argument was set to <code>500.</code> Inferences were made based on the 95% bootstrapped confidence intervals. As before, overall simple-effects predictions were calculated by providing the full range of personality (0-10) and average levels of the covariates from the data used to estimate the model as the <code>"newdata"</code> argument, and setting the <code>"re.form"</code> argument as <code>FALSE</code> in the <code>lme4</code> <code>predict.merMod()</code> function in conjunction with the <code>bootMer()</code> function to provide intervals around the estimates. For sample-specific effects, averages and levels of covariates were determined using data from each sample separately and provided to the <code>lme4</code> <code>predict.merMod()</code> function as <code>"newdata."</code></p>
</div>
</div>
<div id="model-function-3" class="section level4 hasAnchor" number="4.2.2.2">
<h4><span class="header-section-number">4.2.2.2</span> Model Function<a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#model-function-3" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The first thing we need is a function that will bring in the data, create a formula in the model based on input on the type (Frequentist or Bayesian), moderators (none, age, gender, and education), and combinations of covariates (single or fully adjusted based on age, gender, and education). This case is slightly less complicated than the case of dummy codes, because we simply include study as the nesting unit and personality effect of the personality and moderator effect as random slopes. This results in a intercept and target effect for each study without the need to build contrasts. Then we run the model, extract its fixed and study-specific effect estimates, and save both for later. By saving the results, it will make it easier and faster for us to extract the necessary model results later while still retaining all information from the original model.</p>
<div class="sourceCode" id="cb310"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb310-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb310-1" tabindex="-1"></a>ipd2b_mod_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(trait, outcome, type, mod, cov){</span>
<span id="cb310-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb310-2" tabindex="-1"></a>  <span class="do">## load the data</span></span>
<span id="cb310-3"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb310-3" tabindex="-1"></a>  <span class="fu">load</span>(<span class="fu">sprintf</span>(<span class="st">&quot;%s/data/one_stage/%s_%s.RData&quot;</span>, local_path, trait, outcome))</span>
<span id="cb310-4"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb310-4" tabindex="-1"></a>  </span>
<span id="cb310-5"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb310-5" tabindex="-1"></a>  <span class="do">## compiled Bayesian model to speed up processing and avoid crashing</span></span>
<span id="cb310-6"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb310-6" tabindex="-1"></a>  <span class="cf">if</span>(type <span class="sc">==</span> <span class="st">&quot;Bayesian&quot;</span>) <span class="fu">load</span>(<span class="fu">sprintf</span>(<span class="st">&quot;%s/results/2b_ipd_mlm/bayes_sample_mod.RData&quot;</span>, local_path))</span>
<span id="cb310-7"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb310-7" tabindex="-1"></a>  </span>
<span id="cb310-8"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb310-8" tabindex="-1"></a>  <span class="do">## formula </span></span>
<span id="cb310-9"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb310-9" tabindex="-1"></a>  <span class="cf">if</span> (cov <span class="sc">==</span> <span class="st">&quot;all&quot;</span>) cv <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;age&quot;</span>, <span class="st">&quot;gender&quot;</span>, <span class="st">&quot;education&quot;</span>)</span>
<span id="cb310-10"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb310-10" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span>cov <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;all&quot;</span>, <span class="st">&quot;none&quot;</span>)) cv <span class="ot">&lt;-</span> cov</span>
<span id="cb310-11"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb310-11" tabindex="-1"></a>  rhs <span class="ot">&lt;-</span> <span class="st">&quot;p_value&quot;</span></span>
<span id="cb310-12"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb310-12" tabindex="-1"></a>  rhs <span class="ot">&lt;-</span> <span class="cf">if</span>(cov <span class="sc">!=</span> <span class="st">&quot;none&quot;</span>) <span class="fu">c</span>(rhs, cv) <span class="cf">else</span> rhs</span>
<span id="cb310-13"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb310-13" tabindex="-1"></a>  <span class="cf">if</span>(mod <span class="sc">!=</span> <span class="st">&quot;none&quot;</span>){rhs <span class="ot">&lt;-</span> <span class="fu">c</span>(rhs, <span class="fu">paste</span>(<span class="st">&quot;p_value&quot;</span>, mod, <span class="at">sep =</span> <span class="st">&quot;*&quot;</span>))}</span>
<span id="cb310-14"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb310-14" tabindex="-1"></a>  re <span class="ot">&lt;-</span> <span class="cf">if</span>(mod <span class="sc">==</span> <span class="st">&quot;none&quot;</span> <span class="sc">|</span> mod <span class="sc">%in%</span> stdyModers<span class="sc">$</span>short_name) <span class="st">&quot;(p_value | study)&quot;</span> <span class="cf">else</span> <span class="fu">paste</span>(<span class="fu">paste</span>(<span class="st">&quot;(p_value&quot;</span>, mod, <span class="at">sep =</span> <span class="st">&quot; * &quot;</span>), <span class="st">&quot;| study)&quot;</span>)</span>
<span id="cb310-15"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb310-15" tabindex="-1"></a>  rhs <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="fu">c</span>(rhs, re), <span class="at">collapse =</span> <span class="st">&quot; + &quot;</span>)</span>
<span id="cb310-16"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb310-16" tabindex="-1"></a>  f <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;o_value ~ &quot;</span>, rhs, <span class="at">collapse =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb310-17"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb310-17" tabindex="-1"></a>  </span>
<span id="cb310-18"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb310-18" tabindex="-1"></a>  <span class="do">## run the models &amp; save</span></span>
<span id="cb310-19"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb310-19" tabindex="-1"></a>  m <span class="ot">&lt;-</span> <span class="cf">if</span>(type <span class="sc">==</span> <span class="st">&quot;Frequentist&quot;</span>){<span class="fu">lmer</span>(f, <span class="at">data =</span> d)} <span class="cf">else</span> {<span class="fu">update</span>(m, <span class="at">formula =</span> f, <span class="at">newdata =</span> d, <span class="at">iter =</span> <span class="dv">2000</span></span>
<span id="cb310-20"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb310-20" tabindex="-1"></a>            , <span class="at">warmup =</span> <span class="dv">1000</span>)}</span>
<span id="cb310-21"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb310-21" tabindex="-1"></a>  <span class="fu">save</span>(m, <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/2b_ipd_mlm/%s/models/%s_%s_%s_%s.RData&quot;</span></span>
<span id="cb310-22"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb310-22" tabindex="-1"></a>                         , local_path, type, outcome, trait, mod, cov))</span>
<span id="cb310-23"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb310-23" tabindex="-1"></a>  </span>
<span id="cb310-24"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb310-24" tabindex="-1"></a>  <span class="do">## extract model terms and confidence intervals &amp; save</span></span>
<span id="cb310-25"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb310-25" tabindex="-1"></a>  fx <span class="ot">&lt;-</span> <span class="fu">tidy</span>(m, <span class="at">conf.int =</span> T) <span class="sc">%&gt;%</span></span>
<span id="cb310-26"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb310-26" tabindex="-1"></a>    <span class="fu">select</span>(term, estimate, conf.low, conf.high)</span>
<span id="cb310-27"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb310-27" tabindex="-1"></a>  rx <span class="ot">&lt;-</span> <span class="fu">std_eff_fun</span>(m, type)</span>
<span id="cb310-28"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb310-28" tabindex="-1"></a>  <span class="fu">save</span>(fx, rx, <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/2b_ipd_mlm/%s/summary/%s_%s_%s_%s.RData&quot;</span></span>
<span id="cb310-29"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb310-29" tabindex="-1"></a>                          , local_path, type, outcome, trait, mod, cov))</span>
<span id="cb310-30"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb310-30" tabindex="-1"></a>  </span>
<span id="cb310-31"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb310-31" tabindex="-1"></a>  <span class="do">## extract heterogeneity estimates</span></span>
<span id="cb310-32"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb310-32" tabindex="-1"></a>  het <span class="ot">&lt;-</span> <span class="fu">ipd2b_hetero_fun</span>(m, type)</span>
<span id="cb310-33"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb310-33" tabindex="-1"></a>  <span class="fu">save</span>(het, <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/2b_ipd_mlm/%s/heterogeneity/%s_%s_%s_%s.RData&quot;</span></span>
<span id="cb310-34"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb310-34" tabindex="-1"></a>                          , local_path, type, outcome, trait, mod, cov))</span>
<span id="cb310-35"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb310-35" tabindex="-1"></a>  </span>
<span id="cb310-36"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb310-36" tabindex="-1"></a>  <span class="do">## simple effects for moderators</span></span>
<span id="cb310-37"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb310-37" tabindex="-1"></a>  <span class="cf">if</span>(mod <span class="sc">!=</span> <span class="st">&quot;none&quot;</span>){</span>
<span id="cb310-38"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb310-38" tabindex="-1"></a>    pred.fx <span class="ot">&lt;-</span> <span class="fu">ipd2b_fx_pred_fun</span>(m, mod, type)</span>
<span id="cb310-39"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb310-39" tabindex="-1"></a>    pred.rx <span class="ot">&lt;-</span> <span class="cf">if</span>(mod <span class="sc">%in%</span> stdyModers<span class="sc">$</span>short_name) <span class="cn">NULL</span> <span class="cf">else</span> <span class="fu">ipd2b_rx_pred_fun</span>(m, mod, type)</span>
<span id="cb310-40"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb310-40" tabindex="-1"></a>    <span class="fu">save</span>(pred.fx, pred.rx, <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/2b_ipd_mlm/%s/predicted/%s_%s_%s_%s.RData&quot;</span></span>
<span id="cb310-41"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb310-41" tabindex="-1"></a>                          , local_path, type, outcome, trait, mod, cov))</span>
<span id="cb310-42"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb310-42" tabindex="-1"></a>  }</span>
<span id="cb310-43"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb310-43" tabindex="-1"></a>  </span>
<span id="cb310-44"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb310-44" tabindex="-1"></a>  <span class="do">## clean up the local function environment</span></span>
<span id="cb310-45"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb310-45" tabindex="-1"></a>  <span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">c</span>(<span class="st">&quot;d&quot;</span>, <span class="st">&quot;f&quot;</span>, <span class="st">&quot;rhs&quot;</span>, <span class="st">&quot;m&quot;</span>, <span class="st">&quot;fx&quot;</span>, <span class="st">&quot;rx&quot;</span>, <span class="st">&quot;het&quot;</span>))</span>
<span id="cb310-46"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb310-46" tabindex="-1"></a>  <span class="fu">gc</span>()</span>
<span id="cb310-47"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb310-47" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="study-specific-effects-function-1" class="section level4 hasAnchor" number="4.2.2.3">
<h4><span class="header-section-number">4.2.2.3</span> Study-Specific Effects Function<a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#study-specific-effects-function-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>As noted previously, once we run the model, we will have to use a second step to get the study-specific estimates for all studies. Unlike with dummy codes, doing so is much more straightforward. We just have to pull study-specific effects using the <code>coef()</code> for both Bayesian and Frequentist approaches. However, to get confidence intervals for Frequentist approaches, we will additionally have to use the <code>standard_error()</code> function from the <code>parameters</code> package to get standard errors.</p>
<div class="sourceCode" id="cb311"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb311-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb311-1" tabindex="-1"></a>std_eff_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(m, type){</span>
<span id="cb311-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb311-2" tabindex="-1"></a>  <span class="cf">if</span>(type <span class="sc">==</span> <span class="st">&quot;Frequentist&quot;</span>){</span>
<span id="cb311-3"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb311-3" tabindex="-1"></a>    <span class="co"># coef function gives fixed + random effect estimates but not SE&#39;s</span></span>
<span id="cb311-4"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb311-4" tabindex="-1"></a>    <span class="co"># so we&#39;ll take those estimates and get their SE&#39;s from the parameters package</span></span>
<span id="cb311-5"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb311-5" tabindex="-1"></a>    <span class="fu">coef</span>(m)<span class="sc">$</span>study <span class="sc">%&gt;%</span></span>
<span id="cb311-6"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb311-6" tabindex="-1"></a>      <span class="fu">data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb311-7"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb311-7" tabindex="-1"></a>      <span class="fu">rownames_to_column</span>(<span class="st">&quot;study&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb311-8"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb311-8" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">term =</span> <span class="st">&quot;estimate&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb311-9"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb311-9" tabindex="-1"></a>      <span class="fu">full_join</span>(</span>
<span id="cb311-10"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb311-10" tabindex="-1"></a>        parameters<span class="sc">::</span><span class="fu">standard_error</span>(m, <span class="at">effects =</span> <span class="st">&quot;random&quot;</span>)<span class="sc">$</span>study <span class="sc">%&gt;%</span></span>
<span id="cb311-11"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb311-11" tabindex="-1"></a>          <span class="fu">data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb311-12"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb311-12" tabindex="-1"></a>          <span class="fu">rownames_to_column</span>(<span class="st">&quot;study&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb311-13"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb311-13" tabindex="-1"></a>          <span class="fu">mutate</span>(<span class="at">term =</span> <span class="st">&quot;SE&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb311-14"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb311-14" tabindex="-1"></a>      <span class="fu">rename</span>(<span class="at">Intercept =</span> X.Intercept.) <span class="sc">%&gt;%</span></span>
<span id="cb311-15"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb311-15" tabindex="-1"></a>      <span class="co"># select(study, term, , p_value) %&gt;%</span></span>
<span id="cb311-16"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb311-16" tabindex="-1"></a>      <span class="fu">pivot_longer</span>(<span class="fu">c</span>(<span class="sc">-</span>study, <span class="sc">-</span>term), <span class="at">names_to =</span> <span class="st">&quot;names&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;estimate&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb311-17"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb311-17" tabindex="-1"></a>      <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">&quot;term&quot;</span>, <span class="at">values_from =</span> <span class="st">&quot;estimate&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb311-18"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb311-18" tabindex="-1"></a>      <span class="fu">rename</span>(<span class="at">term =</span> names) <span class="sc">%&gt;%</span></span>
<span id="cb311-19"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb311-19" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">conf.low =</span> estimate <span class="sc">-</span> <span class="dv">2</span><span class="sc">*</span>SE, <span class="at">conf.high =</span> estimate <span class="sc">+</span> <span class="dv">2</span><span class="sc">*</span>SE,</span>
<span id="cb311-20"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb311-20" tabindex="-1"></a>             <span class="at">term =</span> <span class="fu">ifelse</span>(<span class="fu">grepl</span>(<span class="st">&quot;p_value.&quot;</span>, term), <span class="fu">str_replace_all</span>(term, <span class="st">&quot;p_value.&quot;</span>, <span class="st">&quot;p_value:&quot;</span>), term))</span>
<span id="cb311-21"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb311-21" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb311-22"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb311-22" tabindex="-1"></a>    <span class="fu">coef</span>(m, <span class="at">probs =</span> <span class="fu">c</span>(<span class="fl">0.025</span>, <span class="fl">0.975</span>))[[<span class="dv">1</span>]] <span class="sc">%&gt;%</span> <span class="fu">array_tree</span>(<span class="dv">3</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb311-23"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb311-23" tabindex="-1"></a>      <span class="fu">tibble</span>(<span class="at">term =</span> <span class="fu">names</span>(.), <span class="at">data =</span> .) <span class="sc">%&gt;%</span> </span>
<span id="cb311-24"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb311-24" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">data =</span> <span class="fu">map</span>(data, <span class="sc">~</span>(.) <span class="sc">%&gt;%</span> data.frame <span class="sc">%&gt;%</span> </span>
<span id="cb311-25"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb311-25" tabindex="-1"></a>        <span class="fu">rownames_to_column</span>(<span class="st">&quot;study&quot;</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb311-26"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb311-26" tabindex="-1"></a>      <span class="fu">unnest</span>(data) <span class="sc">%&gt;%</span> </span>
<span id="cb311-27"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb311-27" tabindex="-1"></a>      <span class="fu">select</span>(term, study, <span class="at">estimate =</span> Estimate, <span class="at">conf.low =</span> Q2<span class="fl">.5</span>, <span class="at">conf.high =</span> Q97<span class="fl">.5</span>)</span>
<span id="cb311-28"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb311-28" tabindex="-1"></a>  }</span>
<span id="cb311-29"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb311-29" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="heterogeneity-estimates-function" class="section level4 hasAnchor" number="4.2.2.4">
<h4><span class="header-section-number">4.2.2.4</span> Heterogeneity Estimates Function<a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#heterogeneity-estimates-function" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The Final pieces of information we need to extract from these models are estimates of the heterogeneity of effects across studies.</p>
<div class="sourceCode" id="cb312"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb312-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb312-1" tabindex="-1"></a>ipd2b_hetero_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(m, type){</span>
<span id="cb312-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb312-2" tabindex="-1"></a>  args <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">x =</span> m, <span class="at">effects =</span> <span class="st">&quot;ran_pars&quot;</span>, <span class="at">conf.int =</span> T)</span>
<span id="cb312-3"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb312-3" tabindex="-1"></a>  <span class="cf">if</span>(type <span class="sc">==</span> <span class="st">&quot;Frequentist&quot;</span>)args<span class="sc">$</span>conf.method <span class="ot">=</span> <span class="st">&quot;boot&quot;</span>; args<span class="sc">$</span>nsim <span class="ot">&lt;-</span> <span class="dv">100</span>; args<span class="sc">$</span>parallel <span class="ot">=</span> <span class="st">&quot;multicore&quot;</span>; args<span class="sc">$</span>ncpus <span class="ot">=</span> <span class="dv">4</span></span>
<span id="cb312-4"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb312-4" tabindex="-1"></a>  <span class="fu">do.call</span>(tidy, args) <span class="sc">%&gt;%</span></span>
<span id="cb312-5"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb312-5" tabindex="-1"></a>    <span class="fu">select</span>(group, term, estimate, conf.low, conf.high) <span class="sc">%&gt;%</span></span>
<span id="cb312-6"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb312-6" tabindex="-1"></a>    <span class="fu">separate</span>(term, <span class="fu">c</span>(<span class="st">&quot;est&quot;</span>, <span class="st">&quot;term&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;__&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb312-7"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb312-7" tabindex="-1"></a>    <span class="fu">mutate_at</span>(<span class="fu">vars</span>(estimate<span class="sc">:</span>conf.high), <span class="sc">~</span><span class="fu">ifelse</span>(est <span class="sc">==</span> <span class="st">&quot;sd&quot;</span>, .<span class="sc">^</span><span class="dv">2</span>, .)) <span class="sc">%&gt;%</span></span>
<span id="cb312-8"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb312-8" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">est =</span> <span class="fu">ifelse</span>(est <span class="sc">==</span> <span class="st">&quot;sd&quot;</span>, <span class="st">&quot;var&quot;</span>, est))</span>
<span id="cb312-9"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb312-9" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="simple-effects-function-3" class="section level4 hasAnchor" number="4.2.2.5">
<h4><span class="header-section-number">4.2.2.5</span> Simple Effects Function<a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#simple-effects-function-3" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="fixed-effects-3" class="section level5 hasAnchor" number="4.2.2.5.1">
<h5><span class="header-section-number">4.2.2.5.1</span> Fixed Effects<a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#fixed-effects-3" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb313"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb313-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-1" tabindex="-1"></a>predIntlme4 <span class="ot">&lt;-</span> <span class="cf">function</span>(m, mod_frame, ref){</span>
<span id="cb313-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-2" tabindex="-1"></a>  b <span class="ot">&lt;-</span> <span class="fu">bootMer</span>(m</span>
<span id="cb313-3"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-3" tabindex="-1"></a>               , <span class="at">FUN =</span> <span class="cf">function</span>(x) lme4<span class="sc">:::</span><span class="fu">predict.merMod</span>(x, <span class="at">newdata =</span> mod_frame , <span class="at">re.form =</span> ref)</span>
<span id="cb313-4"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-4" tabindex="-1"></a>               , <span class="at">nsim =</span> <span class="dv">100</span></span>
<span id="cb313-5"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-5" tabindex="-1"></a>               , <span class="at">parallel =</span> <span class="st">&quot;multicore&quot;</span></span>
<span id="cb313-6"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-6" tabindex="-1"></a>               , <span class="at">ncpus =</span> <span class="dv">8</span></span>
<span id="cb313-7"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-7" tabindex="-1"></a>               )</span>
<span id="cb313-8"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-8" tabindex="-1"></a>  ci <span class="ot">&lt;-</span> <span class="fu">apply</span>(b<span class="sc">$</span>t, <span class="dv">2</span>, quantile, <span class="at">probs =</span> <span class="fu">c</span>(.<span class="dv">05</span><span class="sc">/</span><span class="dv">2</span>, <span class="dv">1</span> <span class="sc">-</span> .<span class="dv">05</span><span class="sc">/</span><span class="dv">2</span>)) <span class="sc">%&gt;%</span> <span class="fu">t</span>()</span>
<span id="cb313-9"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-9" tabindex="-1"></a>  <span class="fu">data.frame</span>(<span class="at">pred =</span> b<span class="sc">$</span>t0, ci) <span class="sc">%&gt;%</span> </span>
<span id="cb313-10"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-10" tabindex="-1"></a>    <span class="fu">setNames</span>(<span class="fu">c</span>(<span class="st">&quot;pred&quot;</span>, <span class="st">&quot;lower&quot;</span>, <span class="st">&quot;upper&quot;</span>)) <span class="sc">%&gt;%</span> <span class="fu">as_tibble</span>()</span>
<span id="cb313-11"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-11" tabindex="-1"></a>}</span>
<span id="cb313-12"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-12" tabindex="-1"></a></span>
<span id="cb313-13"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-13" tabindex="-1"></a>ipd2b_fx_pred_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(m, moder, type){</span>
<span id="cb313-14"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-14" tabindex="-1"></a>  d <span class="ot">&lt;-</span> <span class="cf">if</span>(type <span class="sc">==</span> <span class="st">&quot;Bayesian&quot;</span>) m<span class="sc">$</span>data <span class="cf">else</span> m<span class="sc">@</span>frame</span>
<span id="cb313-15"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-15" tabindex="-1"></a>  d <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>o_value, <span class="sc">-</span>p_value, <span class="sc">-</span>study)</span>
<span id="cb313-16"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-16" tabindex="-1"></a>  cols <span class="ot">&lt;-</span> <span class="fu">colnames</span>(d)</span>
<span id="cb313-17"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-17" tabindex="-1"></a>  md_cl <span class="ot">&lt;-</span> <span class="fu">class</span>(d[,moder])</span>
<span id="cb313-18"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-18" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">any</span>(<span class="fu">sapply</span>(d, class) <span class="sc">==</span> <span class="st">&quot;numeric&quot;</span>)){</span>
<span id="cb313-19"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-19" tabindex="-1"></a>    msd <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span></span>
<span id="cb313-20"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-20" tabindex="-1"></a>      <span class="fu">select_if</span>(is.numeric) <span class="sc">%&gt;%</span></span>
<span id="cb313-21"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-21" tabindex="-1"></a>      <span class="fu">pivot_longer</span>(<span class="fu">everything</span>()</span>
<span id="cb313-22"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-22" tabindex="-1"></a>                   , <span class="at">names_to =</span> <span class="st">&quot;item&quot;</span></span>
<span id="cb313-23"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-23" tabindex="-1"></a>                   , <span class="at">values_to =</span> <span class="st">&quot;value&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb313-24"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-24" tabindex="-1"></a>      <span class="fu">group_by</span>(item) <span class="sc">%&gt;%</span></span>
<span id="cb313-25"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-25" tabindex="-1"></a>      <span class="fu">summarize_at</span>(<span class="fu">vars</span>(value), <span class="fu">lst</span>(mean, sd)) <span class="sc">%&gt;%</span></span>
<span id="cb313-26"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-26" tabindex="-1"></a>      <span class="fu">ungroup</span>()</span>
<span id="cb313-27"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-27" tabindex="-1"></a>  }</span>
<span id="cb313-28"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-28" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">any</span>(<span class="fu">sapply</span>(d, class) <span class="sc">==</span> <span class="st">&quot;factor&quot;</span>)){</span>
<span id="cb313-29"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-29" tabindex="-1"></a>    fct_vars <span class="ot">&lt;-</span> <span class="fu">colnames</span>(d)[<span class="fu">sapply</span>(d, class) <span class="sc">==</span> <span class="st">&quot;factor&quot;</span>]</span>
<span id="cb313-30"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-30" tabindex="-1"></a>    fct_lev <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> </span>
<span id="cb313-31"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-31" tabindex="-1"></a>      <span class="fu">select_if</span>(is.factor) <span class="sc">%&gt;%</span></span>
<span id="cb313-32"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-32" tabindex="-1"></a>      <span class="fu">summarize_all</span>(<span class="sc">~</span><span class="fu">list</span>(<span class="fu">levels</span>(.)))</span>
<span id="cb313-33"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-33" tabindex="-1"></a>  }</span>
<span id="cb313-34"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-34" tabindex="-1"></a>  d <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span><span class="fu">one_of</span>(moder))</span>
<span id="cb313-35"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-35" tabindex="-1"></a>  md_levs <span class="ot">&lt;-</span> <span class="cf">if</span>(md_cl <span class="sc">==</span> <span class="st">&quot;numeric&quot;</span>){</span>
<span id="cb313-36"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-36" tabindex="-1"></a>    <span class="cf">if</span>(moder <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;age&quot;</span>, <span class="st">&quot;baseAge&quot;</span>, <span class="st">&quot;baseYear&quot;</span>)) {</span>
<span id="cb313-37"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-37" tabindex="-1"></a>      <span class="fu">c</span>(<span class="sc">-</span><span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">10</span>)</span>
<span id="cb313-38"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-38" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (moder <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;predInt&quot;</span>, <span class="st">&quot;education&quot;</span>)) {</span>
<span id="cb313-39"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-39" tabindex="-1"></a>      <span class="fu">c</span>(<span class="sc">-</span><span class="dv">5</span>, <span class="dv">0</span>, <span class="dv">5</span>) </span>
<span id="cb313-40"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-40" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb313-41"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-41" tabindex="-1"></a>      <span class="fu">with</span>(msd, <span class="fu">c</span>(mean[item <span class="sc">==</span> moder] <span class="sc">-</span> sd[item <span class="sc">==</span> moder], mean[item <span class="sc">==</span> moder], mean[item <span class="sc">==</span> moder] <span class="sc">+</span> sd[item <span class="sc">==</span> moder]))</span>
<span id="cb313-42"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-42" tabindex="-1"></a>    }</span>
<span id="cb313-43"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-43" tabindex="-1"></a>  } <span class="cf">else</span> { </span>
<span id="cb313-44"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-44" tabindex="-1"></a>    (fct_lev <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">one_of</span>(moder)) <span class="sc">%&gt;%</span> <span class="fu">unnest</span>(<span class="fu">one_of</span>(moder)) <span class="sc">%&gt;%</span> <span class="fu">data.frame</span>())[,moder]</span>
<span id="cb313-45"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-45" tabindex="-1"></a>  }</span>
<span id="cb313-46"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-46" tabindex="-1"></a>  </span>
<span id="cb313-47"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-47" tabindex="-1"></a>  mod_frame <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(</span>
<span id="cb313-48"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-48" tabindex="-1"></a>    <span class="at">p_value =</span> <span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">10</span>,.<span class="dv">5</span>)</span>
<span id="cb313-49"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-49" tabindex="-1"></a>    , <span class="at">modvalue =</span> md_levs</span>
<span id="cb313-50"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-50" tabindex="-1"></a>    , <span class="at">stringsAsFactors =</span> F</span>
<span id="cb313-51"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-51" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">setNames</span>(<span class="fu">c</span>(<span class="st">&quot;p_value&quot;</span>, moder))</span>
<span id="cb313-52"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-52" tabindex="-1"></a>  </span>
<span id="cb313-53"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-53" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">ncol</span>(d) <span class="sc">&gt;</span> <span class="dv">0</span>){</span>
<span id="cb313-54"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-54" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">any</span>(<span class="fu">sapply</span>(d, class) <span class="sc">==</span> <span class="st">&quot;numeric&quot;</span>)){</span>
<span id="cb313-55"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-55" tabindex="-1"></a>      mod_frame <span class="ot">&lt;-</span> <span class="fu">tibble</span>(mod_frame, d <span class="sc">%&gt;%</span> <span class="fu">select_if</span>(is.numeric) <span class="sc">%&gt;%</span> <span class="fu">summarize_all</span>(mean))</span>
<span id="cb313-56"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-56" tabindex="-1"></a>    } </span>
<span id="cb313-57"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-57" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">any</span>(<span class="fu">sapply</span>(d, class) <span class="sc">==</span> <span class="st">&quot;factor&quot;</span>)){</span>
<span id="cb313-58"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-58" tabindex="-1"></a>      mod_frame <span class="ot">&lt;-</span> <span class="fu">tibble</span>(mod_frame, d <span class="sc">%&gt;%</span> <span class="fu">select_if</span>(is.factor) <span class="sc">%&gt;%</span> <span class="fu">summarize_all</span>(<span class="sc">~</span><span class="fu">levels</span>(.)[<span class="dv">1</span>]))</span>
<span id="cb313-59"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-59" tabindex="-1"></a>    }</span>
<span id="cb313-60"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-60" tabindex="-1"></a>  }</span>
<span id="cb313-61"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-61" tabindex="-1"></a>  </span>
<span id="cb313-62"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-62" tabindex="-1"></a>  pred.fx <span class="ot">&lt;-</span> <span class="cf">if</span>(type <span class="sc">==</span> <span class="st">&quot;Bayesian&quot;</span>){</span>
<span id="cb313-63"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-63" tabindex="-1"></a>    <span class="fu">bind_cols</span>(</span>
<span id="cb313-64"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-64" tabindex="-1"></a>      mod_frame, </span>
<span id="cb313-65"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-65" tabindex="-1"></a>      <span class="fu">fitted</span>(m</span>
<span id="cb313-66"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-66" tabindex="-1"></a>             , <span class="at">newdata =</span> mod_frame</span>
<span id="cb313-67"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-67" tabindex="-1"></a>             , <span class="at">re_formula =</span> <span class="cn">NA</span>) <span class="sc">%&gt;%</span> data.frame</span>
<span id="cb313-68"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-68" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb313-69"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-69" tabindex="-1"></a>      <span class="fu">select</span>(<span class="fu">one_of</span>(<span class="fu">colnames</span>(m<span class="sc">$</span>data)), <span class="at">pred =</span> Estimate, <span class="at">lower =</span> Q2<span class="fl">.5</span>, <span class="at">upper =</span> Q97<span class="fl">.5</span>)</span>
<span id="cb313-70"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-70" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb313-71"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-71" tabindex="-1"></a>    <span class="fu">bind_cols</span>(</span>
<span id="cb313-72"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-72" tabindex="-1"></a>      mod_frame, </span>
<span id="cb313-73"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-73" tabindex="-1"></a>      <span class="fu">predIntlme4</span>(m, mod_frame, <span class="cn">NA</span>)</span>
<span id="cb313-74"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-74" tabindex="-1"></a>    ) <span class="co">#%&gt;%</span></span>
<span id="cb313-75"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-75" tabindex="-1"></a>    <span class="co"># select(one_of(colnames(m@frame)), pred, lower, upper)</span></span>
<span id="cb313-76"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-76" tabindex="-1"></a>  }</span>
<span id="cb313-77"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-77" tabindex="-1"></a>  </span>
<span id="cb313-78"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-78" tabindex="-1"></a>  <span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">c</span>(<span class="st">&quot;m&quot;</span>, <span class="st">&quot;mod_frame&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;md_levs&quot;</span>))</span>
<span id="cb313-79"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-79" tabindex="-1"></a>  <span class="fu">gc</span>()</span>
<span id="cb313-80"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-80" tabindex="-1"></a>  <span class="fu">return</span>(pred.fx)</span>
<span id="cb313-81"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb313-81" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="study-specific-effects-4" class="section level5 hasAnchor" number="4.2.2.5.2">
<h5><span class="header-section-number">4.2.2.5.2</span> Study-Specific Effects<a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#study-specific-effects-4" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb314"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb314-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-1" tabindex="-1"></a>ipd2b_rx_pred_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(m, moder, type){</span>
<span id="cb314-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-2" tabindex="-1"></a>  d <span class="ot">&lt;-</span> <span class="cf">if</span>(type <span class="sc">==</span> <span class="st">&quot;Bayesian&quot;</span>) m<span class="sc">$</span>data <span class="cf">else</span> m<span class="sc">@</span>frame</span>
<span id="cb314-3"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-3" tabindex="-1"></a>  d <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>o_value, <span class="sc">-</span>p_value)</span>
<span id="cb314-4"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-4" tabindex="-1"></a>  cols <span class="ot">&lt;-</span> <span class="fu">colnames</span>(d)</span>
<span id="cb314-5"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-5" tabindex="-1"></a>  md_cl <span class="ot">&lt;-</span> <span class="fu">class</span>(d[,moder])</span>
<span id="cb314-6"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-6" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">any</span>(<span class="fu">sapply</span>(d, class) <span class="sc">==</span> <span class="st">&quot;numeric&quot;</span>)){</span>
<span id="cb314-7"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-7" tabindex="-1"></a>    msd <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span></span>
<span id="cb314-8"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-8" tabindex="-1"></a>      <span class="fu">group_by</span>(study) <span class="sc">%&gt;%</span></span>
<span id="cb314-9"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-9" tabindex="-1"></a>      <span class="fu">select_if</span>(is.numeric) <span class="sc">%&gt;%</span></span>
<span id="cb314-10"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-10" tabindex="-1"></a>      <span class="fu">pivot_longer</span>(<span class="sc">-</span>study</span>
<span id="cb314-11"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-11" tabindex="-1"></a>                   , <span class="at">names_to =</span> <span class="st">&quot;item&quot;</span></span>
<span id="cb314-12"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-12" tabindex="-1"></a>                   , <span class="at">values_to =</span> <span class="st">&quot;value&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb314-13"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-13" tabindex="-1"></a>      <span class="fu">group_by</span>(study, item) <span class="sc">%&gt;%</span></span>
<span id="cb314-14"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-14" tabindex="-1"></a>      <span class="fu">summarize_at</span>(<span class="fu">vars</span>(value), <span class="fu">lst</span>(mean, sd), <span class="at">na.rm =</span> T) <span class="sc">%&gt;%</span></span>
<span id="cb314-15"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-15" tabindex="-1"></a>      <span class="fu">ungroup</span>() </span>
<span id="cb314-16"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-16" tabindex="-1"></a>  }</span>
<span id="cb314-17"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-17" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">any</span>(<span class="fu">sapply</span>(d, class) <span class="sc">==</span> <span class="st">&quot;factor&quot;</span>)){</span>
<span id="cb314-18"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-18" tabindex="-1"></a>    fct_vars <span class="ot">&lt;-</span> <span class="fu">colnames</span>(d)[<span class="fu">sapply</span>(d <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>study), class) <span class="sc">==</span> <span class="st">&quot;factor&quot;</span>]</span>
<span id="cb314-19"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-19" tabindex="-1"></a>    fct_lev <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> </span>
<span id="cb314-20"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-20" tabindex="-1"></a>      <span class="fu">group_by</span>(study) <span class="sc">%&gt;%</span></span>
<span id="cb314-21"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-21" tabindex="-1"></a>      <span class="fu">select_if</span>(is.factor) <span class="sc">%&gt;%</span></span>
<span id="cb314-22"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-22" tabindex="-1"></a>      <span class="fu">summarize_all</span>(<span class="sc">~</span><span class="fu">list</span>(<span class="fu">unique</span>(.))) <span class="sc">%&gt;%</span></span>
<span id="cb314-23"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-23" tabindex="-1"></a>      <span class="fu">ungroup</span>() <span class="co">#%&gt;%</span></span>
<span id="cb314-24"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-24" tabindex="-1"></a>      <span class="co"># unnest(one_of(fct_vars))</span></span>
<span id="cb314-25"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-25" tabindex="-1"></a>  }</span>
<span id="cb314-26"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-26" tabindex="-1"></a>  d <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span><span class="fu">one_of</span>(moder))</span>
<span id="cb314-27"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-27" tabindex="-1"></a>  md_levs <span class="ot">&lt;-</span> <span class="cf">if</span>(md_cl <span class="sc">==</span> <span class="st">&quot;numeric&quot;</span>){</span>
<span id="cb314-28"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-28" tabindex="-1"></a>    <span class="cf">if</span>(moder <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;age&quot;</span>, <span class="st">&quot;baseAge&quot;</span>, <span class="st">&quot;baseYear&quot;</span>)) {</span>
<span id="cb314-29"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-29" tabindex="-1"></a>      <span class="fu">c</span>(<span class="sc">-</span><span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">10</span>)</span>
<span id="cb314-30"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-30" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (moder <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;predInt&quot;</span>, <span class="st">&quot;education&quot;</span>)) {</span>
<span id="cb314-31"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-31" tabindex="-1"></a>      <span class="fu">c</span>(<span class="sc">-</span><span class="dv">5</span>, <span class="dv">0</span>, <span class="dv">5</span>) </span>
<span id="cb314-32"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-32" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb314-33"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-33" tabindex="-1"></a>      <span class="fu">with</span>(msd, <span class="fu">c</span>(mean[item <span class="sc">==</span> moder] <span class="sc">-</span> sd[item <span class="sc">==</span> moder], mean[item <span class="sc">==</span> moder], mean[item <span class="sc">==</span> moder] <span class="sc">+</span> sd[item <span class="sc">==</span> moder]))</span>
<span id="cb314-34"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-34" tabindex="-1"></a>    }</span>
<span id="cb314-35"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-35" tabindex="-1"></a>  } <span class="cf">else</span> { </span>
<span id="cb314-36"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-36" tabindex="-1"></a>    (fct_lev <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">one_of</span>(moder)) <span class="sc">%&gt;%</span> <span class="fu">unnest</span>(<span class="fu">one_of</span>(moder)) <span class="sc">%&gt;%</span> <span class="fu">data.frame</span>())[,moder]</span>
<span id="cb314-37"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-37" tabindex="-1"></a>  }</span>
<span id="cb314-38"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-38" tabindex="-1"></a>  </span>
<span id="cb314-39"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-39" tabindex="-1"></a>  mod_frame <span class="ot">&lt;-</span> <span class="cf">if</span>(md_cl <span class="sc">==</span> <span class="st">&quot;numeric&quot;</span>) {</span>
<span id="cb314-40"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-40" tabindex="-1"></a>    <span class="fu">crossing</span>(</span>
<span id="cb314-41"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-41" tabindex="-1"></a>      <span class="at">p_value =</span> <span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">10</span>,.<span class="dv">5</span>),</span>
<span id="cb314-42"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-42" tabindex="-1"></a>      <span class="at">modvalue =</span> md_levs,</span>
<span id="cb314-43"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-43" tabindex="-1"></a>      <span class="at">study =</span> <span class="fu">unique</span>(d<span class="sc">$</span>study)</span>
<span id="cb314-44"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-44" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> <span class="fu">setNames</span>(<span class="fu">c</span>(<span class="st">&quot;p_value&quot;</span>, moder, <span class="st">&quot;study&quot;</span>))<span class="co">#%&gt;% full_join(</span></span>
<span id="cb314-45"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-45" tabindex="-1"></a>    <span class="co">#   msd %&gt;% </span></span>
<span id="cb314-46"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-46" tabindex="-1"></a>    <span class="co">#     filter(item == moder) %&gt;%</span></span>
<span id="cb314-47"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-47" tabindex="-1"></a>    <span class="co">#     mutate(lower = mean - sd, upper = mean + sd) %&gt;%</span></span>
<span id="cb314-48"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-48" tabindex="-1"></a>    <span class="co">#     select(-sd) %&gt;% </span></span>
<span id="cb314-49"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-49" tabindex="-1"></a>    <span class="co">#     pivot_longer(cols = c(mean, lower, upper)</span></span>
<span id="cb314-50"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-50" tabindex="-1"></a>    <span class="co">#                  , names_to = &quot;meas&quot;</span></span>
<span id="cb314-51"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-51" tabindex="-1"></a>    <span class="co">#                  , values_to = &quot;modvalue&quot;) %&gt;%</span></span>
<span id="cb314-52"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-52" tabindex="-1"></a>    <span class="co">#     pivot_wider(names_from = &quot;item&quot;, values_from = &quot;modvalue&quot;) %&gt;%</span></span>
<span id="cb314-53"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-53" tabindex="-1"></a>    <span class="co">#     select(study, one_of(moder))</span></span>
<span id="cb314-54"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-54" tabindex="-1"></a>    <span class="co"># )</span></span>
<span id="cb314-55"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-55" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb314-56"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-56" tabindex="-1"></a>    <span class="fu">crossing</span>(</span>
<span id="cb314-57"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-57" tabindex="-1"></a>      <span class="at">p_value =</span> <span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">10</span>,.<span class="dv">5</span>)</span>
<span id="cb314-58"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-58" tabindex="-1"></a>      , <span class="at">mod_value =</span> md_levs<span class="co">#unique(fct_lev[,moder][[1]])</span></span>
<span id="cb314-59"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-59" tabindex="-1"></a>      , <span class="at">study =</span> <span class="fu">unique</span>(d<span class="sc">$</span>study)</span>
<span id="cb314-60"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-60" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb314-61"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-61" tabindex="-1"></a>      <span class="fu">setNames</span>(<span class="fu">c</span>(<span class="st">&quot;p_value&quot;</span>, moder, <span class="st">&quot;study&quot;</span>))</span>
<span id="cb314-62"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-62" tabindex="-1"></a>  }</span>
<span id="cb314-63"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-63" tabindex="-1"></a>  </span>
<span id="cb314-64"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-64" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">ncol</span>(d) <span class="sc">&gt;</span> <span class="dv">0</span>){</span>
<span id="cb314-65"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-65" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">any</span>(<span class="fu">sapply</span>(d, class) <span class="sc">==</span> <span class="st">&quot;numeric&quot;</span>)){</span>
<span id="cb314-66"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-66" tabindex="-1"></a>      mod_frame <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> </span>
<span id="cb314-67"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-67" tabindex="-1"></a>        <span class="fu">group_by</span>(study) <span class="sc">%&gt;%</span> </span>
<span id="cb314-68"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-68" tabindex="-1"></a>        <span class="fu">select_if</span>(is.numeric) <span class="sc">%&gt;%</span> </span>
<span id="cb314-69"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-69" tabindex="-1"></a>        <span class="fu">summarize_all</span>(mean, <span class="at">na.rm =</span> T) <span class="sc">%&gt;%</span></span>
<span id="cb314-70"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-70" tabindex="-1"></a>        <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb314-71"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-71" tabindex="-1"></a>        <span class="fu">full_join</span>(mod_frame)</span>
<span id="cb314-72"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-72" tabindex="-1"></a>    } </span>
<span id="cb314-73"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-73" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">any</span>(<span class="fu">sapply</span>(d, class) <span class="sc">==</span> <span class="st">&quot;factor&quot;</span>)){</span>
<span id="cb314-74"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-74" tabindex="-1"></a>      mod_frame <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> </span>
<span id="cb314-75"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-75" tabindex="-1"></a>        <span class="fu">group_by</span>(study) <span class="sc">%&gt;%</span></span>
<span id="cb314-76"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-76" tabindex="-1"></a>        <span class="fu">select_if</span>(is.factor) <span class="sc">%&gt;%</span> </span>
<span id="cb314-77"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-77" tabindex="-1"></a>        <span class="fu">summarize_all</span>(levels) <span class="sc">%&gt;%</span></span>
<span id="cb314-78"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-78" tabindex="-1"></a>        <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb314-79"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-79" tabindex="-1"></a>        <span class="fu">full_join</span>(mod_frame) </span>
<span id="cb314-80"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-80" tabindex="-1"></a>    }</span>
<span id="cb314-81"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-81" tabindex="-1"></a>  }</span>
<span id="cb314-82"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-82" tabindex="-1"></a>  </span>
<span id="cb314-83"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-83" tabindex="-1"></a>  pred.rx <span class="ot">&lt;-</span> <span class="cf">if</span>(type <span class="sc">==</span> <span class="st">&quot;Bayesian&quot;</span>){</span>
<span id="cb314-84"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-84" tabindex="-1"></a>    <span class="fu">bind_cols</span>(</span>
<span id="cb314-85"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-85" tabindex="-1"></a>      mod_frame, </span>
<span id="cb314-86"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-86" tabindex="-1"></a>      <span class="fu">fitted</span>(m</span>
<span id="cb314-87"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-87" tabindex="-1"></a>             , <span class="at">newdata =</span> mod_frame) <span class="sc">%&gt;%</span> data.frame</span>
<span id="cb314-88"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-88" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb314-89"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-89" tabindex="-1"></a>      <span class="fu">select</span>(<span class="fu">one_of</span>(<span class="fu">colnames</span>(m<span class="sc">$</span>data)), <span class="at">pred =</span> Estimate, <span class="at">lower =</span> Q2<span class="fl">.5</span>, <span class="at">upper =</span> Q97<span class="fl">.5</span>)</span>
<span id="cb314-90"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-90" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb314-91"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-91" tabindex="-1"></a>    <span class="fu">bind_cols</span>(</span>
<span id="cb314-92"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-92" tabindex="-1"></a>      mod_frame, </span>
<span id="cb314-93"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-93" tabindex="-1"></a>      <span class="fu">tibble</span>(<span class="at">pred =</span> <span class="fu">predict</span>(m, <span class="at">newdata =</span> mod_frame))<span class="co">#predIntlme4(m, mod_frame, NULL)</span></span>
<span id="cb314-94"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-94" tabindex="-1"></a>    ) </span>
<span id="cb314-95"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-95" tabindex="-1"></a>  }</span>
<span id="cb314-96"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-96" tabindex="-1"></a>  </span>
<span id="cb314-97"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-97" tabindex="-1"></a>  <span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">c</span>(<span class="st">&quot;m&quot;</span>, <span class="st">&quot;mod_frame&quot;</span>, <span class="st">&quot;d&quot;</span>))</span>
<span id="cb314-98"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-98" tabindex="-1"></a>  <span class="fu">gc</span>()</span>
<span id="cb314-99"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-99" tabindex="-1"></a>  <span class="fu">return</span>(pred.rx)</span>
<span id="cb314-100"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb314-100" tabindex="-1"></a>}</span></code></pre></div>
</div>
</div>
<div id="run-models-and-summaries-3" class="section level4 hasAnchor" number="4.2.2.6">
<h4><span class="header-section-number">4.2.2.6</span> Run Models and Summaries<a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#run-models-and-summaries-3" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb315"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb315-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb315-1" tabindex="-1"></a><span class="co"># Sample Bayesian Model </span></span>
<span id="cb315-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb315-2" tabindex="-1"></a><span class="co"># load data </span></span>
<span id="cb315-3"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb315-3" tabindex="-1"></a><span class="fu">load</span>(<span class="fu">sprintf</span>(<span class="st">&quot;%s/data/one_stage/N_crystallized.RData&quot;</span>, local_path))</span>
<span id="cb315-4"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb315-4" tabindex="-1"></a></span>
<span id="cb315-5"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb315-5" tabindex="-1"></a><span class="co"># clean data &amp; keep only needed columns and a subset of the used variables</span></span>
<span id="cb315-6"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb315-6" tabindex="-1"></a>d <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span></span>
<span id="cb315-7"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb315-7" tabindex="-1"></a>  <span class="fu">group_by</span>(study) <span class="sc">%&gt;%</span></span>
<span id="cb315-8"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb315-8" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span></span>
<span id="cb315-9"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb315-9" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb315-10"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb315-10" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">data =</span> <span class="fu">map</span>(data, <span class="sc">~</span>(.) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">row_number</span>() <span class="sc">%in%</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(.), <span class="dv">100</span>, <span class="at">replace =</span> F)))) <span class="sc">%&gt;%</span></span>
<span id="cb315-11"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb315-11" tabindex="-1"></a>  <span class="fu">unnest</span>(data) </span>
<span id="cb315-12"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb315-12" tabindex="-1"></a></span>
<span id="cb315-13"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb315-13" tabindex="-1"></a><span class="co"># set priors &amp; model specifications </span></span>
<span id="cb315-14"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb315-14" tabindex="-1"></a>Prior <span class="ot">&lt;-</span>  <span class="fu">c</span>(<span class="fu">set_prior</span>(<span class="st">&quot;cauchy(0,1)&quot;</span>, <span class="at">class =</span> <span class="st">&quot;sd&quot;</span>),</span>
<span id="cb315-15"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb315-15" tabindex="-1"></a>            <span class="fu">set_prior</span>(<span class="st">&quot;student_t(3, 0, 2)&quot;</span>, <span class="at">class =</span> <span class="st">&quot;b&quot;</span>),</span>
<span id="cb315-16"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb315-16" tabindex="-1"></a>            <span class="fu">set_prior</span>(<span class="st">&quot;student_t(3, 0, 5)&quot;</span>, <span class="at">class =</span> <span class="st">&quot;Intercept&quot;</span>))</span>
<span id="cb315-17"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb315-17" tabindex="-1"></a>Iter <span class="ot">&lt;-</span> <span class="dv">30</span>; Warmup <span class="ot">&lt;-</span> <span class="dv">21</span>; treedepth <span class="ot">&lt;-</span> <span class="dv">20</span></span>
<span id="cb315-18"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb315-18" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">formula</span>(o_value <span class="sc">~</span> p_value<span class="sc">*</span>age <span class="sc">+</span> gender <span class="sc">+</span> education <span class="sc">+</span> (age<span class="sc">*</span>p_value <span class="sc">|</span> study))</span>
<span id="cb315-19"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb315-19" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">brm</span>(<span class="at">formula =</span> f</span>
<span id="cb315-20"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb315-20" tabindex="-1"></a>            , <span class="at">data =</span> d</span>
<span id="cb315-21"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb315-21" tabindex="-1"></a>            , <span class="at">prior =</span> Prior</span>
<span id="cb315-22"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb315-22" tabindex="-1"></a>            , <span class="at">iter =</span> Iter</span>
<span id="cb315-23"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb315-23" tabindex="-1"></a>            , <span class="at">warmup =</span> Warmup</span>
<span id="cb315-24"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb315-24" tabindex="-1"></a>            , <span class="at">cores =</span> <span class="dv">4</span>)</span>
<span id="cb315-25"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb315-25" tabindex="-1"></a><span class="fu">save</span>(m, <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/2b_ipd_mlm/bayes_sample_mod.RData&quot;</span>, local_path))</span>
<span id="cb315-26"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb315-26" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">c</span>(<span class="st">&quot;d&quot;</span>, <span class="st">&quot;Prior&quot;</span>, <span class="st">&quot;Iter&quot;</span>, <span class="st">&quot;Warmup&quot;</span>, <span class="st">&quot;treedepth&quot;</span>, <span class="st">&quot;f&quot;</span>, <span class="st">&quot;m&quot;</span>))</span></code></pre></div>
<div class="sourceCode" id="cb316"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb316-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb316-1" tabindex="-1"></a><span class="co"># done &lt;- tibble(type = c(&quot;Bayesian&quot;, &quot;Frequentist&quot;),</span></span>
<span id="cb316-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb316-2" tabindex="-1"></a><span class="co">#                file = map(type, ~list.files(sprintf(&quot;%s/results/2b_ipd_mlm/%s/predicted&quot;, local_path, .)))) %&gt;% </span></span>
<span id="cb316-3"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb316-3" tabindex="-1"></a><span class="co">#   unnest(file) %&gt;%</span></span>
<span id="cb316-4"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb316-4" tabindex="-1"></a><span class="co">#   separate(file, c(&quot;Outcome&quot;, &quot;Trait&quot;, &quot;Moderator&quot;, &quot;Covariate&quot;), sep = &quot;_&quot;) %&gt;%</span></span>
<span id="cb316-5"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb316-5" tabindex="-1"></a><span class="co">#   mutate(Covariate = str_remove_all(Covariate, &quot;.RData&quot;)</span></span>
<span id="cb316-6"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb316-6" tabindex="-1"></a><span class="co">#          , done = &quot;done&quot;) %&gt;%</span></span>
<span id="cb316-7"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb316-7" tabindex="-1"></a><span class="co">#   filter(!is.na(Covariate))</span></span>
<span id="cb316-8"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb316-8" tabindex="-1"></a></span>
<span id="cb316-9"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb316-9" tabindex="-1"></a>nested_ipd_reg <span class="ot">&lt;-</span> <span class="fu">crossing</span>(</span>
<span id="cb316-10"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb316-10" tabindex="-1"></a>  <span class="at">Trait =</span> traits<span class="sc">$</span>short_name</span>
<span id="cb316-11"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb316-11" tabindex="-1"></a>  , <span class="at">Outcome =</span> outcomes<span class="sc">$</span>short_name</span>
<span id="cb316-12"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb316-12" tabindex="-1"></a>  , <span class="at">type =</span> <span class="fu">c</span>(<span class="st">&quot;Frequentist&quot;</span>, <span class="st">&quot;Bayesian&quot;</span>)</span>
<span id="cb316-13"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb316-13" tabindex="-1"></a>  , <span class="at">Moderator =</span> <span class="fu">c</span>(<span class="st">&quot;age&quot;</span>, <span class="st">&quot;gender&quot;</span>, <span class="st">&quot;education&quot;</span>)</span>
<span id="cb316-14"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb316-14" tabindex="-1"></a>  , <span class="at">Covariate =</span> <span class="fu">c</span>(<span class="st">&quot;none&quot;</span>, <span class="st">&quot;all&quot;</span>)</span>
<span id="cb316-15"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb316-15" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb316-16"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb316-16" tabindex="-1"></a>  <span class="fu">full_join</span>(</span>
<span id="cb316-17"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb316-17" tabindex="-1"></a>    <span class="fu">crossing</span>(</span>
<span id="cb316-18"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb316-18" tabindex="-1"></a>      <span class="at">Trait =</span> traits<span class="sc">$</span>short_name</span>
<span id="cb316-19"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb316-19" tabindex="-1"></a>      , <span class="at">Outcome =</span> outcomes<span class="sc">$</span>short_name</span>
<span id="cb316-20"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb316-20" tabindex="-1"></a>      , <span class="at">type =</span> <span class="fu">c</span>(<span class="st">&quot;Frequentist&quot;</span>, <span class="st">&quot;Bayesian&quot;</span>)</span>
<span id="cb316-21"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb316-21" tabindex="-1"></a>      , <span class="at">Moderator =</span> <span class="fu">c</span>(<span class="st">&quot;none&quot;</span>, stdyModers<span class="sc">$</span>short_name)</span>
<span id="cb316-22"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb316-22" tabindex="-1"></a>      , <span class="at">Covariate =</span> <span class="fu">c</span>(<span class="st">&quot;none&quot;</span>, <span class="st">&quot;age&quot;</span>, <span class="st">&quot;gender&quot;</span>, <span class="st">&quot;education&quot;</span>, <span class="st">&quot;all&quot;</span>)</span>
<span id="cb316-23"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb316-23" tabindex="-1"></a>      )</span>
<span id="cb316-24"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb316-24" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb316-25"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb316-25" tabindex="-1"></a>  <span class="co"># full_join(done) %&gt;% filter(is.na(done) &amp; type != &quot;Frequentist&quot;) %&gt;%</span></span>
<span id="cb316-26"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb316-26" tabindex="-1"></a>  <span class="fu">filter</span>(Moderator <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;age&quot;</span>, <span class="st">&quot;education&quot;</span>, <span class="st">&quot;baseAge&quot;</span>, <span class="st">&quot;baseYear&quot;</span>, <span class="st">&quot;predInt&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb316-27"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb316-27" tabindex="-1"></a>  <span class="fu">filter</span>(Trait <span class="sc">==</span> <span class="st">&quot;N&quot;</span> <span class="sc">&amp;</span> type <span class="sc">==</span> <span class="st">&quot;Frequentist&quot;</span>)</span>
<span id="cb316-28"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb316-28" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">run =</span> <span class="fu">pmap</span>(<span class="fu">list</span>(Trait, Outcome, type, Moderator, Covariate), ipd2b_mod_fun))</span>
<span id="cb316-29"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb316-29" tabindex="-1"></a></span>
<span id="cb316-30"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb316-30" tabindex="-1"></a>nested_ipd_reg <span class="sc">%&gt;%</span> </span>
<span id="cb316-31"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb316-31" tabindex="-1"></a>  <span class="fu">write.table</span>(.</span>
<span id="cb316-32"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb316-32" tabindex="-1"></a>              , <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/scripts/cluster/args/frequentist/ipd2b_frequentist_pred.txt&quot;</span>, local_path)</span>
<span id="cb316-33"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb316-33" tabindex="-1"></a>              , <span class="at">row.names =</span> F)</span></code></pre></div>
</div>
<div id="compile-results-3" class="section level4 hasAnchor" number="4.2.2.7">
<h4><span class="header-section-number">4.2.2.7</span> Compile Results<a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#compile-results-3" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Once all the models are run, we are ready to compile all their results. By saving the fixed and study-level effects results previously, we are able to simply load those results and ignore the models. However, because we also saved the models, we can also recall and extract information from them if and when needed.</p>
<div class="sourceCode" id="cb317"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb317-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb317-1" tabindex="-1"></a>loadRData <span class="ot">&lt;-</span> <span class="cf">function</span>(fileName, type, obj, folder){</span>
<span id="cb317-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb317-2" tabindex="-1"></a><span class="co">#loads an RData file, and returns it</span></span>
<span id="cb317-3"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb317-3" tabindex="-1"></a>    path <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/2b_ipd_mlm/%s/%s/%s&quot;</span>, local_path, type, folder, fileName)</span>
<span id="cb317-4"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb317-4" tabindex="-1"></a>    <span class="fu">load</span>(path)</span>
<span id="cb317-5"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb317-5" tabindex="-1"></a>    <span class="fu">get</span>(<span class="fu">ls</span>()[<span class="fu">grepl</span>(obj, <span class="fu">ls</span>())])</span>
<span id="cb317-6"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb317-6" tabindex="-1"></a>}</span>
<span id="cb317-7"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb317-7" tabindex="-1"></a></span>
<span id="cb317-8"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb317-8" tabindex="-1"></a></span>
<span id="cb317-9"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb317-9" tabindex="-1"></a>n_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(fileName, type){</span>
<span id="cb317-10"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb317-10" tabindex="-1"></a>  m <span class="ot">&lt;-</span> <span class="fu">loadRData</span>(fileName, type, <span class="st">&quot;^m&quot;</span>, <span class="st">&quot;models&quot;</span>)</span>
<span id="cb317-11"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb317-11" tabindex="-1"></a>  d <span class="ot">&lt;-</span> <span class="cf">if</span>(type <span class="sc">==</span> <span class="st">&quot;Bayesian&quot;</span>) m<span class="sc">$</span>data <span class="cf">else</span> m<span class="sc">@</span>frame</span>
<span id="cb317-12"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb317-12" tabindex="-1"></a>  n <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(study) <span class="sc">%&gt;%</span> <span class="fu">tally</span>() <span class="sc">%&gt;%</span> <span class="fu">ungroup</span>()</span>
<span id="cb317-13"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb317-13" tabindex="-1"></a>  <span class="fu">return</span>(n)</span>
<span id="cb317-14"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb317-14" tabindex="-1"></a>}</span>
<span id="cb317-15"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb317-15" tabindex="-1"></a></span>
<span id="cb317-16"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb317-16" tabindex="-1"></a>fix_terms <span class="ot">&lt;-</span> <span class="cf">function</span>(rx){</span>
<span id="cb317-17"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb317-17" tabindex="-1"></a>  <span class="cf">if</span>(<span class="sc">!</span><span class="st">&quot;term&quot;</span> <span class="sc">%in%</span> <span class="fu">colnames</span>(rx)) rx <span class="ot">&lt;-</span> rx <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">term =</span> names)</span>
<span id="cb317-18"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb317-18" tabindex="-1"></a>  <span class="fu">return</span>(rx)</span>
<span id="cb317-19"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb317-19" tabindex="-1"></a>}</span>
<span id="cb317-20"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb317-20" tabindex="-1"></a></span>
<span id="cb317-21"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb317-21" tabindex="-1"></a><span class="do">## load in &quot;fixed&quot; effects</span></span>
<span id="cb317-22"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb317-22" tabindex="-1"></a><span class="do">## first get file names</span></span>
<span id="cb317-23"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb317-23" tabindex="-1"></a>nested_ipd2b_reg <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">type =</span> <span class="fu">c</span>(<span class="st">&quot;Frequentist&quot;</span>, <span class="st">&quot;Bayesian&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb317-24"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb317-24" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">file =</span> <span class="fu">map</span>(type, <span class="sc">~</span><span class="fu">list.files</span>(<span class="fu">sprintf</span>(<span class="st">&quot;%s/results/2b_ipd_mlm/%s/summary&quot;</span>, local_path, .)))) <span class="sc">%&gt;%</span></span>
<span id="cb317-25"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb317-25" tabindex="-1"></a>  <span class="fu">unnest</span>(file) <span class="sc">%&gt;%</span></span>
<span id="cb317-26"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb317-26" tabindex="-1"></a>  <span class="fu">separate</span>(file, <span class="fu">c</span>(<span class="st">&quot;Outcome&quot;</span>, <span class="st">&quot;Trait&quot;</span>, <span class="st">&quot;Moderator&quot;</span>, <span class="st">&quot;Covariate&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>, <span class="at">remove =</span> F) <span class="sc">%&gt;%</span> </span>
<span id="cb317-27"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb317-27" tabindex="-1"></a>  <span class="do">## read in the files</span></span>
<span id="cb317-28"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb317-28" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Covariate =</span> <span class="fu">str_remove</span>(Covariate, <span class="st">&quot;.RData&quot;</span>),</span>
<span id="cb317-29"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb317-29" tabindex="-1"></a>         <span class="at">fx =</span> <span class="fu">map2</span>(file, type, <span class="sc">~</span><span class="fu">loadRData</span>(.x, .y, <span class="st">&quot;fx&quot;</span>, <span class="st">&quot;summary&quot;</span>)),</span>
<span id="cb317-30"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb317-30" tabindex="-1"></a>         <span class="at">rx =</span> <span class="fu">map2</span>(file, type, <span class="fu">possibly</span>(<span class="sc">~</span><span class="fu">loadRData</span>(.x, .y, <span class="st">&quot;rx&quot;</span>, <span class="st">&quot;summary&quot;</span>), <span class="cn">NA_real_</span>)),</span>
<span id="cb317-31"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb317-31" tabindex="-1"></a>         <span class="at">n =</span> <span class="fu">map2</span>(file, type, n_fun)) <span class="sc">%&gt;%</span></span>
<span id="cb317-32"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb317-32" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>file) <span class="sc">%&gt;%</span></span>
<span id="cb317-33"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb317-33" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(rx)) <span class="sc">%&gt;%</span></span>
<span id="cb317-34"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb317-34" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rx =</span> <span class="fu">map</span>(rx, fix_terms))</span></code></pre></div>
<div id="tables-3" class="section level5 hasAnchor" number="4.2.2.7.1">
<h5><span class="header-section-number">4.2.2.7.1</span> Tables<a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#tables-3" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Next, we want to format the study results in APA table format. In this case, we are interested in the fixed and study-specific effects of personality predicting cognitive ability when there were no moderators, and the personality x moderator interaction when there was a moderator. We’ll anticipate a need to present both just fixed effects as well as fixed and study-specific effects by creating tables for each.</p>
<p>First, let’s format the data.</p>
<div class="sourceCode" id="cb318"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb318-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb318-1" tabindex="-1"></a>ipd2b_reg_tab <span class="ot">&lt;-</span> </span>
<span id="cb318-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb318-2" tabindex="-1"></a>  <span class="do">### fixed effects </span></span>
<span id="cb318-3"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb318-3" tabindex="-1"></a>  nested_ipd2b_reg <span class="sc">%&gt;%</span></span>
<span id="cb318-4"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb318-4" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>rx) <span class="sc">%&gt;%</span></span>
<span id="cb318-5"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb318-5" tabindex="-1"></a>  <span class="fu">unnest</span>(fx) <span class="sc">%&gt;%</span> <span class="co"># unnesting </span></span>
<span id="cb318-6"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb318-6" tabindex="-1"></a>  <span class="co"># keep key terms</span></span>
<span id="cb318-7"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb318-7" tabindex="-1"></a>  <span class="fu">filter</span>((Moderator <span class="sc">==</span> <span class="st">&quot;none&quot;</span> <span class="sc">&amp;</span> term <span class="sc">==</span> <span class="st">&quot;p_value&quot;</span>) <span class="sc">|</span></span>
<span id="cb318-8"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb318-8" tabindex="-1"></a>         (Moderator <span class="sc">!=</span> <span class="st">&quot;none&quot;</span> <span class="sc">&amp;</span> <span class="fu">grepl</span>(<span class="st">&quot;p_value:&quot;</span>, term)) <span class="sc">&amp;</span> </span>
<span id="cb318-9"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb318-9" tabindex="-1"></a>          <span class="sc">!</span><span class="fu">grepl</span>(<span class="st">&quot;cor&quot;</span>, term) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">grepl</span>(<span class="st">&quot;sd&quot;</span>, term)) <span class="sc">%&gt;%</span></span>
<span id="cb318-10"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb318-10" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">study =</span> <span class="st">&quot;Overall&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb318-11"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb318-11" tabindex="-1"></a>  <span class="do">### study specific effects </span></span>
<span id="cb318-12"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb318-12" tabindex="-1"></a>  <span class="fu">full_join</span>(</span>
<span id="cb318-13"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb318-13" tabindex="-1"></a>    nested_ipd2b_reg <span class="sc">%&gt;%</span></span>
<span id="cb318-14"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb318-14" tabindex="-1"></a>      <span class="fu">select</span>(<span class="sc">-</span>fx) <span class="sc">%&gt;%</span></span>
<span id="cb318-15"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb318-15" tabindex="-1"></a>      <span class="fu">unnest</span>(rx) <span class="sc">%&gt;%</span> <span class="co"># unnesting </span></span>
<span id="cb318-16"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb318-16" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">term =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(term), names, term)) <span class="sc">%&gt;%</span></span>
<span id="cb318-17"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb318-17" tabindex="-1"></a>      <span class="fu">select</span>(<span class="sc">-</span>names) <span class="sc">%&gt;%</span></span>
<span id="cb318-18"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb318-18" tabindex="-1"></a>      <span class="fu">filter</span>((Moderator <span class="sc">==</span> <span class="st">&quot;none&quot;</span> <span class="sc">&amp;</span> term <span class="sc">==</span> <span class="st">&quot;p_value&quot;</span>) <span class="sc">|</span></span>
<span id="cb318-19"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb318-19" tabindex="-1"></a>             (Moderator <span class="sc">!=</span> <span class="st">&quot;none&quot;</span> <span class="sc">&amp;</span> <span class="fu">grepl</span>(<span class="st">&quot;p_value:&quot;</span>, term)))</span>
<span id="cb318-20"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb318-20" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb318-21"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb318-21" tabindex="-1"></a>  <span class="co"># reformatting: mark significance, prettify Trait, covariate, and moderator names</span></span>
<span id="cb318-22"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb318-22" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sig =</span> <span class="fu">ifelse</span>(<span class="fu">sign</span>(conf.low) <span class="sc">==</span> <span class="fu">sign</span>(conf.high), <span class="st">&quot;sig&quot;</span>, <span class="st">&quot;ns&quot;</span>),</span>
<span id="cb318-23"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb318-23" tabindex="-1"></a>         <span class="at">Trait =</span> <span class="fu">factor</span>(Trait, traits<span class="sc">$</span>short_name),</span>
<span id="cb318-24"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb318-24" tabindex="-1"></a>         <span class="at">Outcome =</span> <span class="fu">factor</span>(Outcome, outcomes<span class="sc">$</span>short_name, outcomes<span class="sc">$</span>long_name),</span>
<span id="cb318-25"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb318-25" tabindex="-1"></a>         <span class="at">Moderator =</span> <span class="fu">factor</span>(Moderator, <span class="fu">c</span>(moders<span class="sc">$</span>short_name, stdyModers<span class="sc">$</span>short_name), <span class="fu">c</span>(moders<span class="sc">$</span>long_name, stdyModers<span class="sc">$</span>long_name)),</span>
<span id="cb318-26"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb318-26" tabindex="-1"></a>         <span class="at">Covariate =</span> <span class="fu">factor</span>(Covariate, covars<span class="sc">$</span>short_name, <span class="fu">str_wrap</span>(covars<span class="sc">$</span>long_name, <span class="dv">15</span>)),</span>
<span id="cb318-27"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb318-27" tabindex="-1"></a>         <span class="at">term =</span> <span class="fu">str_remove_all</span>(term, <span class="st">&quot;p_value:&quot;</span>),</span>
<span id="cb318-28"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb318-28" tabindex="-1"></a>         <span class="at">term =</span> <span class="fu">mapvalues</span>(term, <span class="fu">c</span>(<span class="st">&quot;scaleBFIMS&quot;</span>, <span class="st">&quot;scaleIPIPNEO&quot;</span>, <span class="st">&quot;scaleTDAM40&quot;</span>, <span class="st">&quot;countryTheNetherlands&quot;</span>,</span>
<span id="cb318-29"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb318-29" tabindex="-1"></a>                                  <span class="st">&quot;scaleBFI.S&quot;</span>, <span class="st">&quot;scaleIPIP.NEO&quot;</span>, <span class="st">&quot;scaleTDA.40&quot;</span>, <span class="st">&quot;countryThe.Netherlands&quot;</span>)</span>
<span id="cb318-30"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb318-30" tabindex="-1"></a>                          , <span class="fu">c</span>(<span class="st">&quot;scaleBFI-S&quot;</span>, <span class="st">&quot;scaleIPIP NEO&quot;</span>, <span class="st">&quot;scaleTDA-40&quot;</span>, <span class="st">&quot;countryThe Netherlands&quot;</span>,</span>
<span id="cb318-31"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb318-31" tabindex="-1"></a>                              <span class="st">&quot;scaleBFI-S&quot;</span>, <span class="st">&quot;scaleIPIP NEO&quot;</span>, <span class="st">&quot;scaleTDA-40&quot;</span>, <span class="st">&quot;countryThe Netherlands&quot;</span>)),</span>
<span id="cb318-32"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb318-32" tabindex="-1"></a>         <span class="at">term =</span> <span class="fu">factor</span>(term, <span class="fu">c</span>(moders<span class="sc">$</span>short_term, stdyModers<span class="sc">$</span>short_term),</span>
<span id="cb318-33"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb318-33" tabindex="-1"></a>                       <span class="fu">c</span>(moders<span class="sc">$</span>long_term, stdyModers<span class="sc">$</span>long_term))) <span class="sc">%&gt;%</span></span>
<span id="cb318-34"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb318-34" tabindex="-1"></a>  <span class="co"># prettify the number format</span></span>
<span id="cb318-35"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb318-35" tabindex="-1"></a>  <span class="fu">mutate_at</span>(<span class="fu">vars</span>(estimate, conf.low, conf.high), </span>
<span id="cb318-36"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb318-36" tabindex="-1"></a>            <span class="sc">~</span><span class="fu">ifelse</span>(<span class="fu">abs</span>(.) <span class="sc">&lt;</span> .<span class="dv">0014</span>, <span class="fu">sprintf</span>(<span class="st">&quot;%.3f&quot;</span>, .), <span class="fu">sprintf</span>(<span class="st">&quot;%.2f&quot;</span>, .))) <span class="sc">%&gt;%</span></span>
<span id="cb318-37"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb318-37" tabindex="-1"></a>  <span class="co"># combine the effects, bold significance, factor and label study-specfic effects </span></span>
<span id="cb318-38"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb318-38" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">est =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s&lt;br&gt;[%s, %s]&quot;</span>, estimate, conf.low, conf.high),</span>
<span id="cb318-39"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb318-39" tabindex="-1"></a>         <span class="at">est =</span> <span class="fu">ifelse</span>(sig <span class="sc">==</span> <span class="st">&quot;sig&quot;</span>, <span class="fu">sprintf</span>(<span class="st">&quot;&lt;strong&gt;%s&lt;/strong&gt;&quot;</span>, est), est),</span>
<span id="cb318-40"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb318-40" tabindex="-1"></a>  <span class="co"># mutate(est = sprintf(&quot;%s [%s, %s]&quot;, estimate, conf.low, conf.high),</span></span>
<span id="cb318-41"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb318-41" tabindex="-1"></a>  <span class="co">#        est = ifelse(sig == &quot;sig&quot;, sprintf(&quot;\\textbf{%s}&quot;, est), est),</span></span>
<span id="cb318-42"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb318-42" tabindex="-1"></a>         <span class="at">study =</span> <span class="fu">mapvalues</span>(study, <span class="fu">c</span>(<span class="st">&quot;BASE-I&quot;</span>, <span class="st">&quot;OCTO-TWIN&quot;</span>), <span class="fu">c</span>(<span class="st">&quot;BASE&quot;</span>, <span class="st">&quot;OCTO-Twin&quot;</span>)),</span>
<span id="cb318-43"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb318-43" tabindex="-1"></a>         <span class="at">study =</span> <span class="fu">factor</span>(study, <span class="at">levels =</span> <span class="fu">c</span>(studies_long, <span class="st">&quot;Overall&quot;</span>),</span>
<span id="cb318-44"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb318-44" tabindex="-1"></a>                        <span class="at">labels =</span> <span class="fu">c</span>(studies_long, <span class="st">&quot;Overall&quot;</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb318-45"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb318-45" tabindex="-1"></a>  <span class="co"># reshaping: remove extra columns, arrange by key variables, and make wide</span></span>
<span id="cb318-46"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb318-46" tabindex="-1"></a>  <span class="fu">select</span>(type, Outcome, Trait, Moderator, Covariate, study, term, est) <span class="sc">%&gt;%</span></span>
<span id="cb318-47"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb318-47" tabindex="-1"></a>  <span class="fu">arrange</span>(type, Outcome, Trait, Moderator, Covariate, study, term, est) <span class="sc">%&gt;%</span></span>
<span id="cb318-48"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb318-48" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">&quot;Trait&quot;</span>, <span class="at">values_from =</span> <span class="st">&quot;est&quot;</span>) </span>
<span id="cb318-49"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb318-49" tabindex="-1"></a>ipd2b_reg_tab</span></code></pre></div>
<pre><code>## # A tibble: 1,824 × 11
##    type     Outcome              Moderator Covariate  study     term        E                         A     C     N     O    
##    &lt;chr&gt;    &lt;fct&gt;                &lt;fct&gt;     &lt;fct&gt;      &lt;fct&gt;     &lt;fct&gt;       &lt;chr&gt;                     &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
##  1 Bayesian Crystallized Ability None      Unadjusted BASE      Personality 0.05&lt;br&gt;[-0.04, 0.16]     &lt;NA&gt;  &lt;NA&gt;  &lt;str… &lt;str…
##  2 Bayesian Crystallized Ability None      Unadjusted EAS       Personality &lt;strong&gt;0.10&lt;br&gt;[0.04, 0… 0.02… 0.02… &lt;str… &lt;str…
##  3 Bayesian Crystallized Ability None      Unadjusted GSOEP     Personality &lt;strong&gt;0.07&lt;br&gt;[0.03, 0… -0.0… -0.0… &lt;str… &lt;str…
##  4 Bayesian Crystallized Ability None      Unadjusted HILDA     Personality 0.01&lt;br&gt;[-0.01, 0.04]     &lt;str… &lt;str… &lt;str… &lt;str…
##  5 Bayesian Crystallized Ability None      Unadjusted HRS       Personality 0.001&lt;br&gt;[-0.02, 0.03]    &lt;str… &lt;str… &lt;str… &lt;str…
##  6 Bayesian Crystallized Ability None      Unadjusted MAP       Personality 0.04&lt;br&gt;[-0.01, 0.09]     &lt;NA&gt;  &lt;str… &lt;str… &lt;NA&gt; 
##  7 Bayesian Crystallized Ability None      Unadjusted OCTO-Twin Personality 0.05&lt;br&gt;[-0.02, 0.11]     &lt;NA&gt;  &lt;NA&gt;  &lt;str… &lt;NA&gt; 
##  8 Bayesian Crystallized Ability None      Unadjusted ROS       Personality 0.02&lt;br&gt;[-0.05, 0.07]     &lt;str… &lt;str… &lt;str… &lt;str…
##  9 Bayesian Crystallized Ability None      Unadjusted SATSA     Personality 0.04&lt;br&gt;[-0.02, 0.12]     &lt;str… &lt;str… &lt;str… &lt;str…
## 10 Bayesian Crystallized Ability None      Unadjusted Overall   Personality &lt;strong&gt;0.04&lt;br&gt;[0.00, 0… 0.00… 0.04… &lt;str… &lt;str…
## # ℹ 1,814 more rows</code></pre>
<div class="sourceCode" id="cb320"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb320-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb320-1" tabindex="-1"></a>ipd2b_res <span class="ot">&lt;-</span> nested_ipd2b_reg <span class="sc">%&gt;%</span></span>
<span id="cb320-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb320-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>rx) <span class="sc">%&gt;%</span></span>
<span id="cb320-3"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb320-3" tabindex="-1"></a>  <span class="fu">unnest</span>(fx) <span class="sc">%&gt;%</span> <span class="co"># unnesting </span></span>
<span id="cb320-4"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb320-4" tabindex="-1"></a>  <span class="co"># keep key terms</span></span>
<span id="cb320-5"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb320-5" tabindex="-1"></a>  <span class="fu">filter</span>((Moderator <span class="sc">==</span> <span class="st">&quot;none&quot;</span> <span class="sc">&amp;</span> term <span class="sc">==</span> <span class="st">&quot;p_value&quot;</span>) <span class="sc">|</span></span>
<span id="cb320-6"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb320-6" tabindex="-1"></a>         (Moderator <span class="sc">!=</span> <span class="st">&quot;none&quot;</span> <span class="sc">&amp;</span> <span class="fu">grepl</span>(<span class="st">&quot;p_value:&quot;</span>, term)) <span class="sc">&amp;</span> </span>
<span id="cb320-7"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb320-7" tabindex="-1"></a>          <span class="sc">!</span><span class="fu">grepl</span>(<span class="st">&quot;cor&quot;</span>, term) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">grepl</span>(<span class="st">&quot;sd&quot;</span>, term)) <span class="sc">%&gt;%</span></span>
<span id="cb320-8"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb320-8" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">study =</span> <span class="st">&quot;Overall&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb320-9"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb320-9" tabindex="-1"></a>  <span class="fu">mutate_at</span>(<span class="fu">vars</span>(estimate, conf.low, conf.high), </span>
<span id="cb320-10"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb320-10" tabindex="-1"></a>            <span class="sc">~</span><span class="fu">ifelse</span>(<span class="fu">abs</span>(.) <span class="sc">&lt;</span> .<span class="dv">01</span>, <span class="fu">sprintf</span>(<span class="st">&quot;%.3f&quot;</span>, .), <span class="fu">sprintf</span>(<span class="st">&quot;%.2f&quot;</span>, .))) <span class="sc">%&gt;%</span></span>
<span id="cb320-11"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb320-11" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">est =</span> <span class="fu">sprintf</span>(<span class="st">&quot;</span><span class="sc">\\</span><span class="st">textit{b} = %s, 95</span><span class="sc">\\</span><span class="st">%% CI [%s, %s]&quot;</span>, estimate, conf.low, conf.high)) </span></code></pre></div>
<p>Now that we’ve formatted the values, we can group by moderators and save results as separate tables. Even though additional information could be included given that we have one outcome, we’ll stick with this split because it will make it easier for those using this tutorial who multiple traits, outcomes, covariates, and moderators.</p>
<div id="fixed-effects-4" class="section level6 hasAnchor" number="4.2.2.7.1.1">
<h6><span class="header-section-number">4.2.2.7.1.1</span> Fixed Effects<a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#fixed-effects-4" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<div class="sourceCode" id="cb321"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb321-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb321-1" tabindex="-1"></a><span class="do">## table function </span></span>
<span id="cb321-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb321-2" tabindex="-1"></a>ipd2b_tab_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(d, type, moder){</span>
<span id="cb321-3"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb321-3" tabindex="-1"></a>  md <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(moder, <span class="fu">c</span>(moders<span class="sc">$</span>long_name, stdyModers<span class="sc">$</span>long_name), <span class="fu">c</span>(moders<span class="sc">$</span>short_name, stdyModers<span class="sc">$</span>short_name), <span class="at">warn_missing =</span> F)</span>
<span id="cb321-4"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb321-4" tabindex="-1"></a>  rs <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Outcome) <span class="sc">%&gt;%</span> <span class="fu">tally</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb321-5"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb321-5" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">end =</span> <span class="fu">cumsum</span>(n), <span class="at">start =</span> <span class="fu">lag</span>(end) <span class="sc">+</span> <span class="dv">1</span>, <span class="at">start =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(start), <span class="dv">1</span>, start))</span>
<span id="cb321-6"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb321-6" tabindex="-1"></a>  cs <span class="ot">&lt;-</span> <span class="cf">if</span>(<span class="fu">length</span>(<span class="fu">unique</span>(d<span class="sc">$</span>term)) <span class="sc">==</span> <span class="dv">1</span>)  <span class="fu">rep</span>(<span class="dv">1</span>,<span class="dv">6</span>) <span class="cf">else</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="fu">rep</span>(<span class="dv">1</span>,<span class="dv">5</span>)) </span>
<span id="cb321-7"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb321-7" tabindex="-1"></a>  <span class="fu">names</span>(cs) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot; &quot;</span>, <span class="fu">paste0</span>(<span class="st">&quot;&lt;strong&gt;&quot;</span>, traits<span class="sc">$</span>short_name, <span class="st">&quot;&lt;/strong&gt;&quot;</span>))</span>
<span id="cb321-8"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb321-8" tabindex="-1"></a>  cln <span class="ot">&lt;-</span> <span class="cf">if</span>(<span class="fu">length</span>(<span class="fu">unique</span>(d<span class="sc">$</span>term)) <span class="sc">==</span> <span class="dv">1</span>) <span class="fu">c</span>(<span class="st">&quot;Covariates&quot;</span>, <span class="fu">rep</span>(<span class="st">&quot;&lt;em&gt;b&lt;/em&gt; [CI]&quot;</span>, <span class="dv">5</span>)) <span class="cf">else</span> <span class="fu">c</span>(<span class="st">&quot;Covariates&quot;</span>, <span class="st">&quot;Term&quot;</span>, <span class="fu">rep</span>(<span class="st">&quot;&lt;em&gt;b&lt;/em&gt; [CI]&quot;</span>, <span class="dv">5</span>))</span>
<span id="cb321-9"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb321-9" tabindex="-1"></a>  <span class="co"># cln &lt;- if(length(unique(d$term)) == 1) c(&quot;Covariates&quot;, rep(&quot;\\textit{b} [CI]&quot;, 5)) else c(&quot;Covariates&quot;, &quot;Term&quot;, rep(&quot;\\textit{b} [CI]&quot;, 5))</span></span>
<span id="cb321-10"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb321-10" tabindex="-1"></a>  al <span class="ot">&lt;-</span> <span class="cf">if</span>(<span class="fu">length</span>(<span class="fu">unique</span>(d<span class="sc">$</span>term)) <span class="sc">==</span> <span class="dv">1</span>) <span class="fu">c</span>(<span class="st">&quot;r&quot;</span>, <span class="fu">rep</span>(<span class="st">&quot;c&quot;</span>, <span class="dv">5</span>)) <span class="cf">else</span> <span class="fu">c</span>(<span class="st">&quot;r&quot;</span>, <span class="st">&quot;r&quot;</span>, <span class="fu">rep</span>(<span class="st">&quot;c&quot;</span>, <span class="dv">5</span>))</span>
<span id="cb321-11"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb321-11" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">length</span>(<span class="fu">unique</span>(d<span class="sc">$</span>term)) <span class="sc">==</span> <span class="dv">1</span>) d <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>term)</span>
<span id="cb321-12"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb321-12" tabindex="-1"></a>  cap <span class="ot">&lt;-</span> <span class="cf">if</span>(md <span class="sc">==</span> <span class="st">&quot;none&quot;</span>) <span class="st">&quot;2B Pooled One Stage Models with Random Effects: Overall Effects of Personality-Crystallized Domain Associations&quot;</span> <span class="cf">else</span> <span class="fu">sprintf</span>(<span class="st">&quot;2B Pooled One Stage Models with Random Effects: Overall %s Moderation of Personality-Crystallized Domain Associations&quot;</span>, md)</span>
<span id="cb321-13"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb321-13" tabindex="-1"></a>  tab <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span></span>
<span id="cb321-14"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb321-14" tabindex="-1"></a>    <span class="fu">arrange</span>(Outcome) <span class="sc">%&gt;%</span></span>
<span id="cb321-15"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb321-15" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>Outcome) <span class="sc">%&gt;%</span></span>
<span id="cb321-16"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb321-16" tabindex="-1"></a>    <span class="fu">kable</span>(., <span class="st">&quot;html&quot;</span></span>
<span id="cb321-17"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb321-17" tabindex="-1"></a>    <span class="co"># kable(., &quot;latex&quot;</span></span>
<span id="cb321-18"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb321-18" tabindex="-1"></a>          , <span class="at">booktabs =</span> T</span>
<span id="cb321-19"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb321-19" tabindex="-1"></a>          , <span class="at">escape =</span> F</span>
<span id="cb321-20"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb321-20" tabindex="-1"></a>          , <span class="at">col.names =</span> cln</span>
<span id="cb321-21"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb321-21" tabindex="-1"></a>          , <span class="at">align =</span> al</span>
<span id="cb321-22"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb321-22" tabindex="-1"></a>          , <span class="at">caption =</span> cap</span>
<span id="cb321-23"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb321-23" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb321-24"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb321-24" tabindex="-1"></a>    <span class="fu">kable_classic</span>(<span class="at">full_width =</span> F, <span class="at">html_font =</span> <span class="st">&quot;Times New Roman&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb321-25"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb321-25" tabindex="-1"></a>    <span class="fu">add_header_above</span>(cs, <span class="at">escape =</span> F) </span>
<span id="cb321-26"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb321-26" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(rs)) {</span>
<span id="cb321-27"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb321-27" tabindex="-1"></a>    tab <span class="ot">&lt;-</span> tab <span class="sc">%&gt;%</span> kableExtra<span class="sc">::</span><span class="fu">group_rows</span>(rs<span class="sc">$</span>Outcome[i], rs<span class="sc">$</span>start[i], rs<span class="sc">$</span>end[i])</span>
<span id="cb321-28"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb321-28" tabindex="-1"></a>  }</span>
<span id="cb321-29"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb321-29" tabindex="-1"></a>  <span class="fu">save_kable</span>(tab, <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/2b_ipd_mlm/%s/tables/overall/%s.html&quot;</span></span>
<span id="cb321-30"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb321-30" tabindex="-1"></a>                                 , local_path, type, md))</span>
<span id="cb321-31"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb321-31" tabindex="-1"></a>  <span class="fu">return</span>(tab)</span>
<span id="cb321-32"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb321-32" tabindex="-1"></a>}</span>
<span id="cb321-33"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb321-33" tabindex="-1"></a></span>
<span id="cb321-34"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb321-34" tabindex="-1"></a>ipd2b_fx_tab <span class="ot">&lt;-</span> ipd2b_reg_tab <span class="sc">%&gt;%</span></span>
<span id="cb321-35"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb321-35" tabindex="-1"></a>  <span class="fu">filter</span>(study <span class="sc">==</span> <span class="st">&quot;Overall&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb321-36"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb321-36" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>study) <span class="sc">%&gt;%</span></span>
<span id="cb321-37"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb321-37" tabindex="-1"></a>  <span class="fu">group_by</span>(type, Moderator) <span class="sc">%&gt;%</span></span>
<span id="cb321-38"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb321-38" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span></span>
<span id="cb321-39"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb321-39" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb321-40"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb321-40" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">tab =</span> <span class="fu">pmap</span>(<span class="fu">list</span>(data, type, Moderator), ipd2b_tab_fun))</span>
<span id="cb321-41"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb321-41" tabindex="-1"></a></span>
<span id="cb321-42"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb321-42" tabindex="-1"></a><span class="co"># save(ipd2b_reg_tab, ipd2b_res, file = sprintf(&quot;%s/manuscript/results/ipd2b_fx_tab.RData&quot;, res_path))</span></span>
<span id="cb321-43"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb321-43" tabindex="-1"></a></span>
<span id="cb321-44"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb321-44" tabindex="-1"></a><span class="do">## Frequentist</span></span>
<span id="cb321-45"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb321-45" tabindex="-1"></a>(ipd2b_fx_tab <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Moderator <span class="sc">==</span> <span class="st">&quot;None&quot;</span> <span class="sc">&amp;</span> type <span class="sc">==</span> <span class="st">&quot;Frequentist&quot;</span>))<span class="sc">$</span>tab[[<span class="dv">1</span>]]</span></code></pre></div>
<table class=" lightable-classic" style="color: black; font-family: Times New Roman; width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-53">Table 4.4: </span>2B Pooled One Stage Models with Random Effects: Overall Effects of Personality-Crystallized Domain Associations
</caption>
<thead>
<tr>
<th style="empty-cells: hide;" colspan="1">
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>E</strong>
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>A</strong>
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>C</strong>
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>N</strong>
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>O</strong>
</div>
</th>
</tr>
<tr>
<th style="text-align:right;">
Covariates
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
</tr>
</thead>
<tbody>
<tr grouplength="5">
<td colspan="6" style="border-bottom: 0;">
<strong>Crystallized Ability</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Unadjusted
</td>
<td style="text-align:center;">
<strong>0.04<br>[0.01, 0.08]</strong>
</td>
<td style="text-align:center;">
0.01<br>[-0.08, 0.09]
</td>
<td style="text-align:center;">
0.05<br>[-0.03, 0.12]
</td>
<td style="text-align:center;">
<strong>-0.12<br>[-0.15, -0.09]</strong>
</td>
<td style="text-align:center;">
<strong>0.27<br>[0.18, 0.36]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Age
</td>
<td style="text-align:center;">
<strong>0.03<br>[0.01, 0.06]</strong>
</td>
<td style="text-align:center;">
0.02<br>[-0.08, 0.11]
</td>
<td style="text-align:center;">
0.04<br>[-0.04, 0.12]
</td>
<td style="text-align:center;">
<strong>-0.12<br>[-0.16, -0.09]</strong>
</td>
<td style="text-align:center;">
<strong>0.28<br>[0.19, 0.38]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Gender
</td>
<td style="text-align:center;">
<strong>0.03<br>[0.01, 0.06]</strong>
</td>
<td style="text-align:center;">
0.02<br>[-0.07, 0.11]
</td>
<td style="text-align:center;">
0.04<br>[-0.04, 0.12]
</td>
<td style="text-align:center;">
<strong>-0.12<br>[-0.15, -0.09]</strong>
</td>
<td style="text-align:center;">
<strong>0.28<br>[0.18, 0.38]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Education
</td>
<td style="text-align:center;">
0.01<br>[-0.02, 0.05]
</td>
<td style="text-align:center;">
0.01<br>[-0.02, 0.04]
</td>
<td style="text-align:center;">
0.02<br>[-0.04, 0.07]
</td>
<td style="text-align:center;">
<strong>-0.06<br>[-0.09, -0.03]</strong>
</td>
<td style="text-align:center;">
<strong>0.16<br>[0.07, 0.25]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Fully Adjusted
</td>
<td style="text-align:center;">
0.01<br>[-0.02, 0.05]
</td>
<td style="text-align:center;">
0.00<br>[-0.03, 0.03]
</td>
<td style="text-align:center;">
0.01<br>[-0.04, 0.07]
</td>
<td style="text-align:center;">
<strong>-0.06<br>[-0.09, -0.03]</strong>
</td>
<td style="text-align:center;">
<strong>0.16<br>[0.07, 0.25]</strong>
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb322"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb322-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb322-1" tabindex="-1"></a><span class="do">## bayesian</span></span>
<span id="cb322-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb322-2" tabindex="-1"></a>(ipd2b_fx_tab <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Moderator <span class="sc">==</span> <span class="st">&quot;None&quot;</span> <span class="sc">&amp;</span> type <span class="sc">==</span> <span class="st">&quot;Bayesian&quot;</span>))<span class="sc">$</span>tab[[<span class="dv">1</span>]]</span></code></pre></div>
<table class=" lightable-classic" style="color: black; font-family: Times New Roman; width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-53">Table 4.4: </span>2B Pooled One Stage Models with Random Effects: Overall Effects of Personality-Crystallized Domain Associations
</caption>
<thead>
<tr>
<th style="empty-cells: hide;" colspan="1">
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>E</strong>
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>A</strong>
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>C</strong>
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>N</strong>
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>O</strong>
</div>
</th>
</tr>
<tr>
<th style="text-align:right;">
Covariates
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
</tr>
</thead>
<tbody>
<tr grouplength="5">
<td colspan="6" style="border-bottom: 0;">
<strong>Crystallized Ability</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Unadjusted
</td>
<td style="text-align:center;">
<strong>0.04<br>[0.00, 0.09]</strong>
</td>
<td style="text-align:center;">
0.00<br>[-0.13, 0.12]
</td>
<td style="text-align:center;">
0.04<br>[-0.07, 0.15]
</td>
<td style="text-align:center;">
<strong>-0.12<br>[-0.16, -0.09]</strong>
</td>
<td style="text-align:center;">
<strong>0.28<br>[0.16, 0.40]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Age
</td>
<td style="text-align:center;">
<strong>0.03<br>[0.00, 0.07]</strong>
</td>
<td style="text-align:center;">
0.01<br>[-0.11, 0.14]
</td>
<td style="text-align:center;">
0.04<br>[-0.07, 0.16]
</td>
<td style="text-align:center;">
<strong>-0.12<br>[-0.16, -0.08]</strong>
</td>
<td style="text-align:center;">
<strong>0.29<br>[0.17, 0.42]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Gender
</td>
<td style="text-align:center;">
0.03<br>[-0.001, 0.07]
</td>
<td style="text-align:center;">
0.01<br>[-0.12, 0.14]
</td>
<td style="text-align:center;">
0.04<br>[-0.07, 0.15]
</td>
<td style="text-align:center;">
<strong>-0.12<br>[-0.17, -0.08]</strong>
</td>
<td style="text-align:center;">
<strong>0.28<br>[0.15, 0.43]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Education
</td>
<td style="text-align:center;">
0.01<br>[-0.03, 0.06]
</td>
<td style="text-align:center;">
0.01<br>[-0.06, 0.08]
</td>
<td style="text-align:center;">
0.02<br>[-0.06, 0.09]
</td>
<td style="text-align:center;">
<strong>-0.06<br>[-0.10, -0.02]</strong>
</td>
<td style="text-align:center;">
<strong>0.16<br>[0.02, 0.29]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Fully Adjusted
</td>
<td style="text-align:center;">
0.01<br>[-0.03, 0.06]
</td>
<td style="text-align:center;">
0.00<br>[-0.07, 0.07]
</td>
<td style="text-align:center;">
0.02<br>[-0.07, 0.09]
</td>
<td style="text-align:center;">
<strong>-0.06<br>[-0.10, -0.03]</strong>
</td>
<td style="text-align:center;">
<strong>0.16<br>[0.04, 0.29]</strong>
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb323"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb323-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-1" tabindex="-1"></a>ipd2b_tab_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(d, type, cov){</span>
<span id="cb323-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-2" tabindex="-1"></a>  <span class="co"># long outcome name</span></span>
<span id="cb323-3"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-3" tabindex="-1"></a>  covar <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(cov, covars<span class="sc">$</span>long_name, covars<span class="sc">$</span>short_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb323-4"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-4" tabindex="-1"></a>  <span class="co"># getting row numbers for later grouping</span></span>
<span id="cb323-5"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-5" tabindex="-1"></a>  rs <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Moderator) <span class="sc">%&gt;%</span> <span class="fu">tally</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb323-6"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-6" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">end =</span> <span class="fu">cumsum</span>(n), <span class="at">start =</span> <span class="fu">lag</span>(end) <span class="sc">+</span> <span class="dv">1</span>, <span class="at">start =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(start), <span class="dv">1</span>, start))</span>
<span id="cb323-7"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-7" tabindex="-1"></a>  <span class="co"># number and name of columns for span columns </span></span>
<span id="cb323-8"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-8" tabindex="-1"></a>  cs <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">1</span>,<span class="dv">6</span>)</span>
<span id="cb323-9"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-9" tabindex="-1"></a>  <span class="fu">names</span>(cs) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot; &quot;</span>, traits<span class="sc">$</span>short_name)</span>
<span id="cb323-10"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-10" tabindex="-1"></a>  <span class="co"># cln &lt;- if(length(unique(d$term2)) == 1) c(&quot;Covariate&quot;, rep(&quot;\\textit{b} [CI]&quot;, 5)) else c(&quot; &quot;, &quot;Term&quot;, rep(&quot;\\textit{b} [CI]&quot;, 5))</span></span>
<span id="cb323-11"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-11" tabindex="-1"></a>  cln <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Term&quot;</span>, <span class="fu">rep</span>(<span class="st">&quot;&lt;em&gt;b&lt;/em&gt; [CI]&quot;</span>, <span class="dv">5</span>))</span>
<span id="cb323-12"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-12" tabindex="-1"></a>  al <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;r&quot;</span>, <span class="fu">rep</span>(<span class="st">&quot;c&quot;</span>, <span class="dv">5</span>))</span>
<span id="cb323-13"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-13" tabindex="-1"></a>  <span class="co"># caption </span></span>
<span id="cb323-14"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-14" tabindex="-1"></a>  cap <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">&quot;2B Pooled One Stage Models with Random Effects: Fixed Effect Estimates of %s Personality-Crystallized Domain Associations&quot;</span>, cov)</span>
<span id="cb323-15"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-15" tabindex="-1"></a>  <span class="co"># kable the table</span></span>
<span id="cb323-16"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-16" tabindex="-1"></a>  tab <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span></span>
<span id="cb323-17"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-17" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>Moderator) <span class="sc">%&gt;%</span></span>
<span id="cb323-18"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-18" tabindex="-1"></a>    <span class="fu">kable</span>(., <span class="st">&quot;html&quot;</span></span>
<span id="cb323-19"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-19" tabindex="-1"></a>    <span class="co"># kable(., &quot;latex&quot;</span></span>
<span id="cb323-20"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-20" tabindex="-1"></a>          , <span class="at">booktabs =</span> T</span>
<span id="cb323-21"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-21" tabindex="-1"></a>          , <span class="at">escape =</span> F</span>
<span id="cb323-22"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-22" tabindex="-1"></a>          , <span class="at">col.names =</span> cln</span>
<span id="cb323-23"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-23" tabindex="-1"></a>          , <span class="at">align =</span> al</span>
<span id="cb323-24"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-24" tabindex="-1"></a>          , <span class="at">caption =</span> cap</span>
<span id="cb323-25"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-25" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb323-26"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-26" tabindex="-1"></a>    <span class="fu">kable_classic</span>(<span class="at">full_width =</span> F, <span class="at">html_font =</span> <span class="st">&quot;Times New Roman&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb323-27"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-27" tabindex="-1"></a>    <span class="co"># kable_styling(full_width = F, font_size = 7) %&gt;%</span></span>
<span id="cb323-28"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-28" tabindex="-1"></a>    <span class="fu">add_header_above</span>(cs)</span>
<span id="cb323-29"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-29" tabindex="-1"></a>  <span class="co"># for loop to add grouped sections </span></span>
<span id="cb323-30"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-30" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(rs)){</span>
<span id="cb323-31"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-31" tabindex="-1"></a>    tab <span class="ot">&lt;-</span> tab <span class="sc">%&gt;%</span> </span>
<span id="cb323-32"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-32" tabindex="-1"></a>      kableExtra<span class="sc">::</span><span class="fu">group_rows</span>(rs<span class="sc">$</span>Moderator[i], rs<span class="sc">$</span>start[i], rs<span class="sc">$</span>end[i]) </span>
<span id="cb323-33"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-33" tabindex="-1"></a>  }</span>
<span id="cb323-34"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-34" tabindex="-1"></a>  <span class="co"># save the resulting html table</span></span>
<span id="cb323-35"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-35" tabindex="-1"></a>  <span class="fu">save_kable</span>(tab, <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/2b_ipd_mlm/%s/tables/key terms/%s.html&quot;</span></span>
<span id="cb323-36"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-36" tabindex="-1"></a>                                 , local_path, type, covar))</span>
<span id="cb323-37"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-37" tabindex="-1"></a>  <span class="fu">return</span>(tab) <span class="co"># return the html table</span></span>
<span id="cb323-38"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-38" tabindex="-1"></a>}</span>
<span id="cb323-39"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-39" tabindex="-1"></a></span>
<span id="cb323-40"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-40" tabindex="-1"></a>ipd2b_fx_tab2 <span class="ot">&lt;-</span> ipd2b_reg_tab <span class="sc">%&gt;%</span></span>
<span id="cb323-41"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-41" tabindex="-1"></a>  <span class="fu">filter</span>(study <span class="sc">==</span> <span class="st">&quot;Overall&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb323-42"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-42" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>study) <span class="sc">%&gt;%</span></span>
<span id="cb323-43"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-43" tabindex="-1"></a>  <span class="fu">arrange</span>(Moderator, term) <span class="sc">%&gt;%</span></span>
<span id="cb323-44"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-44" tabindex="-1"></a>  <span class="fu">filter</span>(Covariate <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Unadjusted&quot;</span>, <span class="st">&quot;Fully Adjusted&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb323-45"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-45" tabindex="-1"></a>  <span class="fu">group_by</span>(Outcome, type, Covariate) <span class="sc">%&gt;%</span> </span>
<span id="cb323-46"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-46" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span></span>
<span id="cb323-47"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-47" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb323-48"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-48" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">tab =</span> <span class="fu">pmap</span>(<span class="fu">list</span>(data, type, Covariate), ipd2b_tab_fun))</span>
<span id="cb323-49"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-49" tabindex="-1"></a></span>
<span id="cb323-50"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-50" tabindex="-1"></a><span class="do">## Frequentist, no moderator</span></span>
<span id="cb323-51"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb323-51" tabindex="-1"></a>(ipd2b_fx_tab2 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(type <span class="sc">==</span> <span class="st">&quot;Frequentist&quot;</span> <span class="sc">&amp;</span> Covariate <span class="sc">==</span> <span class="st">&quot;Fully Adjusted&quot;</span>))<span class="sc">$</span>tab[[<span class="dv">1</span>]]</span></code></pre></div>
<table class=" lightable-classic" style="color: black; font-family: Times New Roman; width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-54">Table 4.5: </span>2B Pooled One Stage Models with Random Effects: Fixed Effect Estimates of Fully Adjusted Personality-Crystallized Domain Associations
</caption>
<thead>
<tr>
<th style="empty-cells: hide;" colspan="1">
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
E
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
A
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
C
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
N
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
O
</div>
</th>
</tr>
<tr>
<th style="text-align:right;">
Term
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
</tr>
</thead>
<tbody>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>None</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Personality
</td>
<td style="text-align:center;">
0.01<br>[-0.02, 0.05]
</td>
<td style="text-align:center;">
0.00<br>[-0.03, 0.03]
</td>
<td style="text-align:center;">
0.01<br>[-0.04, 0.07]
</td>
<td style="text-align:center;">
<strong>-0.06<br>[-0.09, -0.03]</strong>
</td>
<td style="text-align:center;">
<strong>0.16<br>[0.07, 0.25]</strong>
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Age</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Age
</td>
<td style="text-align:center;">
0.001<br>[-0.03, 0.03]
</td>
<td style="text-align:center;">
0.000<br>[-0.09, 0.09]
</td>
<td style="text-align:center;">
-0.001<br>[-0.01, 0.01]
</td>
<td style="text-align:center;">
0.00<br>[-0.00, 0.01]
</td>
<td style="text-align:center;">
0.001<br>[-0.09, 0.09]
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Gender</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Gender (Male v Female)
</td>
<td style="text-align:center;">
<strong>0.05<br>[0.01, 0.09]</strong>
</td>
<td style="text-align:center;">
0.02<br>[-0.02, 0.06]
</td>
<td style="text-align:center;">
0.01<br>[-0.03, 0.06]
</td>
<td style="text-align:center;">
-0.02<br>[-0.05, 0.01]
</td>
<td style="text-align:center;">
-0.000<br>[-0.06, 0.06]
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Education</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Education (Years)
</td>
<td style="text-align:center;">
-0.01<br>[-0.07, 0.06]
</td>
<td style="text-align:center;">
-0.01<br>[-0.02, 0.01]
</td>
<td style="text-align:center;">
0.01<br>[-0.02, 0.04]
</td>
<td style="text-align:center;">
0.00<br>[-0.01, 0.01]
</td>
<td style="text-align:center;">
-0.01<br>[-0.12, 0.09]
</td>
</tr>
<tr grouplength="2">
<td colspan="6" style="border-bottom: 0;">
<strong>Continent</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Continent (North America v Europe)
</td>
<td style="text-align:center;">
<strong>0.07<br>[0.00, 0.14]</strong>
</td>
<td style="text-align:center;">
-0.12<br>[-0.26, 0.03]
</td>
<td style="text-align:center;">
-0.12<br>[-0.24, 0.00]
</td>
<td style="text-align:center;">
-0.03<br>[-0.06, 0.01]
</td>
<td style="text-align:center;">
0.14<br>[-0.08, 0.36]
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Continent (North America v Australia)
</td>
<td style="text-align:center;">
0.03<br>[-0.05, 0.10]
</td>
<td style="text-align:center;">
-0.01<br>[-0.18, 0.15]
</td>
<td style="text-align:center;">
-0.02<br>[-0.16, 0.11]
</td>
<td style="text-align:center;">
<strong>-0.11<br>[-0.14, -0.08]</strong>
</td>
<td style="text-align:center;">
0.11<br>[-0.19, 0.40]
</td>
</tr>
<tr grouplength="4">
<td colspan="6" style="border-bottom: 0;">
<strong>Country</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Country (United States v Germany)
</td>
<td style="text-align:center;">
0.08<br>[-0.02, 0.18]
</td>
<td style="text-align:center;">
-0.01<br>[-0.10, 0.08]
</td>
<td style="text-align:center;">
-0.05<br>[-0.19, 0.09]
</td>
<td style="text-align:center;">
-0.02<br>[-0.09, 0.05]
</td>
<td style="text-align:center;">
0.12<br>[-0.15, 0.38]
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Country (United States v Sweden)
</td>
<td style="text-align:center;">
0.07<br>[-0.03, 0.16]
</td>
<td style="text-align:center;">
<strong>-0.23<br>[-0.35, -0.12]</strong>
</td>
<td style="text-align:center;">
<strong>-0.20<br>[-0.34, -0.06]</strong>
</td>
<td style="text-align:center;">
-0.05<br>[-0.11, 0.01]
</td>
<td style="text-align:center;">
0.22<br>[-0.13, 0.58]
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Country (United States v The Netherlands)
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
-0.02<br>[-0.06, 0.03]
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Country (United States v Australia)
</td>
<td style="text-align:center;">
0.02<br>[-0.06, 0.11]
</td>
<td style="text-align:center;">
-0.01<br>[-0.05, 0.03]
</td>
<td style="text-align:center;">
-0.02<br>[-0.13, 0.08]
</td>
<td style="text-align:center;">
<strong>-0.11<br>[-0.14, -0.08]</strong>
</td>
<td style="text-align:center;">
0.11<br>[-0.21, 0.43]
</td>
</tr>
<tr grouplength="6">
<td colspan="6" style="border-bottom: 0;">
<strong>Personality Scale</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Scale (NEO-FFI v DPQ)
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
0.01<br>[-0.09, 0.11]
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Scale (NEO-FFI v Eysenck)
</td>
<td style="text-align:center;">
0.09<br>[-0.01, 0.18]
</td>
<td style="text-align:center;">
-0.24<br>[-9.45, 8.97]
</td>
<td style="text-align:center;">
<strong>-0.21<br>[-0.33, -0.10]</strong>
</td>
<td style="text-align:center;">
-0.02<br>[-0.11, 0.08]
</td>
<td style="text-align:center;">
0.14<br>[-0.50, 0.77]
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Scale (NEO-FFI v MIDI)
</td>
<td style="text-align:center;">
-0.00<br>[-0.08, 0.08]
</td>
<td style="text-align:center;">
-0.01<br>[-9.22, 9.20]
</td>
<td style="text-align:center;">
0.01<br>[-0.06, 0.08]
</td>
<td style="text-align:center;">
0.03<br>[-0.06, 0.12]
</td>
<td style="text-align:center;">
-0.07<br>[-0.70, 0.55]
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Scale (NEO-FFI v BFI-S)
</td>
<td style="text-align:center;">
<strong>0.12<br>[0.01, 0.23]</strong>
</td>
<td style="text-align:center;">
-0.01<br>[-9.22, 9.20]
</td>
<td style="text-align:center;">
-0.07<br>[-0.18, 0.05]
</td>
<td style="text-align:center;">
0.03<br>[-0.09, 0.14]
</td>
<td style="text-align:center;">
-0.12<br>[-0.75, 0.51]
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Scale (NEO-FFI v IPIP NEO)
</td>
<td style="text-align:center;">
0.11<br>[-0.01, 0.22]
</td>
<td style="text-align:center;">
0.01<br>[-9.20, 9.22]
</td>
<td style="text-align:center;">
<strong>-0.12<br>[-0.22, -0.01]</strong>
</td>
<td style="text-align:center;">
-0.00<br>[-0.12, 0.12]
</td>
<td style="text-align:center;">
0.01<br>[-0.61, 0.64]
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Scale (NEO-FFI v TDA-40)
</td>
<td style="text-align:center;">
0.04<br>[-0.04, 0.13]
</td>
<td style="text-align:center;">
-0.01<br>[-9.22, 9.20]
</td>
<td style="text-align:center;">
-0.04<br>[-0.11, 0.02]
</td>
<td style="text-align:center;">
-0.08<br>[-0.17, 0.01]
</td>
<td style="text-align:center;">
0.02<br>[-0.60, 0.65]
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Baseline Age</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Study Baseline Age
</td>
<td style="text-align:center;">
-0.001<br>[-0.00, 0.00]
</td>
<td style="text-align:center;">
0.00<br>[-0.00, 0.01]
</td>
<td style="text-align:center;">
0.00<br>[-0.00, 0.01]
</td>
<td style="text-align:center;">
0.001<br>[-0.001, 0.00]
</td>
<td style="text-align:center;">
-0.000<br>[-0.01, 0.01]
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Baseline Year</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Study Baseline Year
</td>
<td style="text-align:center;">
-0.000<br>[-0.01, 0.00]
</td>
<td style="text-align:center;">
<strong>0.01<br>[0.00, 0.01]</strong>
</td>
<td style="text-align:center;">
0.01<br>[-0.00, 0.01]
</td>
<td style="text-align:center;">
0.001<br>[-0.00, 0.01]
</td>
<td style="text-align:center;">
-0.01<br>[-0.02, 0.00]
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Prediction Interval</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Prediction Interval
</td>
<td style="text-align:center;">
-0.00<br>[-0.01, 0.01]
</td>
<td style="text-align:center;">
<strong>-0.01<br>[-0.02, -0.00]</strong>
</td>
<td style="text-align:center;">
-0.01<br>[-0.02, 0.01]
</td>
<td style="text-align:center;">
-0.00<br>[-0.01, 0.01]
</td>
<td style="text-align:center;">
0.01<br>[-0.02, 0.04]
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb324"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb324-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb324-1" tabindex="-1"></a><span class="do">## bayesian</span></span>
<span id="cb324-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb324-2" tabindex="-1"></a>(ipd2b_fx_tab2 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(type <span class="sc">==</span> <span class="st">&quot;Bayesian&quot;</span> <span class="sc">&amp;</span> Covariate <span class="sc">==</span> <span class="st">&quot;Fully Adjusted&quot;</span>))<span class="sc">$</span>tab[[<span class="dv">1</span>]]<span class="co"># save(ipd1a_fx_tab, ipd1a_fx_tab2, ipd1a_res, file = sprintf(&quot;%s/manuscript/results/ipd1b_fx_tab.RData&quot;, res_path))</span></span></code></pre></div>
<table class=" lightable-classic" style="color: black; font-family: Times New Roman; width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-54">Table 4.5: </span>2B Pooled One Stage Models with Random Effects: Fixed Effect Estimates of Fully Adjusted Personality-Crystallized Domain Associations
</caption>
<thead>
<tr>
<th style="empty-cells: hide;" colspan="1">
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
E
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
A
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
C
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
N
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
O
</div>
</th>
</tr>
<tr>
<th style="text-align:right;">
Term
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
</tr>
</thead>
<tbody>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>None</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Personality
</td>
<td style="text-align:center;">
0.01<br>[-0.03, 0.06]
</td>
<td style="text-align:center;">
0.00<br>[-0.07, 0.07]
</td>
<td style="text-align:center;">
0.02<br>[-0.07, 0.09]
</td>
<td style="text-align:center;">
<strong>-0.06<br>[-0.10, -0.03]</strong>
</td>
<td style="text-align:center;">
<strong>0.16<br>[0.04, 0.29]</strong>
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Age</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Age
</td>
<td style="text-align:center;">
-0.00<br>[-0.01, 0.00]
</td>
<td style="text-align:center;">
-0.001<br>[-0.01, 0.00]
</td>
<td style="text-align:center;">
-0.00<br>[-0.01, 0.00]
</td>
<td style="text-align:center;">
0.001<br>[-0.00, 0.01]
</td>
<td style="text-align:center;">
-0.001<br>[-0.01, 0.01]
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Gender</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Gender (Male v Female)
</td>
<td style="text-align:center;">
0.04<br>[-0.01, 0.10]
</td>
<td style="text-align:center;">
0.00<br>[-0.08, 0.07]
</td>
<td style="text-align:center;">
-0.02<br>[-0.09, 0.04]
</td>
<td style="text-align:center;">
-0.01<br>[-0.06, 0.03]
</td>
<td style="text-align:center;">
-0.04<br>[-0.09, 0.04]
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Education</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Education (Years)
</td>
<td style="text-align:center;">
-0.00<br>[-0.01, 0.01]
</td>
<td style="text-align:center;">
-0.00<br>[-0.02, 0.02]
</td>
<td style="text-align:center;">
0.01<br>[-0.02, 0.04]
</td>
<td style="text-align:center;">
0.000<br>[-0.01, 0.01]
</td>
<td style="text-align:center;">
-0.00<br>[-0.02, 0.01]
</td>
</tr>
<tr grouplength="2">
<td colspan="6" style="border-bottom: 0;">
<strong>Continent</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Continent (North America v Europe)
</td>
<td style="text-align:center;">
0.07<br>[-0.04, 0.16]
</td>
<td style="text-align:center;">
-0.08<br>[-0.35, 0.15]
</td>
<td style="text-align:center;">
-0.11<br>[-0.30, 0.12]
</td>
<td style="text-align:center;">
-0.03<br>[-0.07, 0.02]
</td>
<td style="text-align:center;">
0.14<br>[-0.09, 0.40]
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Continent (North America v Australia)
</td>
<td style="text-align:center;">
0.02<br>[-0.12, 0.14]
</td>
<td style="text-align:center;">
-0.03<br>[-0.31, 0.27]
</td>
<td style="text-align:center;">
-0.03<br>[-0.27, 0.22]
</td>
<td style="text-align:center;">
<strong>-0.11<br>[-0.17, -0.04]</strong>
</td>
<td style="text-align:center;">
0.09<br>[-0.24, 0.41]
</td>
</tr>
<tr grouplength="4">
<td colspan="6" style="border-bottom: 0;">
<strong>Country</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Country (United States v Germany)
</td>
<td style="text-align:center;">
0.08<br>[-0.06, 0.21]
</td>
<td style="text-align:center;">
0.01<br>[-0.15, 0.21]
</td>
<td style="text-align:center;">
-0.04<br>[-0.29, 0.27]
</td>
<td style="text-align:center;">
-0.02<br>[-0.13, 0.08]
</td>
<td style="text-align:center;">
0.11<br>[-0.14, 0.37]
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Country (United States v Sweden)
</td>
<td style="text-align:center;">
0.07<br>[-0.07, 0.19]
</td>
<td style="text-align:center;">
<strong>-0.22<br>[-0.40, -0.03]</strong>
</td>
<td style="text-align:center;">
-0.18<br>[-0.42, 0.11]
</td>
<td style="text-align:center;">
-0.04<br>[-0.13, 0.05]
</td>
<td style="text-align:center;">
0.24<br>[-0.09, 0.58]
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Country (United States v The Netherlands)
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
-0.01<br>[-0.11, 0.09]
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Country (United States v Australia)
</td>
<td style="text-align:center;">
0.02<br>[-0.14, 0.16]
</td>
<td style="text-align:center;">
-0.01<br>[-0.15, 0.13]
</td>
<td style="text-align:center;">
-0.03<br>[-0.29, 0.20]
</td>
<td style="text-align:center;">
<strong>-0.11<br>[-0.19, -0.01]</strong>
</td>
<td style="text-align:center;">
0.08<br>[-0.23, 0.39]
</td>
</tr>
<tr grouplength="6">
<td colspan="6" style="border-bottom: 0;">
<strong>Personality Scale</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Scale (NEO-FFI v DPQ)
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
0.01<br>[-0.17, 0.22]
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Scale (NEO-FFI v Eysenck)
</td>
<td style="text-align:center;">
0.08<br>[-0.08, 0.28]
</td>
<td style="text-align:center;">
-0.21<br>[-1.49, 1.03]
</td>
<td style="text-align:center;">
-0.21<br>[-0.58, 0.14]
</td>
<td style="text-align:center;">
-0.02<br>[-0.16, 0.13]
</td>
<td style="text-align:center;">
0.19<br>[-0.68, 1.10]
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Scale (NEO-FFI v MIDI)
</td>
<td style="text-align:center;">
-0.01<br>[-0.24, 0.21]
</td>
<td style="text-align:center;">
-0.12<br>[-1.40, 1.05]
</td>
<td style="text-align:center;">
0.00<br>[-0.40, 0.30]
</td>
<td style="text-align:center;">
0.04<br>[-0.14, 0.25]
</td>
<td style="text-align:center;">
-0.07<br>[-0.90, 0.84]
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Scale (NEO-FFI v BFI-S)
</td>
<td style="text-align:center;">
0.12<br>[-0.09, 0.32]
</td>
<td style="text-align:center;">
-0.04<br>[-1.55, 1.11]
</td>
<td style="text-align:center;">
-0.06<br>[-0.41, 0.28]
</td>
<td style="text-align:center;">
0.03<br>[-0.14, 0.24]
</td>
<td style="text-align:center;">
-0.01<br>[-0.89, 0.97]
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Scale (NEO-FFI v IPIP NEO)
</td>
<td style="text-align:center;">
0.10<br>[-0.11, 0.32]
</td>
<td style="text-align:center;">
0.03<br>[-1.11, 1.27]
</td>
<td style="text-align:center;">
-0.11<br>[-0.48, 0.23]
</td>
<td style="text-align:center;">
-0.00<br>[-0.20, 0.20]
</td>
<td style="text-align:center;">
0.05<br>[-0.84, 1.04]
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Scale (NEO-FFI v TDA-40)
</td>
<td style="text-align:center;">
0.04<br>[-0.19, 0.23]
</td>
<td style="text-align:center;">
-0.12<br>[-1.52, 0.95]
</td>
<td style="text-align:center;">
-0.05<br>[-0.43, 0.38]
</td>
<td style="text-align:center;">
-0.08<br>[-0.23, 0.12]
</td>
<td style="text-align:center;">
0.000<br>[-0.91, 0.83]
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Baseline Age</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Study Baseline Age
</td>
<td style="text-align:center;">
-0.001<br>[-0.00, 0.00]
</td>
<td style="text-align:center;">
0.00<br>[-0.01, 0.01]
</td>
<td style="text-align:center;">
0.00<br>[-0.00, 0.01]
</td>
<td style="text-align:center;">
0.001<br>[-0.00, 0.00]
</td>
<td style="text-align:center;">
-0.000<br>[-0.01, 0.01]
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Baseline Year</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Study Baseline Year
</td>
<td style="text-align:center;">
-0.000<br>[-0.01, 0.01]
</td>
<td style="text-align:center;">
<strong>0.01<br>[0.00, 0.01]</strong>
</td>
<td style="text-align:center;">
0.01<br>[-0.01, 0.02]
</td>
<td style="text-align:center;">
0.001<br>[-0.00, 0.01]
</td>
<td style="text-align:center;">
-0.01<br>[-0.02, 0.01]
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Prediction Interval</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Prediction Interval
</td>
<td style="text-align:center;">
-0.00<br>[-0.02, 0.01]
</td>
<td style="text-align:center;">
-0.01<br>[-0.03, 0.000]
</td>
<td style="text-align:center;">
-0.01<br>[-0.03, 0.01]
</td>
<td style="text-align:center;">
-0.001<br>[-0.01, 0.01]
</td>
<td style="text-align:center;">
0.01<br>[-0.02, 0.05]
</td>
</tr>
</tbody>
</table>
</div>
<div id="study-specific-effects-5" class="section level6 hasAnchor" number="4.2.2.7.1.2">
<h6><span class="header-section-number">4.2.2.7.1.2</span> Study-Specific Effects<a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#study-specific-effects-5" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<div class="sourceCode" id="cb325"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb325-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb325-1" tabindex="-1"></a><span class="do">## table function </span></span>
<span id="cb325-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb325-2" tabindex="-1"></a>ipd2b_tab_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(d, type, moder){</span>
<span id="cb325-3"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb325-3" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(type, moder))</span>
<span id="cb325-4"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb325-4" tabindex="-1"></a>  md <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(moder, <span class="fu">c</span>(moders<span class="sc">$</span>long_name, stdyModers<span class="sc">$</span>long_name), <span class="fu">c</span>(moders<span class="sc">$</span>short_name, stdyModers<span class="sc">$</span>short_name), <span class="at">warn_missing =</span> F)</span>
<span id="cb325-5"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb325-5" tabindex="-1"></a>  rs <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Outcome) <span class="sc">%&gt;%</span> <span class="fu">tally</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb325-6"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb325-6" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">end =</span> <span class="fu">cumsum</span>(n), <span class="at">start =</span> <span class="fu">lag</span>(end) <span class="sc">+</span> <span class="dv">1</span>, <span class="at">start =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(start), <span class="dv">1</span>, start))</span>
<span id="cb325-7"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb325-7" tabindex="-1"></a>  cs <span class="ot">&lt;-</span> <span class="cf">if</span>(<span class="fu">length</span>(<span class="fu">unique</span>(d<span class="sc">$</span>term)) <span class="sc">==</span> <span class="dv">1</span>)  <span class="fu">c</span>(<span class="dv">2</span>, <span class="fu">rep</span>(<span class="dv">1</span>,<span class="dv">5</span>)) <span class="cf">else</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="fu">rep</span>(<span class="dv">1</span>,<span class="dv">5</span>)) </span>
<span id="cb325-8"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb325-8" tabindex="-1"></a>  <span class="fu">names</span>(cs) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot; &quot;</span>, <span class="fu">paste0</span>(<span class="st">&quot;&lt;strong&gt;&quot;</span>, traits<span class="sc">$</span>short_name, <span class="st">&quot;&lt;/strong&gt;&quot;</span>))</span>
<span id="cb325-9"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb325-9" tabindex="-1"></a>  cln <span class="ot">&lt;-</span> <span class="cf">if</span>(<span class="fu">length</span>(<span class="fu">unique</span>(d<span class="sc">$</span>term)) <span class="sc">==</span> <span class="dv">1</span>) <span class="fu">c</span>(<span class="st">&quot;Covariate&quot;</span>, <span class="st">&quot;Study&quot;</span>, <span class="fu">rep</span>(<span class="st">&quot;&lt;em&gt;b&lt;/em&gt; [CI]&quot;</span>, <span class="dv">5</span>)) <span class="cf">else</span> <span class="fu">c</span>(<span class="st">&quot;Covariate&quot;</span>, <span class="st">&quot;Study&quot;</span>, <span class="st">&quot;Term&quot;</span>, <span class="fu">rep</span>(<span class="st">&quot;&lt;em&gt;b&lt;/em&gt; [CI]&quot;</span>, <span class="dv">5</span>))</span>
<span id="cb325-10"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb325-10" tabindex="-1"></a>  al <span class="ot">&lt;-</span> <span class="cf">if</span>(<span class="fu">length</span>(<span class="fu">unique</span>(d<span class="sc">$</span>term)) <span class="sc">==</span> <span class="dv">1</span>) <span class="fu">c</span>(<span class="st">&quot;r&quot;</span>, <span class="st">&quot;r&quot;</span>, <span class="fu">rep</span>(<span class="st">&quot;c&quot;</span>, <span class="dv">5</span>)) <span class="cf">else</span> <span class="fu">c</span>(<span class="st">&quot;r&quot;</span>, <span class="st">&quot;r&quot;</span>, <span class="st">&quot;r&quot;</span>, <span class="fu">rep</span>(<span class="st">&quot;c&quot;</span>, <span class="dv">5</span>))</span>
<span id="cb325-11"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb325-11" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">length</span>(<span class="fu">unique</span>(d<span class="sc">$</span>term)) <span class="sc">==</span> <span class="dv">1</span>) d <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>term)</span>
<span id="cb325-12"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb325-12" tabindex="-1"></a>  cap <span class="ot">&lt;-</span> <span class="cf">if</span>(md <span class="sc">==</span> <span class="st">&quot;none&quot;</span>) <span class="st">&quot;Overall Effects of Personality-Crystallized Domain Associations&quot;</span> <span class="cf">else</span> <span class="fu">sprintf</span>(<span class="st">&quot;Overall %s Moderation of Personality-Crystallized Domain Associations&quot;</span>, md)</span>
<span id="cb325-13"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb325-13" tabindex="-1"></a>  tab <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span></span>
<span id="cb325-14"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb325-14" tabindex="-1"></a>    <span class="fu">arrange</span>(Outcome) <span class="sc">%&gt;%</span></span>
<span id="cb325-15"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb325-15" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>Outcome) <span class="sc">%&gt;%</span></span>
<span id="cb325-16"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb325-16" tabindex="-1"></a>    <span class="fu">kable</span>(., <span class="st">&quot;html&quot;</span></span>
<span id="cb325-17"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb325-17" tabindex="-1"></a>          , <span class="at">escape =</span> F</span>
<span id="cb325-18"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb325-18" tabindex="-1"></a>          , <span class="at">col.names =</span> cln</span>
<span id="cb325-19"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb325-19" tabindex="-1"></a>          , <span class="at">align =</span> al</span>
<span id="cb325-20"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb325-20" tabindex="-1"></a>          , <span class="at">caption =</span> cap</span>
<span id="cb325-21"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb325-21" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb325-22"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb325-22" tabindex="-1"></a>    <span class="fu">kable_classic</span>(<span class="at">full_width =</span> F, <span class="at">html_font =</span> <span class="st">&quot;Times New Roman&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb325-23"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb325-23" tabindex="-1"></a>    <span class="fu">add_header_above</span>(cs, <span class="at">escape =</span> F) <span class="sc">%&gt;%</span></span>
<span id="cb325-24"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb325-24" tabindex="-1"></a>    <span class="fu">collapse_rows</span>(<span class="dv">1</span>, <span class="at">valign =</span> <span class="st">&quot;top&quot;</span>)</span>
<span id="cb325-25"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb325-25" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(rs)) {</span>
<span id="cb325-26"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb325-26" tabindex="-1"></a>    tab <span class="ot">&lt;-</span> tab <span class="sc">%&gt;%</span> kableExtra<span class="sc">::</span><span class="fu">group_rows</span>(rs<span class="sc">$</span>Outcome[i], rs<span class="sc">$</span>start[i], rs<span class="sc">$</span>end[i])</span>
<span id="cb325-27"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb325-27" tabindex="-1"></a>  }</span>
<span id="cb325-28"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb325-28" tabindex="-1"></a>  <span class="fu">save_kable</span>(tab, <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/2b_ipd_mlm/%s/tables/study specific/%s.html&quot;</span></span>
<span id="cb325-29"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb325-29" tabindex="-1"></a>                                 , local_path, type, md))</span>
<span id="cb325-30"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb325-30" tabindex="-1"></a>  <span class="fu">return</span>(tab)</span>
<span id="cb325-31"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb325-31" tabindex="-1"></a>}</span>
<span id="cb325-32"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb325-32" tabindex="-1"></a></span>
<span id="cb325-33"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb325-33" tabindex="-1"></a>ipd2b_rx_tab <span class="ot">&lt;-</span> ipd2b_reg_tab <span class="sc">%&gt;%</span></span>
<span id="cb325-34"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb325-34" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>Moderator <span class="sc">%in%</span> stdyModers<span class="sc">$</span>long_name) <span class="sc">%&gt;%</span></span>
<span id="cb325-35"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb325-35" tabindex="-1"></a>  <span class="fu">arrange</span>(type, Outcome, Moderator, Covariate, study, term) <span class="sc">%&gt;%</span></span>
<span id="cb325-36"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb325-36" tabindex="-1"></a>  <span class="fu">group_by</span>(type, Moderator) <span class="sc">%&gt;%</span></span>
<span id="cb325-37"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb325-37" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span></span>
<span id="cb325-38"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb325-38" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb325-39"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb325-39" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">tab =</span> <span class="fu">pmap</span>(<span class="fu">list</span>(data, type, Moderator), ipd2b_tab_fun))</span></code></pre></div>
<pre><code>## [1] &quot;Bayesian None&quot;
## [1] &quot;Bayesian Age&quot;
## [1] &quot;Bayesian Gender&quot;
## [1] &quot;Bayesian Education&quot;
## [1] &quot;Frequentist None&quot;
## [1] &quot;Frequentist Age&quot;
## [1] &quot;Frequentist Gender&quot;
## [1] &quot;Frequentist Education&quot;</code></pre>
<div class="sourceCode" id="cb327"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb327-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb327-1" tabindex="-1"></a>ipd2b_rx_tab</span></code></pre></div>
<pre><code>## # A tibble: 8 × 4
##   type        Moderator data              tab           
##   &lt;chr&gt;       &lt;fct&gt;     &lt;list&gt;            &lt;list&gt;        
## 1 Bayesian    None      &lt;tibble [60 × 9]&gt; &lt;kablExtr [1]&gt;
## 2 Bayesian    Age       &lt;tibble [24 × 9]&gt; &lt;kablExtr [1]&gt;
## 3 Bayesian    Gender    &lt;tibble [24 × 9]&gt; &lt;kablExtr [1]&gt;
## 4 Bayesian    Education &lt;tibble [24 × 9]&gt; &lt;kablExtr [1]&gt;
## 5 Frequentist None      &lt;tibble [60 × 9]&gt; &lt;kablExtr [1]&gt;
## 6 Frequentist Age       &lt;tibble [24 × 9]&gt; &lt;kablExtr [1]&gt;
## 7 Frequentist Gender    &lt;tibble [24 × 9]&gt; &lt;kablExtr [1]&gt;
## 8 Frequentist Education &lt;tibble [24 × 9]&gt; &lt;kablExtr [1]&gt;</code></pre>
<div class="sourceCode" id="cb329"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb329-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb329-1" tabindex="-1"></a><span class="do">## Frequentist</span></span>
<span id="cb329-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb329-2" tabindex="-1"></a>(ipd2b_rx_tab <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Moderator <span class="sc">==</span> <span class="st">&quot;None&quot;</span> <span class="sc">&amp;</span> type <span class="sc">==</span> <span class="st">&quot;Frequentist&quot;</span>))<span class="sc">$</span>tab[[<span class="dv">1</span>]]</span></code></pre></div>
<table class=" lightable-classic" style="color: black; font-family: Times New Roman; width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
(#tab:ipd2b study specific table)Overall Effects of Personality-Crystallized Domain Associations
</caption>
<thead>
<tr>
<th style="empty-cells: hide;" colspan="2">
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>E</strong>
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>A</strong>
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>C</strong>
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>N</strong>
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>O</strong>
</div>
</th>
</tr>
<tr>
<th style="text-align:right;">
Covariate
</th>
<th style="text-align:right;">
Study
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
</tr>
</thead>
<tbody>
<tr grouplength="60">
<td colspan="7" style="border-bottom: 0;">
<strong>Crystallized Ability</strong>
</td>
</tr>
<tr>
<td style="text-align:right;vertical-align: top !important;padding-left: 2em;" rowspan="12" indentlevel="1">
Unadjusted
</td>
<td style="text-align:right;">
BASE
</td>
<td style="text-align:center;">
0.05<br>[-0.02, 0.12]
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>-0.13<br>[-0.20, -0.06]</strong>
</td>
<td style="text-align:center;">
<strong>0.39<br>[0.27, 0.52]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
EAS
</td>
<td style="text-align:center;">
<strong>0.10<br>[0.06, 0.15]</strong>
</td>
<td style="text-align:center;">
0.02<br>[-0.03, 0.07]
</td>
<td style="text-align:center;">
0.02<br>[-0.03, 0.07]
</td>
<td style="text-align:center;">
<strong>-0.13<br>[-0.17, -0.08]</strong>
</td>
<td style="text-align:center;">
<strong>0.37<br>[0.32, 0.42]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
GSOEP
</td>
<td style="text-align:center;">
<strong>0.07<br>[0.03, 0.11]</strong>
</td>
<td style="text-align:center;">
-0.02<br>[-0.07, 0.03]
</td>
<td style="text-align:center;">
-0.02<br>[-0.07, 0.03]
</td>
<td style="text-align:center;">
<strong>-0.08<br>[-0.12, -0.04]</strong>
</td>
<td style="text-align:center;">
<strong>0.10<br>[0.06, 0.15]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
HILDA
</td>
<td style="text-align:center;">
0.01<br>[-0.01, 0.04]
</td>
<td style="text-align:center;">
<strong>0.05<br>[0.01, 0.08]</strong>
</td>
<td style="text-align:center;">
<strong>0.07<br>[0.04, 0.09]</strong>
</td>
<td style="text-align:center;">
<strong>-0.15<br>[-0.17, -0.12]</strong>
</td>
<td style="text-align:center;">
<strong>0.27<br>[0.25, 0.30]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
HRS
</td>
<td style="text-align:center;">
0.001<br>[-0.02, 0.03]
</td>
<td style="text-align:center;">
<strong>0.06<br>[0.03, 0.09]</strong>
</td>
<td style="text-align:center;">
<strong>0.16<br>[0.13, 0.19]</strong>
</td>
<td style="text-align:center;">
<strong>-0.08<br>[-0.10, -0.06]</strong>
</td>
<td style="text-align:center;">
<strong>0.22<br>[0.19, 0.24]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
LASA
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>-0.13<br>[-0.17, -0.09]</strong>
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
MAP
</td>
<td style="text-align:center;">
0.04<br>[-0.01, 0.09]
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>0.09<br>[0.02, 0.17]</strong>
</td>
<td style="text-align:center;">
<strong>-0.15<br>[-0.20, -0.10]</strong>
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
MARS
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>-0.18<br>[-0.25, -0.12]</strong>
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
OCTO-Twin
</td>
<td style="text-align:center;">
0.05<br>[-0.01, 0.11]
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>-0.10<br>[-0.16, -0.04]</strong>
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
ROS
</td>
<td style="text-align:center;">
0.02<br>[-0.03, 0.07]
</td>
<td style="text-align:center;">
<strong>0.10<br>[0.02, 0.17]</strong>
</td>
<td style="text-align:center;">
<strong>0.12<br>[0.04, 0.19]</strong>
</td>
<td style="text-align:center;">
<strong>-0.10<br>[-0.15, -0.05]</strong>
</td>
<td style="text-align:center;">
<strong>0.19<br>[0.11, 0.27]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
SATSA
</td>
<td style="text-align:center;">
0.04<br>[-0.02, 0.11]
</td>
<td style="text-align:center;">
<strong>-0.17<br>[-0.27, -0.07]</strong>
</td>
<td style="text-align:center;">
<strong>-0.12<br>[-0.21, -0.03]</strong>
</td>
<td style="text-align:center;">
<strong>-0.11<br>[-0.17, -0.05]</strong>
</td>
<td style="text-align:center;">
<strong>0.37<br>[0.25, 0.49]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Overall
</td>
<td style="text-align:center;">
<strong>0.04<br>[0.01, 0.08]</strong>
</td>
<td style="text-align:center;">
0.01<br>[-0.08, 0.09]
</td>
<td style="text-align:center;">
0.05<br>[-0.03, 0.12]
</td>
<td style="text-align:center;">
<strong>-0.12<br>[-0.15, -0.09]</strong>
</td>
<td style="text-align:center;">
<strong>0.27<br>[0.18, 0.36]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;vertical-align: top !important;padding-left: 2em;" rowspan="12" indentlevel="1">
Age
</td>
<td style="text-align:right;">
BASE
</td>
<td style="text-align:center;">
0.03<br>[-0.02, 0.07]
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>-0.14<br>[-0.21, -0.06]</strong>
</td>
<td style="text-align:center;">
<strong>0.40<br>[0.28, 0.53]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
EAS
</td>
<td style="text-align:center;">
<strong>0.05<br>[0.01, 0.09]</strong>
</td>
<td style="text-align:center;">
<strong>0.08<br>[0.01, 0.16]</strong>
</td>
<td style="text-align:center;">
0.01<br>[-0.07, 0.10]
</td>
<td style="text-align:center;">
<strong>-0.13<br>[-0.19, -0.07]</strong>
</td>
<td style="text-align:center;">
<strong>0.41<br>[0.33, 0.49]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
GSOEP
</td>
<td style="text-align:center;">
<strong>0.06<br>[0.03, 0.09]</strong>
</td>
<td style="text-align:center;">
-0.02<br>[-0.07, 0.03]
</td>
<td style="text-align:center;">
-0.02<br>[-0.08, 0.03]
</td>
<td style="text-align:center;">
<strong>-0.08<br>[-0.12, -0.04]</strong>
</td>
<td style="text-align:center;">
<strong>0.10<br>[0.06, 0.15]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
HILDA
</td>
<td style="text-align:center;">
0.01<br>[-0.01, 0.04]
</td>
<td style="text-align:center;">
<strong>0.04<br>[0.01, 0.07]</strong>
</td>
<td style="text-align:center;">
<strong>0.07<br>[0.04, 0.09]</strong>
</td>
<td style="text-align:center;">
<strong>-0.16<br>[-0.19, -0.14]</strong>
</td>
<td style="text-align:center;">
<strong>0.28<br>[0.25, 0.30]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
HRS
</td>
<td style="text-align:center;">
0.00<br>[-0.02, 0.02]
</td>
<td style="text-align:center;">
<strong>0.06<br>[0.03, 0.09]</strong>
</td>
<td style="text-align:center;">
<strong>0.16<br>[0.13, 0.19]</strong>
</td>
<td style="text-align:center;">
<strong>-0.08<br>[-0.10, -0.06]</strong>
</td>
<td style="text-align:center;">
<strong>0.22<br>[0.19, 0.24]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
LASA
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>-0.12<br>[-0.16, -0.09]</strong>
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
MAP
</td>
<td style="text-align:center;">
<strong>0.04<br>[0.01, 0.08]</strong>
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>0.09<br>[0.02, 0.17]</strong>
</td>
<td style="text-align:center;">
<strong>-0.15<br>[-0.20, -0.10]</strong>
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
MARS
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>-0.19<br>[-0.26, -0.12]</strong>
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
OCTO-Twin
</td>
<td style="text-align:center;">
0.03<br>[-0.01, 0.07]
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>-0.10<br>[-0.16, -0.04]</strong>
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
ROS
</td>
<td style="text-align:center;">
0.03<br>[-0.01, 0.06]
</td>
<td style="text-align:center;">
<strong>0.10<br>[0.03, 0.18]</strong>
</td>
<td style="text-align:center;">
<strong>0.12<br>[0.05, 0.19]</strong>
</td>
<td style="text-align:center;">
<strong>-0.10<br>[-0.16, -0.05]</strong>
</td>
<td style="text-align:center;">
<strong>0.19<br>[0.12, 0.27]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
SATSA
</td>
<td style="text-align:center;">
0.04<br>[-0.00, 0.08]
</td>
<td style="text-align:center;">
<strong>-0.18<br>[-0.28, -0.08]</strong>
</td>
<td style="text-align:center;">
<strong>-0.13<br>[-0.22, -0.04]</strong>
</td>
<td style="text-align:center;">
<strong>-0.11<br>[-0.17, -0.05]</strong>
</td>
<td style="text-align:center;">
<strong>0.38<br>[0.26, 0.50]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Overall
</td>
<td style="text-align:center;">
<strong>0.03<br>[0.01, 0.06]</strong>
</td>
<td style="text-align:center;">
0.02<br>[-0.08, 0.11]
</td>
<td style="text-align:center;">
0.04<br>[-0.04, 0.12]
</td>
<td style="text-align:center;">
<strong>-0.12<br>[-0.16, -0.09]</strong>
</td>
<td style="text-align:center;">
<strong>0.28<br>[0.19, 0.38]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;vertical-align: top !important;padding-left: 2em;" rowspan="12" indentlevel="1">
Gender
</td>
<td style="text-align:right;">
BASE
</td>
<td style="text-align:center;">
0.03<br>[-0.02, 0.07]
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>-0.13<br>[-0.21, -0.06]</strong>
</td>
<td style="text-align:center;">
<strong>0.40<br>[0.27, 0.53]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
EAS
</td>
<td style="text-align:center;">
<strong>0.05<br>[0.01, 0.09]</strong>
</td>
<td style="text-align:center;">
<strong>0.09<br>[0.01, 0.16]</strong>
</td>
<td style="text-align:center;">
0.01<br>[-0.07, 0.10]
</td>
<td style="text-align:center;">
<strong>-0.13<br>[-0.19, -0.07]</strong>
</td>
<td style="text-align:center;">
<strong>0.41<br>[0.33, 0.49]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
GSOEP
</td>
<td style="text-align:center;">
<strong>0.06<br>[0.03, 0.09]</strong>
</td>
<td style="text-align:center;">
-0.02<br>[-0.07, 0.03]
</td>
<td style="text-align:center;">
-0.02<br>[-0.08, 0.03]
</td>
<td style="text-align:center;">
<strong>-0.08<br>[-0.12, -0.04]</strong>
</td>
<td style="text-align:center;">
<strong>0.10<br>[0.06, 0.14]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
HILDA
</td>
<td style="text-align:center;">
0.01<br>[-0.01, 0.04]
</td>
<td style="text-align:center;">
<strong>0.05<br>[0.02, 0.08]</strong>
</td>
<td style="text-align:center;">
<strong>0.07<br>[0.04, 0.09]</strong>
</td>
<td style="text-align:center;">
<strong>-0.15<br>[-0.17, -0.12]</strong>
</td>
<td style="text-align:center;">
<strong>0.27<br>[0.25, 0.30]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
HRS
</td>
<td style="text-align:center;">
0.00<br>[-0.02, 0.02]
</td>
<td style="text-align:center;">
<strong>0.06<br>[0.03, 0.09]</strong>
</td>
<td style="text-align:center;">
<strong>0.16<br>[0.13, 0.19]</strong>
</td>
<td style="text-align:center;">
<strong>-0.08<br>[-0.10, -0.06]</strong>
</td>
<td style="text-align:center;">
<strong>0.22<br>[0.19, 0.24]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
LASA
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>-0.13<br>[-0.17, -0.09]</strong>
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
MAP
</td>
<td style="text-align:center;">
<strong>0.04<br>[0.01, 0.08]</strong>
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>0.09<br>[0.02, 0.17]</strong>
</td>
<td style="text-align:center;">
<strong>-0.15<br>[-0.20, -0.10]</strong>
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
MARS
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>-0.19<br>[-0.25, -0.12]</strong>
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
OCTO-Twin
</td>
<td style="text-align:center;">
0.03<br>[-0.01, 0.07]
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>-0.10<br>[-0.16, -0.04]</strong>
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
ROS
</td>
<td style="text-align:center;">
0.03<br>[-0.01, 0.06]
</td>
<td style="text-align:center;">
<strong>0.10<br>[0.03, 0.18]</strong>
</td>
<td style="text-align:center;">
<strong>0.12<br>[0.05, 0.19]</strong>
</td>
<td style="text-align:center;">
<strong>-0.10<br>[-0.16, -0.05]</strong>
</td>
<td style="text-align:center;">
<strong>0.19<br>[0.11, 0.27]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
SATSA
</td>
<td style="text-align:center;">
0.04<br>[-0.00, 0.08]
</td>
<td style="text-align:center;">
<strong>-0.18<br>[-0.28, -0.08]</strong>
</td>
<td style="text-align:center;">
<strong>-0.13<br>[-0.22, -0.04]</strong>
</td>
<td style="text-align:center;">
<strong>-0.11<br>[-0.17, -0.05]</strong>
</td>
<td style="text-align:center;">
<strong>0.38<br>[0.26, 0.50]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Overall
</td>
<td style="text-align:center;">
<strong>0.03<br>[0.01, 0.06]</strong>
</td>
<td style="text-align:center;">
0.02<br>[-0.07, 0.11]
</td>
<td style="text-align:center;">
0.04<br>[-0.04, 0.12]
</td>
<td style="text-align:center;">
<strong>-0.12<br>[-0.15, -0.09]</strong>
</td>
<td style="text-align:center;">
<strong>0.28<br>[0.18, 0.38]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;vertical-align: top !important;padding-left: 2em;" rowspan="12" indentlevel="1">
Education
</td>
<td style="text-align:right;">
BASE
</td>
<td style="text-align:center;">
0.00<br>[-0.06, 0.07]
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>-0.09<br>[-0.15, -0.02]</strong>
</td>
<td style="text-align:center;">
<strong>0.30<br>[0.18, 0.42]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
EAS
</td>
<td style="text-align:center;">
0.03<br>[-0.02, 0.09]
</td>
<td style="text-align:center;">
<strong>0.03<br>[0.02, 0.03]</strong>
</td>
<td style="text-align:center;">
-0.02<br>[-0.09, 0.05]
</td>
<td style="text-align:center;">
<strong>-0.07<br>[-0.12, -0.01]</strong>
</td>
<td style="text-align:center;">
<strong>0.19<br>[0.11, 0.27]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
GSOEP
</td>
<td style="text-align:center;">
<strong>0.06<br>[0.01, 0.12]</strong>
</td>
<td style="text-align:center;">
<strong>-0.04<br>[-0.04, -0.03]</strong>
</td>
<td style="text-align:center;">
0.00<br>[-0.07, 0.08]
</td>
<td style="text-align:center;">
-0.03<br>[-0.08, 0.02]
</td>
<td style="text-align:center;">
0.06<br>[-0.01, 0.13]
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
HILDA
</td>
<td style="text-align:center;">
0.01<br>[-0.01, 0.03]
</td>
<td style="text-align:center;">
<strong>0.04<br>[0.04, 0.04]</strong>
</td>
<td style="text-align:center;">
<strong>0.03<br>[0.01, 0.06]</strong>
</td>
<td style="text-align:center;">
<strong>-0.13<br>[-0.15, -0.11]</strong>
</td>
<td style="text-align:center;">
<strong>0.19<br>[0.17, 0.22]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
HRS
</td>
<td style="text-align:center;">
<strong>-0.03<br>[-0.05, -0.01]</strong>
</td>
<td style="text-align:center;">
<strong>0.04<br>[0.04, 0.04]</strong>
</td>
<td style="text-align:center;">
<strong>0.08<br>[0.06, 0.11]</strong>
</td>
<td style="text-align:center;">
<strong>-0.03<br>[-0.05, -0.01]</strong>
</td>
<td style="text-align:center;">
<strong>0.10<br>[0.08, 0.13]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
LASA
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>-0.05<br>[-0.09, -0.01]</strong>
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
MAP
</td>
<td style="text-align:center;">
0.02<br>[-0.03, 0.07]
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
0.04<br>[-0.03, 0.10]
</td>
<td style="text-align:center;">
-0.04<br>[-0.08, 0.01]
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
MARS
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>-0.08<br>[-0.14, -0.02]</strong>
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
OCTO-Twin
</td>
<td style="text-align:center;">
0.04<br>[-0.02, 0.09]
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>-0.07<br>[-0.13, -0.02]</strong>
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
ROS
</td>
<td style="text-align:center;">
-0.04<br>[-0.09, 0.01]
</td>
<td style="text-align:center;">
<strong>0.01<br>[0.01, 0.02]</strong>
</td>
<td style="text-align:center;">
0.06<br>[-0.00, 0.12]
</td>
<td style="text-align:center;">
-0.03<br>[-0.08, 0.02]
</td>
<td style="text-align:center;">
0.01<br>[-0.07, 0.08]
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
SATSA
</td>
<td style="text-align:center;">
0.03<br>[-0.03, 0.09]
</td>
<td style="text-align:center;">
<strong>-0.02<br>[-0.03, -0.02]</strong>
</td>
<td style="text-align:center;">
<strong>-0.08<br>[-0.16, -0.01]</strong>
</td>
<td style="text-align:center;">
-0.05<br>[-0.11, 0.00]
</td>
<td style="text-align:center;">
<strong>0.26<br>[0.14, 0.38]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Overall
</td>
<td style="text-align:center;">
0.01<br>[-0.02, 0.05]
</td>
<td style="text-align:center;">
0.01<br>[-0.02, 0.04]
</td>
<td style="text-align:center;">
0.02<br>[-0.04, 0.07]
</td>
<td style="text-align:center;">
<strong>-0.06<br>[-0.09, -0.03]</strong>
</td>
<td style="text-align:center;">
<strong>0.16<br>[0.07, 0.25]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;vertical-align: top !important;padding-left: 2em;" rowspan="12" indentlevel="1">
Fully Adjusted
</td>
<td style="text-align:right;">
BASE
</td>
<td style="text-align:center;">
0.00<br>[-0.06, 0.07]
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>-0.09<br>[-0.16, -0.02]</strong>
</td>
<td style="text-align:center;">
<strong>0.31<br>[0.18, 0.43]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
EAS
</td>
<td style="text-align:center;">
0.03<br>[-0.02, 0.09]
</td>
<td style="text-align:center;">
<strong>0.02<br>[0.01, 0.02]</strong>
</td>
<td style="text-align:center;">
-0.02<br>[-0.09, 0.05]
</td>
<td style="text-align:center;">
<strong>-0.07<br>[-0.12, -0.01]</strong>
</td>
<td style="text-align:center;">
<strong>0.19<br>[0.11, 0.27]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
GSOEP
</td>
<td style="text-align:center;">
<strong>0.06<br>[0.01, 0.12]</strong>
</td>
<td style="text-align:center;">
<strong>-0.04<br>[-0.04, -0.04]</strong>
</td>
<td style="text-align:center;">
0.000<br>[-0.08, 0.08]
</td>
<td style="text-align:center;">
-0.03<br>[-0.08, 0.02]
</td>
<td style="text-align:center;">
0.06<br>[-0.00, 0.13]
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
HILDA
</td>
<td style="text-align:center;">
0.01<br>[-0.02, 0.03]
</td>
<td style="text-align:center;">
<strong>0.03<br>[0.03, 0.03]</strong>
</td>
<td style="text-align:center;">
<strong>0.03<br>[0.00, 0.05]</strong>
</td>
<td style="text-align:center;">
<strong>-0.13<br>[-0.16, -0.11]</strong>
</td>
<td style="text-align:center;">
<strong>0.20<br>[0.17, 0.22]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
HRS
</td>
<td style="text-align:center;">
<strong>-0.03<br>[-0.05, -0.01]</strong>
</td>
<td style="text-align:center;">
<strong>0.03<br>[0.03, 0.03]</strong>
</td>
<td style="text-align:center;">
<strong>0.08<br>[0.06, 0.11]</strong>
</td>
<td style="text-align:center;">
<strong>-0.03<br>[-0.05, -0.01]</strong>
</td>
<td style="text-align:center;">
<strong>0.10<br>[0.08, 0.13]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
LASA
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>-0.05<br>[-0.09, -0.01]</strong>
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
MAP
</td>
<td style="text-align:center;">
0.02<br>[-0.02, 0.07]
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
0.04<br>[-0.03, 0.11]
</td>
<td style="text-align:center;">
-0.03<br>[-0.08, 0.01]
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
MARS
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>-0.08<br>[-0.14, -0.02]</strong>
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
OCTO-Twin
</td>
<td style="text-align:center;">
0.04<br>[-0.02, 0.09]
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>-0.07<br>[-0.13, -0.02]</strong>
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
ROS
</td>
<td style="text-align:center;">
-0.04<br>[-0.09, 0.01]
</td>
<td style="text-align:center;">
<strong>0.01<br>[0.00, 0.01]</strong>
</td>
<td style="text-align:center;">
0.06<br>[-0.000, 0.13]
</td>
<td style="text-align:center;">
-0.03<br>[-0.08, 0.02]
</td>
<td style="text-align:center;">
0.01<br>[-0.06, 0.09]
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
SATSA
</td>
<td style="text-align:center;">
0.03<br>[-0.03, 0.09]
</td>
<td style="text-align:center;">
<strong>-0.03<br>[-0.03, -0.02]</strong>
</td>
<td style="text-align:center;">
<strong>-0.09<br>[-0.16, -0.01]</strong>
</td>
<td style="text-align:center;">
-0.05<br>[-0.11, 0.00]
</td>
<td style="text-align:center;">
<strong>0.26<br>[0.14, 0.38]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Overall
</td>
<td style="text-align:center;">
0.01<br>[-0.02, 0.05]
</td>
<td style="text-align:center;">
0.00<br>[-0.03, 0.03]
</td>
<td style="text-align:center;">
0.01<br>[-0.04, 0.07]
</td>
<td style="text-align:center;">
<strong>-0.06<br>[-0.09, -0.03]</strong>
</td>
<td style="text-align:center;">
<strong>0.16<br>[0.07, 0.25]</strong>
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb330"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb330-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb330-1" tabindex="-1"></a><span class="do">## bayesian</span></span>
<span id="cb330-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb330-2" tabindex="-1"></a>(ipd2b_rx_tab <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Moderator <span class="sc">==</span> <span class="st">&quot;None&quot;</span> <span class="sc">&amp;</span> type <span class="sc">==</span> <span class="st">&quot;Bayesian&quot;</span>))<span class="sc">$</span>tab[[<span class="dv">1</span>]]</span></code></pre></div>
<table class=" lightable-classic" style="color: black; font-family: Times New Roman; width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
(#tab:ipd2b study specific table)Overall Effects of Personality-Crystallized Domain Associations
</caption>
<thead>
<tr>
<th style="empty-cells: hide;" colspan="2">
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>E</strong>
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>A</strong>
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>C</strong>
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>N</strong>
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>O</strong>
</div>
</th>
</tr>
<tr>
<th style="text-align:right;">
Covariate
</th>
<th style="text-align:right;">
Study
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
</tr>
</thead>
<tbody>
<tr grouplength="60">
<td colspan="7" style="border-bottom: 0;">
<strong>Crystallized Ability</strong>
</td>
</tr>
<tr>
<td style="text-align:right;vertical-align: top !important;padding-left: 2em;" rowspan="12" indentlevel="1">
Unadjusted
</td>
<td style="text-align:right;">
BASE
</td>
<td style="text-align:center;">
0.05<br>[-0.04, 0.16]
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>-0.14<br>[-0.23, -0.06]</strong>
</td>
<td style="text-align:center;">
<strong>0.39<br>[0.26, 0.53]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
EAS
</td>
<td style="text-align:center;">
<strong>0.10<br>[0.04, 0.16]</strong>
</td>
<td style="text-align:center;">
0.02<br>[-0.03, 0.07]
</td>
<td style="text-align:center;">
0.02<br>[-0.03, 0.07]
</td>
<td style="text-align:center;">
<strong>-0.13<br>[-0.17, -0.08]</strong>
</td>
<td style="text-align:center;">
<strong>0.37<br>[0.32, 0.42]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
GSOEP
</td>
<td style="text-align:center;">
<strong>0.07<br>[0.03, 0.12]</strong>
</td>
<td style="text-align:center;">
-0.02<br>[-0.07, 0.04]
</td>
<td style="text-align:center;">
-0.02<br>[-0.08, 0.03]
</td>
<td style="text-align:center;">
<strong>-0.08<br>[-0.12, -0.03]</strong>
</td>
<td style="text-align:center;">
<strong>0.10<br>[0.06, 0.15]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
HILDA
</td>
<td style="text-align:center;">
0.01<br>[-0.01, 0.04]
</td>
<td style="text-align:center;">
<strong>0.04<br>[0.01, 0.08]</strong>
</td>
<td style="text-align:center;">
<strong>0.07<br>[0.04, 0.09]</strong>
</td>
<td style="text-align:center;">
<strong>-0.15<br>[-0.17, -0.12]</strong>
</td>
<td style="text-align:center;">
<strong>0.27<br>[0.25, 0.30]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
HRS
</td>
<td style="text-align:center;">
0.001<br>[-0.02, 0.03]
</td>
<td style="text-align:center;">
<strong>0.06<br>[0.03, 0.09]</strong>
</td>
<td style="text-align:center;">
<strong>0.16<br>[0.13, 0.19]</strong>
</td>
<td style="text-align:center;">
<strong>-0.08<br>[-0.10, -0.06]</strong>
</td>
<td style="text-align:center;">
<strong>0.22<br>[0.19, 0.24]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
LASA
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>-0.13<br>[-0.17, -0.09]</strong>
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
MAP
</td>
<td style="text-align:center;">
0.04<br>[-0.01, 0.09]
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>0.10<br>[0.02, 0.17]</strong>
</td>
<td style="text-align:center;">
<strong>-0.15<br>[-0.20, -0.09]</strong>
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
MARS
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>-0.19<br>[-0.29, -0.11]</strong>
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
OCTO-Twin
</td>
<td style="text-align:center;">
0.05<br>[-0.02, 0.11]
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>-0.10<br>[-0.17, -0.03]</strong>
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
ROS
</td>
<td style="text-align:center;">
0.02<br>[-0.05, 0.07]
</td>
<td style="text-align:center;">
<strong>0.10<br>[0.02, 0.18]</strong>
</td>
<td style="text-align:center;">
<strong>0.12<br>[0.05, 0.20]</strong>
</td>
<td style="text-align:center;">
<strong>-0.10<br>[-0.15, -0.04]</strong>
</td>
<td style="text-align:center;">
<strong>0.19<br>[0.12, 0.27]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
SATSA
</td>
<td style="text-align:center;">
0.04<br>[-0.02, 0.12]
</td>
<td style="text-align:center;">
<strong>-0.17<br>[-0.30, -0.04]</strong>
</td>
<td style="text-align:center;">
<strong>-0.13<br>[-0.22, -0.03]</strong>
</td>
<td style="text-align:center;">
<strong>-0.11<br>[-0.17, -0.04]</strong>
</td>
<td style="text-align:center;">
<strong>0.38<br>[0.26, 0.52]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Overall
</td>
<td style="text-align:center;">
<strong>0.04<br>[0.00, 0.09]</strong>
</td>
<td style="text-align:center;">
0.00<br>[-0.13, 0.12]
</td>
<td style="text-align:center;">
0.04<br>[-0.07, 0.15]
</td>
<td style="text-align:center;">
<strong>-0.12<br>[-0.16, -0.09]</strong>
</td>
<td style="text-align:center;">
<strong>0.28<br>[0.16, 0.40]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;vertical-align: top !important;padding-left: 2em;" rowspan="12" indentlevel="1">
Age
</td>
<td style="text-align:right;">
BASE
</td>
<td style="text-align:center;">
0.03<br>[-0.03, 0.12]
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>-0.14<br>[-0.24, -0.06]</strong>
</td>
<td style="text-align:center;">
<strong>0.39<br>[0.26, 0.53]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
EAS
</td>
<td style="text-align:center;">
<strong>0.05<br>[0.00, 0.14]</strong>
</td>
<td style="text-align:center;">
<strong>0.08<br>[0.00, 0.17]</strong>
</td>
<td style="text-align:center;">
0.01<br>[-0.07, 0.09]
</td>
<td style="text-align:center;">
<strong>-0.13<br>[-0.19, -0.06]</strong>
</td>
<td style="text-align:center;">
<strong>0.41<br>[0.32, 0.49]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
GSOEP
</td>
<td style="text-align:center;">
<strong>0.06<br>[0.02, 0.11]</strong>
</td>
<td style="text-align:center;">
-0.02<br>[-0.07, 0.04]
</td>
<td style="text-align:center;">
-0.02<br>[-0.07, 0.03]
</td>
<td style="text-align:center;">
<strong>-0.08<br>[-0.12, -0.03]</strong>
</td>
<td style="text-align:center;">
<strong>0.10<br>[0.06, 0.15]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
HILDA
</td>
<td style="text-align:center;">
0.01<br>[-0.01, 0.04]
</td>
<td style="text-align:center;">
<strong>0.04<br>[0.01, 0.07]</strong>
</td>
<td style="text-align:center;">
<strong>0.07<br>[0.04, 0.09]</strong>
</td>
<td style="text-align:center;">
<strong>-0.16<br>[-0.19, -0.14]</strong>
</td>
<td style="text-align:center;">
<strong>0.28<br>[0.25, 0.30]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
HRS
</td>
<td style="text-align:center;">
0.00<br>[-0.02, 0.03]
</td>
<td style="text-align:center;">
<strong>0.06<br>[0.03, 0.09]</strong>
</td>
<td style="text-align:center;">
<strong>0.16<br>[0.13, 0.19]</strong>
</td>
<td style="text-align:center;">
<strong>-0.08<br>[-0.10, -0.06]</strong>
</td>
<td style="text-align:center;">
<strong>0.22<br>[0.19, 0.24]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
LASA
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>-0.12<br>[-0.16, -0.08]</strong>
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
MAP
</td>
<td style="text-align:center;">
0.04<br>[-0.01, 0.09]
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>0.10<br>[0.02, 0.17]</strong>
</td>
<td style="text-align:center;">
<strong>-0.15<br>[-0.20, -0.09]</strong>
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
MARS
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>-0.19<br>[-0.29, -0.11]</strong>
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
OCTO-Twin
</td>
<td style="text-align:center;">
0.03<br>[-0.02, 0.10]
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>-0.10<br>[-0.17, -0.03]</strong>
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
ROS
</td>
<td style="text-align:center;">
0.02<br>[-0.04, 0.07]
</td>
<td style="text-align:center;">
<strong>0.10<br>[0.03, 0.18]</strong>
</td>
<td style="text-align:center;">
<strong>0.12<br>[0.05, 0.20]</strong>
</td>
<td style="text-align:center;">
<strong>-0.10<br>[-0.15, -0.04]</strong>
</td>
<td style="text-align:center;">
<strong>0.20<br>[0.12, 0.27]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
SATSA
</td>
<td style="text-align:center;">
0.04<br>[-0.01, 0.10]
</td>
<td style="text-align:center;">
<strong>-0.18<br>[-0.30, -0.05]</strong>
</td>
<td style="text-align:center;">
<strong>-0.13<br>[-0.23, -0.03]</strong>
</td>
<td style="text-align:center;">
<strong>-0.11<br>[-0.17, -0.04]</strong>
</td>
<td style="text-align:center;">
<strong>0.40<br>[0.26, 0.54]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Overall
</td>
<td style="text-align:center;">
<strong>0.03<br>[0.00, 0.07]</strong>
</td>
<td style="text-align:center;">
0.01<br>[-0.11, 0.14]
</td>
<td style="text-align:center;">
0.04<br>[-0.07, 0.16]
</td>
<td style="text-align:center;">
<strong>-0.12<br>[-0.16, -0.08]</strong>
</td>
<td style="text-align:center;">
<strong>0.29<br>[0.17, 0.42]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;vertical-align: top !important;padding-left: 2em;" rowspan="12" indentlevel="1">
Gender
</td>
<td style="text-align:right;">
BASE
</td>
<td style="text-align:center;">
0.03<br>[-0.03, 0.12]
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>-0.14<br>[-0.24, -0.06]</strong>
</td>
<td style="text-align:center;">
<strong>0.39<br>[0.26, 0.53]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
EAS
</td>
<td style="text-align:center;">
<strong>0.05<br>[0.01, 0.14]</strong>
</td>
<td style="text-align:center;">
<strong>0.08<br>[0.01, 0.16]</strong>
</td>
<td style="text-align:center;">
0.01<br>[-0.07, 0.09]
</td>
<td style="text-align:center;">
<strong>-0.13<br>[-0.19, -0.06]</strong>
</td>
<td style="text-align:center;">
<strong>0.41<br>[0.32, 0.49]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
GSOEP
</td>
<td style="text-align:center;">
<strong>0.06<br>[0.02, 0.11]</strong>
</td>
<td style="text-align:center;">
-0.02<br>[-0.07, 0.03]
</td>
<td style="text-align:center;">
-0.02<br>[-0.07, 0.03]
</td>
<td style="text-align:center;">
<strong>-0.08<br>[-0.12, -0.03]</strong>
</td>
<td style="text-align:center;">
<strong>0.10<br>[0.06, 0.15]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
HILDA
</td>
<td style="text-align:center;">
0.01<br>[-0.01, 0.04]
</td>
<td style="text-align:center;">
<strong>0.05<br>[0.02, 0.08]</strong>
</td>
<td style="text-align:center;">
<strong>0.07<br>[0.04, 0.09]</strong>
</td>
<td style="text-align:center;">
<strong>-0.15<br>[-0.17, -0.12]</strong>
</td>
<td style="text-align:center;">
<strong>0.27<br>[0.25, 0.30]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
HRS
</td>
<td style="text-align:center;">
0.00<br>[-0.02, 0.03]
</td>
<td style="text-align:center;">
<strong>0.06<br>[0.03, 0.09]</strong>
</td>
<td style="text-align:center;">
<strong>0.16<br>[0.13, 0.19]</strong>
</td>
<td style="text-align:center;">
<strong>-0.08<br>[-0.10, -0.06]</strong>
</td>
<td style="text-align:center;">
<strong>0.22<br>[0.19, 0.24]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
LASA
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>-0.13<br>[-0.17, -0.09]</strong>
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
MAP
</td>
<td style="text-align:center;">
0.04<br>[-0.01, 0.09]
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>0.10<br>[0.02, 0.17]</strong>
</td>
<td style="text-align:center;">
<strong>-0.15<br>[-0.20, -0.09]</strong>
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
MARS
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>-0.19<br>[-0.29, -0.11]</strong>
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
OCTO-Twin
</td>
<td style="text-align:center;">
0.03<br>[-0.02, 0.10]
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>-0.10<br>[-0.17, -0.03]</strong>
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
ROS
</td>
<td style="text-align:center;">
0.02<br>[-0.03, 0.07]
</td>
<td style="text-align:center;">
<strong>0.10<br>[0.03, 0.18]</strong>
</td>
<td style="text-align:center;">
<strong>0.12<br>[0.05, 0.20]</strong>
</td>
<td style="text-align:center;">
<strong>-0.10<br>[-0.16, -0.04]</strong>
</td>
<td style="text-align:center;">
<strong>0.19<br>[0.12, 0.27]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
SATSA
</td>
<td style="text-align:center;">
0.04<br>[-0.01, 0.10]
</td>
<td style="text-align:center;">
<strong>-0.18<br>[-0.29, -0.06]</strong>
</td>
<td style="text-align:center;">
<strong>-0.13<br>[-0.23, -0.03]</strong>
</td>
<td style="text-align:center;">
<strong>-0.11<br>[-0.17, -0.04]</strong>
</td>
<td style="text-align:center;">
<strong>0.39<br>[0.26, 0.53]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Overall
</td>
<td style="text-align:center;">
0.03<br>[-0.001, 0.07]
</td>
<td style="text-align:center;">
0.01<br>[-0.12, 0.14]
</td>
<td style="text-align:center;">
0.04<br>[-0.07, 0.15]
</td>
<td style="text-align:center;">
<strong>-0.12<br>[-0.17, -0.08]</strong>
</td>
<td style="text-align:center;">
<strong>0.28<br>[0.15, 0.43]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;vertical-align: top !important;padding-left: 2em;" rowspan="12" indentlevel="1">
Education
</td>
<td style="text-align:right;">
BASE
</td>
<td style="text-align:center;">
0.01<br>[-0.08, 0.10]
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>-0.09<br>[-0.17, -0.02]</strong>
</td>
<td style="text-align:center;">
<strong>0.30<br>[0.17, 0.44]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
EAS
</td>
<td style="text-align:center;">
0.04<br>[-0.03, 0.11]
</td>
<td style="text-align:center;">
0.04<br>[-0.02, 0.10]
</td>
<td style="text-align:center;">
-0.02<br>[-0.10, 0.05]
</td>
<td style="text-align:center;">
<strong>-0.06<br>[-0.12, -0.00]</strong>
</td>
<td style="text-align:center;">
<strong>0.18<br>[0.11, 0.26]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
GSOEP
</td>
<td style="text-align:center;">
0.06<br>[-0.00, 0.14]
</td>
<td style="text-align:center;">
0.01<br>[-0.06, 0.09]
</td>
<td style="text-align:center;">
0.01<br>[-0.07, 0.09]
</td>
<td style="text-align:center;">
-0.03<br>[-0.09, 0.03]
</td>
<td style="text-align:center;">
0.07<br>[-0.00, 0.14]
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
HILDA
</td>
<td style="text-align:center;">
0.01<br>[-0.01, 0.03]
</td>
<td style="text-align:center;">
<strong>0.04<br>[0.01, 0.06]</strong>
</td>
<td style="text-align:center;">
<strong>0.03<br>[0.01, 0.06]</strong>
</td>
<td style="text-align:center;">
<strong>-0.13<br>[-0.15, -0.11]</strong>
</td>
<td style="text-align:center;">
<strong>0.19<br>[0.17, 0.22]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
HRS
</td>
<td style="text-align:center;">
<strong>-0.03<br>[-0.05, -0.01]</strong>
</td>
<td style="text-align:center;">
<strong>0.04<br>[0.01, 0.06]</strong>
</td>
<td style="text-align:center;">
<strong>0.08<br>[0.06, 0.11]</strong>
</td>
<td style="text-align:center;">
<strong>-0.03<br>[-0.05, -0.00]</strong>
</td>
<td style="text-align:center;">
<strong>0.10<br>[0.08, 0.12]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
LASA
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>-0.05<br>[-0.09, -0.01]</strong>
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
MAP
</td>
<td style="text-align:center;">
0.02<br>[-0.03, 0.07]
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
0.05<br>[-0.02, 0.12]
</td>
<td style="text-align:center;">
-0.04<br>[-0.09, 0.02]
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
MARS
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>-0.09<br>[-0.17, -0.02]</strong>
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
OCTO-Twin
</td>
<td style="text-align:center;">
0.04<br>[-0.02, 0.11]
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>-0.07<br>[-0.13, -0.01]</strong>
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
ROS
</td>
<td style="text-align:center;">
-0.04<br>[-0.10, 0.01]
</td>
<td style="text-align:center;">
0.02<br>[-0.03, 0.08]
</td>
<td style="text-align:center;">
0.06<br>[-0.00, 0.13]
</td>
<td style="text-align:center;">
-0.03<br>[-0.08, 0.03]
</td>
<td style="text-align:center;">
0.01<br>[-0.07, 0.08]
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
SATSA
</td>
<td style="text-align:center;">
0.03<br>[-0.04, 0.09]
</td>
<td style="text-align:center;">
-0.08<br>[-0.22, 0.03]
</td>
<td style="text-align:center;">
-0.08<br>[-0.19, 0.01]
</td>
<td style="text-align:center;">
-0.05<br>[-0.12, 0.01]
</td>
<td style="text-align:center;">
<strong>0.27<br>[0.14, 0.41]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Overall
</td>
<td style="text-align:center;">
0.01<br>[-0.03, 0.06]
</td>
<td style="text-align:center;">
0.01<br>[-0.06, 0.08]
</td>
<td style="text-align:center;">
0.02<br>[-0.06, 0.09]
</td>
<td style="text-align:center;">
<strong>-0.06<br>[-0.10, -0.02]</strong>
</td>
<td style="text-align:center;">
<strong>0.16<br>[0.02, 0.29]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;vertical-align: top !important;padding-left: 2em;" rowspan="12" indentlevel="1">
Fully Adjusted
</td>
<td style="text-align:right;">
BASE
</td>
<td style="text-align:center;">
0.00<br>[-0.08, 0.09]
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>-0.09<br>[-0.18, -0.01]</strong>
</td>
<td style="text-align:center;">
<strong>0.30<br>[0.17, 0.44]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
EAS
</td>
<td style="text-align:center;">
0.04<br>[-0.03, 0.11]
</td>
<td style="text-align:center;">
0.03<br>[-0.03, 0.10]
</td>
<td style="text-align:center;">
-0.02<br>[-0.10, 0.05]
</td>
<td style="text-align:center;">
<strong>-0.07<br>[-0.13, -0.01]</strong>
</td>
<td style="text-align:center;">
<strong>0.19<br>[0.11, 0.26]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
GSOEP
</td>
<td style="text-align:center;">
0.06<br>[-0.00, 0.13]
</td>
<td style="text-align:center;">
0.01<br>[-0.07, 0.09]
</td>
<td style="text-align:center;">
0.01<br>[-0.07, 0.09]
</td>
<td style="text-align:center;">
-0.03<br>[-0.09, 0.03]
</td>
<td style="text-align:center;">
0.07<br>[-0.00, 0.14]
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
HILDA
</td>
<td style="text-align:center;">
0.01<br>[-0.02, 0.03]
</td>
<td style="text-align:center;">
0.03<br>[-0.001, 0.05]
</td>
<td style="text-align:center;">
<strong>0.03<br>[0.00, 0.05]</strong>
</td>
<td style="text-align:center;">
<strong>-0.13<br>[-0.16, -0.11]</strong>
</td>
<td style="text-align:center;">
<strong>0.20<br>[0.17, 0.22]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
HRS
</td>
<td style="text-align:center;">
<strong>-0.03<br>[-0.06, -0.01]</strong>
</td>
<td style="text-align:center;">
<strong>0.03<br>[0.00, 0.05]</strong>
</td>
<td style="text-align:center;">
<strong>0.08<br>[0.05, 0.11]</strong>
</td>
<td style="text-align:center;">
<strong>-0.03<br>[-0.05, -0.01]</strong>
</td>
<td style="text-align:center;">
<strong>0.10<br>[0.08, 0.13]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
LASA
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>-0.05<br>[-0.09, -0.01]</strong>
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
MAP
</td>
<td style="text-align:center;">
0.02<br>[-0.03, 0.07]
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
0.05<br>[-0.02, 0.12]
</td>
<td style="text-align:center;">
-0.03<br>[-0.09, 0.02]
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
MARS
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>-0.09<br>[-0.16, -0.02]</strong>
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
OCTO-Twin
</td>
<td style="text-align:center;">
0.04<br>[-0.02, 0.11]
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>-0.07<br>[-0.14, -0.02]</strong>
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
ROS
</td>
<td style="text-align:center;">
-0.04<br>[-0.10, 0.01]
</td>
<td style="text-align:center;">
0.02<br>[-0.03, 0.09]
</td>
<td style="text-align:center;">
0.06<br>[-0.001, 0.13]
</td>
<td style="text-align:center;">
-0.03<br>[-0.08, 0.03]
</td>
<td style="text-align:center;">
0.01<br>[-0.06, 0.09]
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
SATSA
</td>
<td style="text-align:center;">
0.03<br>[-0.04, 0.10]
</td>
<td style="text-align:center;">
-0.10<br>[-0.23, 0.02]
</td>
<td style="text-align:center;">
-0.09<br>[-0.19, 0.01]
</td>
<td style="text-align:center;">
-0.06<br>[-0.12, 0.01]
</td>
<td style="text-align:center;">
<strong>0.27<br>[0.14, 0.41]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Overall
</td>
<td style="text-align:center;">
0.01<br>[-0.03, 0.06]
</td>
<td style="text-align:center;">
0.00<br>[-0.07, 0.07]
</td>
<td style="text-align:center;">
0.02<br>[-0.07, 0.09]
</td>
<td style="text-align:center;">
<strong>-0.06<br>[-0.10, -0.03]</strong>
</td>
<td style="text-align:center;">
<strong>0.16<br>[0.04, 0.29]</strong>
</td>
</tr>
</tbody>
</table>
</div>
<div id="heterogeneity-estimates-3" class="section level6 hasAnchor" number="4.2.2.7.1.3">
<h6><span class="header-section-number">4.2.2.7.1.3</span> Heterogeneity Estimates<a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#heterogeneity-estimates-3" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb331-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb331-1" tabindex="-1"></a>loadRData <span class="ot">&lt;-</span> <span class="cf">function</span>(fileName, type, obj, folder){</span>
<span id="cb331-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb331-2" tabindex="-1"></a><span class="co">#loads an RData file, and returns it</span></span>
<span id="cb331-3"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb331-3" tabindex="-1"></a>    path <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/2b_ipd_mlm/%s/%s/%s&quot;</span>, local_path, type, folder, fileName)</span>
<span id="cb331-4"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb331-4" tabindex="-1"></a>    <span class="fu">load</span>(path)</span>
<span id="cb331-5"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb331-5" tabindex="-1"></a>    <span class="fu">get</span>(<span class="fu">ls</span>()[<span class="fu">grepl</span>(obj, <span class="fu">ls</span>())])</span>
<span id="cb331-6"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb331-6" tabindex="-1"></a>}</span>
<span id="cb331-7"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb331-7" tabindex="-1"></a></span>
<span id="cb331-8"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb331-8" tabindex="-1"></a><span class="do">## load in &quot;fixed&quot; effects</span></span>
<span id="cb331-9"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb331-9" tabindex="-1"></a><span class="do">## first get file names</span></span>
<span id="cb331-10"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb331-10" tabindex="-1"></a>nested_ipd2b_het <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">type =</span> <span class="fu">c</span>(<span class="st">&quot;Frequentist&quot;</span>, <span class="st">&quot;Bayesian&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb331-11"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb331-11" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">file =</span> <span class="fu">map</span>(type, <span class="sc">~</span><span class="fu">list.files</span>(<span class="fu">sprintf</span>(<span class="st">&quot;%s/results/2b_ipd_mlm/%s/heterogeneity&quot;</span>, local_path, .)))) <span class="sc">%&gt;%</span></span>
<span id="cb331-12"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb331-12" tabindex="-1"></a>  <span class="fu">unnest</span>(file) <span class="sc">%&gt;%</span></span>
<span id="cb331-13"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb331-13" tabindex="-1"></a>  <span class="fu">separate</span>(file, <span class="fu">c</span>(<span class="st">&quot;Outcome&quot;</span>, <span class="st">&quot;Trait&quot;</span>, <span class="st">&quot;Moderator&quot;</span>, <span class="st">&quot;Covariate&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>, <span class="at">remove =</span> F) <span class="sc">%&gt;%</span> </span>
<span id="cb331-14"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb331-14" tabindex="-1"></a>  <span class="do">## read in the files</span></span>
<span id="cb331-15"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb331-15" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Covariate =</span> <span class="fu">str_remove</span>(Covariate, <span class="st">&quot;.RData&quot;</span>),</span>
<span id="cb331-16"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb331-16" tabindex="-1"></a>         <span class="at">het =</span> <span class="fu">map2</span>(file, type, <span class="sc">~</span><span class="fu">loadRData</span>(.x, .y, <span class="st">&quot;het&quot;</span>, <span class="st">&quot;heterogeneity&quot;</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb331-17"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb331-17" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>file) </span></code></pre></div>
<div class="sourceCode" id="cb332"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb332-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb332-1" tabindex="-1"></a>ip2b_hetero_tab_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(d, type, out, mod, cov){</span>
<span id="cb332-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb332-2" tabindex="-1"></a>  moder <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(mod, moders<span class="sc">$</span>short_name, moders<span class="sc">$</span>long_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb332-3"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb332-3" tabindex="-1"></a>  d2 <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span></span>
<span id="cb332-4"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb332-4" tabindex="-1"></a>    <span class="fu">separate</span>(term, <span class="fu">c</span>(<span class="st">&quot;V1&quot;</span>, <span class="st">&quot;V2&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;[.]&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb332-5"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb332-5" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">V2 =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(V2), V1, V2)</span>
<span id="cb332-6"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb332-6" tabindex="-1"></a>           , <span class="at">est =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%.2f [%.2f, %.2f]&quot;</span>, estimate, conf.low, conf.high)) <span class="sc">%&gt;%</span></span>
<span id="cb332-7"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb332-7" tabindex="-1"></a>    <span class="fu">mutate_at</span>(<span class="fu">vars</span>(V1, V2), <span class="sc">~</span><span class="fu">mapvalues</span>(., moders<span class="sc">$</span>short_term, moders<span class="sc">$</span>long_term)) <span class="sc">%&gt;%</span></span>
<span id="cb332-8"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb332-8" tabindex="-1"></a>    <span class="fu">mutate_at</span>(<span class="fu">vars</span>(V1, V2), <span class="sc">~</span><span class="fu">str_replace_all</span>(., <span class="st">&quot;p_value&quot;</span>, <span class="st">&quot;Personality&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb332-9"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb332-9" tabindex="-1"></a>    <span class="fu">mutate_at</span>(<span class="fu">vars</span>(V1, V2), <span class="sc">~</span><span class="fu">str_replace_all</span>(., <span class="st">&quot;:&quot;</span>, <span class="st">&quot; : &quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb332-10"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb332-10" tabindex="-1"></a>    <span class="fu">mutate_at</span>(<span class="fu">vars</span>(V1, V2), str_to_title) <span class="sc">%&gt;%</span></span>
<span id="cb332-11"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb332-11" tabindex="-1"></a>    <span class="fu">mutate_at</span>(<span class="fu">vars</span>(V1, V2), <span class="sc">~</span><span class="fu">str_replace_all</span>(., <span class="st">&quot;:&quot;</span>, <span class="st">&quot;x&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb332-12"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb332-12" tabindex="-1"></a>    <span class="fu">mutate_at</span>(<span class="fu">vars</span>(V1, V2), <span class="sc">~</span><span class="fu">str_remove_all</span>(., <span class="st">&quot;[()]&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb332-13"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb332-13" tabindex="-1"></a>    <span class="fu">mutate_at</span>(<span class="fu">vars</span>(V1, V2), <span class="sc">~</span><span class="fu">ifelse</span>(. <span class="sc">==</span> <span class="st">&quot;Observation&quot;</span>, <span class="st">&quot;Sigma&quot;</span>, .)) <span class="sc">%&gt;%</span></span>
<span id="cb332-14"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb332-14" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>group, <span class="sc">-</span>estimate, <span class="sc">-</span>conf.low, <span class="sc">-</span>conf.high) <span class="sc">%&gt;%</span></span>
<span id="cb332-15"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb332-15" tabindex="-1"></a>    <span class="co"># unite(V1, Trait, V1, sep = &quot;_&quot;, remove = T) %&gt;%</span></span>
<span id="cb332-16"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb332-16" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">&quot;V1&quot;</span>, <span class="at">values_from =</span> <span class="st">&quot;est&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb332-17"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb332-17" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="st">&quot; &quot;</span> <span class="ot">=</span> V2) <span class="sc">%&gt;%</span></span>
<span id="cb332-18"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb332-18" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Trait =</span> <span class="fu">factor</span>(Trait, traits<span class="sc">$</span>short_name, traits<span class="sc">$</span>long_name))</span>
<span id="cb332-19"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb332-19" tabindex="-1"></a>  </span>
<span id="cb332-20"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb332-20" tabindex="-1"></a>  rs <span class="ot">&lt;-</span> d2 <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Trait) <span class="sc">%&gt;%</span> <span class="fu">tally</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb332-21"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb332-21" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">end =</span> <span class="fu">cumsum</span>(n), <span class="at">start =</span> <span class="fu">lag</span>(end) <span class="sc">+</span> <span class="dv">1</span>, <span class="at">start =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(start), <span class="dv">1</span>, start))</span>
<span id="cb332-22"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb332-22" tabindex="-1"></a>  </span>
<span id="cb332-23"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb332-23" tabindex="-1"></a>  cap <span class="ot">&lt;-</span> <span class="cf">if</span>(mod <span class="sc">==</span> <span class="st">&quot;none&quot;</span>) <span class="st">&quot;Heterogeneity, Variance, and Correlations Among Random Effects for Overall Effects of Personality-Crystallized Domain Associations&quot;</span> <span class="cf">else</span> <span class="fu">sprintf</span>(<span class="st">&quot;Heterogeneity, Variance, and Correlations Among Random Effects for Overall %s Moderation of Personality-Crystallized Domain Associations&quot;</span>, moder)</span>
<span id="cb332-24"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb332-24" tabindex="-1"></a>  cap <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">&quot;&lt;strong&gt;Table SX&lt;/strong&gt;&lt;br&gt;&lt;em&gt;%s&lt;/em&gt;&quot;</span>, cap)</span>
<span id="cb332-25"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb332-25" tabindex="-1"></a>  </span>
<span id="cb332-26"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb332-26" tabindex="-1"></a>  tab <span class="ot">&lt;-</span> d2 <span class="sc">%&gt;%</span></span>
<span id="cb332-27"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb332-27" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>Trait) <span class="sc">%&gt;%</span></span>
<span id="cb332-28"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb332-28" tabindex="-1"></a>    <span class="fu">kable</span>(.</span>
<span id="cb332-29"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb332-29" tabindex="-1"></a>          , <span class="st">&quot;html&quot;</span></span>
<span id="cb332-30"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb332-30" tabindex="-1"></a>          , <span class="at">align =</span> <span class="fu">c</span>(<span class="st">&quot;r&quot;</span>, <span class="fu">rep</span>(<span class="st">&quot;c&quot;</span>, <span class="fu">ncol</span>(d2)<span class="sc">-</span><span class="dv">2</span>))</span>
<span id="cb332-31"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb332-31" tabindex="-1"></a>          , <span class="at">caption =</span> cap</span>
<span id="cb332-32"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb332-32" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb332-33"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb332-33" tabindex="-1"></a>    <span class="fu">kable_classic</span>(<span class="at">full_width =</span> F, <span class="at">html_font =</span> <span class="st">&quot;Times New Roman&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb332-34"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb332-34" tabindex="-1"></a>    <span class="fu">footnote</span>(<span class="st">&quot;Diagnonal elements represent variances, while off diagnal elements represent correlations. Interval estimates are 95% bootstrapped CI&#39;s.&quot;</span>)</span>
<span id="cb332-35"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb332-35" tabindex="-1"></a>  </span>
<span id="cb332-36"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb332-36" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(rs)) {</span>
<span id="cb332-37"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb332-37" tabindex="-1"></a>    tab <span class="ot">&lt;-</span> tab <span class="sc">%&gt;%</span></span>
<span id="cb332-38"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb332-38" tabindex="-1"></a>      kableExtra<span class="sc">::</span><span class="fu">group_rows</span>(rs<span class="sc">$</span>Trait[i], rs<span class="sc">$</span>start[i], rs<span class="sc">$</span>end[i])</span>
<span id="cb332-39"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb332-39" tabindex="-1"></a>  }</span>
<span id="cb332-40"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb332-40" tabindex="-1"></a>  <span class="fu">save_kable</span>(tab, <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/2b_ipd_mlm/%s/tables/heterogeneity/%s-%s-%s.html&quot;</span>, local_path, type, out, mod, cov))</span>
<span id="cb332-41"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb332-41" tabindex="-1"></a>  <span class="fu">return</span>(tab)</span>
<span id="cb332-42"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb332-42" tabindex="-1"></a>}</span>
<span id="cb332-43"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb332-43" tabindex="-1"></a></span>
<span id="cb332-44"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb332-44" tabindex="-1"></a>nested_ipd2b_het_tab <span class="ot">&lt;-</span> nested_ipd2b_het <span class="sc">%&gt;%</span></span>
<span id="cb332-45"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb332-45" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>Moderator <span class="sc">%in%</span> stdyModers<span class="sc">$</span>short_name) <span class="sc">%&gt;%</span></span>
<span id="cb332-46"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb332-46" tabindex="-1"></a>  <span class="fu">unnest</span>(het) <span class="sc">%&gt;%</span></span>
<span id="cb332-47"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb332-47" tabindex="-1"></a>  <span class="fu">group_by</span>(type, Outcome, Moderator, Covariate) <span class="sc">%&gt;%</span></span>
<span id="cb332-48"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb332-48" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span></span>
<span id="cb332-49"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb332-49" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb332-50"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb332-50" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">tab =</span> <span class="fu">pmap</span>(<span class="fu">list</span>(data, type, Outcome, Moderator, Covariate), ip2b_hetero_tab_fun))</span></code></pre></div>
</div>
<div id="all-model-terms-3" class="section level6 hasAnchor" number="4.2.2.7.1.4">
<h6><span class="header-section-number">4.2.2.7.1.4</span> All Model Terms<a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#all-model-terms-3" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<div class="sourceCode" id="cb333"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb333-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-1" tabindex="-1"></a>ipd2b_mod_tab <span class="ot">&lt;-</span> nested_ipd2b_reg <span class="sc">%&gt;%</span></span>
<span id="cb333-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>n, <span class="sc">-</span>rx) <span class="sc">%&gt;%</span></span>
<span id="cb333-3"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-3" tabindex="-1"></a>  <span class="fu">unnest</span>(fx) <span class="sc">%&gt;%</span></span>
<span id="cb333-4"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-4" tabindex="-1"></a>  <span class="co"># keep key terms </span></span>
<span id="cb333-5"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-5" tabindex="-1"></a>  <span class="co"># mark significance and prettify trait, outcome, and covariate names</span></span>
<span id="cb333-6"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-6" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sig =</span> <span class="fu">ifelse</span>(<span class="fu">sign</span>(conf.low) <span class="sc">==</span> <span class="fu">sign</span>(conf.high), <span class="st">&quot;sig&quot;</span>, <span class="st">&quot;ns&quot;</span>),</span>
<span id="cb333-7"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-7" tabindex="-1"></a>         <span class="at">Trait =</span> <span class="fu">factor</span>(Trait, traits<span class="sc">$</span>short_name),</span>
<span id="cb333-8"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-8" tabindex="-1"></a>         <span class="at">Outcome =</span> <span class="fu">factor</span>(Outcome, outcomes<span class="sc">$</span>short_name, outcomes<span class="sc">$</span>long_name),</span>
<span id="cb333-9"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-9" tabindex="-1"></a>         <span class="at">Moderator =</span> <span class="fu">factor</span>(Moderator, <span class="fu">c</span>(moders<span class="sc">$</span>short_name, stdyModers<span class="sc">$</span>short_name), <span class="fu">c</span>(moders<span class="sc">$</span>long_name, stdyModers<span class="sc">$</span>long_name)),</span>
<span id="cb333-10"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-10" tabindex="-1"></a>         <span class="at">Covariate =</span> <span class="fu">factor</span>(Covariate, covars<span class="sc">$</span>short_name, <span class="fu">str_wrap</span>(covars<span class="sc">$</span>long_name, <span class="dv">15</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb333-11"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-11" tabindex="-1"></a>  <span class="co"># format values as text, combine estimates and CI&#39;s, bold significance</span></span>
<span id="cb333-12"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-12" tabindex="-1"></a>  <span class="fu">mutate_at</span>(<span class="fu">vars</span>(estimate, conf.low, conf.high), </span>
<span id="cb333-13"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-13" tabindex="-1"></a>            <span class="sc">~</span><span class="fu">ifelse</span>(<span class="fu">abs</span>(.) <span class="sc">&lt;</span> .<span class="dv">01</span>, <span class="fu">sprintf</span>(<span class="st">&quot;%.3f&quot;</span>, .), <span class="fu">sprintf</span>(<span class="st">&quot;%.2f&quot;</span>, .))) <span class="sc">%&gt;%</span></span>
<span id="cb333-14"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-14" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">est =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s&lt;br&gt;[%s, %s]&quot;</span>, estimate, conf.low, conf.high),</span>
<span id="cb333-15"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-15" tabindex="-1"></a>         <span class="at">est =</span> <span class="fu">ifelse</span>(sig <span class="sc">==</span> <span class="st">&quot;sig&quot;</span>, <span class="fu">sprintf</span>(<span class="st">&quot;&lt;strong&gt;%s&lt;/strong&gt;&quot;</span>, est), est)) <span class="sc">%&gt;%</span></span>
<span id="cb333-16"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-16" tabindex="-1"></a>  <span class="co"># mutate(est = sprintf(&quot;%s [%s, %s]&quot;, estimate, conf.low, conf.high),</span></span>
<span id="cb333-17"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-17" tabindex="-1"></a>  <span class="co"># est = ifelse(sig == &quot;sig&quot;, sprintf(&quot;\\textbf{%s}&quot;, est), est)) %&gt;%</span></span>
<span id="cb333-18"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-18" tabindex="-1"></a>  <span class="co"># final reshaping, remove extra columns, arrange values, and change to wide format</span></span>
<span id="cb333-19"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-19" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>estimate, <span class="sc">-</span>conf.low, <span class="sc">-</span>conf.high, <span class="sc">-</span>sig) <span class="sc">%&gt;%</span></span>
<span id="cb333-20"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-20" tabindex="-1"></a>  <span class="fu">arrange</span>(type, Outcome, Trait, Moderator, Covariate) <span class="sc">%&gt;%</span></span>
<span id="cb333-21"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-21" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">&quot;Trait&quot;</span>, <span class="at">values_from =</span> <span class="st">&quot;est&quot;</span>) </span>
<span id="cb333-22"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-22" tabindex="-1"></a></span>
<span id="cb333-23"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-23" tabindex="-1"></a>ipd2b_mod_tab_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(d, type, out, moder, cov){</span>
<span id="cb333-24"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-24" tabindex="-1"></a>  md <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(moder, <span class="fu">c</span>(moders<span class="sc">$</span>long_name, stdyModers<span class="sc">$</span>long_name), <span class="fu">c</span>(moders<span class="sc">$</span>short_name, stdyModers<span class="sc">$</span>short_name), <span class="at">warn_missing =</span> F)</span>
<span id="cb333-25"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-25" tabindex="-1"></a>  o <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(out, outcomes<span class="sc">$</span>long_name, outcomes<span class="sc">$</span>short_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb333-26"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-26" tabindex="-1"></a>  cv <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(cov, covars<span class="sc">$</span>long_name, covars<span class="sc">$</span>short_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb333-27"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-27" tabindex="-1"></a>  cs <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">1</span>,<span class="dv">6</span>)</span>
<span id="cb333-28"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-28" tabindex="-1"></a>  <span class="fu">names</span>(cs) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot; &quot;</span>, <span class="fu">paste0</span>(<span class="st">&quot;&lt;strong&gt;&quot;</span>, traits<span class="sc">$</span>long_name, <span class="st">&quot;&lt;/strong&gt;&quot;</span>))</span>
<span id="cb333-29"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-29" tabindex="-1"></a>  <span class="co"># cln &lt;- if(length(unique(d$term2)) == 1) c(&quot;Covariate&quot;, rep(&quot;\\textit{b} [CI]&quot;, 5)) else c(&quot; &quot;, &quot;Term&quot;, rep(&quot;\\textit{b} [CI]&quot;, 5))</span></span>
<span id="cb333-30"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-30" tabindex="-1"></a>  cln <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Term&quot;</span>, <span class="fu">rep</span>(<span class="st">&quot;&lt;em&gt;b&lt;/em&gt; [CI]&quot;</span>, <span class="dv">5</span>))</span>
<span id="cb333-31"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-31" tabindex="-1"></a>  al <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;r&quot;</span>, <span class="fu">rep</span>(<span class="st">&quot;c&quot;</span>, <span class="dv">5</span>))</span>
<span id="cb333-32"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-32" tabindex="-1"></a>  <span class="co"># caption </span></span>
<span id="cb333-33"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-33" tabindex="-1"></a>  cap <span class="ot">&lt;-</span> <span class="cf">if</span>(md <span class="sc">==</span> <span class="st">&quot;none&quot;</span>) <span class="st">&quot;1B Pooled Analysis of Individual Participant Data with Cluster Corrected Standard Errors: All Model Estimates of Fixed Effect Personality-Crystallized Domain Associations&quot;</span> <span class="cf">else</span> <span class="fu">sprintf</span>(<span class="st">&quot;1B Pooled Analysis of Individual Participant Data with Cluster Corrected Standard Errors: All Model Estimates of Fixed Effect %s Moderation of Personality-Crystallized Domain Associations&quot;</span>, md)</span>
<span id="cb333-34"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-34" tabindex="-1"></a>  </span>
<span id="cb333-35"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-35" tabindex="-1"></a>  <span class="co"># kable the table</span></span>
<span id="cb333-36"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-36" tabindex="-1"></a>  tab <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span></span>
<span id="cb333-37"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-37" tabindex="-1"></a>    <span class="fu">arrange</span>(term) <span class="sc">%&gt;%</span></span>
<span id="cb333-38"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-38" tabindex="-1"></a>    <span class="fu">kable</span>(., <span class="st">&quot;html&quot;</span></span>
<span id="cb333-39"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-39" tabindex="-1"></a>    <span class="co"># kable(., &quot;latex&quot;</span></span>
<span id="cb333-40"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-40" tabindex="-1"></a>          , <span class="at">booktabs =</span> T</span>
<span id="cb333-41"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-41" tabindex="-1"></a>          , <span class="at">escape =</span> F</span>
<span id="cb333-42"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-42" tabindex="-1"></a>          , <span class="at">col.names =</span> cln</span>
<span id="cb333-43"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-43" tabindex="-1"></a>          , <span class="at">align =</span> al</span>
<span id="cb333-44"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-44" tabindex="-1"></a>          , <span class="at">caption =</span> cap</span>
<span id="cb333-45"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-45" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb333-46"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-46" tabindex="-1"></a>    <span class="fu">kable_classic</span>(<span class="at">full_width =</span> F, <span class="at">html_font =</span> <span class="st">&quot;Times New Roman&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb333-47"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-47" tabindex="-1"></a>    <span class="co"># kable_styling(full_width = F, font_size = 7) %&gt;%</span></span>
<span id="cb333-48"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-48" tabindex="-1"></a>    <span class="fu">add_header_above</span>(cs)</span>
<span id="cb333-49"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-49" tabindex="-1"></a>  <span class="co"># save the resulting html table</span></span>
<span id="cb333-50"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-50" tabindex="-1"></a>  <span class="fu">save_kable</span>(tab, <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/2b_ipd_mlm/%s/tables/all terms/%s-%s-%s.html&quot;</span></span>
<span id="cb333-51"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-51" tabindex="-1"></a>                                 , local_path, type, o, md, cv))</span>
<span id="cb333-52"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-52" tabindex="-1"></a>  <span class="fu">return</span>(tab) <span class="co"># return the html table</span></span>
<span id="cb333-53"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-53" tabindex="-1"></a>}</span>
<span id="cb333-54"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-54" tabindex="-1"></a></span>
<span id="cb333-55"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-55" tabindex="-1"></a>ipd2b_mod_tab <span class="ot">&lt;-</span> ipd2b_mod_tab <span class="sc">%&gt;%</span></span>
<span id="cb333-56"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-56" tabindex="-1"></a>  <span class="fu">group_by</span>(type, Outcome, Moderator, Covariate) <span class="sc">%&gt;%</span></span>
<span id="cb333-57"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-57" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span></span>
<span id="cb333-58"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-58" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb333-59"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb333-59" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">tab =</span> <span class="fu">pmap</span>(<span class="fu">list</span>(data, type, Outcome, Moderator, Covariate), ipd2b_mod_tab_fun))</span></code></pre></div>
</div>
</div>
<div id="figures-3" class="section level5 hasAnchor" number="4.2.2.7.2">
<h5><span class="header-section-number">4.2.2.7.2</span> Figures<a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#figures-3" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div id="overall-forest-3" class="section level6 hasAnchor" number="4.2.2.7.2.1">
<h6><span class="header-section-number">4.2.2.7.2.1</span> Overall Forest<a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#overall-forest-3" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<div class="sourceCode" id="cb334"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb334-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-1" tabindex="-1"></a>ipd2b_fx_plot_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(df, mod, type, cov){</span>
<span id="cb334-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-2" tabindex="-1"></a>  m <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(mod, moders<span class="sc">$</span>short_name, moders<span class="sc">$</span>long_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb334-3"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-3" tabindex="-1"></a>  cv <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(cov, covars<span class="sc">$</span>short_name, covars<span class="sc">$</span>long_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb334-4"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-4" tabindex="-1"></a>  d <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">max</span>(<span class="fu">abs</span>(<span class="fu">min</span>(df<span class="sc">$</span>estimate)), <span class="fu">abs</span>(<span class="fu">max</span>(df<span class="sc">$</span>estimate))), <span class="dv">3</span>)</span>
<span id="cb334-5"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-5" tabindex="-1"></a>  lim <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span><span class="sc">-</span>d<span class="sc">-</span>(d<span class="sc">/</span><span class="fl">2.5</span>), <span class="dv">0</span><span class="sc">+</span>d<span class="sc">+</span>(d<span class="sc">/</span><span class="fl">2.5</span>))</span>
<span id="cb334-6"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-6" tabindex="-1"></a>  brk <span class="ot">&lt;-</span> <span class="cf">if</span>(d <span class="sc">&gt;</span> .<span class="dv">01</span>) <span class="fu">round</span>(<span class="fu">c</span>(<span class="dv">0</span><span class="sc">-</span>d<span class="sc">-</span>(d<span class="sc">/</span><span class="dv">5</span>), <span class="dv">0</span>, <span class="dv">0</span><span class="sc">+</span>d<span class="sc">+</span>(d<span class="sc">/</span><span class="dv">5</span>)),<span class="dv">2</span>) <span class="cf">else</span> <span class="fu">round</span>(<span class="fu">c</span>(<span class="dv">0</span><span class="sc">-</span>d<span class="sc">-</span>(d<span class="sc">/</span><span class="dv">5</span>), <span class="dv">0</span>, <span class="dv">0</span><span class="sc">+</span>d<span class="sc">+</span>(d<span class="sc">/</span><span class="dv">5</span>)),<span class="dv">3</span>) </span>
<span id="cb334-7"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-7" tabindex="-1"></a>  <span class="co"># lim_high &lt;- lim[2]*4</span></span>
<span id="cb334-8"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-8" tabindex="-1"></a>  lab <span class="ot">&lt;-</span> <span class="fu">str_replace</span>(brk, <span class="st">&quot;^0.&quot;</span>, <span class="st">&quot;.&quot;</span>)</span>
<span id="cb334-9"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-9" tabindex="-1"></a>  shapes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">16</span>, <span class="dv">17</span>, <span class="dv">18</span>)[<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(<span class="fu">unique</span>(df<span class="sc">$</span>term))]</span>
<span id="cb334-10"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-10" tabindex="-1"></a>  lt <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">&quot;solid&quot;</span>, <span class="fu">length</span>(<span class="fu">unique</span>(df<span class="sc">$</span>term)))</span>
<span id="cb334-11"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-11" tabindex="-1"></a>  titl <span class="ot">&lt;-</span> <span class="cf">if</span>(mod <span class="sc">==</span> <span class="st">&quot;none&quot;</span>){<span class="cn">NULL</span>} <span class="cf">else</span> {<span class="fu">sprintf</span>(<span class="st">&quot;%s Moderation of Personality-Outcome Associations&quot;</span>, m)}</span>
<span id="cb334-12"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-12" tabindex="-1"></a>  titl <span class="ot">&lt;-</span> <span class="cf">if</span>(<span class="sc">!</span>cov <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;none&quot;</span>, <span class="st">&quot;all&quot;</span>)) <span class="fu">paste</span>(cv, <span class="st">&quot;Adjusted&quot;</span>, titl, <span class="at">collapse =</span> <span class="st">&quot; &quot;</span>) <span class="cf">else</span> <span class="fu">paste</span>(cv, titl, <span class="at">collapse =</span> <span class="st">&quot; &quot;</span>)</span>
<span id="cb334-13"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-13" tabindex="-1"></a>  leg <span class="ot">&lt;-</span> <span class="cf">if</span>(<span class="fu">length</span>(<span class="fu">unique</span>(df<span class="sc">$</span>term)) <span class="sc">&gt;</span> <span class="dv">1</span>){<span class="st">&quot;bottom&quot;</span>} <span class="cf">else</span> {<span class="st">&quot;none&quot;</span>}</span>
<span id="cb334-14"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-14" tabindex="-1"></a>  <span class="co"># if(length(unique(df$term)) &gt; 1) df &lt;- df %&gt;% full_join(crossing(Trait = unique(df$Trait), Outcome = unique(df$Outcome), term = unique(df$term)))</span></span>
<span id="cb334-15"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-15" tabindex="-1"></a>  p <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb334-16"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-16" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">conf.low =</span> <span class="fu">ifelse</span>(conf.low <span class="sc">&lt;</span> lim[<span class="dv">1</span>], lim[<span class="dv">1</span>], conf.low),</span>
<span id="cb334-17"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-17" tabindex="-1"></a>           <span class="at">conf.high =</span> <span class="fu">ifelse</span>(conf.high <span class="sc">&gt;</span> lim[<span class="dv">2</span>], lim[<span class="dv">2</span>], conf.high)) <span class="sc">%&gt;%</span> </span>
<span id="cb334-18"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-18" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> term, <span class="at">y =</span> estimate)) <span class="sc">+</span></span>
<span id="cb334-19"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-19" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> lim, <span class="at">breaks =</span> brk, <span class="at">labels =</span> lab) <span class="sc">+</span> </span>
<span id="cb334-20"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-20" tabindex="-1"></a>    <span class="fu">scale_size_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="fl">1.8</span>, <span class="fl">1.3</span>)) <span class="sc">+</span></span>
<span id="cb334-21"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-21" tabindex="-1"></a>    <span class="fu">scale_shape_manual</span>(<span class="at">values =</span> shapes) <span class="sc">+</span></span>
<span id="cb334-22"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-22" tabindex="-1"></a>    <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;blue&quot;</span>, <span class="st">&quot;black&quot;</span>)) <span class="sc">+</span></span>
<span id="cb334-23"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-23" tabindex="-1"></a>    <span class="fu">scale_linetype_manual</span>(<span class="at">values =</span> lt) <span class="sc">+</span></span>
<span id="cb334-24"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-24" tabindex="-1"></a>    <span class="fu">geom_hline</span>(<span class="fu">aes</span>(<span class="at">yintercept =</span> <span class="dv">0</span>), <span class="at">size =</span> .<span class="dv">25</span>, <span class="at">color =</span> <span class="st">&quot;gray50&quot;</span>) <span class="sc">+</span></span>
<span id="cb334-25"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-25" tabindex="-1"></a>    <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> conf.low, <span class="at">ymax =</span> conf.high)</span>
<span id="cb334-26"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-26" tabindex="-1"></a>                  , <span class="at">width =</span> .<span class="dv">01</span></span>
<span id="cb334-27"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-27" tabindex="-1"></a>                  , <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> .<span class="dv">9</span>)) <span class="sc">+</span> </span>
<span id="cb334-28"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-28" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> sig, <span class="at">size =</span> sig, <span class="at">shape =</span> term)</span>
<span id="cb334-29"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-29" tabindex="-1"></a>                  , <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> .<span class="dv">9</span>)) <span class="sc">+</span></span>
<span id="cb334-30"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-30" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span></span>
<span id="cb334-31"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-31" tabindex="-1"></a>         , <span class="at">y =</span> <span class="st">&quot;Estimate (POMP)&quot;</span></span>
<span id="cb334-32"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-32" tabindex="-1"></a>         , <span class="at">title =</span> titl</span>
<span id="cb334-33"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-33" tabindex="-1"></a>         , <span class="at">subtitle =</span> <span class="st">&quot;Method 2B: Pooled Regression Using Random Effects&quot;</span></span>
<span id="cb334-34"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-34" tabindex="-1"></a>         ) <span class="sc">+</span></span>
<span id="cb334-35"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-35" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">color =</span> <span class="st">&quot;none&quot;</span>, <span class="at">size =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb334-36"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-36" tabindex="-1"></a>    <span class="fu">facet_grid</span>(Outcome<span class="sc">~</span>Trait, <span class="at">scales =</span> <span class="st">&quot;free_y&quot;</span>, <span class="at">space =</span> <span class="st">&quot;free&quot;</span>) <span class="sc">+</span></span>
<span id="cb334-37"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-37" tabindex="-1"></a>    <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb334-38"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-38" tabindex="-1"></a>    <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb334-39"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-39" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> leg,</span>
<span id="cb334-40"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-40" tabindex="-1"></a>          <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">1.2</span>), <span class="at">hjust =</span> .<span class="dv">5</span>),</span>
<span id="cb334-41"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-41" tabindex="-1"></a>          <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">1.1</span>), <span class="at">hjust =</span> .<span class="dv">5</span>),</span>
<span id="cb334-42"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-42" tabindex="-1"></a>          <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;white&quot;</span>),</span>
<span id="cb334-43"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-43" tabindex="-1"></a>          <span class="at">strip.background =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb334-44"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-44" tabindex="-1"></a>          <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">1.4</span>)),</span>
<span id="cb334-45"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-45" tabindex="-1"></a>          <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>),</span>
<span id="cb334-46"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-46" tabindex="-1"></a>          <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="fu">rel</span>(<span class="dv">1</span>)))</span>
<span id="cb334-47"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-47" tabindex="-1"></a>  ht <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(df<span class="sc">$</span>Outcome)); ht2 <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(df<span class="sc">$</span>term))</span>
<span id="cb334-48"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-48" tabindex="-1"></a>  local_path <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(df<span class="sc">$</span>Trait))</span>
<span id="cb334-49"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-49" tabindex="-1"></a><span class="fu">ggsave</span>(p, <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/2b_ipd_mlm/%s/figures/overall forest/%s_%s_fixed.png&quot;</span>, local_path, type, mod, cov), <span class="at">width =</span> local_path<span class="sc">*</span><span class="dv">2</span>, <span class="at">height =</span> <span class="fl">1.25</span><span class="sc">*</span>ht <span class="sc">+</span> .<span class="dv">75</span><span class="sc">*</span>ht2)</span>
<span id="cb334-50"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-50" tabindex="-1"></a><span class="fu">rm</span>(p)</span>
<span id="cb334-51"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-51" tabindex="-1"></a><span class="fu">gc</span>()</span>
<span id="cb334-52"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-52" tabindex="-1"></a><span class="fu">return</span>(T)</span>
<span id="cb334-53"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-53" tabindex="-1"></a>} </span>
<span id="cb334-54"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-54" tabindex="-1"></a></span>
<span id="cb334-55"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-55" tabindex="-1"></a>nested_ipd2b_reg <span class="sc">%&gt;%</span></span>
<span id="cb334-56"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-56" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>rx, <span class="sc">-</span>n) <span class="sc">%&gt;%</span></span>
<span id="cb334-57"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-57" tabindex="-1"></a>  <span class="fu">unnest</span>(fx) <span class="sc">%&gt;%</span></span>
<span id="cb334-58"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-58" tabindex="-1"></a>    <span class="fu">filter</span>((Moderator <span class="sc">==</span> <span class="st">&quot;none&quot;</span> <span class="sc">&amp;</span> term <span class="sc">==</span> <span class="st">&quot;p_value&quot;</span>)<span class="sc">|</span></span>
<span id="cb334-59"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-59" tabindex="-1"></a>          (Moderator <span class="sc">!=</span> <span class="st">&quot;none&quot;</span> <span class="sc">&amp;</span> <span class="fu">grepl</span>(<span class="st">&quot;^p_value:&quot;</span>, term))) <span class="sc">%&gt;%</span></span>
<span id="cb334-60"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-60" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">sig =</span> <span class="fu">ifelse</span>(<span class="fu">sign</span>(conf.low) <span class="sc">==</span> <span class="fu">sign</span>(conf.high), <span class="st">&quot;sig&quot;</span>, <span class="st">&quot;ns&quot;</span>),</span>
<span id="cb334-61"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-61" tabindex="-1"></a>           <span class="at">sig =</span> <span class="fu">factor</span>(sig, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;sig&quot;</span>,<span class="st">&quot;ns&quot;</span>)),</span>
<span id="cb334-62"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-62" tabindex="-1"></a>           <span class="at">Trait =</span> <span class="fu">factor</span>(Trait, <span class="at">levels =</span> traits<span class="sc">$</span>short_name),</span>
<span id="cb334-63"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-63" tabindex="-1"></a>           <span class="at">Outcome =</span> <span class="fu">factor</span>(Outcome, <span class="at">levels =</span> outcomes<span class="sc">$</span>short_name, <span class="at">labels =</span> <span class="fu">str_wrap</span>(outcomes<span class="sc">$</span>long_name, <span class="dv">15</span>)),</span>
<span id="cb334-64"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-64" tabindex="-1"></a>           <span class="at">Outcome =</span> forcats<span class="sc">::</span><span class="fu">fct_rev</span>(Outcome))  <span class="sc">%&gt;%</span></span>
<span id="cb334-65"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-65" tabindex="-1"></a>  <span class="fu">group_by</span>(type, Moderator, Covariate) <span class="sc">%&gt;%</span></span>
<span id="cb334-66"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-66" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span></span>
<span id="cb334-67"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-67" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb334-68"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-68" tabindex="-1"></a>  <span class="co"># filter(Moderator == &quot;country&quot;) %&gt;%</span></span>
<span id="cb334-69"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb334-69" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">pmap</span>(<span class="fu">list</span>(data, Moderator, type, Covariate), ipd2b_fx_plot_fun))</span></code></pre></div>
</div>
<div id="study-specific-forest-1" class="section level6 hasAnchor" number="4.2.2.7.2.2">
<h6><span class="header-section-number">4.2.2.7.2.2</span> Study-Specific Forest<a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#study-specific-forest-1" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<div class="sourceCode" id="cb335"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb335-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-1" tabindex="-1"></a>ipd2b_rx_plot_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(df, outcome, mod, type, cov, trait){</span>
<span id="cb335-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-2" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(outcome, mod))</span>
<span id="cb335-3"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-3" tabindex="-1"></a>  trt <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(trait, traits<span class="sc">$</span>short_name, traits<span class="sc">$</span>long_name)</span>
<span id="cb335-4"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-4" tabindex="-1"></a>  m <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(mod, moders<span class="sc">$</span>short_name, moders<span class="sc">$</span>long_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb335-5"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-5" tabindex="-1"></a>  d <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">max</span>(<span class="fu">abs</span>(<span class="fu">min</span>(df<span class="sc">$</span>estimate)), <span class="fu">abs</span>(<span class="fu">max</span>(df<span class="sc">$</span>estimate))), <span class="dv">3</span>)</span>
<span id="cb335-6"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-6" tabindex="-1"></a>  <span class="co"># stds &lt;- unique(df$study)</span></span>
<span id="cb335-7"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-7" tabindex="-1"></a>  lim <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span><span class="sc">-</span>d<span class="sc">-</span>(d<span class="sc">/</span><span class="fl">2.5</span>), <span class="dv">0</span><span class="sc">+</span>d<span class="sc">+</span>(d<span class="sc">/</span><span class="fl">2.5</span>))</span>
<span id="cb335-8"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-8" tabindex="-1"></a>  brk <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">c</span>(<span class="dv">0</span><span class="sc">-</span>d<span class="sc">-</span>(d<span class="sc">/</span><span class="dv">5</span>), <span class="dv">0</span>, <span class="dv">0</span><span class="sc">+</span>d<span class="sc">+</span>(d<span class="sc">/</span><span class="dv">5</span>)),<span class="dv">2</span>)</span>
<span id="cb335-9"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-9" tabindex="-1"></a>  lab <span class="ot">&lt;-</span> <span class="fu">str_remove</span>(<span class="fu">round</span>(<span class="fu">c</span>(<span class="dv">0</span><span class="sc">-</span>d<span class="sc">-</span>(d<span class="sc">/</span><span class="dv">5</span>), <span class="dv">0</span>, <span class="dv">0</span><span class="sc">+</span>d<span class="sc">+</span>(d<span class="sc">/</span><span class="dv">5</span>)),<span class="dv">2</span>), <span class="st">&quot;^0&quot;</span>)</span>
<span id="cb335-10"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-10" tabindex="-1"></a>  shapes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">16</span>, <span class="dv">17</span>, <span class="dv">18</span>)[<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(<span class="fu">unique</span>(df<span class="sc">$</span>term))]</span>
<span id="cb335-11"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-11" tabindex="-1"></a>  lt <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">&quot;solid&quot;</span>, <span class="fu">length</span>(<span class="fu">unique</span>(df<span class="sc">$</span>term)))</span>
<span id="cb335-12"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-12" tabindex="-1"></a>  titl <span class="ot">&lt;-</span> <span class="cf">if</span>(mod <span class="sc">==</span> <span class="st">&quot;none&quot;</span>){trt} <span class="cf">else</span> {<span class="fu">sprintf</span>(<span class="st">&quot;%s x %s&quot;</span>, trt, m)}</span>
<span id="cb335-13"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-13" tabindex="-1"></a>  leg <span class="ot">&lt;-</span> <span class="cf">if</span>(<span class="fu">length</span>(<span class="fu">unique</span>(df<span class="sc">$</span>term)) <span class="sc">&gt;</span> <span class="dv">1</span>){<span class="st">&quot;bottom&quot;</span>} <span class="cf">else</span> {<span class="st">&quot;none&quot;</span>}</span>
<span id="cb335-14"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-14" tabindex="-1"></a>  df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">study =</span> <span class="fu">mapvalues</span>(study, <span class="fu">c</span>(<span class="st">&quot;BASE-I&quot;</span>, <span class="st">&quot;OCTO-TWIN&quot;</span>), <span class="fu">c</span>(<span class="st">&quot;BASE&quot;</span>, <span class="st">&quot;OCTO-Twin&quot;</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb335-15"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-15" tabindex="-1"></a>    <span class="fu">full_join</span>(<span class="fu">tibble</span>(<span class="at">study =</span> <span class="st">&quot; &quot;</span>, <span class="at">estimate =</span> <span class="cn">NA</span>, <span class="at">n =</span> <span class="cn">NA</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb335-16"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-16" tabindex="-1"></a>    <span class="fu">arrange</span>(estimate)</span>
<span id="cb335-17"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-17" tabindex="-1"></a>  stds <span class="ot">&lt;-</span> df<span class="sc">$</span>study[<span class="sc">!</span>df<span class="sc">$</span>study <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Overall&quot;</span>, <span class="st">&quot; &quot;</span>)]</span>
<span id="cb335-18"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-18" tabindex="-1"></a>  df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb335-19"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-19" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">study =</span> <span class="fu">factor</span>(study, <span class="fu">rev</span>(<span class="fu">c</span>(<span class="st">&quot; &quot;</span>, stds, <span class="st">&quot;Overall&quot;</span>)))</span>
<span id="cb335-20"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-20" tabindex="-1"></a>           <span class="co"># , conf.low = ifelse(conf.low &lt; lim[1], lim[1], conf.low)</span></span>
<span id="cb335-21"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-21" tabindex="-1"></a>           <span class="co"># , conf.high = ifelse(conf.high &gt; lim[2], lim[2], conf.high)</span></span>
<span id="cb335-22"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-22" tabindex="-1"></a>           , <span class="at">lb =</span> <span class="fu">ifelse</span>(conf.low <span class="sc">&lt;</span> lim[<span class="dv">1</span>], <span class="st">&quot;lower&quot;</span></span>
<span id="cb335-23"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-23" tabindex="-1"></a>                         , <span class="fu">ifelse</span>(conf.high <span class="sc">&gt;</span> lim[<span class="dv">2</span>], <span class="st">&quot;upper&quot;</span>, <span class="st">&quot;neither&quot;</span>))</span>
<span id="cb335-24"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-24" tabindex="-1"></a>           , <span class="at">conf.low2 =</span> <span class="fu">ifelse</span>(conf.low <span class="sc">&lt;</span> lim[<span class="dv">1</span>], lim[<span class="dv">1</span>], conf.low)</span>
<span id="cb335-25"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-25" tabindex="-1"></a>           , <span class="at">conf.high2 =</span> <span class="fu">ifelse</span>(conf.high <span class="sc">&gt;</span> lim[<span class="dv">2</span>], lim[<span class="dv">2</span>], conf.high)</span>
<span id="cb335-26"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-26" tabindex="-1"></a>           <span class="co"># , study = factor(study, levels = str_remove_all(c(&quot;Overall&quot;, studies_long), &quot;-&quot;), labels = c(&quot;Overall&quot;, studies_long))</span></span>
<span id="cb335-27"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-27" tabindex="-1"></a>           <span class="co"># Trait = factor(Trait, levels = traits$short_name, labels = traits$long_name),</span></span>
<span id="cb335-28"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-28" tabindex="-1"></a>           , <span class="at">type =</span> <span class="fu">ifelse</span>(study <span class="sc">==</span> <span class="st">&quot;Overall&quot;</span>, <span class="st">&quot;fixed&quot;</span>, <span class="st">&quot;random&quot;</span>))</span>
<span id="cb335-29"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-29" tabindex="-1"></a>  p1 <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb335-30"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-30" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> study, <span class="at">y =</span> estimate)) <span class="sc">+</span> </span>
<span id="cb335-31"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-31" tabindex="-1"></a>    <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> conf.low, <span class="at">ymax =</span> conf.high)</span>
<span id="cb335-32"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-32" tabindex="-1"></a>                  , <span class="at">position =</span> <span class="st">&quot;dodge&quot;</span></span>
<span id="cb335-33"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-33" tabindex="-1"></a>                  , <span class="at">width =</span> .<span class="dv">2</span>) <span class="sc">+</span> </span>
<span id="cb335-34"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-34" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">shape =</span> term, <span class="at">size =</span> term)) <span class="sc">+</span> </span>
<span id="cb335-35"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-35" tabindex="-1"></a>    <span class="fu">geom_segment</span>(<span class="at">data =</span> df <span class="sc">%&gt;%</span> <span class="fu">filter</span>(lb <span class="sc">==</span> <span class="st">&quot;lower&quot;</span>)</span>
<span id="cb335-36"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-36" tabindex="-1"></a>                 , <span class="fu">aes</span>(<span class="at">y =</span> conf.high2, <span class="at">yend =</span> conf.low2, <span class="at">xend =</span> study)</span>
<span id="cb335-37"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-37" tabindex="-1"></a>                 , <span class="at">arrow =</span> <span class="fu">arrow</span>(<span class="at">type =</span> <span class="st">&quot;closed&quot;</span>, <span class="at">length =</span> <span class="fu">unit</span>(<span class="fl">0.1</span>, <span class="st">&quot;cm&quot;</span>))) <span class="sc">+</span></span>
<span id="cb335-38"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-38" tabindex="-1"></a>    <span class="fu">geom_segment</span>(<span class="at">data =</span> df <span class="sc">%&gt;%</span> <span class="fu">filter</span>(lb <span class="sc">==</span> <span class="st">&quot;upper&quot;</span>)</span>
<span id="cb335-39"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-39" tabindex="-1"></a>                 , <span class="fu">aes</span>(<span class="at">y =</span> conf.low2, <span class="at">yend =</span> conf.high2, <span class="at">xend =</span> study)</span>
<span id="cb335-40"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-40" tabindex="-1"></a>                 , <span class="at">arrow =</span> <span class="fu">arrow</span>(<span class="at">type =</span> <span class="st">&quot;closed&quot;</span>, <span class="at">length =</span> <span class="fu">unit</span>(<span class="fl">0.1</span>, <span class="st">&quot;cm&quot;</span>))) <span class="sc">+</span></span>
<span id="cb335-41"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-41" tabindex="-1"></a>    <span class="fu">geom_hline</span>(<span class="fu">aes</span>(<span class="at">yintercept =</span> <span class="dv">0</span>), <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>, <span class="at">size =</span> .<span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb335-42"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-42" tabindex="-1"></a>    <span class="fu">geom_vline</span>(<span class="fu">aes</span>(<span class="at">xintercept =</span> <span class="fl">1.5</span>)) <span class="sc">+</span></span>
<span id="cb335-43"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-43" tabindex="-1"></a>    <span class="fu">geom_vline</span>(<span class="fu">aes</span>(<span class="at">xintercept =</span> <span class="fu">length</span>(stds) <span class="sc">+</span> <span class="fl">1.5</span>)) <span class="sc">+</span></span>
<span id="cb335-44"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-44" tabindex="-1"></a>    <span class="fu">annotate</span>(<span class="st">&quot;rect&quot;</span>, <span class="at">xmin =</span> <span class="fu">length</span>(stds) <span class="sc">+</span> <span class="fl">1.6</span>, <span class="at">xmax =</span> <span class="cn">Inf</span>, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>, <span class="at">fill =</span> <span class="st">&quot;white&quot;</span>) <span class="sc">+</span></span>
<span id="cb335-45"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-45" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> lim, <span class="at">breaks =</span> brk, <span class="at">labels =</span> lab) <span class="sc">+</span> </span>
<span id="cb335-46"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-46" tabindex="-1"></a>    <span class="fu">scale_size_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">2</span>)) <span class="sc">+</span> </span>
<span id="cb335-47"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-47" tabindex="-1"></a>    <span class="fu">scale_shape_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">16</span>)) <span class="sc">+</span></span>
<span id="cb335-48"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-48" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span></span>
<span id="cb335-49"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-49" tabindex="-1"></a>         , <span class="at">y =</span> <span class="st">&quot;Estimate&quot;</span></span>
<span id="cb335-50"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-50" tabindex="-1"></a>         <span class="co"># , title = &quot;  &quot;</span></span>
<span id="cb335-51"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-51" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb335-52"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-52" tabindex="-1"></a>    <span class="fu">coord_flip</span>() <span class="sc">+</span> </span>
<span id="cb335-53"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-53" tabindex="-1"></a>    <span class="fu">theme_classic</span>() <span class="sc">+</span> </span>
<span id="cb335-54"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-54" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb335-55"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-55" tabindex="-1"></a>          , <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb335-56"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-56" tabindex="-1"></a>          , <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb335-57"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-57" tabindex="-1"></a>          , <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">hjust =</span> .<span class="dv">5</span>)</span>
<span id="cb335-58"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-58" tabindex="-1"></a>          , <span class="at">axis.ticks.y =</span> <span class="fu">element_blank</span>()</span>
<span id="cb335-59"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-59" tabindex="-1"></a>          , <span class="at">axis.line.y =</span> <span class="fu">element_blank</span>()</span>
<span id="cb335-60"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-60" tabindex="-1"></a>          , <span class="at">axis.line.x.top =</span> <span class="fu">element_line</span>(<span class="at">size =</span> <span class="dv">1</span>))</span>
<span id="cb335-61"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-61" tabindex="-1"></a>  </span>
<span id="cb335-62"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-62" tabindex="-1"></a>  d2 <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb335-63"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-63" tabindex="-1"></a>    <span class="fu">mutate_at</span>(<span class="fu">vars</span>(estimate, conf.low, conf.high)</span>
<span id="cb335-64"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-64" tabindex="-1"></a>              , <span class="sc">~</span><span class="fu">ifelse</span>(<span class="fu">abs</span>(.) <span class="sc">&lt;</span> .<span class="dv">01</span>, <span class="fu">sprintf</span>(<span class="st">&quot;%.3f&quot;</span>, .), <span class="fu">sprintf</span>(<span class="st">&quot;%.2f&quot;</span>, .))) <span class="sc">%&gt;%</span></span>
<span id="cb335-65"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-65" tabindex="-1"></a>    <span class="fu">mutate_at</span>(<span class="fu">vars</span>(estimate, conf.low, conf.high), <span class="sc">~</span><span class="fu">str_replace_all</span>(., <span class="st">&quot;^0.&quot;</span>, <span class="st">&quot;.&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb335-66"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-66" tabindex="-1"></a>    <span class="fu">mutate_at</span>(<span class="fu">vars</span>(estimate, conf.low, conf.high), <span class="sc">~</span><span class="fu">str_replace_all</span>(., <span class="st">&quot;^-0.&quot;</span>, <span class="st">&quot;-.&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb335-67"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-67" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">est =</span> <span class="fu">ifelse</span>(study <span class="sc">!=</span> <span class="st">&quot; &quot;</span>, <span class="fu">sprintf</span>(<span class="st">&quot;%s [%s, %s]      &quot;</span>, estimate, conf.low, conf.high), <span class="st">&quot;&quot;</span>)</span>
<span id="cb335-68"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-68" tabindex="-1"></a>           , <span class="at">n =</span> <span class="fu">as.character</span>(n)</span>
<span id="cb335-69"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-69" tabindex="-1"></a>           ) <span class="sc">%&gt;%</span></span>
<span id="cb335-70"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-70" tabindex="-1"></a>    <span class="fu">select</span>(study, n, est) <span class="sc">%&gt;%</span></span>
<span id="cb335-71"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-71" tabindex="-1"></a>    <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(n, est), <span class="at">names_to =</span> <span class="st">&quot;est&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;value&quot;</span>)</span>
<span id="cb335-72"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-72" tabindex="-1"></a>  p2 <span class="ot">&lt;-</span> d2 <span class="sc">%&gt;%</span></span>
<span id="cb335-73"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-73" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> study, <span class="at">y =</span> est)) <span class="sc">+</span></span>
<span id="cb335-74"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-74" tabindex="-1"></a>      <span class="fu">geom_text</span>(<span class="at">data =</span> d2 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(est <span class="sc">==</span> <span class="st">&quot;est&quot;</span>), <span class="fu">aes</span>(<span class="at">label =</span> value), <span class="at">hjust =</span> .<span class="dv">5</span>, <span class="at">size =</span> <span class="fl">3.5</span>) <span class="sc">+</span> </span>
<span id="cb335-75"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-75" tabindex="-1"></a>      <span class="fu">geom_text</span>(<span class="at">data =</span> d2 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(est <span class="sc">==</span> <span class="st">&quot;n&quot;</span>), <span class="fu">aes</span>(<span class="at">label =</span> value), <span class="at">hjust =</span> .<span class="dv">5</span>, <span class="at">size =</span> <span class="fl">3.5</span>) <span class="sc">+</span> </span>
<span id="cb335-76"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-76" tabindex="-1"></a>      <span class="fu">annotate</span>(<span class="st">&quot;text&quot;</span>, <span class="at">label =</span> <span class="st">&quot;b [CI]&quot;</span>, <span class="at">x =</span> <span class="fu">length</span>(stds) <span class="sc">+</span> <span class="fl">1.75</span>, <span class="at">y =</span> <span class="st">&quot;est&quot;</span>, <span class="at">hjust =</span> .<span class="dv">5</span>, <span class="at">vjust =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb335-77"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-77" tabindex="-1"></a>      <span class="fu">annotate</span>(<span class="st">&quot;text&quot;</span>, <span class="at">label =</span> <span class="st">&quot;N&quot;</span>, <span class="at">x =</span> <span class="fu">length</span>(stds) <span class="sc">+</span> <span class="fl">1.75</span>, <span class="at">y =</span> <span class="st">&quot;n&quot;</span>, <span class="at">hjust =</span> .<span class="dv">5</span>, <span class="at">vjust =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb335-78"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-78" tabindex="-1"></a>      <span class="fu">geom_vline</span>(<span class="fu">aes</span>(<span class="at">xintercept =</span> <span class="fl">1.5</span>)) <span class="sc">+</span></span>
<span id="cb335-79"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-79" tabindex="-1"></a>      <span class="fu">geom_vline</span>(<span class="fu">aes</span>(<span class="at">xintercept =</span> <span class="fu">length</span>(stds) <span class="sc">+</span> <span class="fl">1.5</span>)) <span class="sc">+</span></span>
<span id="cb335-80"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-80" tabindex="-1"></a>      <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb335-81"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-81" tabindex="-1"></a>      <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb335-82"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-82" tabindex="-1"></a>      <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">hjust =</span> <span class="dv">0</span>)</span>
<span id="cb335-83"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-83" tabindex="-1"></a>            , <span class="at">axis.text =</span> <span class="fu">element_blank</span>()</span>
<span id="cb335-84"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-84" tabindex="-1"></a>            , <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>()</span>
<span id="cb335-85"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-85" tabindex="-1"></a>            , <span class="at">axis.title =</span> <span class="fu">element_blank</span>())</span>
<span id="cb335-86"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-86" tabindex="-1"></a>  </span>
<span id="cb335-87"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-87" tabindex="-1"></a>  my_theme <span class="ot">&lt;-</span> <span class="cf">function</span>(...) {</span>
<span id="cb335-88"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-88" tabindex="-1"></a>    <span class="fu">theme_classic</span>() <span class="sc">+</span> </span>
<span id="cb335-89"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-89" tabindex="-1"></a>      <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;italic&quot;</span>))</span>
<span id="cb335-90"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-90" tabindex="-1"></a>  }</span>
<span id="cb335-91"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-91" tabindex="-1"></a>  title_theme <span class="ot">&lt;-</span> <span class="fu">calc_element</span>(<span class="st">&quot;plot.title&quot;</span>, <span class="fu">my_theme</span>())</span>
<span id="cb335-92"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-92" tabindex="-1"></a>  ttl <span class="ot">&lt;-</span> <span class="fu">ggdraw</span>() <span class="sc">+</span> </span>
<span id="cb335-93"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-93" tabindex="-1"></a>      <span class="fu">draw_label</span>(</span>
<span id="cb335-94"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-94" tabindex="-1"></a>          titl,</span>
<span id="cb335-95"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-95" tabindex="-1"></a>          <span class="at">fontfamily =</span> title_theme<span class="sc">$</span>family,</span>
<span id="cb335-96"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-96" tabindex="-1"></a>          <span class="at">fontface =</span> title_theme<span class="sc">$</span>face,</span>
<span id="cb335-97"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-97" tabindex="-1"></a>          <span class="at">size =</span> title_theme<span class="sc">$</span>size<span class="dv">-2</span></span>
<span id="cb335-98"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-98" tabindex="-1"></a>      )</span>
<span id="cb335-99"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-99" tabindex="-1"></a></span>
<span id="cb335-100"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-100" tabindex="-1"></a>  p3 <span class="ot">&lt;-</span> cowplot<span class="sc">::</span><span class="fu">plot_grid</span>(p1, p2</span>
<span id="cb335-101"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-101" tabindex="-1"></a>                     , <span class="at">rel_widths =</span> <span class="fu">c</span>(.<span class="dv">5</span>, .<span class="dv">5</span>)</span>
<span id="cb335-102"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-102" tabindex="-1"></a>                     , <span class="at">align =</span> <span class="st">&quot;h&quot;</span></span>
<span id="cb335-103"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-103" tabindex="-1"></a>                     )</span>
<span id="cb335-104"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-104" tabindex="-1"></a>  <span class="co"># p &lt;- cowplot::plot_grid(ttl, subttl, p3, rel_heights = c(.05, .05, .9), nrow = 3)</span></span>
<span id="cb335-105"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-105" tabindex="-1"></a>  p <span class="ot">&lt;-</span> cowplot<span class="sc">::</span><span class="fu">plot_grid</span>(ttl, p3, <span class="at">rel_heights =</span> <span class="fu">c</span>(.<span class="dv">05</span>, .<span class="dv">95</span>), <span class="at">nrow =</span> <span class="dv">2</span>)</span>
<span id="cb335-106"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-106" tabindex="-1"></a>  <span class="fu">gc</span>()</span>
<span id="cb335-107"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-107" tabindex="-1"></a>  <span class="fu">save</span>(p</span>
<span id="cb335-108"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-108" tabindex="-1"></a>       , <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/2b_ipd_mlm/%s/figures/study specific forest/rdata/%s_%s_%s_%s.RData&quot;</span>, local_path, type, outcome, trait, mod, cov))</span>
<span id="cb335-109"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-109" tabindex="-1"></a>  <span class="fu">return</span>(p)</span>
<span id="cb335-110"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-110" tabindex="-1"></a>}</span>
<span id="cb335-111"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-111" tabindex="-1"></a></span>
<span id="cb335-112"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-112" tabindex="-1"></a><span class="do">## fixed effects</span></span>
<span id="cb335-113"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-113" tabindex="-1"></a>nested_ipd2b_reg_fp <span class="ot">&lt;-</span> nested_ipd2b_reg <span class="sc">%&gt;%</span></span>
<span id="cb335-114"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-114" tabindex="-1"></a>  <span class="fu">filter</span>(Moderator <span class="sc">%in%</span> moders<span class="sc">$</span>short_name) <span class="sc">%&gt;%</span></span>
<span id="cb335-115"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-115" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>rx, <span class="sc">-</span>n) <span class="sc">%&gt;%</span></span>
<span id="cb335-116"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-116" tabindex="-1"></a>  <span class="fu">unnest</span>(fx) <span class="sc">%&gt;%</span></span>
<span id="cb335-117"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-117" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">study =</span> <span class="st">&quot;Overall&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb335-118"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-118" tabindex="-1"></a>  <span class="do">## random effects</span></span>
<span id="cb335-119"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-119" tabindex="-1"></a>  <span class="fu">full_join</span>(</span>
<span id="cb335-120"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-120" tabindex="-1"></a>    nested_ipd2b_reg <span class="sc">%&gt;%</span></span>
<span id="cb335-121"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-121" tabindex="-1"></a>      <span class="fu">filter</span>(Moderator <span class="sc">%in%</span> moders<span class="sc">$</span>short_name) <span class="sc">%&gt;%</span></span>
<span id="cb335-122"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-122" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">rx =</span> <span class="fu">map2</span>(rx, n, <span class="sc">~</span>(.x) <span class="sc">%&gt;%</span> <span class="fu">full_join</span>(.y))) <span class="sc">%&gt;%</span></span>
<span id="cb335-123"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-123" tabindex="-1"></a>      <span class="fu">select</span>(<span class="sc">-</span>fx, <span class="sc">-</span>n) <span class="sc">%&gt;%</span></span>
<span id="cb335-124"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-124" tabindex="-1"></a>      <span class="fu">unnest</span>(rx) <span class="co">#%&gt;%</span></span>
<span id="cb335-125"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-125" tabindex="-1"></a>      <span class="co"># mutate(term = ifelse(Moderator != &quot;none&quot;, paste(term, mapvalues(Moderator, moders$short_name, moders$short_term, warn_missing = F), sep = &quot;:&quot;), term))</span></span>
<span id="cb335-126"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-126" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb335-127"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-127" tabindex="-1"></a>  <span class="do">## filter key terms</span></span>
<span id="cb335-128"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-128" tabindex="-1"></a>  <span class="fu">filter</span>((Moderator <span class="sc">==</span> <span class="st">&quot;none&quot;</span> <span class="sc">&amp;</span> term <span class="sc">==</span> <span class="st">&quot;p_value&quot;</span>)<span class="sc">|</span></span>
<span id="cb335-129"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-129" tabindex="-1"></a>         (Moderator <span class="sc">!=</span> <span class="st">&quot;none&quot;</span> <span class="sc">&amp;</span> <span class="fu">grepl</span>(<span class="st">&quot;^p_value:&quot;</span>, term) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">grepl</span>(<span class="st">&quot;study&quot;</span>, term))) <span class="sc">%&gt;%</span></span>
<span id="cb335-130"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-130" tabindex="-1"></a>  <span class="do">## significance</span></span>
<span id="cb335-131"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-131" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sig =</span> <span class="fu">ifelse</span>(<span class="fu">sign</span>(conf.low) <span class="sc">==</span> <span class="fu">sign</span>(conf.high), <span class="st">&quot;sig&quot;</span>, <span class="st">&quot;ns&quot;</span>)</span>
<span id="cb335-132"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-132" tabindex="-1"></a>         , <span class="at">study =</span> <span class="fu">mapvalues</span>(study, studies_long, studies_sp, <span class="at">warn_missing =</span> F)) <span class="sc">%&gt;%</span></span>
<span id="cb335-133"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-133" tabindex="-1"></a>  <span class="do">## grouping for plotting</span></span>
<span id="cb335-134"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-134" tabindex="-1"></a>  <span class="fu">group_by</span>(Outcome, Moderator, type, Covariate, Trait) <span class="sc">%&gt;%</span></span>
<span id="cb335-135"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-135" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span></span>
<span id="cb335-136"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-136" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb335-137"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-137" tabindex="-1"></a>  <span class="co"># filter(Trait == &quot;N&quot; &amp; type == &quot;Frequentist&quot;) %&gt;%</span></span>
<span id="cb335-138"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-138" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">p =</span> <span class="fu">pmap</span>(<span class="fu">list</span>(data, Outcome, Moderator, type, Covariate, Trait), ipd2b_rx_plot_fun))</span>
<span id="cb335-139"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-139" tabindex="-1"></a></span>
<span id="cb335-140"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-140" tabindex="-1"></a>ipd2b_rx_plot_comb_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(outcome, cov, mod, type, d){</span>
<span id="cb335-141"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-141" tabindex="-1"></a>  o <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(outcome, outcomes<span class="sc">$</span>short_name, outcomes<span class="sc">$</span>long_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb335-142"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-142" tabindex="-1"></a>  cv <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(cov, covars<span class="sc">$</span>short_name, covars<span class="sc">$</span>long_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb335-143"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-143" tabindex="-1"></a>  titl <span class="ot">&lt;-</span> <span class="fu">paste0</span>(o, <span class="st">&quot;,&quot;</span>)</span>
<span id="cb335-144"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-144" tabindex="-1"></a>  titl <span class="ot">&lt;-</span> <span class="cf">if</span>(<span class="sc">!</span>cov <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;none&quot;</span>, <span class="st">&quot;all&quot;</span>)) <span class="fu">paste</span>(titl, cv, <span class="st">&quot;Adjusted&quot;</span>, <span class="at">collapse =</span> <span class="st">&quot;, &quot;</span>) <span class="cf">else</span> <span class="fu">paste</span>(titl, cv, <span class="at">collapse =</span> <span class="st">&quot;, &quot;</span>)</span>
<span id="cb335-145"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-145" tabindex="-1"></a>  p1 <span class="ot">&lt;-</span> <span class="fu">plot_grid</span>(</span>
<span id="cb335-146"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-146" tabindex="-1"></a>    d<span class="sc">$</span>p[[<span class="dv">1</span>]]</span>
<span id="cb335-147"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-147" tabindex="-1"></a>    , d<span class="sc">$</span>p[[<span class="dv">2</span>]]</span>
<span id="cb335-148"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-148" tabindex="-1"></a>    , d<span class="sc">$</span>p[[<span class="dv">3</span>]]</span>
<span id="cb335-149"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-149" tabindex="-1"></a>    , d<span class="sc">$</span>p[[<span class="dv">4</span>]]</span>
<span id="cb335-150"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-150" tabindex="-1"></a>    , d<span class="sc">$</span>p[[<span class="dv">5</span>]]</span>
<span id="cb335-151"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-151" tabindex="-1"></a>    , <span class="at">nrow =</span> <span class="dv">3</span></span>
<span id="cb335-152"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-152" tabindex="-1"></a>    , <span class="at">ncol =</span> <span class="dv">2</span></span>
<span id="cb335-153"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-153" tabindex="-1"></a>    , <span class="at">axis =</span> <span class="st">&quot;tblr&quot;</span></span>
<span id="cb335-154"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-154" tabindex="-1"></a>    , <span class="at">align =</span> <span class="st">&quot;hv&quot;</span></span>
<span id="cb335-155"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-155" tabindex="-1"></a>    )</span>
<span id="cb335-156"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-156" tabindex="-1"></a>  my_theme <span class="ot">&lt;-</span> <span class="cf">function</span>(...) {</span>
<span id="cb335-157"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-157" tabindex="-1"></a>    <span class="fu">theme_classic</span>() <span class="sc">+</span> </span>
<span id="cb335-158"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-158" tabindex="-1"></a>      <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>))</span>
<span id="cb335-159"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-159" tabindex="-1"></a>  }</span>
<span id="cb335-160"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-160" tabindex="-1"></a>  title_theme <span class="ot">&lt;-</span> <span class="fu">calc_element</span>(<span class="st">&quot;plot.title&quot;</span>, <span class="fu">my_theme</span>())</span>
<span id="cb335-161"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-161" tabindex="-1"></a>  ttl <span class="ot">&lt;-</span> <span class="fu">ggdraw</span>() <span class="sc">+</span> </span>
<span id="cb335-162"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-162" tabindex="-1"></a>      <span class="fu">draw_label</span>(</span>
<span id="cb335-163"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-163" tabindex="-1"></a>          titl,</span>
<span id="cb335-164"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-164" tabindex="-1"></a>          <span class="at">fontfamily =</span> title_theme<span class="sc">$</span>family,</span>
<span id="cb335-165"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-165" tabindex="-1"></a>          <span class="at">fontface =</span> title_theme<span class="sc">$</span>face,</span>
<span id="cb335-166"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-166" tabindex="-1"></a>          <span class="at">size =</span> title_theme<span class="sc">$</span>size</span>
<span id="cb335-167"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-167" tabindex="-1"></a>      )</span>
<span id="cb335-168"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-168" tabindex="-1"></a>  my_theme <span class="ot">&lt;-</span> <span class="cf">function</span>(...) {</span>
<span id="cb335-169"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-169" tabindex="-1"></a>    <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb335-170"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-170" tabindex="-1"></a>      <span class="fu">theme</span>(<span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>))</span>
<span id="cb335-171"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-171" tabindex="-1"></a>  }</span>
<span id="cb335-172"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-172" tabindex="-1"></a>  subtitle_theme <span class="ot">&lt;-</span> <span class="fu">calc_element</span>(<span class="st">&quot;subplot.title&quot;</span>, <span class="fu">my_theme</span>())</span>
<span id="cb335-173"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-173" tabindex="-1"></a>  subttl <span class="ot">&lt;-</span> <span class="fu">ggdraw</span>() <span class="sc">+</span></span>
<span id="cb335-174"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-174" tabindex="-1"></a>      <span class="fu">draw_label</span>(</span>
<span id="cb335-175"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-175" tabindex="-1"></a>          <span class="st">&quot;Method 2B: Pooled Regression Using Random Effects&quot;</span>,</span>
<span id="cb335-176"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-176" tabindex="-1"></a>          <span class="at">fontfamily =</span> subtitle_theme<span class="sc">$</span>family,</span>
<span id="cb335-177"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-177" tabindex="-1"></a>          <span class="at">fontface =</span> subtitle_theme<span class="sc">$</span>face,</span>
<span id="cb335-178"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-178" tabindex="-1"></a>          <span class="at">size =</span> subtitle_theme<span class="sc">$</span>size</span>
<span id="cb335-179"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-179" tabindex="-1"></a>      )</span>
<span id="cb335-180"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-180" tabindex="-1"></a>  p <span class="ot">&lt;-</span> cowplot<span class="sc">::</span><span class="fu">plot_grid</span>(ttl, subttl, p1, <span class="at">rel_heights =</span> <span class="fu">c</span>(.<span class="dv">03</span>, .<span class="dv">03</span>, .<span class="dv">94</span>), <span class="at">nrow =</span> <span class="dv">3</span>)</span>
<span id="cb335-181"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-181" tabindex="-1"></a>  <span class="fu">ggsave</span>(p </span>
<span id="cb335-182"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-182" tabindex="-1"></a>         , <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/2b_ipd_mlm/%s/figures/study specific forest/%s_%s_%s.png&quot;</span>, local_path, type, outcome, mod, cov)</span>
<span id="cb335-183"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-183" tabindex="-1"></a>         , <span class="at">width =</span> <span class="dv">10</span>, <span class="at">height =</span> <span class="dv">10</span>)</span>
<span id="cb335-184"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-184" tabindex="-1"></a>  <span class="fu">ggsave</span>(p </span>
<span id="cb335-185"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-185" tabindex="-1"></a>         , <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/2b_ipd_mlm/%s/figures/study specific forest/%s_%s_%s.pdf&quot;</span>, local_path, type, outcome, mod, cov)</span>
<span id="cb335-186"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-186" tabindex="-1"></a>         , <span class="at">width =</span> <span class="dv">10</span>, <span class="at">height =</span> <span class="dv">10</span>)</span>
<span id="cb335-187"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-187" tabindex="-1"></a>  <span class="fu">return</span>(T)</span>
<span id="cb335-188"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-188" tabindex="-1"></a>}</span>
<span id="cb335-189"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-189" tabindex="-1"></a></span>
<span id="cb335-190"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-190" tabindex="-1"></a>nested_ipd2b_reg_fp <span class="sc">%&gt;%</span></span>
<span id="cb335-191"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-191" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Trait =</span> <span class="fu">factor</span>(Trait, traits<span class="sc">$</span>short_name)) <span class="sc">%&gt;%</span></span>
<span id="cb335-192"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-192" tabindex="-1"></a>  <span class="fu">arrange</span>(Trait) <span class="sc">%&gt;%</span></span>
<span id="cb335-193"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-193" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>data) <span class="sc">%&gt;%</span></span>
<span id="cb335-194"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-194" tabindex="-1"></a>  <span class="fu">group_by</span>(type, Outcome, Moderator, Covariate) <span class="sc">%&gt;%</span></span>
<span id="cb335-195"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-195" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb335-196"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-196" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb335-197"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb335-197" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">p =</span> <span class="fu">pmap</span>(<span class="fu">list</span>(Outcome, Covariate, Moderator, type, data), ipd2b_rx_plot_comb_fun))</span></code></pre></div>
</div>
<div id="overall-simple-effects-1" class="section level6 hasAnchor" number="4.2.2.7.2.3">
<h6><span class="header-section-number">4.2.2.7.2.3</span> Overall Simple Effects<a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#overall-simple-effects-1" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<div class="sourceCode" id="cb336"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb336-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb336-1" tabindex="-1"></a>loadRData <span class="ot">&lt;-</span> <span class="cf">function</span>(fileName, type, obj, folder){</span>
<span id="cb336-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb336-2" tabindex="-1"></a><span class="co">#loads an RData file, and returns it</span></span>
<span id="cb336-3"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb336-3" tabindex="-1"></a>    path <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/2b_ipd_mlm/%s/%s/%s&quot;</span>, local_path, type, folder, fileName)</span>
<span id="cb336-4"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb336-4" tabindex="-1"></a>    <span class="fu">load</span>(path)</span>
<span id="cb336-5"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb336-5" tabindex="-1"></a>    <span class="fu">get</span>(<span class="fu">ls</span>()[<span class="fu">grepl</span>(obj, <span class="fu">ls</span>())])</span>
<span id="cb336-6"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb336-6" tabindex="-1"></a>}</span>
<span id="cb336-7"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb336-7" tabindex="-1"></a></span>
<span id="cb336-8"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb336-8" tabindex="-1"></a><span class="do">## load in &quot;fixed&quot; effects</span></span>
<span id="cb336-9"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb336-9" tabindex="-1"></a><span class="do">## first get file names</span></span>
<span id="cb336-10"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb336-10" tabindex="-1"></a>nested_ipd2b_simp <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">type =</span> <span class="fu">c</span>(<span class="st">&quot;Frequentist&quot;</span>, <span class="st">&quot;Bayesian&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb336-11"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb336-11" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">file =</span> <span class="fu">map</span>(type, <span class="sc">~</span><span class="fu">list.files</span>(<span class="fu">sprintf</span>(<span class="st">&quot;%s/results/2b_ipd_mlm/%s/predicted&quot;</span>, local_path, .)))) <span class="sc">%&gt;%</span></span>
<span id="cb336-12"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb336-12" tabindex="-1"></a>  <span class="fu">unnest</span>(file) <span class="sc">%&gt;%</span></span>
<span id="cb336-13"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb336-13" tabindex="-1"></a>  <span class="fu">separate</span>(file, <span class="fu">c</span>(<span class="st">&quot;Outcome&quot;</span>, <span class="st">&quot;Trait&quot;</span>, <span class="st">&quot;Moderator&quot;</span>, <span class="st">&quot;Covariate&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>, <span class="at">remove =</span> F) <span class="sc">%&gt;%</span> </span>
<span id="cb336-14"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb336-14" tabindex="-1"></a>  <span class="do">## read in the files</span></span>
<span id="cb336-15"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb336-15" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Covariate =</span> <span class="fu">str_remove</span>(Covariate, <span class="st">&quot;.RData&quot;</span>),</span>
<span id="cb336-16"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb336-16" tabindex="-1"></a>         <span class="at">pred.fx =</span> <span class="fu">map2</span>(file, type, <span class="sc">~</span><span class="fu">loadRData</span>(.x, .y, <span class="st">&quot;pred.fx&quot;</span>, <span class="st">&quot;predicted&quot;</span>)),</span>
<span id="cb336-17"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb336-17" tabindex="-1"></a>         <span class="at">pred.rx =</span> <span class="fu">map2</span>(file, type, <span class="sc">~</span><span class="fu">loadRData</span>(.x, .y, <span class="st">&quot;pred.rx&quot;</span>, <span class="st">&quot;predicted&quot;</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb336-18"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb336-18" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>file) </span>
<span id="cb336-19"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb336-19" tabindex="-1"></a>nested_ipd2b_simp</span></code></pre></div>
<div class="sourceCode" id="cb337"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb337-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-1" tabindex="-1"></a>simp_eff_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(df, outcome, mod, type, cov){ </span>
<span id="cb337-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-2" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(outcome, mod))</span>
<span id="cb337-3"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-3" tabindex="-1"></a>  o <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(outcome, outcomes<span class="sc">$</span>short_name, outcomes<span class="sc">$</span>long_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb337-4"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-4" tabindex="-1"></a>  cv <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(cov, covars<span class="sc">$</span>short_name, covars<span class="sc">$</span>long_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb337-5"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-5" tabindex="-1"></a>  m <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(mod, <span class="fu">c</span>(moders<span class="sc">$</span>short_name, stdyModers<span class="sc">$</span>short_name), <span class="fu">c</span>(moders<span class="sc">$</span>long_name, stdyModers<span class="sc">$</span>long_name), <span class="at">warn_missing =</span> F)</span>
<span id="cb337-6"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-6" tabindex="-1"></a>  d <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">max</span>(<span class="fu">abs</span>(<span class="fu">min</span>(df<span class="sc">$</span>pred)), <span class="fu">abs</span>(<span class="fu">max</span>(df<span class="sc">$</span>pred))), <span class="dv">3</span>)</span>
<span id="cb337-7"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-7" tabindex="-1"></a>  <span class="co"># mini &lt;- if(d &gt; 2) .05 else 0-(d+(d/5)) </span></span>
<span id="cb337-8"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-8" tabindex="-1"></a>  <span class="co"># maxi &lt;- if(d &gt; 2) 2.05 else 0+d+(d/5)</span></span>
<span id="cb337-9"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-9" tabindex="-1"></a>  <span class="co"># lim &lt;- c(mini, maxi)</span></span>
<span id="cb337-10"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-10" tabindex="-1"></a>  <span class="co"># brk &lt;- if(d &gt; 2) c(0, 1, 2) else{round(c(0-d-(d/10), 0, 0+d+(d/10)),2)}</span></span>
<span id="cb337-11"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-11" tabindex="-1"></a>  <span class="co"># lab &lt;- if(d &gt; 2){c(&quot;0&quot;, &quot;1&quot;, &quot;2&quot;)} else{str_remove(c(round(0-d-(d/10),2), 0, round(0+d+(d/10),2)), &quot;^0&quot;)}</span></span>
<span id="cb337-12"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-12" tabindex="-1"></a>  titl <span class="ot">&lt;-</span> <span class="cf">if</span>(mod <span class="sc">==</span> <span class="st">&quot;none&quot;</span>){o} <span class="cf">else</span> {<span class="fu">sprintf</span>(<span class="st">&quot;%s: Personality x %s Simple Effects&quot;</span>, o, m)}</span>
<span id="cb337-13"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-13" tabindex="-1"></a>  <span class="co"># colnames(df)[colnames(df) == mod] &lt;- &quot;mod_value&quot;</span></span>
<span id="cb337-14"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-14" tabindex="-1"></a>  df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> unclass <span class="sc">%&gt;%</span> data.frame</span>
<span id="cb337-15"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-15" tabindex="-1"></a>  df<span class="sc">$</span>mod_value <span class="ot">&lt;-</span> df[,mod]</span>
<span id="cb337-16"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-16" tabindex="-1"></a>  df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span><span class="fu">all_of</span>(mod)) <span class="sc">%&gt;%</span> as_tibble</span>
<span id="cb337-17"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-17" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">class</span>(df<span class="sc">$</span>mod_value) <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;factor&quot;</span>, <span class="st">&quot;character&quot;</span>)){df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">mod_fac =</span> <span class="fu">factor</span>(mod_value))} </span>
<span id="cb337-18"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-18" tabindex="-1"></a>    <span class="cf">else</span> {</span>
<span id="cb337-19"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-19" tabindex="-1"></a>      <span class="cf">if</span>(mod <span class="sc">==</span> <span class="st">&quot;age&quot;</span>) df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">mod_fac =</span> <span class="fu">factor</span>(mod_value, <span class="at">levels =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">10</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;-10 yrs&quot;</span>, <span class="st">&quot;M&quot;</span>, <span class="st">&quot;+10 yrs&quot;</span>)))</span>
<span id="cb337-20"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-20" tabindex="-1"></a>      <span class="cf">else</span> <span class="cf">if</span>(mod <span class="sc">==</span> <span class="st">&quot;baseYear&quot;</span>) df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">mod_fac =</span> <span class="fu">factor</span>(mod_value, <span class="at">levels =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">10</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;1990&quot;</span>, <span class="st">&quot;200)0&quot;</span>, <span class="st">&quot;2010&quot;</span>)))</span>
<span id="cb337-21"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-21" tabindex="-1"></a>      <span class="cf">else</span> <span class="cf">if</span>(mod <span class="sc">==</span> <span class="st">&quot;baseAge&quot;</span>) df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">mod_fac =</span> <span class="fu">factor</span>(mod_value, <span class="at">levels =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">10</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;50&quot;</span>, <span class="st">&quot;60&quot;</span>, <span class="st">&quot;70&quot;</span>)))</span>
<span id="cb337-22"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-22" tabindex="-1"></a>      <span class="cf">else</span> <span class="cf">if</span>(mod <span class="sc">==</span> <span class="st">&quot;predInt&quot;</span>) df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">mod_fac =</span> <span class="fu">factor</span>(mod_value, <span class="at">levels =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">5</span>, <span class="dv">0</span>, <span class="dv">5</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;-5 yrs&quot;</span>, <span class="st">&quot;5 yrs&quot;</span>, <span class="st">&quot;+5 yrs&quot;</span>)))</span>
<span id="cb337-23"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-23" tabindex="-1"></a>      <span class="cf">else</span> <span class="cf">if</span>(mod <span class="sc">==</span> <span class="st">&quot;education&quot;</span>) df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">mod_fac =</span> <span class="fu">factor</span>(mod_value, <span class="at">levels =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">5</span>, <span class="dv">0</span>, <span class="dv">5</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;-5 yrs&quot;</span>, <span class="st">&quot;12 years&quot;</span>, <span class="st">&quot;+5 yrs&quot;</span>)))</span>
<span id="cb337-24"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-24" tabindex="-1"></a>      <span class="cf">else</span> df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">mod_fac =</span> <span class="fu">factor</span>(mod_value, <span class="at">levels =</span> <span class="fu">unique</span>(mod_value), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;-1 SD&quot;</span>, <span class="st">&quot;M&quot;</span>, <span class="st">&quot;+1 SD&quot;</span>)))</span>
<span id="cb337-25"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-25" tabindex="-1"></a>    }</span>
<span id="cb337-26"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-26" tabindex="-1"></a>  lt <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;dotted&quot;</span>, <span class="st">&quot;solid&quot;</span>, <span class="st">&quot;dashed&quot;</span>)[<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(<span class="fu">unique</span>(df<span class="sc">$</span>mod_fac))]</span>
<span id="cb337-27"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-27" tabindex="-1"></a>  mini <span class="ot">&lt;-</span> <span class="fu">floor</span>(<span class="fu">min</span>(df<span class="sc">$</span>pred)); maxi <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb337-28"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-28" tabindex="-1"></a>  df <span class="sc">%&gt;%</span></span>
<span id="cb337-29"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-29" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Trait =</span> <span class="fu">factor</span>(Trait, <span class="at">levels =</span> traits<span class="sc">$</span>short_name, <span class="at">labels =</span> traits<span class="sc">$</span>long_name),</span>
<span id="cb337-30"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-30" tabindex="-1"></a>           <span class="at">lower =</span> <span class="fu">ifelse</span>(lower <span class="sc">&lt;</span> mini, mini, lower),</span>
<span id="cb337-31"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-31" tabindex="-1"></a>           <span class="at">upper =</span> <span class="fu">ifelse</span>(upper <span class="sc">&gt;</span> maxi, <span class="dv">10</span>, upper)) <span class="sc">%&gt;%</span></span>
<span id="cb337-32"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-32" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> p_value</span>
<span id="cb337-33"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-33" tabindex="-1"></a>               , <span class="at">y =</span> pred</span>
<span id="cb337-34"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-34" tabindex="-1"></a>               , <span class="at">group  =</span> mod_fac))  <span class="sc">+</span></span>
<span id="cb337-35"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-35" tabindex="-1"></a>      <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(mini,maxi)</span>
<span id="cb337-36"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-36" tabindex="-1"></a>                         , <span class="at">breaks =</span> <span class="fu">seq</span>(mini, maxi, <span class="at">by =</span> <span class="dv">2</span>)</span>
<span id="cb337-37"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-37" tabindex="-1"></a>                         , <span class="at">labels =</span> <span class="fu">seq</span>(mini, maxi, <span class="at">by =</span> <span class="dv">2</span>)) <span class="sc">+</span></span>
<span id="cb337-38"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-38" tabindex="-1"></a>      <span class="fu">scale_linetype_manual</span>(<span class="at">values =</span> lt) <span class="sc">+</span></span>
<span id="cb337-39"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-39" tabindex="-1"></a>      <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> lower</span>
<span id="cb337-40"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-40" tabindex="-1"></a>                      , <span class="at">ymax =</span> upper</span>
<span id="cb337-41"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-41" tabindex="-1"></a>                      , <span class="at">fill =</span> mod_fac)</span>
<span id="cb337-42"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-42" tabindex="-1"></a>                  , <span class="at">alpha =</span> .<span class="dv">25</span>) <span class="sc">+</span></span>
<span id="cb337-43"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-43" tabindex="-1"></a>      <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">linetype =</span> mod_fac)) <span class="sc">+</span></span>
<span id="cb337-44"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-44" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Personality (POMP)&quot;</span></span>
<span id="cb337-45"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-45" tabindex="-1"></a>           , <span class="at">y =</span> <span class="fu">paste</span>(o, <span class="st">&quot;(POMP)&quot;</span>)</span>
<span id="cb337-46"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-46" tabindex="-1"></a>           , <span class="at">title =</span> titl</span>
<span id="cb337-47"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-47" tabindex="-1"></a>           , <span class="at">linetype =</span> m</span>
<span id="cb337-48"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-48" tabindex="-1"></a>           , <span class="at">fill =</span> m</span>
<span id="cb337-49"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-49" tabindex="-1"></a>           , <span class="at">subtitle =</span> <span class="st">&quot;Method 2B: Pooled Regression Using Random Effects&quot;</span>) <span class="sc">+</span></span>
<span id="cb337-50"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-50" tabindex="-1"></a>      <span class="fu">facet_wrap</span>(<span class="sc">~</span>Trait, <span class="at">nrow =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb337-51"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-51" tabindex="-1"></a>      <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb337-52"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-52" tabindex="-1"></a>      <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span></span>
<span id="cb337-53"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-53" tabindex="-1"></a>            , <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">1.2</span>), <span class="at">hjust =</span> .<span class="dv">5</span>)</span>
<span id="cb337-54"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-54" tabindex="-1"></a>            , <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">1.1</span>), <span class="at">hjust =</span> .<span class="dv">5</span>)</span>
<span id="cb337-55"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-55" tabindex="-1"></a>            , <span class="at">strip.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;black&quot;</span>)</span>
<span id="cb337-56"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-56" tabindex="-1"></a>            , <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">color =</span> <span class="st">&quot;white&quot;</span>)</span>
<span id="cb337-57"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-57" tabindex="-1"></a>            , <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>))</span>
<span id="cb337-58"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-58" tabindex="-1"></a>  <span class="fu">ggsave</span>(<span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/2b_ipd_mlm/%s/figures/overall simple effects/%s_%s_%s.png&quot;</span>, local_path, type, outcome, mod, cov), <span class="at">width =</span> <span class="dv">6</span>, <span class="at">height =</span> <span class="dv">6</span>)</span>
<span id="cb337-59"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-59" tabindex="-1"></a>}</span>
<span id="cb337-60"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-60" tabindex="-1"></a></span>
<span id="cb337-61"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-61" tabindex="-1"></a>ipd2b_se_plot <span class="ot">&lt;-</span> nested_ipd2b_simp <span class="sc">%&gt;%</span></span>
<span id="cb337-62"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-62" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>pred.rx) <span class="sc">%&gt;%</span></span>
<span id="cb337-63"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-63" tabindex="-1"></a>  <span class="fu">group_by</span>(type, Outcome, Moderator, Covariate) <span class="sc">%&gt;%</span></span>
<span id="cb337-64"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-64" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span></span>
<span id="cb337-65"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-65" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb337-66"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-66" tabindex="-1"></a>  <span class="co"># filter(Moderator== &quot;education&quot;) %&gt;%</span></span>
<span id="cb337-67"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-67" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">data =</span> <span class="fu">map</span>(data, <span class="sc">~</span>(.) <span class="sc">%&gt;%</span> <span class="fu">unnest</span>(pred.fx)),</span>
<span id="cb337-68"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb337-68" tabindex="-1"></a>         <span class="at">plot =</span> <span class="fu">pmap</span>(<span class="fu">list</span>(data, Outcome, Moderator, type, Covariate), simp_eff_fun))</span></code></pre></div>
</div>
<div id="study-specific-simple-effects-1" class="section level6 hasAnchor" number="4.2.2.7.2.4">
<h6><span class="header-section-number">4.2.2.7.2.4</span> Study-Specific Simple Effects<a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#study-specific-simple-effects-1" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<div class="sourceCode" id="cb338"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb338-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-1" tabindex="-1"></a>ipd2b_std_se_plot_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(df, outcome, trait, mod, cov, type){</span>
<span id="cb338-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-2" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(outcome, mod))</span>
<span id="cb338-3"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-3" tabindex="-1"></a>  o <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(outcome, outcomes<span class="sc">$</span>short_name, outcomes<span class="sc">$</span>long_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb338-4"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-4" tabindex="-1"></a>  trt <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(trait, traits<span class="sc">$</span>short_name, traits<span class="sc">$</span>long_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb338-5"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-5" tabindex="-1"></a>  cv <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(cov, covars<span class="sc">$</span>short_name, covars<span class="sc">$</span>long_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb338-6"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-6" tabindex="-1"></a>  m <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(mod, moders<span class="sc">$</span>short_name, moders<span class="sc">$</span>long_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb338-7"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-7" tabindex="-1"></a>  d <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">max</span>(<span class="fu">abs</span>(<span class="fu">min</span>(df<span class="sc">$</span>pred)), <span class="fu">abs</span>(<span class="fu">max</span>(df<span class="sc">$</span>pred))), <span class="dv">3</span>)</span>
<span id="cb338-8"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-8" tabindex="-1"></a>  <span class="co"># mini &lt;- if(d &gt; 2) .05 else 0-(d+(d/5)) </span></span>
<span id="cb338-9"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-9" tabindex="-1"></a>  <span class="co"># maxi &lt;- if(d &gt; 2) 2.05 else 0+d+(d/5)</span></span>
<span id="cb338-10"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-10" tabindex="-1"></a>  <span class="co"># lim &lt;- c(mini, maxi)</span></span>
<span id="cb338-11"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-11" tabindex="-1"></a>  <span class="co"># brk &lt;- if(d &gt; 2) c(0, 1, 2) else{round(c(0-d-(d/10), 0, 0+d+(d/10)),2)}</span></span>
<span id="cb338-12"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-12" tabindex="-1"></a>  <span class="co"># lab &lt;- if(d &gt; 2){c(&quot;0&quot;, &quot;1&quot;, &quot;2&quot;)} else{str_remove(c(round(0-d-(d/10),2), 0, round(0+d+(d/10),2)), &quot;^0&quot;)}</span></span>
<span id="cb338-13"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-13" tabindex="-1"></a>  titl <span class="ot">&lt;-</span> <span class="cf">if</span>(mod <span class="sc">==</span> <span class="st">&quot;none&quot;</span>){<span class="fu">sprintf</span>(<span class="st">&quot;%s: %s&quot;</span>, o, trt)} <span class="cf">else</span> {<span class="fu">sprintf</span>(<span class="st">&quot;%s: %s x %s Simple Effects&quot;</span>, o, trt, m)}</span>
<span id="cb338-14"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-14" tabindex="-1"></a>  <span class="co"># colnames(df)[colnames(df) == mod] &lt;- &quot;mod_value&quot;</span></span>
<span id="cb338-15"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-15" tabindex="-1"></a>  df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">study =</span> <span class="fu">mapvalues</span>(study, <span class="fu">c</span>(<span class="st">&quot;BASE-I&quot;</span>, <span class="st">&quot;OCTO-TWIN&quot;</span>), <span class="fu">c</span>(<span class="st">&quot;BASE&quot;</span>, <span class="st">&quot;OCTO-Twin&quot;</span>))) </span>
<span id="cb338-16"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-16" tabindex="-1"></a>  df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> unclass <span class="sc">%&gt;%</span> data.frame</span>
<span id="cb338-17"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-17" tabindex="-1"></a>  df<span class="sc">$</span>mod_value <span class="ot">&lt;-</span> df[,mod]</span>
<span id="cb338-18"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-18" tabindex="-1"></a>  df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span><span class="fu">all_of</span>(mod)) <span class="sc">%&gt;%</span> as_tibble</span>
<span id="cb338-19"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-19" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">class</span>(df<span class="sc">$</span>mod_value) <span class="sc">==</span> <span class="st">&quot;factor&quot;</span>){df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">mod_fac =</span> <span class="fu">factor</span>(mod_value))} </span>
<span id="cb338-20"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-20" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">class</span>(df<span class="sc">$</span>mod_value) <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;factor&quot;</span>, <span class="st">&quot;character&quot;</span>)){df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">mod_fac =</span> <span class="fu">factor</span>(mod_value))} </span>
<span id="cb338-21"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-21" tabindex="-1"></a>    <span class="cf">else</span> {</span>
<span id="cb338-22"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-22" tabindex="-1"></a>      <span class="cf">if</span>(mod <span class="sc">==</span> <span class="st">&quot;age&quot;</span>) df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">mod_fac =</span> <span class="fu">factor</span>(mod_value, <span class="at">levels =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">10</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;-10 yrs&quot;</span>, <span class="st">&quot;M&quot;</span>, <span class="st">&quot;+10 yrs&quot;</span>)))</span>
<span id="cb338-23"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-23" tabindex="-1"></a>      <span class="cf">else</span> <span class="cf">if</span>(mod <span class="sc">==</span> <span class="st">&quot;baseYear&quot;</span>) df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">mod_fac =</span> <span class="fu">factor</span>(mod_value, <span class="at">levels =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">10</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;1990&quot;</span>, <span class="st">&quot;200)0&quot;</span>, <span class="st">&quot;2010&quot;</span>)))</span>
<span id="cb338-24"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-24" tabindex="-1"></a>      <span class="cf">else</span> <span class="cf">if</span>(mod <span class="sc">==</span> <span class="st">&quot;baseAge&quot;</span>) df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">mod_fac =</span> <span class="fu">factor</span>(mod_value, <span class="at">levels =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">10</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;50&quot;</span>, <span class="st">&quot;60&quot;</span>, <span class="st">&quot;70&quot;</span>)))</span>
<span id="cb338-25"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-25" tabindex="-1"></a>      <span class="cf">else</span> <span class="cf">if</span>(mod <span class="sc">==</span> <span class="st">&quot;predInt&quot;</span>) df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">mod_fac =</span> <span class="fu">factor</span>(mod_value, <span class="at">levels =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">5</span>, <span class="dv">0</span>, <span class="dv">5</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;-5 yrs&quot;</span>, <span class="st">&quot;5 yrs&quot;</span>, <span class="st">&quot;+5 yrs&quot;</span>)))</span>
<span id="cb338-26"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-26" tabindex="-1"></a>      <span class="cf">else</span> <span class="cf">if</span>(mod <span class="sc">==</span> <span class="st">&quot;education&quot;</span>) df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">mod_fac =</span> <span class="fu">factor</span>(mod_value, <span class="at">levels =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">5</span>, <span class="dv">0</span>, <span class="dv">5</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;-5 yrs&quot;</span>, <span class="st">&quot;12 years&quot;</span>, <span class="st">&quot;+5 yrs&quot;</span>)))</span>
<span id="cb338-27"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-27" tabindex="-1"></a>      <span class="cf">else</span> df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">mod_fac =</span> <span class="fu">factor</span>(mod_value, <span class="at">levels =</span> <span class="fu">unique</span>(mod_value), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;-1 SD&quot;</span>, <span class="st">&quot;M&quot;</span>, <span class="st">&quot;+1 SD&quot;</span>)))</span>
<span id="cb338-28"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-28" tabindex="-1"></a>    }</span>
<span id="cb338-29"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-29" tabindex="-1"></a>  std <span class="ot">&lt;-</span> <span class="fu">unique</span>(df<span class="sc">$</span>study)</span>
<span id="cb338-30"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-30" tabindex="-1"></a>  cols <span class="ot">&lt;-</span> (stdcolors <span class="sc">%&gt;%</span> <span class="fu">filter</span>(studies <span class="sc">%in%</span> std))<span class="sc">$</span>colors</span>
<span id="cb338-31"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-31" tabindex="-1"></a>  lt <span class="ot">&lt;-</span> (stdcolors <span class="sc">%&gt;%</span> <span class="fu">filter</span>(studies <span class="sc">%in%</span> std))<span class="sc">$</span>lt</span>
<span id="cb338-32"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-32" tabindex="-1"></a>  ht <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(df<span class="sc">$</span>mod_fac))</span>
<span id="cb338-33"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-33" tabindex="-1"></a>  mini <span class="ot">&lt;-</span> <span class="fu">floor</span>(<span class="fu">min</span>(df<span class="sc">$</span>pred)); maxi <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb338-34"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-34" tabindex="-1"></a>  df <span class="sc">%&gt;%</span></span>
<span id="cb338-35"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-35" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">study =</span> <span class="fu">factor</span>(study, <span class="at">levels =</span> stdcolors<span class="sc">$</span>studies),</span>
<span id="cb338-36"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-36" tabindex="-1"></a>           <span class="at">lower =</span> <span class="fu">ifelse</span>(lower <span class="sc">&lt;</span> mini, mini, lower),</span>
<span id="cb338-37"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-37" tabindex="-1"></a>           <span class="at">upper =</span> <span class="fu">ifelse</span>(upper <span class="sc">&gt;</span> maxi, <span class="dv">10</span>, upper),</span>
<span id="cb338-38"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-38" tabindex="-1"></a>           <span class="at">gr =</span> <span class="fu">ifelse</span>(study <span class="sc">==</span> <span class="st">&quot;Overall&quot;</span>, <span class="st">&quot;Overall&quot;</span>, <span class="st">&quot;study&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb338-39"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-39" tabindex="-1"></a>    <span class="fu">group_by</span>(study, mod_fac, p_value, gr) <span class="sc">%&gt;%</span></span>
<span id="cb338-40"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-40" tabindex="-1"></a>    <span class="fu">summarize_at</span>(<span class="fu">vars</span>(pred, lower, upper), mean) <span class="sc">%&gt;%</span></span>
<span id="cb338-41"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-41" tabindex="-1"></a>    <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb338-42"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-42" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> p_value</span>
<span id="cb338-43"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-43" tabindex="-1"></a>               , <span class="at">y =</span> pred</span>
<span id="cb338-44"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-44" tabindex="-1"></a>               , <span class="at">group  =</span> study))  <span class="sc">+</span></span>
<span id="cb338-45"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-45" tabindex="-1"></a>      <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(mini,maxi)</span>
<span id="cb338-46"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-46" tabindex="-1"></a>                         , <span class="at">breaks =</span> <span class="fu">seq</span>(mini, maxi, <span class="at">by =</span> <span class="dv">2</span>)</span>
<span id="cb338-47"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-47" tabindex="-1"></a>                         , <span class="at">labels =</span> <span class="fu">seq</span>(mini, maxi, <span class="at">by =</span> <span class="dv">2</span>)) <span class="sc">+</span></span>
<span id="cb338-48"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-48" tabindex="-1"></a>      <span class="fu">scale_linetype_manual</span>(<span class="at">values =</span> lt) <span class="sc">+</span></span>
<span id="cb338-49"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-49" tabindex="-1"></a>      <span class="fu">scale_color_manual</span>(<span class="at">values =</span> cols) <span class="sc">+</span></span>
<span id="cb338-50"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-50" tabindex="-1"></a>      <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> cols) <span class="sc">+</span></span>
<span id="cb338-51"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-51" tabindex="-1"></a>      <span class="fu">scale_size_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="dv">2</span>,.<span class="dv">8</span>)) <span class="sc">+</span> </span>
<span id="cb338-52"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-52" tabindex="-1"></a>      <span class="co"># geom_ribbon(aes(ymin = lower</span></span>
<span id="cb338-53"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-53" tabindex="-1"></a>      <span class="co">#                 , ymax = upper</span></span>
<span id="cb338-54"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-54" tabindex="-1"></a>      <span class="co">#                 , fill = study)</span></span>
<span id="cb338-55"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-55" tabindex="-1"></a>      <span class="co">#             , alpha = .25) +</span></span>
<span id="cb338-56"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-56" tabindex="-1"></a>      <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">linetype =</span> study, <span class="at">color =</span> study, <span class="at">size =</span> gr)) <span class="sc">+</span></span>
<span id="cb338-57"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-57" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Personality (POMP)&quot;</span></span>
<span id="cb338-58"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-58" tabindex="-1"></a>           , <span class="at">y =</span> <span class="fu">paste</span>(o, <span class="st">&quot;(POMP)&quot;</span>)</span>
<span id="cb338-59"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-59" tabindex="-1"></a>           , <span class="at">title =</span> titl</span>
<span id="cb338-60"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-60" tabindex="-1"></a>           , <span class="at">linetype =</span> <span class="st">&quot;Study&quot;</span></span>
<span id="cb338-61"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-61" tabindex="-1"></a>           , <span class="at">color =</span> <span class="st">&quot;Study&quot;</span></span>
<span id="cb338-62"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-62" tabindex="-1"></a>           , <span class="at">fill =</span> <span class="st">&quot;Study&quot;</span></span>
<span id="cb338-63"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-63" tabindex="-1"></a>           , <span class="at">subtitle =</span> <span class="st">&quot;Method 2B: Pooled Regression Using Random Effects&quot;</span>) <span class="sc">+</span></span>
<span id="cb338-64"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-64" tabindex="-1"></a>      <span class="fu">guides</span>(<span class="at">size =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb338-65"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-65" tabindex="-1"></a>      <span class="fu">facet_wrap</span>(<span class="sc">~</span>mod_fac, <span class="at">nrow =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb338-66"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-66" tabindex="-1"></a>      <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb338-67"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-67" tabindex="-1"></a>      <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span></span>
<span id="cb338-68"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-68" tabindex="-1"></a>            , <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">1.2</span>), <span class="at">hjust =</span> .<span class="dv">5</span>)</span>
<span id="cb338-69"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-69" tabindex="-1"></a>            , <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">1.1</span>), <span class="at">hjust =</span> .<span class="dv">5</span>)</span>
<span id="cb338-70"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-70" tabindex="-1"></a>            , <span class="at">strip.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;black&quot;</span>)</span>
<span id="cb338-71"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-71" tabindex="-1"></a>            , <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">color =</span> <span class="st">&quot;white&quot;</span>)</span>
<span id="cb338-72"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-72" tabindex="-1"></a>            , <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>))</span>
<span id="cb338-73"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-73" tabindex="-1"></a>  <span class="fu">ggsave</span>(<span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/2b_ipd_mlm/%s/figures/study specific simple effects/%s_%s_%s_%s.png&quot;</span>, local_path, type, outcome, trt, mod, cov), <span class="at">width =</span> <span class="dv">3</span><span class="sc">*</span>ht, <span class="at">height =</span> <span class="dv">5</span>)</span>
<span id="cb338-74"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-74" tabindex="-1"></a>}</span>
<span id="cb338-75"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-75" tabindex="-1"></a></span>
<span id="cb338-76"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-76" tabindex="-1"></a>nested_ipd2b_simp <span class="sc">%&gt;%</span></span>
<span id="cb338-77"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-77" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>Moderator <span class="sc">%in%</span> stdyModers<span class="sc">$</span>short_name) <span class="sc">%&gt;%</span></span>
<span id="cb338-78"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-78" tabindex="-1"></a>  <span class="co"># filter(map_lgl(pred.rx, ~!is.null(.)))</span></span>
<span id="cb338-79"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-79" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pred.fx =</span> <span class="fu">map</span>(pred.fx, <span class="sc">~</span>(.) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">study =</span> <span class="st">&quot;Overall&quot;</span>)),</span>
<span id="cb338-80"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-80" tabindex="-1"></a>         <span class="at">comb.fx =</span> <span class="fu">map2</span>(pred.fx, pred.rx, full_join)) <span class="sc">%&gt;%</span></span>
<span id="cb338-81"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-81" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>pred.fx, <span class="sc">-</span>pred.rx) <span class="sc">%&gt;%</span></span>
<span id="cb338-82"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-82" tabindex="-1"></a>  <span class="co"># filter(Moderator %in% c(&quot;age&quot;, &quot;education&quot;)) %&gt;%</span></span>
<span id="cb338-83"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb338-83" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">pmap</span>(<span class="fu">list</span>(comb.fx, Outcome, Trait, Moderator, Covariate, type), ipd2b_std_se_plot_fun))</span></code></pre></div>
<div class="sourceCode" id="cb339"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb339-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb339-1" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;~/Documents/projects/data synthesis/crystallized/results/2b_ipd_mlm/Frequentist/models/crystallized_C_scale_all.RData&quot;</span>)</span>
<span id="cb339-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb339-2" tabindex="-1"></a><span class="fu">fixef</span>(m)</span></code></pre></div>
<pre><code>##           (Intercept)               p_value                   age          genderFemale             education 
##           6.737893882           0.070935261           0.001625964           0.103872146           0.255833361 
##            scaleBFI-S          scaleEysenck         scaleIPIP NEO             scaleMIDI           scaleTDA-40 
##           1.445698251           1.649520347          -0.586613200          -2.027132359          -1.593313674 
##    p_value:scaleBFI-S  p_value:scaleEysenck p_value:scaleIPIP NEO     p_value:scaleMIDI   p_value:scaleTDA-40 
##          -0.066244543          -0.213937506          -0.115922216           0.012948027          -0.043546168</code></pre>
<div class="sourceCode" id="cb341"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb341-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb341-1" tabindex="-1"></a>cntrm <span class="ot">&lt;-</span> <span class="fu">rbind</span>(</span>
<span id="cb341-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb341-2" tabindex="-1"></a>  <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="fu">rep</span>(<span class="dv">0</span>,<span class="dv">13</span>)) <span class="co"># NEO FFI</span></span>
<span id="cb341-3"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb341-3" tabindex="-1"></a>  , <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="fu">rep</span>(<span class="dv">0</span>,<span class="dv">8</span>),<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>) <span class="co"># BFI-S</span></span>
<span id="cb341-4"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb341-4" tabindex="-1"></a>  , <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="fu">rep</span>(<span class="dv">0</span>,<span class="dv">9</span>),<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>) <span class="co"># Eysenck</span></span>
<span id="cb341-5"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb341-5" tabindex="-1"></a>  , <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="fu">rep</span>(<span class="dv">0</span>,<span class="dv">10</span>),<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>) <span class="co"># IPIP NEO</span></span>
<span id="cb341-6"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb341-6" tabindex="-1"></a>  , <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="fu">rep</span>(<span class="dv">0</span>,<span class="dv">11</span>),<span class="dv">1</span>,<span class="dv">0</span>) <span class="co"># MIDI</span></span>
<span id="cb341-7"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb341-7" tabindex="-1"></a>  , <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="fu">rep</span>(<span class="dv">0</span>,<span class="dv">12</span>),<span class="dv">1</span>) <span class="co"># TDA-40</span></span>
<span id="cb341-8"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb341-8" tabindex="-1"></a>); <span class="fu">rownames</span>(cntrm) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;NEO-FFI&quot;</span>, <span class="st">&quot;BFI-S&quot;</span>, <span class="st">&quot;Eysenck&quot;</span>, <span class="st">&quot;IPIP NEO&quot;</span>, <span class="st">&quot;MIDI&quot;</span>, <span class="st">&quot;TDA-40&quot;</span>)</span>
<span id="cb341-9"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb341-9" tabindex="-1"></a></span>
<span id="cb341-10"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb341-10" tabindex="-1"></a>(multcomp<span class="sc">::</span><span class="fu">glht</span>(m, cntrm) <span class="sc">%&gt;%</span> <span class="co"># multcomp hypothesis function</span></span>
<span id="cb341-11"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb341-11" tabindex="-1"></a>      <span class="fu">confint</span>(., <span class="at">calpha =</span> multcomp<span class="sc">::</span><span class="fu">univariate_calpha</span>()))<span class="sc">$</span>confint <span class="sc">%&gt;%</span></span>
<span id="cb341-12"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb341-12" tabindex="-1"></a>      <span class="fu">data.frame</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb341-13"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb341-13" tabindex="-1"></a>  <span class="fu">data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb341-14"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb341-14" tabindex="-1"></a>  <span class="fu">rownames_to_column</span>(<span class="st">&quot;cntr&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb341-15"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb341-15" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">term =</span> <span class="fu">rownames</span>(cntrm)) <span class="sc">%&gt;%</span> </span>
<span id="cb341-16"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb341-16" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>cntr) <span class="sc">%&gt;%</span></span>
<span id="cb341-17"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb341-17" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">est =</span> <span class="fu">sprintf</span>(<span class="st">&quot;b = %.2f, 95%% CI [%.2f, %.2f]&quot;</span>, Estimate, lwr, upr))</span></code></pre></div>
<pre><code>##       Estimate         lwr         upr     term                              est
## 1  0.070935261  0.01391155  0.12795897  NEO-FFI    b = 0.07, 95% CI [0.01, 0.13]
## 2  0.004690717 -0.09200863  0.10139006    BFI-S   b = 0.00, 95% CI [-0.09, 0.10]
## 3 -0.143002245 -0.24210542 -0.04389907  Eysenck b = -0.14, 95% CI [-0.24, -0.04]
## 4 -0.044986955 -0.13309875  0.04312484 IPIP NEO  b = -0.04, 95% CI [-0.13, 0.04]
## 5  0.083883288  0.04542256  0.12234401     MIDI    b = 0.08, 95% CI [0.05, 0.12]
## 6  0.027389093 -0.01026313  0.06504132   TDA-40   b = 0.03, 95% CI [-0.01, 0.07]</code></pre>
<div class="sourceCode" id="cb343"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb343-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb343-1" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;~/Documents/projects/data synthesis/crystallized/results/2b_ipd_mlm/Frequentist/models/crystallized_A_baseYear_all.RData&quot;</span>)</span>
<span id="cb343-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb343-2" tabindex="-1"></a><span class="fu">fixef</span>(m)</span></code></pre></div>
<pre><code>##      (Intercept)          p_value              age     genderFemale        education         baseYear p_value:baseYear 
##      6.631036181     -0.019513289      0.002262725      0.103624853      0.274346670     -0.118874391      0.008497705</code></pre>
<div class="sourceCode" id="cb345"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb345-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb345-1" tabindex="-1"></a>cntrm <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb345-2"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb345-2" tabindex="-1"></a>  <span class="st">&quot;p_value = 0&quot;</span> <span class="co"># 2000</span></span>
<span id="cb345-3"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb345-3" tabindex="-1"></a>  , <span class="st">&quot;p_value - 10*p_value:baseYear = 0&quot;</span> <span class="co"># 1990</span></span>
<span id="cb345-4"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb345-4" tabindex="-1"></a>  , <span class="st">&quot;p_value + 10*p_value:baseYear = 0&quot;</span> <span class="co"># 2010</span></span>
<span id="cb345-5"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb345-5" tabindex="-1"></a>  ); <span class="fu">names</span>(cntrm) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2000</span>, <span class="dv">1990</span>, <span class="dv">2010</span>)</span>
<span id="cb345-6"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb345-6" tabindex="-1"></a>(multcomp<span class="sc">::</span><span class="fu">glht</span>(m, cntrm) <span class="sc">%&gt;%</span> <span class="co"># multcomp hypothesis function</span></span>
<span id="cb345-7"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb345-7" tabindex="-1"></a>      <span class="fu">confint</span>(., <span class="at">calpha =</span> multcomp<span class="sc">::</span><span class="fu">univariate_calpha</span>()))<span class="sc">$</span>confint <span class="sc">%&gt;%</span></span>
<span id="cb345-8"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb345-8" tabindex="-1"></a>      <span class="fu">data.frame</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb345-9"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb345-9" tabindex="-1"></a>  <span class="fu">data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb345-10"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb345-10" tabindex="-1"></a>  <span class="fu">rownames_to_column</span>(<span class="st">&quot;cntr&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb345-11"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb345-11" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">term =</span> <span class="fu">names</span>(cntrm)) <span class="sc">%&gt;%</span> </span>
<span id="cb345-12"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb345-12" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>cntr) <span class="sc">%&gt;%</span></span>
<span id="cb345-13"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb345-13" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">est =</span> <span class="fu">sprintf</span>(<span class="st">&quot;b = %.2f, 95%% CI [%.2f, %.2f]&quot;</span>, Estimate, lwr, upr))</span></code></pre></div>
<pre><code>##      Estimate         lwr          upr term                              est
## 1 -0.01951329 -0.04827826  0.009251684 2000  b = -0.02, 95% CI [-0.05, 0.01]
## 2 -0.10449034 -0.17448848 -0.034492203 1990 b = -0.10, 95% CI [-0.17, -0.03]
## 3  0.06546376  0.03595811  0.094969409 2010    b = 0.07, 95% CI [0.04, 0.09]</code></pre>
</div>
</div>
</div>
<div id="sample-results-section-3" class="section level4 hasAnchor" number="4.2.2.8">
<h4><span class="header-section-number">4.2.2.8</span> Sample Results Section<a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#sample-results-section-3" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>We examined estimates of overall prospective associations between Big Five personality characteristics and crystallized abilities as well as participant and sample-level moderators of those associations using fully pooled, one-stage multilevel models with individual participant data in 11 studies. Multilevel models allowed us to estimate overall, sample-specific, and heterogeneity estimates as well as both participant-level and sample-level moderators of Big Five personality characteristic-crystallized abilities associations. Heterogeneity estimates were estimated for both personality-cognitive ability associations (<span class="math inline">\(\tau_{11}^2\)</span>) as well as for participant-level moderators (<span class="math inline">\(\tau_{22}^2\)</span>; see online materials). Fully adjusted prospective Big Five personality characteristic-crystallized abilities associations and participant- and sample-level moderators of these associations can be found in the fourth section of Table S4.</p>
<table class=" lightable-classic" style="color: black; font-family: Times New Roman; width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-54">Table 4.5: </span>2B Pooled One Stage Models with Random Effects: Fixed Effect Estimates of Fully Adjusted Personality-Crystallized Domain Associations
</caption>
<thead>
<tr>
<th style="empty-cells: hide;" colspan="1">
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
E
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
A
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
C
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
N
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
O
</div>
</th>
</tr>
<tr>
<th style="text-align:right;">
Term
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
</tr>
</thead>
<tbody>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>None</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Personality
</td>
<td style="text-align:center;">
0.01<br>[-0.02, 0.05]
</td>
<td style="text-align:center;">
0.00<br>[-0.03, 0.03]
</td>
<td style="text-align:center;">
0.01<br>[-0.04, 0.07]
</td>
<td style="text-align:center;">
<strong>-0.06<br>[-0.09, -0.03]</strong>
</td>
<td style="text-align:center;">
<strong>0.16<br>[0.07, 0.25]</strong>
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Age</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Age
</td>
<td style="text-align:center;">
0.001<br>[-0.03, 0.03]
</td>
<td style="text-align:center;">
0.000<br>[-0.09, 0.09]
</td>
<td style="text-align:center;">
-0.001<br>[-0.01, 0.01]
</td>
<td style="text-align:center;">
0.00<br>[-0.00, 0.01]
</td>
<td style="text-align:center;">
0.001<br>[-0.09, 0.09]
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Gender</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Gender (Male v Female)
</td>
<td style="text-align:center;">
<strong>0.05<br>[0.01, 0.09]</strong>
</td>
<td style="text-align:center;">
0.02<br>[-0.02, 0.06]
</td>
<td style="text-align:center;">
0.01<br>[-0.03, 0.06]
</td>
<td style="text-align:center;">
-0.02<br>[-0.05, 0.01]
</td>
<td style="text-align:center;">
-0.000<br>[-0.06, 0.06]
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Education</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Education (Years)
</td>
<td style="text-align:center;">
-0.01<br>[-0.07, 0.06]
</td>
<td style="text-align:center;">
-0.01<br>[-0.02, 0.01]
</td>
<td style="text-align:center;">
0.01<br>[-0.02, 0.04]
</td>
<td style="text-align:center;">
0.00<br>[-0.01, 0.01]
</td>
<td style="text-align:center;">
-0.01<br>[-0.12, 0.09]
</td>
</tr>
<tr grouplength="2">
<td colspan="6" style="border-bottom: 0;">
<strong>Continent</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Continent (North America v Europe)
</td>
<td style="text-align:center;">
<strong>0.07<br>[0.00, 0.14]</strong>
</td>
<td style="text-align:center;">
-0.12<br>[-0.26, 0.03]
</td>
<td style="text-align:center;">
-0.12<br>[-0.24, 0.00]
</td>
<td style="text-align:center;">
-0.03<br>[-0.06, 0.01]
</td>
<td style="text-align:center;">
0.14<br>[-0.08, 0.36]
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Continent (North America v Australia)
</td>
<td style="text-align:center;">
0.03<br>[-0.05, 0.10]
</td>
<td style="text-align:center;">
-0.01<br>[-0.18, 0.15]
</td>
<td style="text-align:center;">
-0.02<br>[-0.16, 0.11]
</td>
<td style="text-align:center;">
<strong>-0.11<br>[-0.14, -0.08]</strong>
</td>
<td style="text-align:center;">
0.11<br>[-0.19, 0.40]
</td>
</tr>
<tr grouplength="4">
<td colspan="6" style="border-bottom: 0;">
<strong>Country</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Country (United States v Germany)
</td>
<td style="text-align:center;">
0.08<br>[-0.02, 0.18]
</td>
<td style="text-align:center;">
-0.01<br>[-0.10, 0.08]
</td>
<td style="text-align:center;">
-0.05<br>[-0.19, 0.09]
</td>
<td style="text-align:center;">
-0.02<br>[-0.09, 0.05]
</td>
<td style="text-align:center;">
0.12<br>[-0.15, 0.38]
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Country (United States v Sweden)
</td>
<td style="text-align:center;">
0.07<br>[-0.03, 0.16]
</td>
<td style="text-align:center;">
<strong>-0.23<br>[-0.35, -0.12]</strong>
</td>
<td style="text-align:center;">
<strong>-0.20<br>[-0.34, -0.06]</strong>
</td>
<td style="text-align:center;">
-0.05<br>[-0.11, 0.01]
</td>
<td style="text-align:center;">
0.22<br>[-0.13, 0.58]
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Country (United States v The Netherlands)
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
-0.02<br>[-0.06, 0.03]
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Country (United States v Australia)
</td>
<td style="text-align:center;">
0.02<br>[-0.06, 0.11]
</td>
<td style="text-align:center;">
-0.01<br>[-0.05, 0.03]
</td>
<td style="text-align:center;">
-0.02<br>[-0.13, 0.08]
</td>
<td style="text-align:center;">
<strong>-0.11<br>[-0.14, -0.08]</strong>
</td>
<td style="text-align:center;">
0.11<br>[-0.21, 0.43]
</td>
</tr>
<tr grouplength="6">
<td colspan="6" style="border-bottom: 0;">
<strong>Personality Scale</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Scale (NEO-FFI v DPQ)
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
0.01<br>[-0.09, 0.11]
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Scale (NEO-FFI v Eysenck)
</td>
<td style="text-align:center;">
0.09<br>[-0.01, 0.18]
</td>
<td style="text-align:center;">
-0.24<br>[-9.45, 8.97]
</td>
<td style="text-align:center;">
<strong>-0.21<br>[-0.33, -0.10]</strong>
</td>
<td style="text-align:center;">
-0.02<br>[-0.11, 0.08]
</td>
<td style="text-align:center;">
0.14<br>[-0.50, 0.77]
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Scale (NEO-FFI v MIDI)
</td>
<td style="text-align:center;">
-0.00<br>[-0.08, 0.08]
</td>
<td style="text-align:center;">
-0.01<br>[-9.22, 9.20]
</td>
<td style="text-align:center;">
0.01<br>[-0.06, 0.08]
</td>
<td style="text-align:center;">
0.03<br>[-0.06, 0.12]
</td>
<td style="text-align:center;">
-0.07<br>[-0.70, 0.55]
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Scale (NEO-FFI v BFI-S)
</td>
<td style="text-align:center;">
<strong>0.12<br>[0.01, 0.23]</strong>
</td>
<td style="text-align:center;">
-0.01<br>[-9.22, 9.20]
</td>
<td style="text-align:center;">
-0.07<br>[-0.18, 0.05]
</td>
<td style="text-align:center;">
0.03<br>[-0.09, 0.14]
</td>
<td style="text-align:center;">
-0.12<br>[-0.75, 0.51]
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Scale (NEO-FFI v IPIP NEO)
</td>
<td style="text-align:center;">
0.11<br>[-0.01, 0.22]
</td>
<td style="text-align:center;">
0.01<br>[-9.20, 9.22]
</td>
<td style="text-align:center;">
<strong>-0.12<br>[-0.22, -0.01]</strong>
</td>
<td style="text-align:center;">
-0.00<br>[-0.12, 0.12]
</td>
<td style="text-align:center;">
0.01<br>[-0.61, 0.64]
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Scale (NEO-FFI v TDA-40)
</td>
<td style="text-align:center;">
0.04<br>[-0.04, 0.13]
</td>
<td style="text-align:center;">
-0.01<br>[-9.22, 9.20]
</td>
<td style="text-align:center;">
-0.04<br>[-0.11, 0.02]
</td>
<td style="text-align:center;">
-0.08<br>[-0.17, 0.01]
</td>
<td style="text-align:center;">
0.02<br>[-0.60, 0.65]
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Baseline Age</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Study Baseline Age
</td>
<td style="text-align:center;">
-0.001<br>[-0.00, 0.00]
</td>
<td style="text-align:center;">
0.00<br>[-0.00, 0.01]
</td>
<td style="text-align:center;">
0.00<br>[-0.00, 0.01]
</td>
<td style="text-align:center;">
0.001<br>[-0.001, 0.00]
</td>
<td style="text-align:center;">
-0.000<br>[-0.01, 0.01]
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Baseline Year</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Study Baseline Year
</td>
<td style="text-align:center;">
-0.000<br>[-0.01, 0.00]
</td>
<td style="text-align:center;">
<strong>0.01<br>[0.00, 0.01]</strong>
</td>
<td style="text-align:center;">
0.01<br>[-0.00, 0.01]
</td>
<td style="text-align:center;">
0.001<br>[-0.00, 0.01]
</td>
<td style="text-align:center;">
-0.01<br>[-0.02, 0.00]
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Prediction Interval</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Prediction Interval
</td>
<td style="text-align:center;">
-0.00<br>[-0.01, 0.01]
</td>
<td style="text-align:center;">
<strong>-0.01<br>[-0.02, -0.00]</strong>
</td>
<td style="text-align:center;">
-0.01<br>[-0.02, 0.01]
</td>
<td style="text-align:center;">
-0.00<br>[-0.01, 0.01]
</td>
<td style="text-align:center;">
0.01<br>[-0.02, 0.04]
</td>
</tr>
</tbody>
</table>
<p>Of the 20 key terms (five main effects and 15 moderators) tested at the participant-level, two (10%) were significant. Openness to experience was associated with later crystallized abilities across samples, and gender moderated the relationship between Extraversion and cognitive ability (b = 0.05, 95% CI [0.01, 0.09]). For the latter, we examined simple effects plots for gender moderating of extraversion and crystallized abilities. The black line in Figure S5 displays the fully adjusted association across genders. In this case, the interaction indicates that although the association was null for both males (b = -0.02, 95% CI [-0.04, 0.01]) and females (b = 0.03, 95% CI [-0.01, 0.08]), the associations did differ from one another.</p>
<div class="figure"><span style="display:block;" id="fig:unnamed-chunk-60"></span>
<img src="../../results/2b_ipd_mlm/Frequentist/figures/study specific simple effects/crystallized_Extraversion_gender_all.png" alt="Figure S5. Prospective sample-specific and overall associations between extraversion (in POMP units, 0-10) and crystallized abilities (in POMP units, 0-10) across genders (male, female). Different colors and line types indicate different samples. Thicker, black lines indicate the average association across samples, while thinner lines indicate sample-specific associations." width="900" />
<p class="caption">
Figure 4.3: Figure S5. Prospective sample-specific and overall associations between extraversion (in POMP units, 0-10) and crystallized abilities (in POMP units, 0-10) across genders (male, female). Different colors and line types indicate different samples. Thicker, black lines indicate the average association across samples, while thinner lines indicate sample-specific associations.
</p>
</div>
<p>Next, we examined the sample-specific effects to see how consistent associations were across samples. Figure S6 presents the forest plot of fully adjusted sample-specific and overall prospective associations between the Big Five personality characteristics and crystallized abilities. As shown in the forest plot, openness showed the most consistent association with crystallized ability, with five of seven samples being positively and significantly associated with crystallized abilities. Other prospective associations, such as those with extraversion, agreeableness, and conscientiousness, were less consistent, with at least one significant association in different directions across samples. For example, although there was no overall association between conscientiousness and crystallized abilities, SATSA had a significant negative association, and HILDA and HRS had positive associations.</p>
<div class="figure"><span style="display:block;" id="fig:unnamed-chunk-61"></span>
<img src="../../results/2b_ipd_mlm/Frequentist/figures/study specific forest/crystallized_none_all.png" alt="Figure S6. Forest plot of fully adjusted prospective associations between Big Five personality characteristics and crystallized abilities across samples for using one-stage pooled integrative data analysis via effects coded contrasts. Overall point estimates (squares) represent the grand-mean estimates of the association across samples, while sample point estimates represent regression terms or linear combinations of regression terms. Error bars capture the 95% CI around the point estimate. Arrows indicate the confidence band was truncated to better visualize the estimates." width="1500" />
<p class="caption">
Figure 4.4: Figure S6. Forest plot of fully adjusted prospective associations between Big Five personality characteristics and crystallized abilities across samples for using one-stage pooled integrative data analysis via effects coded contrasts. Overall point estimates (squares) represent the grand-mean estimates of the association across samples, while sample point estimates represent regression terms or linear combinations of regression terms. Error bars capture the 95% CI around the point estimate. Arrows indicate the confidence band was truncated to better visualize the estimates.
</p>
</div>
<p>Finally, we can also examine the consistency of simple effects across samples for each moderator. The thinner dashed and colored lines in Figure S5 display the fully adjusted predicted crystallized abilities levels at different levels of extraversion across samples for males and females. As noted above, the overall trend suggests a positive association for females and null association for males, such that women who were higher in extraversion tended to score better on crystallized / knowledge domain tasks and that these associations were quite consistent across samples. Women show a slight positive relationship in all samples but HRS and ROS. For men, the associations were also quite consistent, with all the samples showing significant negative associations but GSOEP, MAP, and OCTO-Twin, which showed positive associations.</p>
<p>We also examined sample-level moderators of the associations, which are displayed in Table S4 (fully adjusted) above. Across the 67 tested associations, 10 (14.93%) were significant. Some of these differences were a function of the personality scale, with for example, estimates of the association between Conscientiousness and crystallized / knowledge domain cognitive ability differing across scales. The NEO-FFI (b = 0.07, 95% CI [0.01, 0.13]) and MIDI (b = 0.08, 95% CI [0.05, 0.12] ) demonstrated positive associations; the IPIP NEO (b = -0.04, 95% CI [-0.13, 0.04]), BFI-S (b = 0.00, 95% CI [-0.09, 0.10]), and TDA-40 (b = 0.03, 95% CI [-0.01, 0.07]) demonstrated null associations; and the measure used in SATSA and OCTO-Twin (b = -0.14, 95% CI [-0.24, -0.04]) had a negative association. In addition, for Agreeableness, samples with earlier baseline years had more negative effects than samples with later baseline effects. For example, samples with baseline years around 1990 demonstrated a negative association (b = -0.10, 95% CI [-0.17, -0.03]), samples with baseline years around 2000 demonstrated a null association (b = -0.02, 95% CI [-0.05, 0.01]), and samples with baseline years around 2010 demonstrated a positive association (b = 0.07, 95% CI [0.04, 0.09]).</p>
<div class="sourceCode" id="cb347"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb347-1"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#cb347-1" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>()[<span class="fu">grepl</span>(<span class="st">&quot;ipd2&quot;</span>, <span class="fu">ls</span>())])</span></code></pre></div>

</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="runmodels.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="method-3-two-stage-individual-participant-meta-analysis.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/03-IPD_mega.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
