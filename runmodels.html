<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Method 1: Pooled One Stage Models without Study-Specific Effects | A Taxonomy of Data Synthesis: A Tutorial</title>
  <meta name="description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.37 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Method 1: Pooled One Stage Models without Study-Specific Effects | A Taxonomy of Data Synthesis: A Tutorial" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  <meta name="github-repo" content="emoriebeck/data-synthesis-tutorial" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Method 1: Pooled One Stage Models without Study-Specific Effects | A Taxonomy of Data Synthesis: A Tutorial" />
  
  <meta name="twitter:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  



<meta name="date" content="2024-05-16" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="cleaning.html"/>
<link rel="next" href="method-2-pooled-one-stage-models-with-study-specific-effects.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Workspace</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#packages"><i class="fa fa-check"></i><b>1.1</b> Packages</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#directory-path"><i class="fa fa-check"></i><b>1.2</b> Directory Path</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#introduction"><i class="fa fa-check"></i><b>1.3</b> Introduction</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#codebook"><i class="fa fa-check"></i><b>1.4</b> Codebook</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#navigating-this-tutorial"><i class="fa fa-check"></i><b>1.5</b> Navigating This Tutorial</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="cleaning.html"><a href="cleaning.html"><i class="fa fa-check"></i><b>2</b> Data Cleaning</a>
<ul>
<li class="chapter" data-level="2.1" data-path="cleaning.html"><a href="cleaning.html#berlin-aging-study-base-i"><i class="fa fa-check"></i><b>2.1</b> Berlin Aging Study (BASE-I)</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="cleaning.html"><a href="cleaning.html#load-data"><i class="fa fa-check"></i><b>2.1.1</b> Load Data</a></li>
<li class="chapter" data-level="2.1.2" data-path="cleaning.html"><a href="cleaning.html#recoding-reverse-scoring"><i class="fa fa-check"></i><b>2.1.2</b> Recoding &amp; Reverse Scoring</a></li>
<li class="chapter" data-level="2.1.3" data-path="cleaning.html"><a href="cleaning.html#covariates"><i class="fa fa-check"></i><b>2.1.3</b> Covariates</a></li>
<li class="chapter" data-level="2.1.4" data-path="cleaning.html"><a href="cleaning.html#personality-variables"><i class="fa fa-check"></i><b>2.1.4</b> Personality Variables</a></li>
<li class="chapter" data-level="2.1.5" data-path="cleaning.html"><a href="cleaning.html#outcome-variables"><i class="fa fa-check"></i><b>2.1.5</b> Outcome Variables</a></li>
<li class="chapter" data-level="2.1.6" data-path="cleaning.html"><a href="cleaning.html#combine-data"><i class="fa fa-check"></i><b>2.1.6</b> Combine Data</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="cleaning.html"><a href="cleaning.html#einstein-aging-study-eas"><i class="fa fa-check"></i><b>2.2</b> Einstein Aging Study (EAS)</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="cleaning.html"><a href="cleaning.html#load-data-1"><i class="fa fa-check"></i><b>2.2.1</b> Load Data</a></li>
<li class="chapter" data-level="2.2.2" data-path="cleaning.html"><a href="cleaning.html#recoding-reverse-scoring-1"><i class="fa fa-check"></i><b>2.2.2</b> Recoding &amp; Reverse Scoring</a></li>
<li class="chapter" data-level="2.2.3" data-path="cleaning.html"><a href="cleaning.html#covariates-1"><i class="fa fa-check"></i><b>2.2.3</b> Covariates</a></li>
<li class="chapter" data-level="2.2.4" data-path="cleaning.html"><a href="cleaning.html#personality-variables-1"><i class="fa fa-check"></i><b>2.2.4</b> Personality Variables</a></li>
<li class="chapter" data-level="2.2.5" data-path="cleaning.html"><a href="cleaning.html#outcome-variables-1"><i class="fa fa-check"></i><b>2.2.5</b> Outcome Variables</a></li>
<li class="chapter" data-level="2.2.6" data-path="cleaning.html"><a href="cleaning.html#combine-data-1"><i class="fa fa-check"></i><b>2.2.6</b> Combine Data</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="cleaning.html"><a href="cleaning.html#german-socioeconomic-panel-gsoep"><i class="fa fa-check"></i><b>2.3</b> German Socioeconomic Panel (GSOEP)</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="cleaning.html"><a href="cleaning.html#load-data-2"><i class="fa fa-check"></i><b>2.3.1</b> Load Data</a></li>
<li class="chapter" data-level="2.3.2" data-path="cleaning.html"><a href="cleaning.html#recoding-reverse-scoring-2"><i class="fa fa-check"></i><b>2.3.2</b> Recoding &amp; Reverse Scoring</a></li>
<li class="chapter" data-level="2.3.3" data-path="cleaning.html"><a href="cleaning.html#covariates-2"><i class="fa fa-check"></i><b>2.3.3</b> Covariates</a></li>
<li class="chapter" data-level="2.3.4" data-path="cleaning.html"><a href="cleaning.html#personality-variables-2"><i class="fa fa-check"></i><b>2.3.4</b> Personality Variables</a></li>
<li class="chapter" data-level="2.3.5" data-path="cleaning.html"><a href="cleaning.html#outcome-variables-2"><i class="fa fa-check"></i><b>2.3.5</b> Outcome Variables</a></li>
<li class="chapter" data-level="2.3.6" data-path="cleaning.html"><a href="cleaning.html#combine-data-2"><i class="fa fa-check"></i><b>2.3.6</b> Combine Data</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="cleaning.html"><a href="cleaning.html#household-income-and-labour-dynamics-in-australia-hilda"><i class="fa fa-check"></i><b>2.4</b> Household, Income, and Labour Dynamics in Australia (HILDA)</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="cleaning.html"><a href="cleaning.html#load-data-3"><i class="fa fa-check"></i><b>2.4.1</b> Load Data</a></li>
<li class="chapter" data-level="2.4.2" data-path="cleaning.html"><a href="cleaning.html#recoding-reverse-scoring-3"><i class="fa fa-check"></i><b>2.4.2</b> Recoding &amp; Reverse Scoring</a></li>
<li class="chapter" data-level="2.4.3" data-path="cleaning.html"><a href="cleaning.html#covariates-3"><i class="fa fa-check"></i><b>2.4.3</b> Covariates</a></li>
<li class="chapter" data-level="2.4.4" data-path="cleaning.html"><a href="cleaning.html#personality-variables-3"><i class="fa fa-check"></i><b>2.4.4</b> Personality Variables</a></li>
<li class="chapter" data-level="2.4.5" data-path="cleaning.html"><a href="cleaning.html#outcome-variables-3"><i class="fa fa-check"></i><b>2.4.5</b> Outcome Variables</a></li>
<li class="chapter" data-level="2.4.6" data-path="cleaning.html"><a href="cleaning.html#combine-data-3"><i class="fa fa-check"></i><b>2.4.6</b> Combine Data</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="cleaning.html"><a href="cleaning.html#health-and-retirement-study-hrs"><i class="fa fa-check"></i><b>2.5</b> Health and Retirement Study (HRS)</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="cleaning.html"><a href="cleaning.html#load-data-4"><i class="fa fa-check"></i><b>2.5.1</b> Load Data</a></li>
<li class="chapter" data-level="2.5.2" data-path="cleaning.html"><a href="cleaning.html#recoding-reverse-scoring-4"><i class="fa fa-check"></i><b>2.5.2</b> Recoding &amp; Reverse Scoring</a></li>
<li class="chapter" data-level="2.5.3" data-path="cleaning.html"><a href="cleaning.html#covariates-4"><i class="fa fa-check"></i><b>2.5.3</b> Covariates</a></li>
<li class="chapter" data-level="2.5.4" data-path="cleaning.html"><a href="cleaning.html#personality-variables-4"><i class="fa fa-check"></i><b>2.5.4</b> Personality Variables</a></li>
<li class="chapter" data-level="2.5.5" data-path="cleaning.html"><a href="cleaning.html#outcome-variables-4"><i class="fa fa-check"></i><b>2.5.5</b> Outcome Variables</a></li>
<li class="chapter" data-level="2.5.6" data-path="cleaning.html"><a href="cleaning.html#combine-data-4"><i class="fa fa-check"></i><b>2.5.6</b> Combine Data</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="cleaning.html"><a href="cleaning.html#longitudinal-aging-study-amsterdam-lasa"><i class="fa fa-check"></i><b>2.6</b> Longitudinal Aging Study Amsterdam (LASA)</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="cleaning.html"><a href="cleaning.html#load-data-5"><i class="fa fa-check"></i><b>2.6.1</b> Load Data</a></li>
<li class="chapter" data-level="2.6.2" data-path="cleaning.html"><a href="cleaning.html#recoding-reverse-scoring-5"><i class="fa fa-check"></i><b>2.6.2</b> Recoding &amp; Reverse Scoring</a></li>
<li class="chapter" data-level="2.6.3" data-path="cleaning.html"><a href="cleaning.html#covariates-5"><i class="fa fa-check"></i><b>2.6.3</b> Covariates</a></li>
<li class="chapter" data-level="2.6.4" data-path="cleaning.html"><a href="cleaning.html#personality-variables-5"><i class="fa fa-check"></i><b>2.6.4</b> Personality Variables</a></li>
<li class="chapter" data-level="2.6.5" data-path="cleaning.html"><a href="cleaning.html#outcome-variables-5"><i class="fa fa-check"></i><b>2.6.5</b> Outcome Variables</a></li>
<li class="chapter" data-level="2.6.6" data-path="cleaning.html"><a href="cleaning.html#combine-data-5"><i class="fa fa-check"></i><b>2.6.6</b> Combine Data</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="cleaning.html"><a href="cleaning.html#map"><i class="fa fa-check"></i><b>2.7</b> MAP</a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="cleaning.html"><a href="cleaning.html#load-data-6"><i class="fa fa-check"></i><b>2.7.1</b> Load Data</a></li>
<li class="chapter" data-level="2.7.2" data-path="cleaning.html"><a href="cleaning.html#recoding-reverse-scoring-6"><i class="fa fa-check"></i><b>2.7.2</b> Recoding &amp; Reverse Scoring</a></li>
<li class="chapter" data-level="2.7.3" data-path="cleaning.html"><a href="cleaning.html#covariates-6"><i class="fa fa-check"></i><b>2.7.3</b> Covariates</a></li>
<li class="chapter" data-level="2.7.4" data-path="cleaning.html"><a href="cleaning.html#personality-variables-6"><i class="fa fa-check"></i><b>2.7.4</b> Personality Variables</a></li>
<li class="chapter" data-level="2.7.5" data-path="cleaning.html"><a href="cleaning.html#outcome-variables-6"><i class="fa fa-check"></i><b>2.7.5</b> Outcome Variables</a></li>
<li class="chapter" data-level="2.7.6" data-path="cleaning.html"><a href="cleaning.html#combine-data-6"><i class="fa fa-check"></i><b>2.7.6</b> Combine Data</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="cleaning.html"><a href="cleaning.html#mars"><i class="fa fa-check"></i><b>2.8</b> MARS</a>
<ul>
<li class="chapter" data-level="2.8.1" data-path="cleaning.html"><a href="cleaning.html#recoding-reverse-scoring-7"><i class="fa fa-check"></i><b>2.8.1</b> Recoding &amp; Reverse Scoring</a></li>
<li class="chapter" data-level="2.8.2" data-path="cleaning.html"><a href="cleaning.html#covariates-7"><i class="fa fa-check"></i><b>2.8.2</b> Covariates</a></li>
<li class="chapter" data-level="2.8.3" data-path="cleaning.html"><a href="cleaning.html#personality-variables-7"><i class="fa fa-check"></i><b>2.8.3</b> Personality Variables</a></li>
<li class="chapter" data-level="2.8.4" data-path="cleaning.html"><a href="cleaning.html#outcome-variables-7"><i class="fa fa-check"></i><b>2.8.4</b> Outcome Variables</a></li>
<li class="chapter" data-level="2.8.5" data-path="cleaning.html"><a href="cleaning.html#combine-data-7"><i class="fa fa-check"></i><b>2.8.5</b> Combine Data</a></li>
</ul></li>
<li class="chapter" data-level="2.9" data-path="cleaning.html"><a href="cleaning.html#ros"><i class="fa fa-check"></i><b>2.9</b> ROS</a>
<ul>
<li class="chapter" data-level="2.9.1" data-path="cleaning.html"><a href="cleaning.html#load-data-7"><i class="fa fa-check"></i><b>2.9.1</b> Load Data</a></li>
<li class="chapter" data-level="2.9.2" data-path="cleaning.html"><a href="cleaning.html#recoding-reverse-scoring-8"><i class="fa fa-check"></i><b>2.9.2</b> Recoding &amp; Reverse Scoring</a></li>
<li class="chapter" data-level="2.9.3" data-path="cleaning.html"><a href="cleaning.html#covariates-8"><i class="fa fa-check"></i><b>2.9.3</b> Covariates</a></li>
<li class="chapter" data-level="2.9.4" data-path="cleaning.html"><a href="cleaning.html#personality-variables-8"><i class="fa fa-check"></i><b>2.9.4</b> Personality Variables</a></li>
<li class="chapter" data-level="2.9.5" data-path="cleaning.html"><a href="cleaning.html#outcome-variables-8"><i class="fa fa-check"></i><b>2.9.5</b> Outcome Variables</a></li>
<li class="chapter" data-level="2.9.6" data-path="cleaning.html"><a href="cleaning.html#combine-data-8"><i class="fa fa-check"></i><b>2.9.6</b> Combine Data</a></li>
</ul></li>
<li class="chapter" data-level="2.10" data-path="cleaning.html"><a href="cleaning.html#origins-of-the-variances-of-the-oldest-old-octogenarian-twins-octo-twin"><i class="fa fa-check"></i><b>2.10</b> Origins of the Variances of the Oldest-Old: Octogenarian Twins (OCTO-TWIN)</a>
<ul>
<li class="chapter" data-level="2.10.1" data-path="cleaning.html"><a href="cleaning.html#load-data-8"><i class="fa fa-check"></i><b>2.10.1</b> Load Data</a></li>
<li class="chapter" data-level="2.10.2" data-path="cleaning.html"><a href="cleaning.html#recoding-reverse-scoring-9"><i class="fa fa-check"></i><b>2.10.2</b> Recoding &amp; Reverse Scoring</a></li>
<li class="chapter" data-level="2.10.3" data-path="cleaning.html"><a href="cleaning.html#covariates-9"><i class="fa fa-check"></i><b>2.10.3</b> Covariates</a></li>
<li class="chapter" data-level="2.10.4" data-path="cleaning.html"><a href="cleaning.html#personality-variables-9"><i class="fa fa-check"></i><b>2.10.4</b> Personality Variables</a></li>
<li class="chapter" data-level="2.10.5" data-path="cleaning.html"><a href="cleaning.html#outcome-variables-9"><i class="fa fa-check"></i><b>2.10.5</b> Outcome Variables</a></li>
<li class="chapter" data-level="2.10.6" data-path="cleaning.html"><a href="cleaning.html#combine-data-9"><i class="fa fa-check"></i><b>2.10.6</b> Combine Data</a></li>
</ul></li>
<li class="chapter" data-level="2.11" data-path="cleaning.html"><a href="cleaning.html#swedish-adoption-twin-study-of-aging-satsa"><i class="fa fa-check"></i><b>2.11</b> Swedish Adoption Twin Study of Aging (SATSA)</a>
<ul>
<li class="chapter" data-level="2.11.1" data-path="cleaning.html"><a href="cleaning.html#load-data-9"><i class="fa fa-check"></i><b>2.11.1</b> Load Data</a></li>
<li class="chapter" data-level="2.11.2" data-path="cleaning.html"><a href="cleaning.html#recoding-reverse-scoring-10"><i class="fa fa-check"></i><b>2.11.2</b> Recoding &amp; Reverse Scoring</a></li>
<li class="chapter" data-level="2.11.3" data-path="cleaning.html"><a href="cleaning.html#covariates-10"><i class="fa fa-check"></i><b>2.11.3</b> Covariates</a></li>
<li class="chapter" data-level="2.11.4" data-path="cleaning.html"><a href="cleaning.html#personality-variables-10"><i class="fa fa-check"></i><b>2.11.4</b> Personality Variables</a></li>
<li class="chapter" data-level="2.11.5" data-path="cleaning.html"><a href="cleaning.html#outcome-variables-10"><i class="fa fa-check"></i><b>2.11.5</b> Outcome Variables</a></li>
<li class="chapter" data-level="2.11.6" data-path="cleaning.html"><a href="cleaning.html#combine-data-10"><i class="fa fa-check"></i><b>2.11.6</b> Combine Data</a></li>
</ul></li>
<li class="chapter" data-level="2.12" data-path="cleaning.html"><a href="cleaning.html#seattle-longitudinal-study-sls"><i class="fa fa-check"></i><b>2.12</b> Seattle Longitudinal Study (SLS)</a></li>
<li class="chapter" data-level="2.13" data-path="cleaning.html"><a href="cleaning.html#descriptives-of-all-studies"><i class="fa fa-check"></i><b>2.13</b> Descriptives of All Studies</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="runmodels.html"><a href="runmodels.html"><i class="fa fa-check"></i><b>3</b> Method 1: Pooled One Stage Models without Study-Specific Effects</a>
<ul>
<li class="chapter" data-level="3.1" data-path="runmodels.html"><a href="runmodels.html#step-1-combine-data"><i class="fa fa-check"></i><b>3.1</b> Step 1: Combine Data</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="runmodels.html"><a href="runmodels.html#study-level-moderators"><i class="fa fa-check"></i><b>3.1.1</b> Study-Level Moderators</a></li>
<li class="chapter" data-level="3.1.2" data-path="runmodels.html"><a href="runmodels.html#harmonize-data"><i class="fa fa-check"></i><b>3.1.2</b> Harmonize Data</a></li>
<li class="chapter" data-level="3.1.3" data-path="runmodels.html"><a href="runmodels.html#save-data-files"><i class="fa fa-check"></i><b>3.1.3</b> Save Data Files</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="runmodels.html"><a href="runmodels.html#step-2-run-models-and-extract-results"><i class="fa fa-check"></i><b>3.2</b> Step 2: Run Models and Extract Results</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="runmodels.html"><a href="runmodels.html#method-1a-linear-regression"><i class="fa fa-check"></i><b>3.2.1</b> Method 1A: Linear Regression</a></li>
<li class="chapter" data-level="3.2.2" data-path="runmodels.html"><a href="runmodels.html#part-1b-pooled-linear-regression-with-cluster-robust-standard-errors"><i class="fa fa-check"></i><b>3.2.2</b> Part 1B: Pooled Linear Regression with Cluster Robust Standard Errors</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="method-2-pooled-one-stage-models-with-study-specific-effects.html"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html"><i class="fa fa-check"></i><b>4</b> Method 2: Pooled One Stage Models with Study-Specific Effects</a>
<ul>
<li class="chapter" data-level="4.1" data-path="method-2-pooled-one-stage-models-with-study-specific-effects.html"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#step-1-combine-data-1"><i class="fa fa-check"></i><b>4.1</b> Step 1: Combine Data</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="method-2-pooled-one-stage-models-with-study-specific-effects.html"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#study-level-moderators-1"><i class="fa fa-check"></i><b>4.1.1</b> Study-Level Moderators</a></li>
<li class="chapter" data-level="4.1.2" data-path="method-2-pooled-one-stage-models-with-study-specific-effects.html"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#harmonize-data-1"><i class="fa fa-check"></i><b>4.1.2</b> Harmonize Data</a></li>
<li class="chapter" data-level="4.1.3" data-path="method-2-pooled-one-stage-models-with-study-specific-effects.html"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#save-data-files-1"><i class="fa fa-check"></i><b>4.1.3</b> Save Data Files</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="method-2-pooled-one-stage-models-with-study-specific-effects.html"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#step-2-run-models-and-extract-results-1"><i class="fa fa-check"></i><b>4.2</b> Step 2: Run Models and Extract Results</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="method-2-pooled-one-stage-models-with-study-specific-effects.html"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#method-2a-pooled-one-stage-models-with-dummy-codes"><i class="fa fa-check"></i><b>4.2.1</b> Method 2A: Pooled One Stage Models with Dummy Codes</a></li>
<li class="chapter" data-level="4.2.2" data-path="method-2-pooled-one-stage-models-with-study-specific-effects.html"><a href="method-2-pooled-one-stage-models-with-study-specific-effects.html#method-2b-pooled-one-stage-models-with-random-effects"><i class="fa fa-check"></i><b>4.2.2</b> Method 2B: Pooled One Stage Models with Random Effects</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html"><i class="fa fa-check"></i><b>5</b> Method 3: Two-Stage Individual Participant Meta-Analysis</a>
<ul>
<li class="chapter" data-level="5.1" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#analytic-plan-4"><i class="fa fa-check"></i><b>5.1</b> Analytic Plan</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#sample-specific-statistical-modeling"><i class="fa fa-check"></i><b>5.1.1</b> 1. Sample-Specific Statistical Modeling</a></li>
<li class="chapter" data-level="5.1.2" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#results-pooling-using-meta-analysis"><i class="fa fa-check"></i><b>5.1.2</b> 2. Results Pooling Using Meta-Analysis</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#step-1-combine-data-2"><i class="fa fa-check"></i><b>5.2</b> Step 1: Combine Data</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#study-level-moderators-2"><i class="fa fa-check"></i><b>5.2.1</b> Study-Level Moderators</a></li>
<li class="chapter" data-level="5.2.2" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#harmonize-data-2"><i class="fa fa-check"></i><b>5.2.2</b> Harmonize Data</a></li>
<li class="chapter" data-level="5.2.3" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#save-data-files-2"><i class="fa fa-check"></i><b>5.2.3</b> Save Data Files</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#step-2-run-models-for-each-study"><i class="fa fa-check"></i><b>5.3</b> Step 2: Run Models for Each Study</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#functions"><i class="fa fa-check"></i><b>5.3.1</b> Functions</a></li>
<li class="chapter" data-level="5.3.2" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#run-models"><i class="fa fa-check"></i><b>5.3.2</b> Run Models</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#step-3-meta-analyze-results"><i class="fa fa-check"></i><b>5.4</b> Step 3: Meta-Analyze Results</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#functions-1"><i class="fa fa-check"></i><b>5.4.1</b> Functions</a></li>
<li class="chapter" data-level="5.4.2" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#run-meta-analysis-and-meta-regression-models"><i class="fa fa-check"></i><b>5.4.2</b> Run Meta-Analysis and Meta-Regression Models</a></li>
<li class="chapter" data-level="5.4.3" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#compile-results-4"><i class="fa fa-check"></i><b>5.4.3</b> Compile Results</a></li>
<li class="chapter" data-level="5.4.4" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#figures-4"><i class="fa fa-check"></i><b>5.4.4</b> Figures</a></li>
<li class="chapter" data-level="5.4.5" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#table-meta-analytic-heterogeneity"><i class="fa fa-check"></i><b>5.4.5</b> Table Meta-Analytic Heterogeneity</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="method-3-two-stage-individual-participant-meta-analysis.html"><a href="method-3-two-stage-individual-participant-meta-analysis.html#sample-results-section-4"><i class="fa fa-check"></i><b>5.5</b> Sample Results Section</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="method-3-one-stage-individual-participant-analyses-reported-together.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html"><i class="fa fa-check"></i><b>6</b> Method 3: One-Stage Individual Participant Analyses Reported Together</a>
<ul>
<li class="chapter" data-level="6.1" data-path="method-3-one-stage-individual-participant-analyses-reported-together.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#analytic-plan-5"><i class="fa fa-check"></i><b>6.1</b> Analytic Plan</a></li>
<li class="chapter" data-level="6.2" data-path="method-3-one-stage-individual-participant-analyses-reported-together.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#step-1-combine-data-3"><i class="fa fa-check"></i><b>6.2</b> Step 1: Combine Data</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="method-3-one-stage-individual-participant-analyses-reported-together.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#harmonize-data-3"><i class="fa fa-check"></i><b>6.2.1</b> Harmonize Data</a></li>
<li class="chapter" data-level="6.2.2" data-path="method-3-one-stage-individual-participant-analyses-reported-together.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#save-data-files-3"><i class="fa fa-check"></i><b>6.2.2</b> Save Data Files</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="method-3-one-stage-individual-participant-analyses-reported-together.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#step-2-run-models-for-each-study-1"><i class="fa fa-check"></i><b>6.3</b> Step 2: Run Models for Each Study</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="method-3-one-stage-individual-participant-analyses-reported-together.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#functions-2"><i class="fa fa-check"></i><b>6.3.1</b> Functions</a></li>
<li class="chapter" data-level="6.3.2" data-path="method-3-one-stage-individual-participant-analyses-reported-together.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#run-models-1"><i class="fa fa-check"></i><b>6.3.2</b> Run Models</a></li>
<li class="chapter" data-level="6.3.3" data-path="method-3-one-stage-individual-participant-analyses-reported-together.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#compile-results-5"><i class="fa fa-check"></i><b>6.3.3</b> Compile Results</a></li>
<li class="chapter" data-level="6.3.4" data-path="method-3-one-stage-individual-participant-analyses-reported-together.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#figures-5"><i class="fa fa-check"></i><b>6.3.4</b> Figures</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="method-3-one-stage-individual-participant-analyses-reported-together.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together.html#sample-results-section-5"><i class="fa fa-check"></i><b>6.4</b> Sample Results Section</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="method-3-one-stage-individual-participant-analyses-reported-together-1.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together-1.html"><i class="fa fa-check"></i><b>7</b> Method 3: One-Stage Individual Participant Analyses Reported Together</a>
<ul>
<li class="chapter" data-level="7.1" data-path="method-3-one-stage-individual-participant-analyses-reported-together-1.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together-1.html#comparisons-across-the-taxonomy"><i class="fa fa-check"></i><b>7.1</b> Comparisons Across the Taxonomy</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="method-3-one-stage-individual-participant-analyses-reported-together-1.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together-1.html#tables-6"><i class="fa fa-check"></i><b>7.1.1</b> Tables</a></li>
<li class="chapter" data-level="7.1.2" data-path="method-3-one-stage-individual-participant-analyses-reported-together-1.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together-1.html#figures-6"><i class="fa fa-check"></i><b>7.1.2</b> Figures</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="method-3-one-stage-individual-participant-analyses-reported-together-1.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together-1.html#comparisons-across-methods-bayesian-versus-frequentist"><i class="fa fa-check"></i><b>7.2</b> Comparisons Across Methods: Bayesian versus Frequentist</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="method-3-one-stage-individual-participant-analyses-reported-together-1.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together-1.html#tables-7"><i class="fa fa-check"></i><b>7.2.1</b> Tables</a></li>
<li class="chapter" data-level="7.2.2" data-path="method-3-one-stage-individual-participant-analyses-reported-together-1.html"><a href="method-3-one-stage-individual-participant-analyses-reported-together-1.html#figures-7"><i class="fa fa-check"></i><b>7.2.2</b> Figures</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">A Taxonomy of Data Synthesis: A Tutorial</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="runmodels" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">Chapter 3</span> Method 1: Pooled One Stage Models without Study-Specific Effects<a href="runmodels.html#runmodels" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Method 1 is a fully pooled procedure in which a single estimate of a prospective Big Five personality characteristic-crystallized ability association is estimated across samples. In other words, there are no sample-specific estimates of the associations.</p>
<div id="step-1-combine-data" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Step 1: Combine Data<a href="runmodels.html#step-1-combine-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="runmodels.html#cb141-1" tabindex="-1"></a>loadRData <span class="ot">&lt;-</span> <span class="cf">function</span>(fileName, type){</span>
<span id="cb141-2"><a href="runmodels.html#cb141-2" tabindex="-1"></a><span class="co">#loads an RData file, and returns it</span></span>
<span id="cb141-3"><a href="runmodels.html#cb141-3" tabindex="-1"></a>    path <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/data/clean/%s_cleaned.RData&quot;</span>, local_path, fileName)</span>
<span id="cb141-4"><a href="runmodels.html#cb141-4" tabindex="-1"></a>    <span class="fu">load</span>(path)</span>
<span id="cb141-5"><a href="runmodels.html#cb141-5" tabindex="-1"></a>    <span class="fu">get</span>(<span class="fu">ls</span>()[<span class="fu">grepl</span>(type, <span class="fu">ls</span>())])</span>
<span id="cb141-6"><a href="runmodels.html#cb141-6" tabindex="-1"></a>}</span>
<span id="cb141-7"><a href="runmodels.html#cb141-7" tabindex="-1"></a></span>
<span id="cb141-8"><a href="runmodels.html#cb141-8" tabindex="-1"></a>ipd_reg_data <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb141-9"><a href="runmodels.html#cb141-9" tabindex="-1"></a>  <span class="at">study =</span> studies[<span class="sc">!</span>studies <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;CNLSY&quot;</span>, <span class="st">&quot;SLS&quot;</span>)]</span>
<span id="cb141-10"><a href="runmodels.html#cb141-10" tabindex="-1"></a>  , <span class="at">data =</span> <span class="fu">map</span>(<span class="fu">str_to_lower</span>(study), <span class="sc">~</span><span class="fu">loadRData</span>(., <span class="st">&quot;combined&quot;</span>))</span>
<span id="cb141-11"><a href="runmodels.html#cb141-11" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb141-12"><a href="runmodels.html#cb141-12" tabindex="-1"></a>    <span class="at">data =</span> <span class="fu">map</span>(data, <span class="sc">~</span>(.) <span class="sc">%&gt;%</span> </span>
<span id="cb141-13"><a href="runmodels.html#cb141-13" tabindex="-1"></a>                 <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb141-14"><a href="runmodels.html#cb141-14" tabindex="-1"></a>                 <span class="fu">mutate</span>(<span class="at">SID =</span> <span class="fu">as.character</span>(SID)))</span>
<span id="cb141-15"><a href="runmodels.html#cb141-15" tabindex="-1"></a>    , <span class="at">study =</span> <span class="fu">mapvalues</span>(study, studies, studies_long)</span>
<span id="cb141-16"><a href="runmodels.html#cb141-16" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb141-17"><a href="runmodels.html#cb141-17" tabindex="-1"></a>  <span class="fu">unnest</span>(data) <span class="sc">%&gt;%</span></span>
<span id="cb141-18"><a href="runmodels.html#cb141-18" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">age =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(age), p_year <span class="sc">-</span> yearBrth, age))</span>
<span id="cb141-19"><a href="runmodels.html#cb141-19" tabindex="-1"></a></span>
<span id="cb141-20"><a href="runmodels.html#cb141-20" tabindex="-1"></a>ipd_reg_data</span></code></pre></div>
<pre><code>## # A tibble: 119,597 × 13
##    study Trait p_value p_year SID   Outcome      o_value o_year education gender SRhealth yearBrth   age
##    &lt;chr&gt; &lt;chr&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;          &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;
##  1 BASE  E        3.83   1990 10004 crystallized   2.17    2000        17      0        4     1918    72
##  2 BASE  E        3.83   1990 10010 crystallized   3.08    1995        11      0        2     1911    79
##  3 BASE  E        2.5    1990 10033 crystallized   0.909   1997         8      1        5     1910    80
##  4 BASE  E        3      1990 10034 crystallized   6.54    1995        10      0        5     1914    76
##  5 BASE  E        2.5    1990 10111 crystallized   6.54    1995        13      1        4     1901    89
##  6 BASE  E        3.17   1990 10115 crystallized  10       1995        11      0        2     1918    72
##  7 BASE  E        3      1990 10116 crystallized   3.85    1995        10      0        4     1917    73
##  8 BASE  E        3      1990 10145 crystallized   6.36    1997        10      1        5     1897    93
##  9 BASE  E        3.33   1990 10175 crystallized   2.31    1995         8      1        3     1911    79
## 10 BASE  E        3.33   1990 10188 crystallized   5.77    2004        10      1        2     1903    87
## # ℹ 119,587 more rows</code></pre>
<div id="study-level-moderators" class="section level3 hasAnchor" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> Study-Level Moderators<a href="runmodels.html#study-level-moderators" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>First, we need to bring in a few study-level moderators from Table 4, which includes information about the continent and country of origin, and the type of personality scale. Then we’ll join those data with cleaned data from each study in order to calculate the average age at baseline, the average baseline year, and the average interval between personality and cogntiive measurements. Because these vary within studies across personality traits and outcomes, we calculate baseline age, year, and prediction interval for all combinations of these separately.</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="runmodels.html#cb143-1" tabindex="-1"></a>ipd_reg_data <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/codebooks/crystallized_tables.xlsx&quot;</span>, local_path) <span class="sc">%&gt;%</span> </span>
<span id="cb143-2"><a href="runmodels.html#cb143-2" tabindex="-1"></a>  <span class="fu">read_xlsx</span>(., <span class="at">sheet =</span> <span class="st">&quot;Table 4&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb143-3"><a href="runmodels.html#cb143-3" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Category, <span class="sc">-</span>Construct, <span class="sc">-</span>category) <span class="sc">%&gt;%</span></span>
<span id="cb143-4"><a href="runmodels.html#cb143-4" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(<span class="st">&quot;BASE-I&quot;</span><span class="sc">:</span><span class="st">&quot;SATSA&quot;</span>)</span>
<span id="cb143-5"><a href="runmodels.html#cb143-5" tabindex="-1"></a>               , <span class="at">names_to =</span> <span class="st">&quot;study&quot;</span></span>
<span id="cb143-6"><a href="runmodels.html#cb143-6" tabindex="-1"></a>               , <span class="at">values_to =</span> <span class="st">&quot;value&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb143-7"><a href="runmodels.html#cb143-7" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">&quot;name&quot;</span></span>
<span id="cb143-8"><a href="runmodels.html#cb143-8" tabindex="-1"></a>              , <span class="at">values_from =</span> <span class="st">&quot;value&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb143-9"><a href="runmodels.html#cb143-9" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">continent =</span> <span class="fu">relevel</span>(<span class="fu">factor</span>(continent), <span class="at">ref =</span> <span class="st">&quot;North America&quot;</span>)</span>
<span id="cb143-10"><a href="runmodels.html#cb143-10" tabindex="-1"></a>         , <span class="at">country =</span> <span class="fu">relevel</span>(<span class="fu">factor</span>(country), <span class="at">ref =</span> <span class="st">&quot;United States&quot;</span>)</span>
<span id="cb143-11"><a href="runmodels.html#cb143-11" tabindex="-1"></a>         , <span class="at">scale =</span> <span class="fu">relevel</span>(<span class="fu">factor</span>(scale), <span class="at">ref =</span> <span class="st">&quot;NEO-FFI&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb143-12"><a href="runmodels.html#cb143-12" tabindex="-1"></a>  <span class="co"># mutate(p_year = as.numeric(p_year)) %&gt;%</span></span>
<span id="cb143-13"><a href="runmodels.html#cb143-13" tabindex="-1"></a>  <span class="fu">right_join</span>(ipd_reg_data) <span class="sc">%&gt;%</span></span>
<span id="cb143-14"><a href="runmodels.html#cb143-14" tabindex="-1"></a>  <span class="fu">group_by</span>(study, Trait, Outcome) <span class="sc">%&gt;%</span></span>
<span id="cb143-15"><a href="runmodels.html#cb143-15" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">baseAge =</span> <span class="fu">mean</span>(age, <span class="at">na.rm =</span> T) <span class="sc">-</span> <span class="dv">60</span>, <span class="co"># center at age 60</span></span>
<span id="cb143-16"><a href="runmodels.html#cb143-16" tabindex="-1"></a>         <span class="at">predInt =</span> <span class="fu">mean</span>(o_year <span class="sc">-</span> p_year) <span class="sc">-</span> <span class="dv">5</span>, <span class="co"># center at 5 years</span></span>
<span id="cb143-17"><a href="runmodels.html#cb143-17" tabindex="-1"></a>         <span class="at">baseYear =</span> <span class="fu">ifelse</span>(study <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;MARS&quot;</span>, <span class="st">&quot;MAP&quot;</span>, <span class="st">&quot;ROS&quot;</span>), <span class="fu">mean</span>(p_year), <span class="fu">mean</span>(p_year) <span class="sc">-</span> <span class="dv">2000</span>)) <span class="sc">%&gt;%</span> <span class="co"># center at 2000</span></span>
<span id="cb143-18"><a href="runmodels.html#cb143-18" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb143-19"><a href="runmodels.html#cb143-19" tabindex="-1"></a></span>
<span id="cb143-20"><a href="runmodels.html#cb143-20" tabindex="-1"></a>ipd_reg_data</span></code></pre></div>
<pre><code>## # A tibble: 119,597 × 19
##    study continent  country scale baseAge baseYear predInt Trait p_value p_year SID   Outcome o_value o_year education gender
##    &lt;chr&gt; &lt;fct&gt;      &lt;fct&gt;   &lt;fct&gt;   &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;  &lt;dbl&gt;
##  1 EAS   North Ame… United… IPIP…    19.5     11.0   -2.85 A         3.7   2006 8024  crysta…    6.68   2006        10      0
##  2 EAS   North Ame… United… IPIP…    19.5     11.0   -2.85 A         3.6   2006 8265  crysta…    6.36   2011        12      0
##  3 EAS   North Ame… United… IPIP…    19.5     11.0   -2.85 A         5     2006 8296  crysta…    5.23   2006        14      0
##  4 EAS   North Ame… United… IPIP…    19.5     11.0   -2.85 A         4.4   2006 8375  crysta…    4.77   2010        12      1
##  5 EAS   North Ame… United… IPIP…    19.5     11.0   -2.85 A         3.2   2006 8597  crysta…    7.73   2009        14      0
##  6 EAS   North Ame… United… IPIP…    19.5     11.0   -2.85 A         4     2006 8622  crysta…    9.5    2011        19      1
##  7 EAS   North Ame… United… IPIP…    19.5     11.0   -2.85 A         4.2   2006 8634  crysta…    4.09   2007        12      0
##  8 EAS   North Ame… United… IPIP…    19.5     11.0   -2.85 A         4.2   2006 8637  crysta…    1.41   2006         8      1
##  9 EAS   North Ame… United… IPIP…    19.5     11.0   -2.85 A         4.5   2006 8674  crysta…    2.32   2006        14      1
## 10 EAS   North Ame… United… IPIP…    19.5     11.0   -2.85 A         4.1   2006 8675  crysta…    6.09   2006        15      0
## # ℹ 119,587 more rows
## # ℹ 3 more variables: SRhealth &lt;dbl&gt;, yearBrth &lt;dbl&gt;, age &lt;dbl&gt;</code></pre>
</div>
<div id="harmonize-data" class="section level3 hasAnchor" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span> Harmonize Data<a href="runmodels.html#harmonize-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Next, we need to harmonize the data across studies. As we preregistered, continuous variables (personality, cognition, and self-rated health) will be calclulated as percentages of maximum possible separately for each study, Trait and outcome. Unlike standardization procedures, that have a mean of zero and unit variance and can be misleading when data are skewed, POMP does not rescale sample variance based on the observed data, which overly relies on deviations from the mean. Instead, POMP relies on the ratio between the difference between a score and the minimum and the maximum and minimum, or</p>
<p>POMP = <span class="math inline">\(\frac{observed-minimum}{maximum-minimum}\)</span>*10.</p>
<p>In addition, gender will be dummy coded with male as the reference group, education will be centered at 12 years of education, and age will be grand mean-centered in each study (also for each trait and outcome combination).</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="runmodels.html#cb145-1" tabindex="-1"></a>ipd_reg_data <span class="ot">&lt;-</span> ipd_reg_data <span class="sc">%&gt;%</span></span>
<span id="cb145-2"><a href="runmodels.html#cb145-2" tabindex="-1"></a>  <span class="fu">group_by</span>(study, Trait, Outcome) <span class="sc">%&gt;%</span></span>
<span id="cb145-3"><a href="runmodels.html#cb145-3" tabindex="-1"></a>  <span class="fu">mutate_at</span>(<span class="fu">vars</span>(p_value, o_value), </span>
<span id="cb145-4"><a href="runmodels.html#cb145-4" tabindex="-1"></a>        <span class="sc">~</span>((. <span class="sc">-</span> <span class="fu">min</span>(., <span class="at">na.rm =</span> T))<span class="sc">/</span>(<span class="fu">max</span>(., <span class="at">na.rm =</span> T) <span class="sc">-</span> <span class="fu">min</span>(., <span class="at">na.rm =</span> T))<span class="sc">*</span><span class="dv">10</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb145-5"><a href="runmodels.html#cb145-5" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gender =</span> <span class="fu">factor</span>(gender, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;Male&quot;</span>, <span class="st">&quot;Female&quot;</span>)),</span>
<span id="cb145-6"><a href="runmodels.html#cb145-6" tabindex="-1"></a>         <span class="at">education =</span> education <span class="sc">-</span> <span class="dv">12</span>, <span class="co"># center at 12 years of education</span></span>
<span id="cb145-7"><a href="runmodels.html#cb145-7" tabindex="-1"></a>         <span class="at">age =</span> age <span class="sc">-</span> <span class="fu">mean</span>(age, <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span> <span class="co"># center </span></span>
<span id="cb145-8"><a href="runmodels.html#cb145-8" tabindex="-1"></a>  <span class="fu">ungroup</span>()  <span class="sc">%&gt;%</span></span>
<span id="cb145-9"><a href="runmodels.html#cb145-9" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>yearBrth)</span>
<span id="cb145-10"><a href="runmodels.html#cb145-10" tabindex="-1"></a></span>
<span id="cb145-11"><a href="runmodels.html#cb145-11" tabindex="-1"></a>ipd_reg_data</span></code></pre></div>
<pre><code>## # A tibble: 119,597 × 18
##    study continent  country scale baseAge baseYear predInt Trait p_value p_year SID   Outcome o_value o_year education gender
##    &lt;chr&gt; &lt;fct&gt;      &lt;fct&gt;   &lt;fct&gt;   &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt; &lt;fct&gt; 
##  1 EAS   North Ame… United… IPIP…    19.5     11.0   -2.85 A        5.81   2006 8024  crysta…    6.68   2006        -2 Male  
##  2 EAS   North Ame… United… IPIP…    19.5     11.0   -2.85 A        5.48   2006 8265  crysta…    6.36   2011         0 Male  
##  3 EAS   North Ame… United… IPIP…    19.5     11.0   -2.85 A       10      2006 8296  crysta…    5.23   2006         2 Male  
##  4 EAS   North Ame… United… IPIP…    19.5     11.0   -2.85 A        8.06   2006 8375  crysta…    4.77   2010         0 Female
##  5 EAS   North Ame… United… IPIP…    19.5     11.0   -2.85 A        4.19   2006 8597  crysta…    7.73   2009         2 Male  
##  6 EAS   North Ame… United… IPIP…    19.5     11.0   -2.85 A        6.77   2006 8622  crysta…    9.5    2011         7 Female
##  7 EAS   North Ame… United… IPIP…    19.5     11.0   -2.85 A        7.42   2006 8634  crysta…    4.09   2007         0 Male  
##  8 EAS   North Ame… United… IPIP…    19.5     11.0   -2.85 A        7.42   2006 8637  crysta…    1.41   2006        -4 Female
##  9 EAS   North Ame… United… IPIP…    19.5     11.0   -2.85 A        8.39   2006 8674  crysta…    2.32   2006         2 Female
## 10 EAS   North Ame… United… IPIP…    19.5     11.0   -2.85 A        7.10   2006 8675  crysta…    6.09   2006         3 Male  
## # ℹ 119,587 more rows
## # ℹ 2 more variables: SRhealth &lt;dbl&gt;, age &lt;dbl&gt;</code></pre>
</div>
<div id="save-data-files" class="section level3 hasAnchor" number="3.1.3">
<h3><span class="header-section-number">3.1.3</span> Save Data Files<a href="runmodels.html#save-data-files" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Now, we’ll save these data files into separate data files for each trait, outcome combination. This makes it easier to track each data set that will be used in subsequent analyses.</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="runmodels.html#cb147-1" tabindex="-1"></a>save_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(d, trait, outcome){</span>
<span id="cb147-2"><a href="runmodels.html#cb147-2" tabindex="-1"></a>  <span class="fu">save</span>(d, <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/data/one_stage/%s_%s.RData&quot;</span>, local_path, trait, outcome))</span>
<span id="cb147-3"><a href="runmodels.html#cb147-3" tabindex="-1"></a>}</span>
<span id="cb147-4"><a href="runmodels.html#cb147-4" tabindex="-1"></a></span>
<span id="cb147-5"><a href="runmodels.html#cb147-5" tabindex="-1"></a>ipd_reg_data <span class="sc">%&gt;%</span></span>
<span id="cb147-6"><a href="runmodels.html#cb147-6" tabindex="-1"></a>  <span class="fu">group_by</span>(Trait, Outcome) <span class="sc">%&gt;%</span></span>
<span id="cb147-7"><a href="runmodels.html#cb147-7" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span></span>
<span id="cb147-8"><a href="runmodels.html#cb147-8" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb147-9"><a href="runmodels.html#cb147-9" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">data =</span> <span class="fu">pmap</span>(<span class="fu">list</span>(data, Trait, Outcome), save_fun))</span></code></pre></div>
<pre><code>## # A tibble: 5 × 3
##   Trait Outcome      data  
##   &lt;chr&gt; &lt;chr&gt;        &lt;list&gt;
## 1 A     crystallized &lt;NULL&gt;
## 2 C     crystallized &lt;NULL&gt;
## 3 E     crystallized &lt;NULL&gt;
## 4 N     crystallized &lt;NULL&gt;
## 5 O     crystallized &lt;NULL&gt;</code></pre>
</div>
</div>
<div id="step-2-run-models-and-extract-results" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Step 2: Run Models and Extract Results<a href="runmodels.html#step-2-run-models-and-extract-results" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Once the data are prepped, we are ready to begin running models! For Method 1: Pooled One Stage Models without Study-Specific Effects, we will run two variants. The first is a simple linear regression that does not account for nesting / clustering in the data (specifically individuals within studies). The second is a simple linear regression with cluster-robust standard errors. The latter is of particular interest and benefit when study-specific effects are not of interest and one wants the best estimate of an aggregate, fixed effect.</p>
<div id="method-1a-linear-regression" class="section level3 hasAnchor" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> Method 1A: Linear Regression<a href="runmodels.html#method-1a-linear-regression" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="analytic-plan" class="section level4 hasAnchor" number="3.2.1.1">
<h4><span class="header-section-number">3.2.1.1</span> Analytic Plan<a href="runmodels.html#analytic-plan" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In the present study, we aimed to examine associations between personality traits and crystallized cognitive abilities using fully pooled, single-stage regression models with individual participant data. Below, we detail each stage of the analysis.</p>
<div id="statistical-modeling" class="section level5 hasAnchor" number="3.2.1.1.1">
<h5><span class="header-section-number">3.2.1.1.1</span> Statistical Modeling<a href="runmodels.html#statistical-modeling" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>A single regression model tests the relationship between personality and crystallized cognitive ability across all samples. Using the R programming language, we created a series of functions to (1) set up and run the model and extract model coefficients and (2) extract simple-effects predictions for moderator models (i.e. predicted values across levels of the moderator values). The basic, unadjusted form of the model is as follows:</p>
<p><span class="math inline">\(Y_{ij} = b_0 + b_1 \ast predictor_{ij} + \epsilon_{ij}\)</span>
<span class="math inline">\(\varepsilon_{ij}\sim\mathcal{N}(0, \sigma^2)\)</span></p>
<p>where <span class="math inline">\(b_1\)</span> represents the overall effect of personality predicting the outcome. For moderator models, we add two additional terms, <span class="math inline">\(b_2\)</span>, which captures the prospective association between a moderator and cognitive ability, adjusting for personality, and b_3, which captures how cognitive ability varies as a function of both personality and the moderator (e.g., does the association differ for males and females).</p>
<p>Models were tested using the <code>lm()</code> function from base R and the <code>tidy()</code> function from the broom package (version 1.0.1; D. Robinson et al., 2022) to extract model coefficients and confidence intervals (CI). Inferences were made based on the 95% confidence intervals. Simple-effects predictions were calculated by providing the full range of personality (0-10) and average levels of the covariates from the data used to estimate the model as the “newdata” argument in the base R <code>predict()</code> function.</p>
</div>
</div>
<div id="model-function" class="section level4 hasAnchor" number="3.2.1.2">
<h4><span class="header-section-number">3.2.1.2</span> Model Function<a href="runmodels.html#model-function" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The first thing we need is a function that will bring in the data, create a formula in the model based on input on the type (Frequentist or Bayesian), moderators (none, age, gender, SRhealth, and education), and combinations of covariates (single or fully adjusted based on age, gender, SRhealth, and education). Then we run the model, extract its fixed effect estimates, and save both for later. By saving the results, it will make it easier and faster for us to extract the necessary model results later while still retaining all information from the original model.</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="runmodels.html#cb149-1" tabindex="-1"></a>ipd1a_mod_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(trait, outcome, type, mod, cov){</span>
<span id="cb149-2"><a href="runmodels.html#cb149-2" tabindex="-1"></a>  <span class="do">## load the data</span></span>
<span id="cb149-3"><a href="runmodels.html#cb149-3" tabindex="-1"></a>  <span class="fu">load</span>(<span class="fu">sprintf</span>(<span class="st">&quot;%s/data/one_stage/%s_%s.RData&quot;</span>, local_path, trait, outcome))</span>
<span id="cb149-4"><a href="runmodels.html#cb149-4" tabindex="-1"></a>  </span>
<span id="cb149-5"><a href="runmodels.html#cb149-5" tabindex="-1"></a>  <span class="do">## model formula </span></span>
<span id="cb149-6"><a href="runmodels.html#cb149-6" tabindex="-1"></a>  <span class="cf">if</span> (cov <span class="sc">==</span> <span class="st">&quot;all&quot;</span>) cv <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;age&quot;</span>, <span class="st">&quot;gender&quot;</span>, <span class="st">&quot;education&quot;</span>)</span>
<span id="cb149-7"><a href="runmodels.html#cb149-7" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span>cov <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;all&quot;</span>, <span class="st">&quot;none&quot;</span>)) cv <span class="ot">&lt;-</span> cov</span>
<span id="cb149-8"><a href="runmodels.html#cb149-8" tabindex="-1"></a>  rhs <span class="ot">&lt;-</span> <span class="st">&quot;p_value&quot;</span></span>
<span id="cb149-9"><a href="runmodels.html#cb149-9" tabindex="-1"></a>  rhs <span class="ot">&lt;-</span> <span class="cf">if</span>(cov <span class="sc">!=</span> <span class="st">&quot;none&quot;</span>) <span class="fu">c</span>(rhs, cv) <span class="cf">else</span> rhs</span>
<span id="cb149-10"><a href="runmodels.html#cb149-10" tabindex="-1"></a>  <span class="cf">if</span>(mod <span class="sc">!=</span> <span class="st">&quot;none&quot;</span>){rhs <span class="ot">&lt;-</span> <span class="fu">c</span>(rhs, <span class="fu">paste</span>(<span class="st">&quot;p_value&quot;</span>, mod, <span class="at">sep =</span> <span class="st">&quot;*&quot;</span>))}</span>
<span id="cb149-11"><a href="runmodels.html#cb149-11" tabindex="-1"></a>  rhs <span class="ot">&lt;-</span> <span class="fu">paste</span>(rhs, <span class="at">collapse =</span> <span class="st">&quot; + &quot;</span>)</span>
<span id="cb149-12"><a href="runmodels.html#cb149-12" tabindex="-1"></a>  f <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;o_value ~ &quot;</span>, rhs, <span class="at">collapse =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb149-13"><a href="runmodels.html#cb149-13" tabindex="-1"></a>  </span>
<span id="cb149-14"><a href="runmodels.html#cb149-14" tabindex="-1"></a>  <span class="do">## compiled Bayesian model to speed up processing and avoid crashing</span></span>
<span id="cb149-15"><a href="runmodels.html#cb149-15" tabindex="-1"></a>  <span class="cf">if</span>(type <span class="sc">==</span> <span class="st">&quot;Bayesian&quot;</span>) <span class="fu">load</span>(<span class="fu">sprintf</span>(<span class="st">&quot;%s/results/1a_ipd_reg/bayes_sample_mod.RData&quot;</span>, local_path))</span>
<span id="cb149-16"><a href="runmodels.html#cb149-16" tabindex="-1"></a>  </span>
<span id="cb149-17"><a href="runmodels.html#cb149-17" tabindex="-1"></a>  <span class="do">## run the models &amp; save</span></span>
<span id="cb149-18"><a href="runmodels.html#cb149-18" tabindex="-1"></a>  m <span class="ot">&lt;-</span> <span class="cf">if</span>(type <span class="sc">==</span> <span class="st">&quot;Frequentist&quot;</span>){<span class="fu">do.call</span>(<span class="st">&quot;lm&quot;</span>, <span class="fu">list</span>(<span class="at">formula =</span> f, <span class="at">data =</span> <span class="fu">quote</span>(d)))} <span class="cf">else</span> {<span class="fu">update</span>(m, <span class="at">formula =</span> f, <span class="at">nelocal_pathata =</span> d, <span class="at">cores =</span> <span class="dv">4</span>)}</span>
<span id="cb149-19"><a href="runmodels.html#cb149-19" tabindex="-1"></a>  <span class="fu">save</span>(m, <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/1a_ipd_reg/%s/models/%s_%s_%s_%s.RData&quot;</span>, local_path, type, outcome, trait, mod, cov))</span>
<span id="cb149-20"><a href="runmodels.html#cb149-20" tabindex="-1"></a>  </span>
<span id="cb149-21"><a href="runmodels.html#cb149-21" tabindex="-1"></a>  <span class="do">## extract model terms and confidence intervals &amp; save</span></span>
<span id="cb149-22"><a href="runmodels.html#cb149-22" tabindex="-1"></a>  fx <span class="ot">&lt;-</span> <span class="fu">tidy</span>(m, <span class="at">conf.int =</span> T) <span class="sc">%&gt;%</span></span>
<span id="cb149-23"><a href="runmodels.html#cb149-23" tabindex="-1"></a>    <span class="fu">select</span>(term, estimate, conf.low, conf.high)</span>
<span id="cb149-24"><a href="runmodels.html#cb149-24" tabindex="-1"></a>  <span class="fu">save</span>(fx, <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/1a_ipd_reg/%s/summary/%s_%s_%s_%s.RData&quot;</span>, local_path, type, outcome, trait, mod, cov))</span>
<span id="cb149-25"><a href="runmodels.html#cb149-25" tabindex="-1"></a>  </span>
<span id="cb149-26"><a href="runmodels.html#cb149-26" tabindex="-1"></a>  <span class="do">## get simple effects for moderator tests</span></span>
<span id="cb149-27"><a href="runmodels.html#cb149-27" tabindex="-1"></a>  <span class="cf">if</span>(mod <span class="sc">!=</span> <span class="st">&quot;none&quot;</span>){</span>
<span id="cb149-28"><a href="runmodels.html#cb149-28" tabindex="-1"></a>    pred.fx <span class="ot">&lt;-</span> <span class="fu">ipd1a_simpeff_fun</span>(m, mod, type)</span>
<span id="cb149-29"><a href="runmodels.html#cb149-29" tabindex="-1"></a>    <span class="fu">save</span>(pred.fx, <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/1a_ipd_reg/%s/predicted/%s_%s_%s_%s.RData&quot;</span>, local_path, type, outcome, trait, mod, cov))</span>
<span id="cb149-30"><a href="runmodels.html#cb149-30" tabindex="-1"></a>  }</span>
<span id="cb149-31"><a href="runmodels.html#cb149-31" tabindex="-1"></a>  </span>
<span id="cb149-32"><a href="runmodels.html#cb149-32" tabindex="-1"></a>  <span class="do">## clean up the local function environment</span></span>
<span id="cb149-33"><a href="runmodels.html#cb149-33" tabindex="-1"></a>  <span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">c</span>(<span class="st">&quot;d&quot;</span>, <span class="st">&quot;f&quot;</span>, <span class="st">&quot;rhs&quot;</span>, <span class="st">&quot;m&quot;</span>, <span class="st">&quot;fx&quot;</span>, <span class="st">&quot;cv&quot;</span>))</span>
<span id="cb149-34"><a href="runmodels.html#cb149-34" tabindex="-1"></a>  <span class="fu">gc</span>()</span>
<span id="cb149-35"><a href="runmodels.html#cb149-35" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="simple-effects-function" class="section level4 hasAnchor" number="3.2.1.3">
<h4><span class="header-section-number">3.2.1.3</span> Simple Effects Function<a href="runmodels.html#simple-effects-function" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="runmodels.html#cb150-1" tabindex="-1"></a>ipd1a_simpeff_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(m, moder, type){</span>
<span id="cb150-2"><a href="runmodels.html#cb150-2" tabindex="-1"></a>  d <span class="ot">&lt;-</span> <span class="cf">if</span>(type <span class="sc">==</span> <span class="st">&quot;Bayesian&quot;</span>) m<span class="sc">$</span>data <span class="cf">else</span> m<span class="sc">$</span>model</span>
<span id="cb150-3"><a href="runmodels.html#cb150-3" tabindex="-1"></a>  d <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>o_value, <span class="sc">-</span>p_value)</span>
<span id="cb150-4"><a href="runmodels.html#cb150-4" tabindex="-1"></a>  cols <span class="ot">&lt;-</span> <span class="fu">colnames</span>(d)</span>
<span id="cb150-5"><a href="runmodels.html#cb150-5" tabindex="-1"></a>  md_cl <span class="ot">&lt;-</span> <span class="fu">class</span>(d[,moder])</span>
<span id="cb150-6"><a href="runmodels.html#cb150-6" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">any</span>(<span class="fu">sapply</span>(d, class) <span class="sc">==</span> <span class="st">&quot;numeric&quot;</span>)){</span>
<span id="cb150-7"><a href="runmodels.html#cb150-7" tabindex="-1"></a>    msd <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span></span>
<span id="cb150-8"><a href="runmodels.html#cb150-8" tabindex="-1"></a>      <span class="fu">select_if</span>(is.numeric) <span class="sc">%&gt;%</span></span>
<span id="cb150-9"><a href="runmodels.html#cb150-9" tabindex="-1"></a>      <span class="fu">pivot_longer</span>(<span class="fu">everything</span>()</span>
<span id="cb150-10"><a href="runmodels.html#cb150-10" tabindex="-1"></a>                   , <span class="at">names_to =</span> <span class="st">&quot;item&quot;</span></span>
<span id="cb150-11"><a href="runmodels.html#cb150-11" tabindex="-1"></a>                   , <span class="at">values_to =</span> <span class="st">&quot;value&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb150-12"><a href="runmodels.html#cb150-12" tabindex="-1"></a>      <span class="fu">group_by</span>(item) <span class="sc">%&gt;%</span></span>
<span id="cb150-13"><a href="runmodels.html#cb150-13" tabindex="-1"></a>      <span class="fu">summarize_at</span>(<span class="fu">vars</span>(value), <span class="fu">lst</span>(mean, sd)) <span class="sc">%&gt;%</span></span>
<span id="cb150-14"><a href="runmodels.html#cb150-14" tabindex="-1"></a>      <span class="fu">ungroup</span>()</span>
<span id="cb150-15"><a href="runmodels.html#cb150-15" tabindex="-1"></a>  }</span>
<span id="cb150-16"><a href="runmodels.html#cb150-16" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">any</span>(<span class="fu">sapply</span>(d, class) <span class="sc">==</span> <span class="st">&quot;factor&quot;</span>)){</span>
<span id="cb150-17"><a href="runmodels.html#cb150-17" tabindex="-1"></a>    fct_lev <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> </span>
<span id="cb150-18"><a href="runmodels.html#cb150-18" tabindex="-1"></a>      <span class="fu">select_if</span>(is.factor) <span class="sc">%&gt;%</span></span>
<span id="cb150-19"><a href="runmodels.html#cb150-19" tabindex="-1"></a>      <span class="fu">summarize_all</span>(<span class="sc">~</span><span class="fu">list</span>(<span class="fu">unique</span>(.)))</span>
<span id="cb150-20"><a href="runmodels.html#cb150-20" tabindex="-1"></a>  }</span>
<span id="cb150-21"><a href="runmodels.html#cb150-21" tabindex="-1"></a>  d <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span><span class="fu">one_of</span>(moder))</span>
<span id="cb150-22"><a href="runmodels.html#cb150-22" tabindex="-1"></a>  md_levs <span class="ot">&lt;-</span> <span class="cf">if</span>(md_cl <span class="sc">==</span> <span class="st">&quot;numeric&quot;</span>){</span>
<span id="cb150-23"><a href="runmodels.html#cb150-23" tabindex="-1"></a>    <span class="cf">if</span>(moder <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;age&quot;</span>, <span class="st">&quot;baseAge&quot;</span>, <span class="st">&quot;baseYear&quot;</span>)) {</span>
<span id="cb150-24"><a href="runmodels.html#cb150-24" tabindex="-1"></a>      <span class="fu">c</span>(<span class="sc">-</span><span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">10</span>)</span>
<span id="cb150-25"><a href="runmodels.html#cb150-25" tabindex="-1"></a>      } <span class="cf">else</span> <span class="cf">if</span> (moder <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;predInt&quot;</span>, <span class="st">&quot;education&quot;</span>)) {</span>
<span id="cb150-26"><a href="runmodels.html#cb150-26" tabindex="-1"></a>      <span class="fu">c</span>(<span class="sc">-</span><span class="dv">5</span>, <span class="dv">0</span>, <span class="dv">5</span>) </span>
<span id="cb150-27"><a href="runmodels.html#cb150-27" tabindex="-1"></a>      } <span class="cf">else</span> {</span>
<span id="cb150-28"><a href="runmodels.html#cb150-28" tabindex="-1"></a>        <span class="fu">with</span>(msd, <span class="fu">c</span>(mean[item <span class="sc">==</span> moder] <span class="sc">-</span> sd[item <span class="sc">==</span> moder], mean[item <span class="sc">==</span> moder], mean[item <span class="sc">==</span> moder] <span class="sc">+</span> sd[item <span class="sc">==</span> moder]))</span>
<span id="cb150-29"><a href="runmodels.html#cb150-29" tabindex="-1"></a>      }</span>
<span id="cb150-30"><a href="runmodels.html#cb150-30" tabindex="-1"></a>  } <span class="cf">else</span> { </span>
<span id="cb150-31"><a href="runmodels.html#cb150-31" tabindex="-1"></a>    <span class="fu">unique</span>(fct_lev[,moder][[<span class="dv">1</span>]])</span>
<span id="cb150-32"><a href="runmodels.html#cb150-32" tabindex="-1"></a>  }</span>
<span id="cb150-33"><a href="runmodels.html#cb150-33" tabindex="-1"></a>  </span>
<span id="cb150-34"><a href="runmodels.html#cb150-34" tabindex="-1"></a>  mod_frame <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(</span>
<span id="cb150-35"><a href="runmodels.html#cb150-35" tabindex="-1"></a>    <span class="at">p_value =</span> <span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">10</span>,.<span class="dv">5</span>)</span>
<span id="cb150-36"><a href="runmodels.html#cb150-36" tabindex="-1"></a>    , <span class="at">modvalue =</span> md_levs</span>
<span id="cb150-37"><a href="runmodels.html#cb150-37" tabindex="-1"></a>    , <span class="at">stringsAsFactors =</span> F</span>
<span id="cb150-38"><a href="runmodels.html#cb150-38" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> <span class="fu">setNames</span>(<span class="fu">c</span>(<span class="st">&quot;p_value&quot;</span>, moder))</span>
<span id="cb150-39"><a href="runmodels.html#cb150-39" tabindex="-1"></a>  </span>
<span id="cb150-40"><a href="runmodels.html#cb150-40" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">ncol</span>(d) <span class="sc">&gt;</span> <span class="dv">0</span>){</span>
<span id="cb150-41"><a href="runmodels.html#cb150-41" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">any</span>(<span class="fu">sapply</span>(d, class) <span class="sc">==</span> <span class="st">&quot;numeric&quot;</span>)){</span>
<span id="cb150-42"><a href="runmodels.html#cb150-42" tabindex="-1"></a>      mod_frame <span class="ot">&lt;-</span> <span class="fu">tibble</span>(mod_frame, d <span class="sc">%&gt;%</span> <span class="fu">select_if</span>(is.numeric) <span class="sc">%&gt;%</span> <span class="fu">summarize_all</span>(mean))</span>
<span id="cb150-43"><a href="runmodels.html#cb150-43" tabindex="-1"></a>    } </span>
<span id="cb150-44"><a href="runmodels.html#cb150-44" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">any</span>(<span class="fu">sapply</span>(d, class) <span class="sc">==</span> <span class="st">&quot;factor&quot;</span>)){</span>
<span id="cb150-45"><a href="runmodels.html#cb150-45" tabindex="-1"></a>      mod_frame <span class="ot">&lt;-</span> <span class="fu">tibble</span>(mod_frame, d <span class="sc">%&gt;%</span> <span class="fu">select_if</span>(is.factor) <span class="sc">%&gt;%</span> <span class="fu">summarize_all</span>(<span class="sc">~</span><span class="fu">levels</span>(.)[<span class="dv">1</span>]))</span>
<span id="cb150-46"><a href="runmodels.html#cb150-46" tabindex="-1"></a>    }</span>
<span id="cb150-47"><a href="runmodels.html#cb150-47" tabindex="-1"></a>  }</span>
<span id="cb150-48"><a href="runmodels.html#cb150-48" tabindex="-1"></a>  </span>
<span id="cb150-49"><a href="runmodels.html#cb150-49" tabindex="-1"></a>  pred.fx <span class="ot">&lt;-</span> <span class="cf">if</span>(type <span class="sc">==</span> <span class="st">&quot;Bayesian&quot;</span>){</span>
<span id="cb150-50"><a href="runmodels.html#cb150-50" tabindex="-1"></a>    <span class="fu">bind_cols</span>(</span>
<span id="cb150-51"><a href="runmodels.html#cb150-51" tabindex="-1"></a>      mod_frame, </span>
<span id="cb150-52"><a href="runmodels.html#cb150-52" tabindex="-1"></a>      <span class="fu">fitted</span>(m, <span class="at">newdata =</span> mod_frame) <span class="sc">%&gt;%</span> data.frame</span>
<span id="cb150-53"><a href="runmodels.html#cb150-53" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb150-54"><a href="runmodels.html#cb150-54" tabindex="-1"></a>      <span class="fu">select</span>(<span class="fu">one_of</span>(<span class="fu">colnames</span>(m<span class="sc">$</span>data)), <span class="at">pred =</span> Estimate, <span class="at">lower =</span> Q2<span class="fl">.5</span>, <span class="at">upper =</span> Q97<span class="fl">.5</span>)</span>
<span id="cb150-55"><a href="runmodels.html#cb150-55" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb150-56"><a href="runmodels.html#cb150-56" tabindex="-1"></a>    <span class="fu">bind_cols</span>(</span>
<span id="cb150-57"><a href="runmodels.html#cb150-57" tabindex="-1"></a>      mod_frame, </span>
<span id="cb150-58"><a href="runmodels.html#cb150-58" tabindex="-1"></a>      <span class="fu">predict</span>(m, <span class="at">newdata =</span> mod_frame, <span class="at">interval =</span> <span class="st">&quot;confidence&quot;</span>) <span class="sc">%&gt;%</span> data.frame </span>
<span id="cb150-59"><a href="runmodels.html#cb150-59" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb150-60"><a href="runmodels.html#cb150-60" tabindex="-1"></a>      <span class="fu">select</span>(<span class="fu">one_of</span>(<span class="fu">colnames</span>(m<span class="sc">$</span>model)), <span class="at">pred =</span> fit, <span class="at">lower =</span> lwr, <span class="at">upper =</span> upr)</span>
<span id="cb150-61"><a href="runmodels.html#cb150-61" tabindex="-1"></a>  }</span>
<span id="cb150-62"><a href="runmodels.html#cb150-62" tabindex="-1"></a>  </span>
<span id="cb150-63"><a href="runmodels.html#cb150-63" tabindex="-1"></a>  <span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">c</span>(<span class="st">&quot;m&quot;</span>, <span class="st">&quot;mod_frame&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;md_levs&quot;</span>))</span>
<span id="cb150-64"><a href="runmodels.html#cb150-64" tabindex="-1"></a>  <span class="fu">gc</span>()</span>
<span id="cb150-65"><a href="runmodels.html#cb150-65" tabindex="-1"></a>  <span class="fu">return</span>(pred.fx)</span>
<span id="cb150-66"><a href="runmodels.html#cb150-66" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="run-models-and-summaries" class="section level4 hasAnchor" number="3.2.1.4">
<h4><span class="header-section-number">3.2.1.4</span> Run Models and Summaries<a href="runmodels.html#run-models-and-summaries" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The code below generates all possible preregistrered combinations of traits, outcomes, types, moderators, and covariates. Then these combinations are fed serially to the model function written previously, which will run and save the results.</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="runmodels.html#cb151-1" tabindex="-1"></a><span class="fu">load</span>(<span class="fu">sprintf</span>(<span class="st">&quot;%s/data/one_stage/E_crystallized.RData&quot;</span>, local_path))</span>
<span id="cb151-2"><a href="runmodels.html#cb151-2" tabindex="-1"></a></span>
<span id="cb151-3"><a href="runmodels.html#cb151-3" tabindex="-1"></a><span class="co"># clean data &amp; keep only needed columns and a subset of the used variables</span></span>
<span id="cb151-4"><a href="runmodels.html#cb151-4" tabindex="-1"></a>d <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span></span>
<span id="cb151-5"><a href="runmodels.html#cb151-5" tabindex="-1"></a>  <span class="fu">group_by</span>(study) <span class="sc">%&gt;%</span></span>
<span id="cb151-6"><a href="runmodels.html#cb151-6" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span></span>
<span id="cb151-7"><a href="runmodels.html#cb151-7" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb151-8"><a href="runmodels.html#cb151-8" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">data =</span> <span class="fu">map</span>(data, <span class="sc">~</span>(.) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">row_number</span>() <span class="sc">%in%</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(.), <span class="dv">100</span>, <span class="at">replace =</span> F)))) <span class="sc">%&gt;%</span></span>
<span id="cb151-9"><a href="runmodels.html#cb151-9" tabindex="-1"></a>  <span class="fu">unnest</span>(data) </span>
<span id="cb151-10"><a href="runmodels.html#cb151-10" tabindex="-1"></a></span>
<span id="cb151-11"><a href="runmodels.html#cb151-11" tabindex="-1"></a><span class="co"># set priors &amp; model specifications </span></span>
<span id="cb151-12"><a href="runmodels.html#cb151-12" tabindex="-1"></a>Prior <span class="ot">&lt;-</span>  <span class="fu">c</span>(<span class="fu">set_prior</span>(<span class="st">&quot;student_t(3, 0, 2)&quot;</span>, <span class="at">class =</span> <span class="st">&quot;b&quot;</span>),</span>
<span id="cb151-13"><a href="runmodels.html#cb151-13" tabindex="-1"></a>            <span class="fu">set_prior</span>(<span class="st">&quot;student_t(3, 0, 5)&quot;</span>, <span class="at">class =</span> <span class="st">&quot;Intercept&quot;</span>))</span>
<span id="cb151-14"><a href="runmodels.html#cb151-14" tabindex="-1"></a>Iter <span class="ot">&lt;-</span> <span class="dv">30</span>; Warmup <span class="ot">&lt;-</span> <span class="dv">21</span>; treedepth <span class="ot">&lt;-</span> <span class="dv">20</span></span>
<span id="cb151-15"><a href="runmodels.html#cb151-15" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">bf</span>(o_value <span class="sc">~</span> p_value <span class="sc">+</span> age <span class="sc">+</span> gender <span class="sc">+</span> education)</span>
<span id="cb151-16"><a href="runmodels.html#cb151-16" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">brm</span>(<span class="at">formula =</span> f</span>
<span id="cb151-17"><a href="runmodels.html#cb151-17" tabindex="-1"></a>            , <span class="at">data =</span> d</span>
<span id="cb151-18"><a href="runmodels.html#cb151-18" tabindex="-1"></a>            , <span class="at">prior =</span> Prior</span>
<span id="cb151-19"><a href="runmodels.html#cb151-19" tabindex="-1"></a>            , <span class="at">iter =</span> Iter</span>
<span id="cb151-20"><a href="runmodels.html#cb151-20" tabindex="-1"></a>            , <span class="at">warmup =</span> Warmup</span>
<span id="cb151-21"><a href="runmodels.html#cb151-21" tabindex="-1"></a>            , <span class="at">cores =</span> <span class="dv">4</span>)</span>
<span id="cb151-22"><a href="runmodels.html#cb151-22" tabindex="-1"></a><span class="fu">save</span>(m, <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/1a_ipd_reg/bayes_sample_mod.RData&quot;</span>, local_path))</span>
<span id="cb151-23"><a href="runmodels.html#cb151-23" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">c</span>(<span class="st">&quot;d&quot;</span>, <span class="st">&quot;Prior&quot;</span>, <span class="st">&quot;Iter&quot;</span>, <span class="st">&quot;Warmup&quot;</span>, <span class="st">&quot;treedepth&quot;</span>, <span class="st">&quot;f&quot;</span>, <span class="st">&quot;m&quot;</span>))</span></code></pre></div>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="runmodels.html#cb152-1" tabindex="-1"></a><span class="fu">plan</span>(<span class="fu">multisession</span>(<span class="at">workers =</span> <span class="dv">10</span><span class="dt">L</span>))</span>
<span id="cb152-2"><a href="runmodels.html#cb152-2" tabindex="-1"></a>nested_ipd1a_reg <span class="ot">&lt;-</span> </span>
<span id="cb152-3"><a href="runmodels.html#cb152-3" tabindex="-1"></a>  <span class="do">## moderator combinations</span></span>
<span id="cb152-4"><a href="runmodels.html#cb152-4" tabindex="-1"></a>  <span class="fu">crossing</span>(</span>
<span id="cb152-5"><a href="runmodels.html#cb152-5" tabindex="-1"></a>    <span class="at">Trait =</span> traits<span class="sc">$</span>short_name</span>
<span id="cb152-6"><a href="runmodels.html#cb152-6" tabindex="-1"></a>    , <span class="at">Outcome =</span> outcomes<span class="sc">$</span>short_name</span>
<span id="cb152-7"><a href="runmodels.html#cb152-7" tabindex="-1"></a>    , <span class="at">type =</span> <span class="fu">c</span>(<span class="st">&quot;Frequentist&quot;</span>, <span class="st">&quot;Bayesian&quot;</span>)</span>
<span id="cb152-8"><a href="runmodels.html#cb152-8" tabindex="-1"></a>    , <span class="at">Moderator =</span> <span class="fu">c</span>(<span class="st">&quot;age&quot;</span>, <span class="st">&quot;gender&quot;</span>, <span class="st">&quot;education&quot;</span>)</span>
<span id="cb152-9"><a href="runmodels.html#cb152-9" tabindex="-1"></a>    , <span class="at">Covariate =</span> <span class="fu">c</span>(<span class="st">&quot;none&quot;</span>, <span class="st">&quot;all&quot;</span>)</span>
<span id="cb152-10"><a href="runmodels.html#cb152-10" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb152-11"><a href="runmodels.html#cb152-11" tabindex="-1"></a>  <span class="fu">full_join</span>(</span>
<span id="cb152-12"><a href="runmodels.html#cb152-12" tabindex="-1"></a>    <span class="co"># undmoderator combinations</span></span>
<span id="cb152-13"><a href="runmodels.html#cb152-13" tabindex="-1"></a>    <span class="fu">crossing</span>(</span>
<span id="cb152-14"><a href="runmodels.html#cb152-14" tabindex="-1"></a>      <span class="at">Trait =</span> traits<span class="sc">$</span>short_name</span>
<span id="cb152-15"><a href="runmodels.html#cb152-15" tabindex="-1"></a>      , <span class="at">Outcome =</span> outcomes<span class="sc">$</span>short_name</span>
<span id="cb152-16"><a href="runmodels.html#cb152-16" tabindex="-1"></a>      , <span class="at">type =</span> <span class="fu">c</span>(<span class="st">&quot;Frequentist&quot;</span>, <span class="st">&quot;Bayesian&quot;</span>)</span>
<span id="cb152-17"><a href="runmodels.html#cb152-17" tabindex="-1"></a>      , <span class="at">Moderator =</span> <span class="fu">c</span>(<span class="st">&quot;none&quot;</span>, stdyModers<span class="sc">$</span>short_name)</span>
<span id="cb152-18"><a href="runmodels.html#cb152-18" tabindex="-1"></a>      , <span class="at">Covariate =</span> <span class="fu">c</span>(<span class="st">&quot;none&quot;</span>, <span class="st">&quot;age&quot;</span>, <span class="st">&quot;gender&quot;</span>, <span class="st">&quot;education&quot;</span>, <span class="st">&quot;all&quot;</span>)</span>
<span id="cb152-19"><a href="runmodels.html#cb152-19" tabindex="-1"></a>      )</span>
<span id="cb152-20"><a href="runmodels.html#cb152-20" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb152-21"><a href="runmodels.html#cb152-21" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">run =</span> </span>
<span id="cb152-22"><a href="runmodels.html#cb152-22" tabindex="-1"></a>           <span class="co"># pmap(list(Trait, Outcome, type, Moderator, Covariate)</span></span>
<span id="cb152-23"><a href="runmodels.html#cb152-23" tabindex="-1"></a>           <span class="fu">future_pmap</span>(<span class="fu">list</span>(Trait, Outcome, type, Moderator, Covariate)</span>
<span id="cb152-24"><a href="runmodels.html#cb152-24" tabindex="-1"></a>                , <span class="fu">possibly</span>(ipd1a_mod_fun, <span class="st">&quot;uh-oh&quot;</span>)</span>
<span id="cb152-25"><a href="runmodels.html#cb152-25" tabindex="-1"></a>                , <span class="at">.progress =</span> T</span>
<span id="cb152-26"><a href="runmodels.html#cb152-26" tabindex="-1"></a>             , <span class="at">.options =</span> <span class="fu">furrr_options</span>(</span>
<span id="cb152-27"><a href="runmodels.html#cb152-27" tabindex="-1"></a>                                    <span class="at">globals =</span> <span class="fu">c</span>(<span class="st">&quot;ipd1a_mod_fun&quot;</span></span>
<span id="cb152-28"><a href="runmodels.html#cb152-28" tabindex="-1"></a>                                                , <span class="st">&quot;ipd1a_simpeff_fun&quot;</span></span>
<span id="cb152-29"><a href="runmodels.html#cb152-29" tabindex="-1"></a>                                                , <span class="st">&quot;read_path&quot;</span></span>
<span id="cb152-30"><a href="runmodels.html#cb152-30" tabindex="-1"></a>                                                , <span class="st">&quot;local_path&quot;</span></span>
<span id="cb152-31"><a href="runmodels.html#cb152-31" tabindex="-1"></a>                                                , <span class="st">&quot;res_path&quot;</span></span>
<span id="cb152-32"><a href="runmodels.html#cb152-32" tabindex="-1"></a>                                                , <span class="st">&quot;codebook&quot;</span></span>
<span id="cb152-33"><a href="runmodels.html#cb152-33" tabindex="-1"></a>                                                , <span class="st">&quot;covars&quot;</span></span>
<span id="cb152-34"><a href="runmodels.html#cb152-34" tabindex="-1"></a>                                                , <span class="st">&quot;moders&quot;</span></span>
<span id="cb152-35"><a href="runmodels.html#cb152-35" tabindex="-1"></a>                                                , <span class="st">&quot;outcomes&quot;</span></span>
<span id="cb152-36"><a href="runmodels.html#cb152-36" tabindex="-1"></a>                                                , <span class="st">&quot;studies&quot;</span></span>
<span id="cb152-37"><a href="runmodels.html#cb152-37" tabindex="-1"></a>                                                , <span class="st">&quot;stdyModers&quot;</span></span>
<span id="cb152-38"><a href="runmodels.html#cb152-38" tabindex="-1"></a>                                                , <span class="st">&quot;traits&quot;</span></span>
<span id="cb152-39"><a href="runmodels.html#cb152-39" tabindex="-1"></a>                                                , <span class="st">&quot;data_path&quot;</span>)</span>
<span id="cb152-40"><a href="runmodels.html#cb152-40" tabindex="-1"></a>                                  , <span class="at">packages =</span> <span class="fu">c</span>(<span class="st">&quot;lme4&quot;</span></span>
<span id="cb152-41"><a href="runmodels.html#cb152-41" tabindex="-1"></a>                                                 , <span class="st">&quot;broom&quot;</span></span>
<span id="cb152-42"><a href="runmodels.html#cb152-42" tabindex="-1"></a>                                                 , <span class="st">&quot;psych&quot;</span></span>
<span id="cb152-43"><a href="runmodels.html#cb152-43" tabindex="-1"></a>                                                 , <span class="st">&quot;knitr&quot;</span></span>
<span id="cb152-44"><a href="runmodels.html#cb152-44" tabindex="-1"></a>                                                 , <span class="st">&quot;broom.mixed&quot;</span></span>
<span id="cb152-45"><a href="runmodels.html#cb152-45" tabindex="-1"></a>                                                 , <span class="st">&quot;brms&quot;</span></span>
<span id="cb152-46"><a href="runmodels.html#cb152-46" tabindex="-1"></a>                                                 <span class="co">#, &quot;tidybayes&quot;</span></span>
<span id="cb152-47"><a href="runmodels.html#cb152-47" tabindex="-1"></a>                                                 <span class="co">#, &quot;bootpredictlme4&quot;</span></span>
<span id="cb152-48"><a href="runmodels.html#cb152-48" tabindex="-1"></a>                                                 , <span class="st">&quot;rstan&quot;</span></span>
<span id="cb152-49"><a href="runmodels.html#cb152-49" tabindex="-1"></a>                                                 , <span class="st">&quot;estimatr&quot;</span></span>
<span id="cb152-50"><a href="runmodels.html#cb152-50" tabindex="-1"></a>                                                 <span class="co">#, &quot;merTools&quot;</span></span>
<span id="cb152-51"><a href="runmodels.html#cb152-51" tabindex="-1"></a>                                                 , <span class="st">&quot;plyr&quot;</span></span>
<span id="cb152-52"><a href="runmodels.html#cb152-52" tabindex="-1"></a>                                                 , <span class="st">&quot;tidyverse&quot;</span>))</span>
<span id="cb152-53"><a href="runmodels.html#cb152-53" tabindex="-1"></a>             )</span>
<span id="cb152-54"><a href="runmodels.html#cb152-54" tabindex="-1"></a>         )</span>
<span id="cb152-55"><a href="runmodels.html#cb152-55" tabindex="-1"></a><span class="fu">closeAllConnections</span>()</span></code></pre></div>
</div>
<div id="compile-results" class="section level4 hasAnchor" number="3.2.1.5">
<h4><span class="header-section-number">3.2.1.5</span> Compile Results<a href="runmodels.html#compile-results" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Once all the models are run, we are ready to compile all their results. By saving the fixed effects results previously, we are able to simply load those results and ignore the models. However, because we also saved the models, we can also recall and extract information from them if and when needed.</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="runmodels.html#cb153-1" tabindex="-1"></a>loadRData <span class="ot">&lt;-</span> <span class="cf">function</span>(fileName, type, obj, folder){</span>
<span id="cb153-2"><a href="runmodels.html#cb153-2" tabindex="-1"></a><span class="co"># loads an RData file, and returns it</span></span>
<span id="cb153-3"><a href="runmodels.html#cb153-3" tabindex="-1"></a>    <span class="co"># path &lt;- sprintf(&quot;%s/results/1a_ipd_reg/%s/%s/%s&quot;, res_path, type, folder, fileName)</span></span>
<span id="cb153-4"><a href="runmodels.html#cb153-4" tabindex="-1"></a>    path <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/1a_ipd_reg/%s/%s/%s&quot;</span>, local_path, type, folder, fileName)</span>
<span id="cb153-5"><a href="runmodels.html#cb153-5" tabindex="-1"></a>    <span class="co"># load(url(path))</span></span>
<span id="cb153-6"><a href="runmodels.html#cb153-6" tabindex="-1"></a>    <span class="fu">load</span>(path)</span>
<span id="cb153-7"><a href="runmodels.html#cb153-7" tabindex="-1"></a>    <span class="fu">get</span>(<span class="fu">ls</span>()[<span class="fu">grepl</span>(obj, <span class="fu">ls</span>())])</span>
<span id="cb153-8"><a href="runmodels.html#cb153-8" tabindex="-1"></a>}</span>
<span id="cb153-9"><a href="runmodels.html#cb153-9" tabindex="-1"></a></span>
<span id="cb153-10"><a href="runmodels.html#cb153-10" tabindex="-1"></a><span class="do">## load in &quot;fixed&quot; effects</span></span>
<span id="cb153-11"><a href="runmodels.html#cb153-11" tabindex="-1"></a><span class="do">## first get file names</span></span>
<span id="cb153-12"><a href="runmodels.html#cb153-12" tabindex="-1"></a>nested_ipd1a_reg <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">type =</span> <span class="fu">c</span>(<span class="st">&quot;Frequentist&quot;</span>, <span class="st">&quot;Bayesian&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb153-13"><a href="runmodels.html#cb153-13" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">file =</span> <span class="fu">map</span>(type, <span class="sc">~</span><span class="fu">list.files</span>(<span class="fu">sprintf</span>(<span class="st">&quot;%s/results/1a_ipd_reg/%s/summary&quot;</span>, local_path, .)))) <span class="sc">%&gt;%</span></span>
<span id="cb153-14"><a href="runmodels.html#cb153-14" tabindex="-1"></a>  <span class="fu">unnest</span>(file) <span class="sc">%&gt;%</span></span>
<span id="cb153-15"><a href="runmodels.html#cb153-15" tabindex="-1"></a>  <span class="fu">separate</span>(file, <span class="fu">c</span>(<span class="st">&quot;Outcome&quot;</span>, <span class="st">&quot;Trait&quot;</span>, <span class="st">&quot;Moderator&quot;</span>, <span class="st">&quot;Covariate&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>, <span class="at">remove =</span> F) <span class="sc">%&gt;%</span> </span>
<span id="cb153-16"><a href="runmodels.html#cb153-16" tabindex="-1"></a>  <span class="do">## read in the files</span></span>
<span id="cb153-17"><a href="runmodels.html#cb153-17" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Covariate =</span> <span class="fu">str_remove</span>(Covariate, <span class="st">&quot;.RData&quot;</span>),</span>
<span id="cb153-18"><a href="runmodels.html#cb153-18" tabindex="-1"></a>         <span class="at">fx =</span> <span class="fu">map2</span>(file, type, <span class="sc">~</span><span class="fu">loadRData</span>(.x, .y, <span class="st">&quot;fx&quot;</span>, <span class="st">&quot;summary&quot;</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb153-19"><a href="runmodels.html#cb153-19" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>file) </span>
<span id="cb153-20"><a href="runmodels.html#cb153-20" tabindex="-1"></a>nested_ipd1a_reg</span></code></pre></div>
<pre><code>## # A tibble: 410 × 6
##    type        Outcome      Trait Moderator Covariate fx              
##    &lt;chr&gt;       &lt;chr&gt;        &lt;chr&gt; &lt;chr&gt;     &lt;chr&gt;     &lt;list&gt;          
##  1 Frequentist crystallized A     age       all       &lt;tibble [7 × 4]&gt;
##  2 Frequentist crystallized A     age       none      &lt;tibble [4 × 4]&gt;
##  3 Frequentist crystallized A     baseAge   age       &lt;tibble [5 × 4]&gt;
##  4 Frequentist crystallized A     baseAge   all       &lt;tibble [8 × 4]&gt;
##  5 Frequentist crystallized A     baseAge   education &lt;tibble [5 × 4]&gt;
##  6 Frequentist crystallized A     baseAge   gender    &lt;tibble [5 × 4]&gt;
##  7 Frequentist crystallized A     baseAge   none      &lt;tibble [4 × 4]&gt;
##  8 Frequentist crystallized A     baseYear  age       &lt;tibble [5 × 4]&gt;
##  9 Frequentist crystallized A     baseYear  all       &lt;tibble [8 × 4]&gt;
## 10 Frequentist crystallized A     baseYear  education &lt;tibble [5 × 4]&gt;
## # ℹ 400 more rows</code></pre>
<p>As can be seen above, the resulting data frame is nested, but it can be easily unnested using the unnest() function.</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="runmodels.html#cb155-1" tabindex="-1"></a>nested_ipd1a_reg <span class="sc">%&gt;%</span></span>
<span id="cb155-2"><a href="runmodels.html#cb155-2" tabindex="-1"></a>  <span class="fu">unnest</span>(fx)</span></code></pre></div>
<pre><code>## # A tibble: 2,993 × 9
##    type        Outcome      Trait Moderator Covariate term         estimate conf.low  conf.high
##    &lt;chr&gt;       &lt;chr&gt;        &lt;chr&gt; &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;           &lt;dbl&gt;    &lt;dbl&gt;      &lt;dbl&gt;
##  1 Frequentist crystallized A     age       all       (Intercept)   5.86     5.70     6.01     
##  2 Frequentist crystallized A     age       all       p_value      -0.0456  -0.0642  -0.0269   
##  3 Frequentist crystallized A     age       all       age           0.0157   0.00510  0.0262   
##  4 Frequentist crystallized A     age       all       genderFemale  0.165    0.103    0.228    
##  5 Frequentist crystallized A     age       all       SRhealth     -0.00315 -0.0203   0.0140   
##  6 Frequentist crystallized A     age       all       education     0.260    0.249    0.270    
##  7 Frequentist crystallized A     age       all       p_value:age  -0.00136 -0.00275  0.0000259
##  8 Frequentist crystallized A     age       none      (Intercept)   7.20     7.07     7.34     
##  9 Frequentist crystallized A     age       none      p_value      -0.141   -0.158   -0.124    
## 10 Frequentist crystallized A     age       none      age           0.00858 -0.00218  0.0193   
## # ℹ 2,983 more rows</code></pre>
<div id="tables" class="section level5 hasAnchor" number="3.2.1.5.1">
<h5><span class="header-section-number">3.2.1.5.1</span> Tables<a href="runmodels.html#tables" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div id="fixed-effects" class="section level6 hasAnchor" number="3.2.1.5.1.1">
<h6><span class="header-section-number">3.2.1.5.1.1</span> Fixed Effects<a href="runmodels.html#fixed-effects" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<p>Next, we want to format the study results in APA table format. In this case, we are interested in the fixed effects of personality predicting cognitive ability when there were no moderators, and the personality x moderator interaction when there was a moderator.</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="runmodels.html#cb157-1" tabindex="-1"></a><span class="do">## format results </span></span>
<span id="cb157-2"><a href="runmodels.html#cb157-2" tabindex="-1"></a>ipd1a_reg_tab <span class="ot">&lt;-</span> nested_ipd1a_reg <span class="sc">%&gt;%</span></span>
<span id="cb157-3"><a href="runmodels.html#cb157-3" tabindex="-1"></a>  <span class="fu">unnest</span>(fx) <span class="sc">%&gt;%</span></span>
<span id="cb157-4"><a href="runmodels.html#cb157-4" tabindex="-1"></a>  <span class="co"># keep key terms </span></span>
<span id="cb157-5"><a href="runmodels.html#cb157-5" tabindex="-1"></a>  <span class="fu">filter</span>((Moderator <span class="sc">==</span> <span class="st">&quot;none&quot;</span> <span class="sc">&amp;</span> term <span class="sc">==</span> <span class="st">&quot;p_value&quot;</span>) <span class="sc">|</span></span>
<span id="cb157-6"><a href="runmodels.html#cb157-6" tabindex="-1"></a>         (Moderator <span class="sc">!=</span> <span class="st">&quot;none&quot;</span> <span class="sc">&amp;</span> <span class="fu">grepl</span>(<span class="st">&quot;p_value:&quot;</span>, term))) <span class="sc">%&gt;%</span></span>
<span id="cb157-7"><a href="runmodels.html#cb157-7" tabindex="-1"></a>  <span class="co"># mark significance and prettify trait, outcome, and covariate names</span></span>
<span id="cb157-8"><a href="runmodels.html#cb157-8" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sig =</span> <span class="fu">ifelse</span>(<span class="fu">sign</span>(conf.low) <span class="sc">==</span> <span class="fu">sign</span>(conf.high), <span class="st">&quot;sig&quot;</span>, <span class="st">&quot;ns&quot;</span>),</span>
<span id="cb157-9"><a href="runmodels.html#cb157-9" tabindex="-1"></a>         <span class="at">Trait =</span> <span class="fu">factor</span>(Trait, traits<span class="sc">$</span>short_name),</span>
<span id="cb157-10"><a href="runmodels.html#cb157-10" tabindex="-1"></a>         <span class="at">Outcome =</span> <span class="fu">factor</span>(Outcome, outcomes<span class="sc">$</span>short_name, outcomes<span class="sc">$</span>long_name),</span>
<span id="cb157-11"><a href="runmodels.html#cb157-11" tabindex="-1"></a>         <span class="at">Moderator =</span> <span class="fu">factor</span>(Moderator, <span class="fu">c</span>(moders<span class="sc">$</span>short_name, stdyModers<span class="sc">$</span>short_name), <span class="fu">c</span>(moders<span class="sc">$</span>long_name, stdyModers<span class="sc">$</span>long_name)),</span>
<span id="cb157-12"><a href="runmodels.html#cb157-12" tabindex="-1"></a>         <span class="at">Covariate =</span> <span class="fu">ifelse</span>(Moderator <span class="sc">!=</span> <span class="st">&quot;None&quot;</span> <span class="sc">&amp;</span> Covariate <span class="sc">==</span> <span class="st">&quot;None&quot;</span>, Moderator, Covariate),</span>
<span id="cb157-13"><a href="runmodels.html#cb157-13" tabindex="-1"></a>         <span class="at">Covariate =</span> <span class="fu">factor</span>(Covariate, moders<span class="sc">$</span>short_name, <span class="fu">str_wrap</span>(moders<span class="sc">$</span>long_name, <span class="dv">15</span>)),</span>
<span id="cb157-14"><a href="runmodels.html#cb157-14" tabindex="-1"></a>         <span class="at">term =</span> <span class="fu">str_remove_all</span>(term, <span class="st">&quot;p_value:&quot;</span>),</span>
<span id="cb157-15"><a href="runmodels.html#cb157-15" tabindex="-1"></a>         <span class="at">term =</span> <span class="fu">mapvalues</span>(term, <span class="fu">c</span>(<span class="st">&quot;scaleBFIMS&quot;</span>, <span class="st">&quot;scaleIPIPNEO&quot;</span>, <span class="st">&quot;scaleTDAM40&quot;</span>, <span class="st">&quot;countryTheNetherlands&quot;</span>)</span>
<span id="cb157-16"><a href="runmodels.html#cb157-16" tabindex="-1"></a>                          , <span class="fu">c</span>(<span class="st">&quot;scaleBFI-S&quot;</span>, <span class="st">&quot;scaleIPIP NEO&quot;</span>, <span class="st">&quot;scaleTDA-40&quot;</span>, <span class="st">&quot;countryThe Netherlands&quot;</span>)),</span>
<span id="cb157-17"><a href="runmodels.html#cb157-17" tabindex="-1"></a>         <span class="at">term2 =</span> <span class="fu">factor</span>(term, <span class="fu">c</span>(moders<span class="sc">$</span>short_term, stdyModers<span class="sc">$</span>short_term),</span>
<span id="cb157-18"><a href="runmodels.html#cb157-18" tabindex="-1"></a>                       <span class="fu">c</span>(moders<span class="sc">$</span>long_term, stdyModers<span class="sc">$</span>long_term))) <span class="sc">%&gt;%</span></span>
<span id="cb157-19"><a href="runmodels.html#cb157-19" tabindex="-1"></a>  <span class="co"># format values as text, combine estimates and CI&#39;s, bold significance</span></span>
<span id="cb157-20"><a href="runmodels.html#cb157-20" tabindex="-1"></a>  <span class="fu">mutate_at</span>(<span class="fu">vars</span>(estimate, conf.low, conf.high), </span>
<span id="cb157-21"><a href="runmodels.html#cb157-21" tabindex="-1"></a>            <span class="sc">~</span><span class="fu">ifelse</span>(<span class="fu">abs</span>(.) <span class="sc">&lt;</span> .<span class="dv">01</span>, <span class="fu">sprintf</span>(<span class="st">&quot;%.3f&quot;</span>, .), <span class="fu">sprintf</span>(<span class="st">&quot;%.2f&quot;</span>, .))) <span class="sc">%&gt;%</span></span>
<span id="cb157-22"><a href="runmodels.html#cb157-22" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">est =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s&lt;br&gt;[%s, %s]&quot;</span>, estimate, conf.low, conf.high),</span>
<span id="cb157-23"><a href="runmodels.html#cb157-23" tabindex="-1"></a>         <span class="at">est =</span> <span class="fu">ifelse</span>(sig <span class="sc">==</span> <span class="st">&quot;sig&quot;</span>, <span class="fu">sprintf</span>(<span class="st">&quot;&lt;strong&gt;%s&lt;/strong&gt;&quot;</span>, est), est)) <span class="sc">%&gt;%</span></span>
<span id="cb157-24"><a href="runmodels.html#cb157-24" tabindex="-1"></a>  <span class="co"># mutate(est = sprintf(&quot;%s [%s, %s]&quot;, estimate, conf.low, conf.high),</span></span>
<span id="cb157-25"><a href="runmodels.html#cb157-25" tabindex="-1"></a>  <span class="co"># est = ifelse(sig == &quot;sig&quot;, sprintf(&quot;\\textbf{%s}&quot;, est), est)) %&gt;%</span></span>
<span id="cb157-26"><a href="runmodels.html#cb157-26" tabindex="-1"></a>  <span class="co"># final reshaping, remove extra columns, arrange values, and change to wide format</span></span>
<span id="cb157-27"><a href="runmodels.html#cb157-27" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>estimate, <span class="sc">-</span>conf.low, <span class="sc">-</span>conf.high, <span class="sc">-</span>sig, <span class="sc">-</span>term) <span class="sc">%&gt;%</span></span>
<span id="cb157-28"><a href="runmodels.html#cb157-28" tabindex="-1"></a>  <span class="fu">arrange</span>(type, Outcome, Trait, Moderator, Covariate) <span class="sc">%&gt;%</span></span>
<span id="cb157-29"><a href="runmodels.html#cb157-29" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">&quot;Trait&quot;</span>, <span class="at">values_from =</span> <span class="st">&quot;est&quot;</span>) </span>
<span id="cb157-30"><a href="runmodels.html#cb157-30" tabindex="-1"></a>ipd1a_reg_tab</span></code></pre></div>
<pre><code>## # A tibble: 172 × 10
##    type     Outcome              Moderator Covariate      term2                  E                    A     C     N     O    
##    &lt;chr&gt;    &lt;fct&gt;                &lt;fct&gt;     &lt;fct&gt;          &lt;fct&gt;                  &lt;chr&gt;                &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
##  1 Bayesian Crystallized Ability None      None           Personality            &lt;strong&gt;-0.08&lt;br&gt;[-… &lt;str… 0.00… -0.1… &lt;str…
##  2 Bayesian Crystallized Ability None      Age            Personality            &lt;strong&gt;-0.09&lt;br&gt;[-… &lt;str… 0.00… 0.09… &lt;str…
##  3 Bayesian Crystallized Ability None      Gender         Personality            &lt;strong&gt;-0.08&lt;br&gt;[-… &lt;str… 0.02… -0.0… &lt;str…
##  4 Bayesian Crystallized Ability None      Education      Personality            &lt;strong&gt;-0.07&lt;br&gt;[-… &lt;str… -0.0… -0.1… &lt;str…
##  5 Bayesian Crystallized Ability None      Fully Adjusted Personality            &lt;strong&gt;-0.07&lt;br&gt;[-… &lt;str… -0.0… -0.0… &lt;str…
##  6 Bayesian Crystallized Ability Age       None           Age                    0.000&lt;br&gt;[-0.001, 0… -0.0… &lt;str… 0.02… -0.0…
##  7 Bayesian Crystallized Ability Age       Fully Adjusted Age                    0.000&lt;br&gt;[-0.001, 0… -0.0… -0.0… -0.0… &lt;str…
##  8 Bayesian Crystallized Ability Gender    None           Gender (Male v Female) &lt;strong&gt;0.07&lt;br&gt;[0.… &lt;str… 0.00… -0.1… -0.0…
##  9 Bayesian Crystallized Ability Gender    Fully Adjusted Gender (Male v Female) &lt;strong&gt;0.05&lt;br&gt;[0.… &lt;str… 0.03… -0.0… -0.0…
## 10 Bayesian Crystallized Ability Education None           Education (Years)      &lt;strong&gt;0.004&lt;br&gt;[0… -0.0… &lt;str… 0.19… 0.00…
## # ℹ 162 more rows</code></pre>
<p>Now that we’ve formatted the values, we can group by moderators and save results as separate tables. Even though additional information could be included given that we have one outcome, we’ll stick with this split because it will make it easier for those using this tutorial who multiple traits, outcomes, covariates, and moderators.</p>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="runmodels.html#cb159-1" tabindex="-1"></a><span class="do">## table function </span></span>
<span id="cb159-2"><a href="runmodels.html#cb159-2" tabindex="-1"></a>ipd1a_tab_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(d, type, moder){</span>
<span id="cb159-3"><a href="runmodels.html#cb159-3" tabindex="-1"></a>  <span class="co"># long outcome name</span></span>
<span id="cb159-4"><a href="runmodels.html#cb159-4" tabindex="-1"></a>  md <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(moder, <span class="fu">c</span>(moders<span class="sc">$</span>long_name, stdyModers<span class="sc">$</span>long_name), <span class="fu">c</span>(moders<span class="sc">$</span>short_name, stdyModers<span class="sc">$</span>short_name), <span class="at">warn_missing =</span> F)</span>
<span id="cb159-5"><a href="runmodels.html#cb159-5" tabindex="-1"></a>  <span class="co"># getting row numbers for later grouping</span></span>
<span id="cb159-6"><a href="runmodels.html#cb159-6" tabindex="-1"></a>  rs <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Outcome) <span class="sc">%&gt;%</span> <span class="fu">tally</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb159-7"><a href="runmodels.html#cb159-7" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">end =</span> <span class="fu">cumsum</span>(n), <span class="at">start =</span> <span class="fu">lag</span>(end) <span class="sc">+</span> <span class="dv">1</span>, <span class="at">start =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(start), <span class="dv">1</span>, start))</span>
<span id="cb159-8"><a href="runmodels.html#cb159-8" tabindex="-1"></a>  <span class="co"># number and name of columns for span columns </span></span>
<span id="cb159-9"><a href="runmodels.html#cb159-9" tabindex="-1"></a>  cs <span class="ot">&lt;-</span> <span class="cf">if</span>(<span class="fu">length</span>(<span class="fu">unique</span>(d<span class="sc">$</span>term2)) <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="fu">c</span>(<span class="dv">2</span>, <span class="fu">rep</span>(<span class="dv">1</span>,<span class="dv">5</span>)) <span class="cf">else</span> <span class="fu">rep</span>(<span class="dv">1</span>,<span class="dv">6</span>)</span>
<span id="cb159-10"><a href="runmodels.html#cb159-10" tabindex="-1"></a>  <span class="fu">names</span>(cs) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot; &quot;</span>, traits<span class="sc">$</span>long_name)</span>
<span id="cb159-11"><a href="runmodels.html#cb159-11" tabindex="-1"></a>  cln <span class="ot">&lt;-</span> <span class="cf">if</span>(<span class="fu">length</span>(<span class="fu">unique</span>(d<span class="sc">$</span>term2)) <span class="sc">==</span> <span class="dv">1</span>) <span class="fu">c</span>(<span class="st">&quot;Covariate&quot;</span>, <span class="fu">rep</span>(<span class="st">&quot;</span><span class="sc">\\</span><span class="st">textit{b} [CI]&quot;</span>, <span class="dv">5</span>)) <span class="cf">else</span> <span class="fu">c</span>(<span class="st">&quot; &quot;</span>, <span class="st">&quot;Term&quot;</span>, <span class="fu">rep</span>(<span class="st">&quot;</span><span class="sc">\\</span><span class="st">textit{b} [CI]&quot;</span>, <span class="dv">5</span>))</span>
<span id="cb159-12"><a href="runmodels.html#cb159-12" tabindex="-1"></a>  cln <span class="ot">&lt;-</span> <span class="cf">if</span>(<span class="fu">length</span>(<span class="fu">unique</span>(d<span class="sc">$</span>term2)) <span class="sc">==</span> <span class="dv">1</span>) <span class="fu">c</span>(<span class="st">&quot;Covariate&quot;</span>, <span class="fu">rep</span>(<span class="st">&quot;&lt;em&gt;b&lt;/em&gt; [CI]&quot;</span>, <span class="dv">5</span>)) <span class="cf">else</span> <span class="fu">c</span>(<span class="st">&quot; &quot;</span>, <span class="st">&quot;Term&quot;</span>, <span class="fu">rep</span>(<span class="st">&quot;&lt;em&gt;b&lt;/em&gt; [CI]&quot;</span>, <span class="dv">5</span>))</span>
<span id="cb159-13"><a href="runmodels.html#cb159-13" tabindex="-1"></a>  al <span class="ot">&lt;-</span> <span class="cf">if</span>(<span class="fu">length</span>(<span class="fu">unique</span>(d<span class="sc">$</span>term2)) <span class="sc">==</span> <span class="dv">1</span>) <span class="fu">c</span>(<span class="st">&quot;r&quot;</span>, <span class="fu">rep</span>(<span class="st">&quot;c&quot;</span>, <span class="dv">5</span>)) <span class="cf">else</span> <span class="fu">c</span>(<span class="st">&quot;r&quot;</span>, <span class="st">&quot;r&quot;</span>, <span class="fu">rep</span>(<span class="st">&quot;c&quot;</span>, <span class="dv">5</span>))</span>
<span id="cb159-14"><a href="runmodels.html#cb159-14" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">length</span>(<span class="fu">unique</span>(d<span class="sc">$</span>term2)) <span class="sc">==</span> <span class="dv">1</span>) {</span>
<span id="cb159-15"><a href="runmodels.html#cb159-15" tabindex="-1"></a>    d <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>term2); dubs <span class="ot">&lt;-</span> F</span>
<span id="cb159-16"><a href="runmodels.html#cb159-16" tabindex="-1"></a>  } </span>
<span id="cb159-17"><a href="runmodels.html#cb159-17" tabindex="-1"></a>  <span class="co"># caption </span></span>
<span id="cb159-18"><a href="runmodels.html#cb159-18" tabindex="-1"></a>  cap <span class="ot">&lt;-</span> <span class="cf">if</span>(md <span class="sc">==</span> <span class="st">&quot;none&quot;</span>) <span class="st">&quot;1A Pooled Analysis of Individual Participant Data: Fixed Effect Personality-Crystallized Domain Associations&quot;</span> <span class="cf">else</span> <span class="fu">sprintf</span>(<span class="st">&quot;1A Pooled Analysis of Individual Participant Data: Fixed Effect %s Moderation of Personality-Crystallized Domain Associations&quot;</span>, md)</span>
<span id="cb159-19"><a href="runmodels.html#cb159-19" tabindex="-1"></a>  <span class="co"># kable the table</span></span>
<span id="cb159-20"><a href="runmodels.html#cb159-20" tabindex="-1"></a>  tab <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span></span>
<span id="cb159-21"><a href="runmodels.html#cb159-21" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>Outcome) <span class="sc">%&gt;%</span></span>
<span id="cb159-22"><a href="runmodels.html#cb159-22" tabindex="-1"></a>    <span class="fu">kable</span>(., <span class="st">&quot;html&quot;</span></span>
<span id="cb159-23"><a href="runmodels.html#cb159-23" tabindex="-1"></a>    <span class="co"># kable(., &quot;latex&quot;</span></span>
<span id="cb159-24"><a href="runmodels.html#cb159-24" tabindex="-1"></a>          , <span class="at">booktabs =</span> T</span>
<span id="cb159-25"><a href="runmodels.html#cb159-25" tabindex="-1"></a>          , <span class="at">escape =</span> F</span>
<span id="cb159-26"><a href="runmodels.html#cb159-26" tabindex="-1"></a>          , <span class="at">col.names =</span> cln</span>
<span id="cb159-27"><a href="runmodels.html#cb159-27" tabindex="-1"></a>          , <span class="at">align =</span> al</span>
<span id="cb159-28"><a href="runmodels.html#cb159-28" tabindex="-1"></a>          , <span class="at">caption =</span> cap</span>
<span id="cb159-29"><a href="runmodels.html#cb159-29" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb159-30"><a href="runmodels.html#cb159-30" tabindex="-1"></a>    <span class="fu">kable_classic</span>(<span class="at">full_width =</span> F, <span class="at">html_font =</span> <span class="st">&quot;Times New Roman&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb159-31"><a href="runmodels.html#cb159-31" tabindex="-1"></a>    <span class="co"># kable_styling(full_width = F, font_size = 7) %&gt;%</span></span>
<span id="cb159-32"><a href="runmodels.html#cb159-32" tabindex="-1"></a>    <span class="fu">add_header_above</span>(cs)</span>
<span id="cb159-33"><a href="runmodels.html#cb159-33" tabindex="-1"></a>  <span class="co"># for loop to add grouped sections </span></span>
<span id="cb159-34"><a href="runmodels.html#cb159-34" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(rs)){</span>
<span id="cb159-35"><a href="runmodels.html#cb159-35" tabindex="-1"></a>    tab <span class="ot">&lt;-</span> tab <span class="sc">%&gt;%</span> </span>
<span id="cb159-36"><a href="runmodels.html#cb159-36" tabindex="-1"></a>      kableExtra<span class="sc">::</span><span class="fu">group_rows</span>(rs<span class="sc">$</span>Moderator[i], rs<span class="sc">$</span>start[i], rs<span class="sc">$</span>end[i]) </span>
<span id="cb159-37"><a href="runmodels.html#cb159-37" tabindex="-1"></a>  }</span>
<span id="cb159-38"><a href="runmodels.html#cb159-38" tabindex="-1"></a>  <span class="co"># save the resulting html table</span></span>
<span id="cb159-39"><a href="runmodels.html#cb159-39" tabindex="-1"></a>  <span class="fu">save_kable</span>(tab, <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/1a_ipd_reg/%s/tables/overall/%s.html&quot;</span></span>
<span id="cb159-40"><a href="runmodels.html#cb159-40" tabindex="-1"></a>                                 , local_path, type, md))</span>
<span id="cb159-41"><a href="runmodels.html#cb159-41" tabindex="-1"></a>  <span class="fu">return</span>(tab) <span class="co"># return the html table</span></span>
<span id="cb159-42"><a href="runmodels.html#cb159-42" tabindex="-1"></a>}</span>
<span id="cb159-43"><a href="runmodels.html#cb159-43" tabindex="-1"></a></span>
<span id="cb159-44"><a href="runmodels.html#cb159-44" tabindex="-1"></a>ipd1a_fx_tab <span class="ot">&lt;-</span> ipd1a_reg_tab <span class="sc">%&gt;%</span></span>
<span id="cb159-45"><a href="runmodels.html#cb159-45" tabindex="-1"></a>  <span class="fu">group_by</span>(type, Moderator) <span class="sc">%&gt;%</span></span>
<span id="cb159-46"><a href="runmodels.html#cb159-46" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span></span>
<span id="cb159-47"><a href="runmodels.html#cb159-47" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb159-48"><a href="runmodels.html#cb159-48" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">tab =</span> <span class="fu">pmap</span>(<span class="fu">list</span>(data, type, Moderator), ipd1a_tab_fun))</span>
<span id="cb159-49"><a href="runmodels.html#cb159-49" tabindex="-1"></a>ipd1a_reg_tab</span></code></pre></div>
<pre><code>## # A tibble: 172 × 10
##    type     Outcome              Moderator Covariate      term2                  E                    A     C     N     O    
##    &lt;chr&gt;    &lt;fct&gt;                &lt;fct&gt;     &lt;fct&gt;          &lt;fct&gt;                  &lt;chr&gt;                &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
##  1 Bayesian Crystallized Ability None      None           Personality            &lt;strong&gt;-0.08&lt;br&gt;[-… &lt;str… 0.00… -0.1… &lt;str…
##  2 Bayesian Crystallized Ability None      Age            Personality            &lt;strong&gt;-0.09&lt;br&gt;[-… &lt;str… 0.00… 0.09… &lt;str…
##  3 Bayesian Crystallized Ability None      Gender         Personality            &lt;strong&gt;-0.08&lt;br&gt;[-… &lt;str… 0.02… -0.0… &lt;str…
##  4 Bayesian Crystallized Ability None      Education      Personality            &lt;strong&gt;-0.07&lt;br&gt;[-… &lt;str… -0.0… -0.1… &lt;str…
##  5 Bayesian Crystallized Ability None      Fully Adjusted Personality            &lt;strong&gt;-0.07&lt;br&gt;[-… &lt;str… -0.0… -0.0… &lt;str…
##  6 Bayesian Crystallized Ability Age       None           Age                    0.000&lt;br&gt;[-0.001, 0… -0.0… &lt;str… 0.02… -0.0…
##  7 Bayesian Crystallized Ability Age       Fully Adjusted Age                    0.000&lt;br&gt;[-0.001, 0… -0.0… -0.0… -0.0… &lt;str…
##  8 Bayesian Crystallized Ability Gender    None           Gender (Male v Female) &lt;strong&gt;0.07&lt;br&gt;[0.… &lt;str… 0.00… -0.1… -0.0…
##  9 Bayesian Crystallized Ability Gender    Fully Adjusted Gender (Male v Female) &lt;strong&gt;0.05&lt;br&gt;[0.… &lt;str… 0.03… -0.0… -0.0…
## 10 Bayesian Crystallized Ability Education None           Education (Years)      &lt;strong&gt;0.004&lt;br&gt;[0… -0.0… &lt;str… 0.19… 0.00…
## # ℹ 162 more rows</code></pre>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="runmodels.html#cb161-1" tabindex="-1"></a><span class="do">## Frequentist, no moderator</span></span>
<span id="cb161-2"><a href="runmodels.html#cb161-2" tabindex="-1"></a>(ipd1a_fx_tab <span class="sc">%&gt;%</span> <span class="fu">filter</span>(type <span class="sc">==</span> <span class="st">&quot;Frequentist&quot;</span> <span class="sc">&amp;</span> Moderator <span class="sc">==</span> <span class="st">&quot;None&quot;</span>))<span class="sc">$</span>tab[[<span class="dv">1</span>]]</span></code></pre></div>
<table class=" lightable-classic" style="color: black; font-family: Times New Roman; width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
(#tab:ipd1a table saving)1A Pooled Analysis of Individual Participant Data: Fixed Effect Personality-Crystallized Domain Associations
</caption>
<thead>
<tr>
<th style="empty-cells: hide;" colspan="1">
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
Extraversion
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
Agreeableness
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
Conscientiousness
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
Neuroticism
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
Openness to Experience
</div>
</th>
</tr>
<tr>
<th style="text-align:right;">
Covariate
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
</tr>
</thead>
<tbody>
<tr grouplength="5">
<td colspan="6" style="border-bottom: 0;">
<strong></strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
None
</td>
<td style="text-align:center;">
<strong>-0.08<br>[-0.10, -0.07]</strong>
</td>
<td style="text-align:center;">
<strong>-0.14<br>[-0.16, -0.12]</strong>
</td>
<td style="text-align:center;">
0.007<br>[-0.01, 0.02]
</td>
<td style="text-align:center;">
-0.003<br>[-0.02, 0.01]
</td>
<td style="text-align:center;">
<strong>0.20<br>[0.19, 0.22]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Age
</td>
<td style="text-align:center;">
<strong>-0.09<br>[-0.10, -0.07]</strong>
</td>
<td style="text-align:center;">
<strong>-0.14<br>[-0.16, -0.12]</strong>
</td>
<td style="text-align:center;">
0.007<br>[-0.01, 0.02]
</td>
<td style="text-align:center;">
0.002<br>[-0.01, 0.02]
</td>
<td style="text-align:center;">
<strong>0.19<br>[0.18, 0.21]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Gender
</td>
<td style="text-align:center;">
<strong>-0.08<br>[-0.09, -0.06]</strong>
</td>
<td style="text-align:center;">
<strong>-0.14<br>[-0.15, -0.12]</strong>
</td>
<td style="text-align:center;">
0.02<br>[-0.001, 0.03]
</td>
<td style="text-align:center;">
0.007<br>[-0.007, 0.02]
</td>
<td style="text-align:center;">
<strong>0.19<br>[0.17, 0.21]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Education
</td>
<td style="text-align:center;">
<strong>-0.07<br>[-0.09, -0.06]</strong>
</td>
<td style="text-align:center;">
<strong>-0.06<br>[-0.08, -0.05]</strong>
</td>
<td style="text-align:center;">
-0.01<br>[-0.03, 0.005]
</td>
<td style="text-align:center;">
<strong>-0.03<br>[-0.04, -0.01]</strong>
</td>
<td style="text-align:center;">
<strong>0.10<br>[0.09, 0.12]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Fully Adjusted
</td>
<td style="text-align:center;">
<strong>-0.03<br>[-0.05, -0.02]</strong>
</td>
<td style="text-align:center;">
<strong>-0.05<br>[-0.06, -0.03]</strong>
</td>
<td style="text-align:center;">
<strong>0.03<br>[0.02, 0.05]</strong>
</td>
<td style="text-align:center;">
<strong>-0.03<br>[-0.04, -0.01]</strong>
</td>
<td style="text-align:center;">
<strong>0.13<br>[0.11, 0.14]</strong>
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="runmodels.html#cb162-1" tabindex="-1"></a><span class="do">## bayesian</span></span>
<span id="cb162-2"><a href="runmodels.html#cb162-2" tabindex="-1"></a>(ipd1a_fx_tab <span class="sc">%&gt;%</span> <span class="fu">filter</span>(type <span class="sc">==</span> <span class="st">&quot;Bayesian&quot;</span> <span class="sc">&amp;</span> Moderator <span class="sc">==</span> <span class="st">&quot;None&quot;</span>))<span class="sc">$</span>tab[[<span class="dv">1</span>]]</span></code></pre></div>
<table class=" lightable-classic" style="color: black; font-family: Times New Roman; width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
(#tab:ipd1a table saving)1A Pooled Analysis of Individual Participant Data: Fixed Effect Personality-Crystallized Domain Associations
</caption>
<thead>
<tr>
<th style="empty-cells: hide;" colspan="1">
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
Extraversion
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
Agreeableness
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
Conscientiousness
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
Neuroticism
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
Openness to Experience
</div>
</th>
</tr>
<tr>
<th style="text-align:right;">
Covariate
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
</tr>
</thead>
<tbody>
<tr grouplength="5">
<td colspan="6" style="border-bottom: 0;">
<strong></strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
None
</td>
<td style="text-align:center;">
<strong>-0.08<br>[-0.10, -0.07]</strong>
</td>
<td style="text-align:center;">
<strong>-0.14<br>[-0.16, -0.12]</strong>
</td>
<td style="text-align:center;">
0.007<br>[-0.010, 0.02]
</td>
<td style="text-align:center;">
-0.18<br>[-0.59, 0.18]
</td>
<td style="text-align:center;">
<strong>0.20<br>[0.19, 0.22]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Age
</td>
<td style="text-align:center;">
<strong>-0.09<br>[-0.10, -0.07]</strong>
</td>
<td style="text-align:center;">
<strong>-0.14<br>[-0.16, -0.12]</strong>
</td>
<td style="text-align:center;">
0.007<br>[-0.01, 0.02]
</td>
<td style="text-align:center;">
0.09<br>[-0.21, 0.47]
</td>
<td style="text-align:center;">
<strong>0.19<br>[0.18, 0.21]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Gender
</td>
<td style="text-align:center;">
<strong>-0.08<br>[-0.09, -0.06]</strong>
</td>
<td style="text-align:center;">
<strong>-0.14<br>[-0.15, -0.12]</strong>
</td>
<td style="text-align:center;">
0.02<br>[-0.000, 0.03]
</td>
<td style="text-align:center;">
-0.08<br>[-0.68, 0.41]
</td>
<td style="text-align:center;">
<strong>0.19<br>[0.17, 0.20]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Education
</td>
<td style="text-align:center;">
<strong>-0.07<br>[-0.09, -0.06]</strong>
</td>
<td style="text-align:center;">
<strong>-0.06<br>[-0.08, -0.05]</strong>
</td>
<td style="text-align:center;">
-0.01<br>[-0.03, 0.006]
</td>
<td style="text-align:center;">
-0.11<br>[-0.72, 0.19]
</td>
<td style="text-align:center;">
<strong>0.10<br>[0.09, 0.12]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Fully Adjusted
</td>
<td style="text-align:center;">
<strong>-0.07<br>[-0.08, -0.05]</strong>
</td>
<td style="text-align:center;">
<strong>-0.07<br>[-0.09, -0.06]</strong>
</td>
<td style="text-align:center;">
-0.01<br>[-0.03, 0.006]
</td>
<td style="text-align:center;">
-0.05<br>[-0.33, 0.29]
</td>
<td style="text-align:center;">
<strong>0.11<br>[0.09, 0.12]</strong>
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="runmodels.html#cb163-1" tabindex="-1"></a>ipd1a_tab_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(d, type, cov){</span>
<span id="cb163-2"><a href="runmodels.html#cb163-2" tabindex="-1"></a>  <span class="co"># long outcome name</span></span>
<span id="cb163-3"><a href="runmodels.html#cb163-3" tabindex="-1"></a>  covar <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(cov, covars<span class="sc">$</span>long_name, covars<span class="sc">$</span>short_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb163-4"><a href="runmodels.html#cb163-4" tabindex="-1"></a>  <span class="co"># getting row numbers for later grouping</span></span>
<span id="cb163-5"><a href="runmodels.html#cb163-5" tabindex="-1"></a>  rs <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Moderator) <span class="sc">%&gt;%</span> <span class="fu">tally</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb163-6"><a href="runmodels.html#cb163-6" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">end =</span> <span class="fu">cumsum</span>(n), <span class="at">start =</span> <span class="fu">lag</span>(end) <span class="sc">+</span> <span class="dv">1</span>, <span class="at">start =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(start), <span class="dv">1</span>, start))</span>
<span id="cb163-7"><a href="runmodels.html#cb163-7" tabindex="-1"></a>  <span class="co"># number and name of columns for span columns </span></span>
<span id="cb163-8"><a href="runmodels.html#cb163-8" tabindex="-1"></a>  cs <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">1</span>,<span class="dv">6</span>)</span>
<span id="cb163-9"><a href="runmodels.html#cb163-9" tabindex="-1"></a>  <span class="fu">names</span>(cs) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot; &quot;</span>, traits<span class="sc">$</span>long_name)</span>
<span id="cb163-10"><a href="runmodels.html#cb163-10" tabindex="-1"></a>  <span class="co"># cln &lt;- if(length(unique(d$term2)) == 1) c(&quot;Covariate&quot;, rep(&quot;\\textit{b} [CI]&quot;, 5)) else c(&quot; &quot;, &quot;Term&quot;, rep(&quot;\\textit{b} [CI]&quot;, 5))</span></span>
<span id="cb163-11"><a href="runmodels.html#cb163-11" tabindex="-1"></a>  cln <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Term&quot;</span>, <span class="fu">rep</span>(<span class="st">&quot;&lt;em&gt;b&lt;/em&gt; [CI]&quot;</span>, <span class="dv">5</span>))</span>
<span id="cb163-12"><a href="runmodels.html#cb163-12" tabindex="-1"></a>  al <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;r&quot;</span>, <span class="fu">rep</span>(<span class="st">&quot;c&quot;</span>, <span class="dv">5</span>))</span>
<span id="cb163-13"><a href="runmodels.html#cb163-13" tabindex="-1"></a>  <span class="co"># caption </span></span>
<span id="cb163-14"><a href="runmodels.html#cb163-14" tabindex="-1"></a>  cv <span class="ot">&lt;-</span> <span class="cf">if</span> (cov <span class="sc">==</span> <span class="st">&quot;None&quot;</span>) <span class="st">&quot;Unadjusted&quot;</span> <span class="cf">else</span> cov</span>
<span id="cb163-15"><a href="runmodels.html#cb163-15" tabindex="-1"></a>  cap <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">&quot;1A Pooled Analysis of Individual Participant Data: Fixed Effect Estimates of %s Personality-Crystallized Domain Associations&quot;</span>, cv)</span>
<span id="cb163-16"><a href="runmodels.html#cb163-16" tabindex="-1"></a>  <span class="co"># kable the table</span></span>
<span id="cb163-17"><a href="runmodels.html#cb163-17" tabindex="-1"></a>  tab <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span></span>
<span id="cb163-18"><a href="runmodels.html#cb163-18" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>Moderator) <span class="sc">%&gt;%</span></span>
<span id="cb163-19"><a href="runmodels.html#cb163-19" tabindex="-1"></a>    <span class="fu">kable</span>(., <span class="st">&quot;html&quot;</span></span>
<span id="cb163-20"><a href="runmodels.html#cb163-20" tabindex="-1"></a>    <span class="co"># kable(., &quot;latex&quot;</span></span>
<span id="cb163-21"><a href="runmodels.html#cb163-21" tabindex="-1"></a>          , <span class="at">booktabs =</span> T</span>
<span id="cb163-22"><a href="runmodels.html#cb163-22" tabindex="-1"></a>          , <span class="at">escape =</span> F</span>
<span id="cb163-23"><a href="runmodels.html#cb163-23" tabindex="-1"></a>          , <span class="at">col.names =</span> cln</span>
<span id="cb163-24"><a href="runmodels.html#cb163-24" tabindex="-1"></a>          , <span class="at">align =</span> al</span>
<span id="cb163-25"><a href="runmodels.html#cb163-25" tabindex="-1"></a>          , <span class="at">caption =</span> cap</span>
<span id="cb163-26"><a href="runmodels.html#cb163-26" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb163-27"><a href="runmodels.html#cb163-27" tabindex="-1"></a>    <span class="fu">kable_classic</span>(<span class="at">full_width =</span> F, <span class="at">html_font =</span> <span class="st">&quot;Times New Roman&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb163-28"><a href="runmodels.html#cb163-28" tabindex="-1"></a>    <span class="co"># kable_styling(full_width = F, font_size = 7) %&gt;%</span></span>
<span id="cb163-29"><a href="runmodels.html#cb163-29" tabindex="-1"></a>    <span class="fu">add_header_above</span>(cs)</span>
<span id="cb163-30"><a href="runmodels.html#cb163-30" tabindex="-1"></a>  <span class="co"># for loop to add grouped sections </span></span>
<span id="cb163-31"><a href="runmodels.html#cb163-31" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(rs)){</span>
<span id="cb163-32"><a href="runmodels.html#cb163-32" tabindex="-1"></a>    tab <span class="ot">&lt;-</span> tab <span class="sc">%&gt;%</span> </span>
<span id="cb163-33"><a href="runmodels.html#cb163-33" tabindex="-1"></a>      kableExtra<span class="sc">::</span><span class="fu">group_rows</span>(rs<span class="sc">$</span>Moderator[i], rs<span class="sc">$</span>start[i], rs<span class="sc">$</span>end[i]) </span>
<span id="cb163-34"><a href="runmodels.html#cb163-34" tabindex="-1"></a>  }</span>
<span id="cb163-35"><a href="runmodels.html#cb163-35" tabindex="-1"></a>  <span class="co"># save the resulting html table</span></span>
<span id="cb163-36"><a href="runmodels.html#cb163-36" tabindex="-1"></a>  <span class="fu">save_kable</span>(tab, <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/1a_ipd_reg/%s/tables/key terms/%s.html&quot;</span></span>
<span id="cb163-37"><a href="runmodels.html#cb163-37" tabindex="-1"></a>                                 , local_path, type, covar))</span>
<span id="cb163-38"><a href="runmodels.html#cb163-38" tabindex="-1"></a>  <span class="fu">return</span>(tab) <span class="co"># return the html table</span></span>
<span id="cb163-39"><a href="runmodels.html#cb163-39" tabindex="-1"></a>}</span>
<span id="cb163-40"><a href="runmodels.html#cb163-40" tabindex="-1"></a></span>
<span id="cb163-41"><a href="runmodels.html#cb163-41" tabindex="-1"></a>ipd1a_fx_tab2 <span class="ot">&lt;-</span> ipd1a_reg_tab <span class="sc">%&gt;%</span></span>
<span id="cb163-42"><a href="runmodels.html#cb163-42" tabindex="-1"></a>  <span class="fu">arrange</span>(Outcome, Moderator, term2) <span class="sc">%&gt;%</span></span>
<span id="cb163-43"><a href="runmodels.html#cb163-43" tabindex="-1"></a>  <span class="fu">filter</span>(Covariate <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;None&quot;</span>, <span class="st">&quot;Fully Adjusted&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb163-44"><a href="runmodels.html#cb163-44" tabindex="-1"></a>  <span class="fu">group_by</span>(Outcome, type, Covariate) <span class="sc">%&gt;%</span> </span>
<span id="cb163-45"><a href="runmodels.html#cb163-45" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span></span>
<span id="cb163-46"><a href="runmodels.html#cb163-46" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb163-47"><a href="runmodels.html#cb163-47" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">tab =</span> <span class="fu">pmap</span>(<span class="fu">list</span>(data, type, Covariate), ipd1a_tab_fun))</span>
<span id="cb163-48"><a href="runmodels.html#cb163-48" tabindex="-1"></a></span>
<span id="cb163-49"><a href="runmodels.html#cb163-49" tabindex="-1"></a><span class="do">## Frequentist, no moderator</span></span>
<span id="cb163-50"><a href="runmodels.html#cb163-50" tabindex="-1"></a>(ipd1a_fx_tab2 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(type <span class="sc">==</span> <span class="st">&quot;Frequentist&quot;</span> <span class="sc">&amp;</span> Covariate <span class="sc">==</span> <span class="st">&quot;Fully Adjusted&quot;</span>))<span class="sc">$</span>tab[[<span class="dv">1</span>]]</span></code></pre></div>
<table class=" lightable-classic" style="color: black; font-family: Times New Roman; width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
(#tab:ipd1a key term tab)1A Pooled Analysis of Individual Participant Data: Fixed Effect Estimates of Fully Adjusted Personality-Crystallized Domain Associations
</caption>
<thead>
<tr>
<th style="empty-cells: hide;" colspan="1">
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
Extraversion
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
Agreeableness
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
Conscientiousness
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
Neuroticism
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
Openness to Experience
</div>
</th>
</tr>
<tr>
<th style="text-align:right;">
Term
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
</tr>
</thead>
<tbody>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>None</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Personality
</td>
<td style="text-align:center;">
<strong>-0.03<br>[-0.05, -0.02]</strong>
</td>
<td style="text-align:center;">
<strong>-0.05<br>[-0.06, -0.03]</strong>
</td>
<td style="text-align:center;">
<strong>0.03<br>[0.02, 0.05]</strong>
</td>
<td style="text-align:center;">
<strong>-0.03<br>[-0.04, -0.01]</strong>
</td>
<td style="text-align:center;">
<strong>0.13<br>[0.11, 0.14]</strong>
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Age</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Age
</td>
<td style="text-align:center;">
-0.000<br>[-0.002, 0.001]
</td>
<td style="text-align:center;">
-0.001<br>[-0.003, 0.000]
</td>
<td style="text-align:center;">
0.001<br>[-0.001, 0.002]
</td>
<td style="text-align:center;">
<strong>0.002<br>[0.001, 0.003]</strong>
</td>
<td style="text-align:center;">
<strong>-0.003<br>[-0.005, -0.002]</strong>
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Gender</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Gender (Male v Female)
</td>
<td style="text-align:center;">
<strong>0.05<br>[0.02, 0.08]</strong>
</td>
<td style="text-align:center;">
0.03<br>[-0.01, 0.06]
</td>
<td style="text-align:center;">
0.01<br>[-0.02, 0.05]
</td>
<td style="text-align:center;">
-0.01<br>[-0.04, 0.01]
</td>
<td style="text-align:center;">
-0.02<br>[-0.06, 0.009]
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Education</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Education (Years)
</td>
<td style="text-align:center;">
<strong>0.007<br>[0.002, 0.01]</strong>
</td>
<td style="text-align:center;">
-0.001<br>[-0.007, 0.005]
</td>
<td style="text-align:center;">
<strong>-0.007<br>[-0.01, -0.001]</strong>
</td>
<td style="text-align:center;">
-0.002<br>[-0.006, 0.001]
</td>
<td style="text-align:center;">
0.005<br>[-0.000, 0.01]
</td>
</tr>
<tr grouplength="2">
<td colspan="6" style="border-bottom: 0;">
<strong>Continent</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Continent (North America v Europe)
</td>
<td style="text-align:center;">
<strong>0.15<br>[0.10, 0.20]</strong>
</td>
<td style="text-align:center;">
-0.03<br>[-0.09, 0.04]
</td>
<td style="text-align:center;">
-0.04<br>[-0.10, 0.01]
</td>
<td style="text-align:center;">
<strong>0.06<br>[0.03, 0.09]</strong>
</td>
<td style="text-align:center;">
0.04<br>[-0.01, 0.10]
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Continent (North America v Australia)
</td>
<td style="text-align:center;">
<strong>0.06<br>[0.02, 0.09]</strong>
</td>
<td style="text-align:center;">
0.002<br>[-0.04, 0.04]
</td>
<td style="text-align:center;">
<strong>-0.04<br>[-0.08, -0.008]</strong>
</td>
<td style="text-align:center;">
<strong>-0.13<br>[-0.17, -0.10]</strong>
</td>
<td style="text-align:center;">
<strong>0.11<br>[0.08, 0.14]</strong>
</td>
</tr>
<tr grouplength="4">
<td colspan="6" style="border-bottom: 0;">
<strong>Country</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Country (United States v Germany)
</td>
<td style="text-align:center;">
<strong>0.20<br>[0.12, 0.27]</strong>
</td>
<td style="text-align:center;">
0.005<br>[-0.08, 0.09]
</td>
<td style="text-align:center;">
-0.06<br>[-0.15, 0.04]
</td>
<td style="text-align:center;">
<strong>0.10<br>[0.03, 0.17]</strong>
</td>
<td style="text-align:center;">
0.02<br>[-0.04, 0.09]
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Country (United States v Sweden)
</td>
<td style="text-align:center;">
<strong>0.08<br>[0.02, 0.15]</strong>
</td>
<td style="text-align:center;">
<strong>-0.22<br>[-0.33, -0.11]</strong>
</td>
<td style="text-align:center;">
<strong>-0.21<br>[-0.30, -0.11]</strong>
</td>
<td style="text-align:center;">
0.03<br>[-0.03, 0.09]
</td>
<td style="text-align:center;">
<strong>0.23<br>[0.09, 0.36]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Country (United States v The Netherlands)
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
-0.02<br>[-0.07, 0.03]
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Country (United States v Australia)
</td>
<td style="text-align:center;">
<strong>0.06<br>[0.02, 0.09]</strong>
</td>
<td style="text-align:center;">
0.001<br>[-0.04, 0.04]
</td>
<td style="text-align:center;">
<strong>-0.05<br>[-0.08, -0.01]</strong>
</td>
<td style="text-align:center;">
<strong>-0.13<br>[-0.17, -0.10]</strong>
</td>
<td style="text-align:center;">
<strong>0.11<br>[0.08, 0.14]</strong>
</td>
</tr>
<tr grouplength="6">
<td colspan="6" style="border-bottom: 0;">
<strong>Personality Scale</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Scale (NEO-FFI v DPQ)
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>0.11<br>[0.06, 0.17]</strong>
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Scale (NEO-FFI v Eysenck)
</td>
<td style="text-align:center;">
0.02<br>[-0.15, 0.20]
</td>
<td style="text-align:center;">
<strong>-0.23<br>[-0.36, -0.09]</strong>
</td>
<td style="text-align:center;">
<strong>-0.15<br>[-0.28, -0.02]</strong>
</td>
<td style="text-align:center;">
<strong>0.21<br>[0.14, 0.27]</strong>
</td>
<td style="text-align:center;">
-0.06<br>[-0.25, 0.13]
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Scale (NEO-FFI v MIDI)
</td>
<td style="text-align:center;">
-0.06<br>[-0.22, 0.11]
</td>
<td style="text-align:center;">
-0.005<br>[-0.09, 0.08]
</td>
<td style="text-align:center;">
0.06<br>[-0.04, 0.15]
</td>
<td style="text-align:center;">
<strong>0.14<br>[0.10, 0.18]</strong>
</td>
<td style="text-align:center;">
<strong>-0.28<br>[-0.42, -0.14]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Scale (NEO-FFI v BFI-S)
</td>
<td style="text-align:center;">
0.07<br>[-0.11, 0.25]
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>0.14<br>[0.05, 0.22]</strong>
</td>
<td style="text-align:center;">
<strong>-0.32<br>[-0.47, -0.16]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Scale (NEO-FFI v IPIP NEO)
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>0.10<br>[0.01, 0.19]</strong>
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Scale (NEO-FFI v TDA-40)
</td>
<td style="text-align:center;">
-0.003<br>[-0.17, 0.16]
</td>
<td style="text-align:center;">
-0.004<br>[-0.09, 0.08]
</td>
<td style="text-align:center;">
0.01<br>[-0.08, 0.10]
</td>
<td style="text-align:center;">
0.02<br>[-0.02, 0.07]
</td>
<td style="text-align:center;">
<strong>-0.17<br>[-0.31, -0.03]</strong>
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Baseline Age</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Study Baseline Age
</td>
<td style="text-align:center;">
<strong>-0.004<br>[-0.005, -0.003]</strong>
</td>
<td style="text-align:center;">
-0.001<br>[-0.002, 0.001]
</td>
<td style="text-align:center;">
-0.000<br>[-0.002, 0.001]
</td>
<td style="text-align:center;">
-0.000<br>[-0.001, 0.001]
</td>
<td style="text-align:center;">
<strong>-0.004<br>[-0.005, -0.003]</strong>
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Baseline Year</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Study Baseline Year
</td>
<td style="text-align:center;">
-0.003<br>[-0.006, 0.001]
</td>
<td style="text-align:center;">
<strong>0.007<br>[0.002, 0.01]</strong>
</td>
<td style="text-align:center;">
<strong>0.007<br>[0.003, 0.01]</strong>
</td>
<td style="text-align:center;">
<strong>0.002<br>[0.000, 0.005]</strong>
</td>
<td style="text-align:center;">
<strong>-0.010<br>[-0.01, -0.004]</strong>
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Prediction Interval</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Prediction Interval
</td>
<td style="text-align:center;">
0.002<br>[-0.005, 0.009]
</td>
<td style="text-align:center;">
<strong>-0.03<br>[-0.04, -0.03]</strong>
</td>
<td style="text-align:center;">
<strong>-0.03<br>[-0.03, -0.02]</strong>
</td>
<td style="text-align:center;">
<strong>-0.006<br>[-0.01, -0.000]</strong>
</td>
<td style="text-align:center;">
<strong>0.02<br>[0.01, 0.03]</strong>
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="runmodels.html#cb164-1" tabindex="-1"></a><span class="do">## bayesian</span></span>
<span id="cb164-2"><a href="runmodels.html#cb164-2" tabindex="-1"></a>(ipd1a_fx_tab2 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(type <span class="sc">==</span> <span class="st">&quot;Bayesian&quot;</span> <span class="sc">&amp;</span> Covariate <span class="sc">==</span> <span class="st">&quot;Fully Adjusted&quot;</span>))<span class="sc">$</span>tab[[<span class="dv">1</span>]]</span></code></pre></div>
<table class=" lightable-classic" style="color: black; font-family: Times New Roman; width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
(#tab:ipd1a key term tab)1A Pooled Analysis of Individual Participant Data: Fixed Effect Estimates of Fully Adjusted Personality-Crystallized Domain Associations
</caption>
<thead>
<tr>
<th style="empty-cells: hide;" colspan="1">
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
Extraversion
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
Agreeableness
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
Conscientiousness
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
Neuroticism
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
Openness to Experience
</div>
</th>
</tr>
<tr>
<th style="text-align:right;">
Term
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
</tr>
</thead>
<tbody>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>None</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Personality
</td>
<td style="text-align:center;">
<strong>-0.07<br>[-0.08, -0.05]</strong>
</td>
<td style="text-align:center;">
<strong>-0.07<br>[-0.09, -0.06]</strong>
</td>
<td style="text-align:center;">
-0.01<br>[-0.03, 0.006]
</td>
<td style="text-align:center;">
-0.05<br>[-0.33, 0.29]
</td>
<td style="text-align:center;">
<strong>0.11<br>[0.09, 0.12]</strong>
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Age</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Age
</td>
<td style="text-align:center;">
0.000<br>[-0.001, 0.002]
</td>
<td style="text-align:center;">
-0.000<br>[-0.002, 0.001]
</td>
<td style="text-align:center;">
-0.001<br>[-0.002, 0.001]
</td>
<td style="text-align:center;">
-0.009<br>[-0.09, 0.12]
</td>
<td style="text-align:center;">
<strong>-0.003<br>[-0.004, -0.002]</strong>
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Gender</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Gender (Male v Female)
</td>
<td style="text-align:center;">
<strong>0.05<br>[0.02, 0.08]</strong>
</td>
<td style="text-align:center;">
<strong>0.04<br>[0.005, 0.07]</strong>
</td>
<td style="text-align:center;">
0.03<br>[-0.005, 0.06]
</td>
<td style="text-align:center;">
-0.09<br>[-0.91, 0.44]
</td>
<td style="text-align:center;">
-0.02<br>[-0.05, 0.01]
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Education</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Education (Years)
</td>
<td style="text-align:center;">
<strong>0.005<br>[0.000, 0.009]</strong>
</td>
<td style="text-align:center;">
-0.003<br>[-0.008, 0.001]
</td>
<td style="text-align:center;">
<strong>-0.006<br>[-0.01, -0.002]</strong>
</td>
<td style="text-align:center;">
0.10<br>[-0.11, 0.39]
</td>
<td style="text-align:center;">
0.001<br>[-0.004, 0.006]
</td>
</tr>
<tr grouplength="2">
<td colspan="6" style="border-bottom: 0;">
<strong>Continent</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Continent (North America v Europe)
</td>
<td style="text-align:center;">
<strong>0.26<br>[0.21, 0.31]</strong>
</td>
<td style="text-align:center;">
<strong>0.08<br>[0.02, 0.14]</strong>
</td>
<td style="text-align:center;">
<strong>0.11<br>[0.05, 0.17]</strong>
</td>
<td style="text-align:center;">
-0.009<br>[-0.58, 0.26]
</td>
<td style="text-align:center;">
<strong>0.08<br>[0.01, 0.14]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Continent (North America v Australia)
</td>
<td style="text-align:center;">
<strong>0.18<br>[0.15, 0.21]</strong>
</td>
<td style="text-align:center;">
<strong>0.08<br>[0.05, 0.12]</strong>
</td>
<td style="text-align:center;">
<strong>0.09<br>[0.06, 0.13]</strong>
</td>
<td style="text-align:center;">
-0.13<br>[-0.58, 0.36]
</td>
<td style="text-align:center;">
<strong>0.13<br>[0.10, 0.16]</strong>
</td>
</tr>
<tr grouplength="4">
<td colspan="6" style="border-bottom: 0;">
<strong>Country</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Country (United States v Germany)
</td>
<td style="text-align:center;">
<strong>0.32<br>[0.24, 0.39]</strong>
</td>
<td style="text-align:center;">
<strong>0.09<br>[0.001, 0.18]</strong>
</td>
<td style="text-align:center;">
0.08<br>[-0.01, 0.18]
</td>
<td style="text-align:center;">
0.25<br>[-0.81, 1.61]
</td>
<td style="text-align:center;">
0.05<br>[-0.02, 0.12]
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Country (United States v Sweden)
</td>
<td style="text-align:center;">
<strong>0.19<br>[0.12, 0.26]</strong>
</td>
<td style="text-align:center;">
<strong>-0.14<br>[-0.25, -0.03]</strong>
</td>
<td style="text-align:center;">
-0.07<br>[-0.17, 0.04]
</td>
<td style="text-align:center;">
-0.23<br>[-1.40, 0.61]
</td>
<td style="text-align:center;">
<strong>0.24<br>[0.09, 0.39]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Country (United States v The Netherlands)
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>1.00<br>[0.37, 1.69]</strong>
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Country (United States v Australia)
</td>
<td style="text-align:center;">
<strong>0.18<br>[0.15, 0.21]</strong>
</td>
<td style="text-align:center;">
<strong>0.09<br>[0.05, 0.12]</strong>
</td>
<td style="text-align:center;">
<strong>0.09<br>[0.06, 0.13]</strong>
</td>
<td style="text-align:center;">
-0.01<br>[-0.56, 0.59]
</td>
<td style="text-align:center;">
<strong>0.13<br>[0.10, 0.16]</strong>
</td>
</tr>
<tr grouplength="6">
<td colspan="6" style="border-bottom: 0;">
<strong>Personality Scale</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Scale (NEO-FFI v DPQ)
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
-0.11<br>[-1.65, 0.76]
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Scale (NEO-FFI v Eysenck)
</td>
<td style="text-align:center;">
-0.006<br>[-0.08, 0.07]
</td>
<td style="text-align:center;">
<strong>-0.24<br>[-0.36, -0.10]</strong>
</td>
<td style="text-align:center;">
<strong>-0.28<br>[-0.39, -0.18]</strong>
</td>
<td style="text-align:center;">
<strong>0.67<br>[0.34, 0.91]</strong>
</td>
<td style="text-align:center;">
<strong>0.25<br>[0.09, 0.40]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Scale (NEO-FFI v MIDI)
</td>
<td style="text-align:center;">
<strong>-0.07<br>[-0.11, -0.02]</strong>
</td>
<td style="text-align:center;">
-0.007<br>[-0.08, 0.07]
</td>
<td style="text-align:center;">
-0.05<br>[-0.11, 0.007]
</td>
<td style="text-align:center;">
0.16<br>[-0.26, 0.54]
</td>
<td style="text-align:center;">
0.04<br>[-0.03, 0.11]
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Scale (NEO-FFI v BFI-S)
</td>
<td style="text-align:center;">
0.05<br>[-0.04, 0.14]
</td>
<td style="text-align:center;">
-0.01<br>[-0.13, 0.10]
</td>
<td style="text-align:center;">
<strong>-0.14<br>[-0.24, -0.03]</strong>
</td>
<td style="text-align:center;">
0.20<br>[-1.47, 1.79]
</td>
<td style="text-align:center;">
-0.007<br>[-0.10, 0.09]
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Scale (NEO-FFI v IPIP NEO)
</td>
<td style="text-align:center;">
0.04<br>[-0.06, 0.14]
</td>
<td style="text-align:center;">
0.01<br>[-0.10, 0.12]
</td>
<td style="text-align:center;">
<strong>-0.18<br>[-0.28, -0.09]</strong>
</td>
<td style="text-align:center;">
-0.02<br>[-1.12, 1.58]
</td>
<td style="text-align:center;">
<strong>0.12<br>[0.02, 0.23]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Scale (NEO-FFI v TDA-40)
</td>
<td style="text-align:center;">
-0.02<br>[-0.07, 0.03]
</td>
<td style="text-align:center;">
-0.01<br>[-0.09, 0.07]
</td>
<td style="text-align:center;">
<strong>-0.11<br>[-0.17, -0.05]</strong>
</td>
<td style="text-align:center;">
-0.06<br>[-0.81, 0.63]
</td>
<td style="text-align:center;">
<strong>0.13<br>[0.06, 0.21]</strong>
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Baseline Age</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Study Baseline Age
</td>
<td style="text-align:center;">
<strong>-0.006<br>[-0.007, -0.005]</strong>
</td>
<td style="text-align:center;">
<strong>-0.003<br>[-0.004, -0.002]</strong>
</td>
<td style="text-align:center;">
<strong>-0.005<br>[-0.007, -0.004]</strong>
</td>
<td style="text-align:center;">
-0.06<br>[-0.19, 0.000]
</td>
<td style="text-align:center;">
<strong>-0.005<br>[-0.006, -0.004]</strong>
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Baseline Year</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Study Baseline Year
</td>
<td style="text-align:center;">
<strong>-0.005<br>[-0.008, -0.002]</strong>
</td>
<td style="text-align:center;">
<strong>0.01<br>[0.007, 0.02]</strong>
</td>
<td style="text-align:center;">
-0.003<br>[-0.007, 0.001]
</td>
<td style="text-align:center;">
-0.07<br>[-0.16, 0.009]
</td>
<td style="text-align:center;">
0.001<br>[-0.004, 0.006]
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Prediction Interval</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Prediction Interval
</td>
<td style="text-align:center;">
<strong>0.009<br>[0.003, 0.02]</strong>
</td>
<td style="text-align:center;">
<strong>-0.03<br>[-0.03, -0.02]</strong>
</td>
<td style="text-align:center;">
<strong>-0.01<br>[-0.02, -0.006]</strong>
</td>
<td style="text-align:center;">
-0.05<br>[-0.29, 0.92]
</td>
<td style="text-align:center;">
0.003<br>[-0.005, 0.01]
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="runmodels.html#cb165-1" tabindex="-1"></a><span class="co"># save(ipd1a_fx_tab, ipd1a_fx_tab2, ipd1a_res, file = sprintf(&quot;%s/manuscript/results/ipd1a_fx_tab.RData&quot;, local_path))</span></span></code></pre></div>
</div>
<div id="study-specific-effects" class="section level6 hasAnchor" number="3.2.1.5.1.2">
<h6><span class="header-section-number">3.2.1.5.1.2</span> Study-Specific Effects<a href="runmodels.html#study-specific-effects" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<p>This header is here to simply emphasize that this method does not provide study-specific estimates, unlike Methods 2ab, 3, and 4.</p>
</div>
<div id="heterogeneity-estimates" class="section level6 hasAnchor" number="3.2.1.5.1.3">
<h6><span class="header-section-number">3.2.1.5.1.3</span> Heterogeneity Estimates<a href="runmodels.html#heterogeneity-estimates" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<p>This header is here to simply emphasize that this method does not provide heterogeneity estimates because it does not provide study-specific estimates, unlike Methods 2ab, 3, and 4.</p>
</div>
<div id="all-model-terms" class="section level6 hasAnchor" number="3.2.1.5.1.4">
<h6><span class="header-section-number">3.2.1.5.1.4</span> All Model Terms<a href="runmodels.html#all-model-terms" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="runmodels.html#cb166-1" tabindex="-1"></a>ipd1a_mod_tab <span class="ot">&lt;-</span> nested_ipd1a_reg <span class="sc">%&gt;%</span></span>
<span id="cb166-2"><a href="runmodels.html#cb166-2" tabindex="-1"></a>  <span class="fu">unnest</span>(fx) <span class="sc">%&gt;%</span></span>
<span id="cb166-3"><a href="runmodels.html#cb166-3" tabindex="-1"></a>  <span class="co"># keep key terms </span></span>
<span id="cb166-4"><a href="runmodels.html#cb166-4" tabindex="-1"></a>  <span class="co"># mark significance and prettify trait, outcome, and covariate names</span></span>
<span id="cb166-5"><a href="runmodels.html#cb166-5" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sig =</span> <span class="fu">ifelse</span>(<span class="fu">sign</span>(conf.low) <span class="sc">==</span> <span class="fu">sign</span>(conf.high), <span class="st">&quot;sig&quot;</span>, <span class="st">&quot;ns&quot;</span>),</span>
<span id="cb166-6"><a href="runmodels.html#cb166-6" tabindex="-1"></a>         <span class="at">Trait =</span> <span class="fu">factor</span>(Trait, traits<span class="sc">$</span>short_name),</span>
<span id="cb166-7"><a href="runmodels.html#cb166-7" tabindex="-1"></a>         <span class="at">Outcome =</span> <span class="fu">factor</span>(Outcome, outcomes<span class="sc">$</span>short_name, outcomes<span class="sc">$</span>long_name),</span>
<span id="cb166-8"><a href="runmodels.html#cb166-8" tabindex="-1"></a>         <span class="at">Moderator =</span> <span class="fu">factor</span>(Moderator, <span class="fu">c</span>(moders<span class="sc">$</span>short_name, stdyModers<span class="sc">$</span>short_name), <span class="fu">c</span>(moders<span class="sc">$</span>long_name, stdyModers<span class="sc">$</span>long_name)),</span>
<span id="cb166-9"><a href="runmodels.html#cb166-9" tabindex="-1"></a>         <span class="at">Covariate =</span> <span class="fu">factor</span>(Covariate, covars<span class="sc">$</span>short_name, <span class="fu">str_wrap</span>(covars<span class="sc">$</span>long_name, <span class="dv">15</span>)),<span class="co">#ifelse(Moderator != &quot;None&quot; &amp; Covariate == &quot;none&quot;, Moderator, Covariate),</span></span>
<span id="cb166-10"><a href="runmodels.html#cb166-10" tabindex="-1"></a>         ) <span class="sc">%&gt;%</span></span>
<span id="cb166-11"><a href="runmodels.html#cb166-11" tabindex="-1"></a>  <span class="co"># format values as text, combine estimates and CI&#39;s, bold significance</span></span>
<span id="cb166-12"><a href="runmodels.html#cb166-12" tabindex="-1"></a>  <span class="fu">mutate_at</span>(<span class="fu">vars</span>(estimate, conf.low, conf.high), </span>
<span id="cb166-13"><a href="runmodels.html#cb166-13" tabindex="-1"></a>            <span class="sc">~</span><span class="fu">ifelse</span>(<span class="fu">abs</span>(.) <span class="sc">&lt;</span> .<span class="dv">01</span>, <span class="fu">sprintf</span>(<span class="st">&quot;%.3f&quot;</span>, .), <span class="fu">sprintf</span>(<span class="st">&quot;%.2f&quot;</span>, .))) <span class="sc">%&gt;%</span></span>
<span id="cb166-14"><a href="runmodels.html#cb166-14" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">est =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s&lt;br&gt;[%s, %s]&quot;</span>, estimate, conf.low, conf.high),</span>
<span id="cb166-15"><a href="runmodels.html#cb166-15" tabindex="-1"></a>         <span class="at">est =</span> <span class="fu">ifelse</span>(sig <span class="sc">==</span> <span class="st">&quot;sig&quot;</span>, <span class="fu">sprintf</span>(<span class="st">&quot;&lt;strong&gt;%s&lt;/strong&gt;&quot;</span>, est), est)) <span class="sc">%&gt;%</span></span>
<span id="cb166-16"><a href="runmodels.html#cb166-16" tabindex="-1"></a>  <span class="co"># mutate(est = sprintf(&quot;%s [%s, %s]&quot;, estimate, conf.low, conf.high),</span></span>
<span id="cb166-17"><a href="runmodels.html#cb166-17" tabindex="-1"></a>  <span class="co"># est = ifelse(sig == &quot;sig&quot;, sprintf(&quot;\\textbf{%s}&quot;, est), est)) %&gt;%</span></span>
<span id="cb166-18"><a href="runmodels.html#cb166-18" tabindex="-1"></a>  <span class="co"># final reshaping, remove extra columns, arrange values, and change to wide format</span></span>
<span id="cb166-19"><a href="runmodels.html#cb166-19" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>estimate, <span class="sc">-</span>conf.low, <span class="sc">-</span>conf.high, <span class="sc">-</span>sig) <span class="sc">%&gt;%</span></span>
<span id="cb166-20"><a href="runmodels.html#cb166-20" tabindex="-1"></a>  <span class="fu">arrange</span>(type, Outcome, Trait, Moderator, Covariate) <span class="sc">%&gt;%</span></span>
<span id="cb166-21"><a href="runmodels.html#cb166-21" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">&quot;Trait&quot;</span>, <span class="at">values_from =</span> <span class="st">&quot;est&quot;</span>) </span>
<span id="cb166-22"><a href="runmodels.html#cb166-22" tabindex="-1"></a></span>
<span id="cb166-23"><a href="runmodels.html#cb166-23" tabindex="-1"></a>ipd1a_mod_tab_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(d, type, out, moder, cov){</span>
<span id="cb166-24"><a href="runmodels.html#cb166-24" tabindex="-1"></a>  md <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(moder, <span class="fu">c</span>(moders<span class="sc">$</span>long_name, stdyModers<span class="sc">$</span>long_name), <span class="fu">c</span>(moders<span class="sc">$</span>short_name, stdyModers<span class="sc">$</span>short_name), <span class="at">warn_missing =</span> F)</span>
<span id="cb166-25"><a href="runmodels.html#cb166-25" tabindex="-1"></a>  o <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(out, outcomes<span class="sc">$</span>long_name, outcomes<span class="sc">$</span>short_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb166-26"><a href="runmodels.html#cb166-26" tabindex="-1"></a>  cv <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(cov, covars<span class="sc">$</span>long_name, covars<span class="sc">$</span>short_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb166-27"><a href="runmodels.html#cb166-27" tabindex="-1"></a>  cs <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">1</span>,<span class="dv">6</span>)</span>
<span id="cb166-28"><a href="runmodels.html#cb166-28" tabindex="-1"></a>  <span class="fu">names</span>(cs) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot; &quot;</span>, traits<span class="sc">$</span>long_name)</span>
<span id="cb166-29"><a href="runmodels.html#cb166-29" tabindex="-1"></a>  <span class="co"># cln &lt;- if(length(unique(d$term2)) == 1) c(&quot;Covariate&quot;, rep(&quot;\\textit{b} [CI]&quot;, 5)) else c(&quot; &quot;, &quot;Term&quot;, rep(&quot;\\textit{b} [CI]&quot;, 5))</span></span>
<span id="cb166-30"><a href="runmodels.html#cb166-30" tabindex="-1"></a>  cln <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Term&quot;</span>, <span class="fu">rep</span>(<span class="st">&quot;&lt;em&gt;b&lt;/em&gt; [CI]&quot;</span>, <span class="dv">5</span>))</span>
<span id="cb166-31"><a href="runmodels.html#cb166-31" tabindex="-1"></a>  al <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;r&quot;</span>, <span class="fu">rep</span>(<span class="st">&quot;c&quot;</span>, <span class="dv">5</span>))</span>
<span id="cb166-32"><a href="runmodels.html#cb166-32" tabindex="-1"></a>  <span class="co"># caption </span></span>
<span id="cb166-33"><a href="runmodels.html#cb166-33" tabindex="-1"></a>  cap <span class="ot">&lt;-</span> <span class="cf">if</span>(md <span class="sc">==</span> <span class="st">&quot;none&quot;</span>) <span class="st">&quot;1A Pooled Analysis of Individual Participant Data: All Model Estimates of Fixed Effect Personality-Crystallized Domain Associations&quot;</span> <span class="cf">else</span> <span class="fu">sprintf</span>(<span class="st">&quot;1A Pooled Analysis of Individual Participant Data: All Model Estimates of Fixed Effect %s Moderation of Personality-Crystallized Domain Associations&quot;</span>, md)</span>
<span id="cb166-34"><a href="runmodels.html#cb166-34" tabindex="-1"></a>  </span>
<span id="cb166-35"><a href="runmodels.html#cb166-35" tabindex="-1"></a>  <span class="co"># kable the table</span></span>
<span id="cb166-36"><a href="runmodels.html#cb166-36" tabindex="-1"></a>  tab <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span></span>
<span id="cb166-37"><a href="runmodels.html#cb166-37" tabindex="-1"></a>    <span class="fu">arrange</span>(term) <span class="sc">%&gt;%</span></span>
<span id="cb166-38"><a href="runmodels.html#cb166-38" tabindex="-1"></a>    <span class="fu">kable</span>(., <span class="st">&quot;html&quot;</span></span>
<span id="cb166-39"><a href="runmodels.html#cb166-39" tabindex="-1"></a>    <span class="co"># kable(., &quot;latex&quot;</span></span>
<span id="cb166-40"><a href="runmodels.html#cb166-40" tabindex="-1"></a>          , <span class="at">booktabs =</span> T</span>
<span id="cb166-41"><a href="runmodels.html#cb166-41" tabindex="-1"></a>          , <span class="at">escape =</span> F</span>
<span id="cb166-42"><a href="runmodels.html#cb166-42" tabindex="-1"></a>          , <span class="at">col.names =</span> cln</span>
<span id="cb166-43"><a href="runmodels.html#cb166-43" tabindex="-1"></a>          , <span class="at">align =</span> al</span>
<span id="cb166-44"><a href="runmodels.html#cb166-44" tabindex="-1"></a>          , <span class="at">caption =</span> cap</span>
<span id="cb166-45"><a href="runmodels.html#cb166-45" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb166-46"><a href="runmodels.html#cb166-46" tabindex="-1"></a>    <span class="fu">kable_classic</span>(<span class="at">full_width =</span> F, <span class="at">html_font =</span> <span class="st">&quot;Times New Roman&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb166-47"><a href="runmodels.html#cb166-47" tabindex="-1"></a>    <span class="co"># kable_styling(full_width = F, font_size = 7) %&gt;%</span></span>
<span id="cb166-48"><a href="runmodels.html#cb166-48" tabindex="-1"></a>    <span class="fu">add_header_above</span>(cs)</span>
<span id="cb166-49"><a href="runmodels.html#cb166-49" tabindex="-1"></a>  <span class="co"># save the resulting html table</span></span>
<span id="cb166-50"><a href="runmodels.html#cb166-50" tabindex="-1"></a>  <span class="fu">save_kable</span>(tab, <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/1a_ipd_reg/%s/tables/all terms/%s-%s-%s.html&quot;</span></span>
<span id="cb166-51"><a href="runmodels.html#cb166-51" tabindex="-1"></a>                                 , local_path, type, o, md, cv))</span>
<span id="cb166-52"><a href="runmodels.html#cb166-52" tabindex="-1"></a>  <span class="fu">return</span>(tab) <span class="co"># return the html table</span></span>
<span id="cb166-53"><a href="runmodels.html#cb166-53" tabindex="-1"></a>}</span>
<span id="cb166-54"><a href="runmodels.html#cb166-54" tabindex="-1"></a></span>
<span id="cb166-55"><a href="runmodels.html#cb166-55" tabindex="-1"></a>ipd1a_mod_tab <span class="ot">&lt;-</span> ipd1a_mod_tab <span class="sc">%&gt;%</span></span>
<span id="cb166-56"><a href="runmodels.html#cb166-56" tabindex="-1"></a>  <span class="fu">group_by</span>(type, Outcome, Moderator, Covariate) <span class="sc">%&gt;%</span></span>
<span id="cb166-57"><a href="runmodels.html#cb166-57" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span></span>
<span id="cb166-58"><a href="runmodels.html#cb166-58" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb166-59"><a href="runmodels.html#cb166-59" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">tab =</span> <span class="fu">pmap</span>(<span class="fu">list</span>(data, type, Outcome, Moderator, Covariate), ipd1a_mod_tab_fun))</span></code></pre></div>
</div>
</div>
<div id="figures" class="section level5 hasAnchor" number="3.2.1.5.2">
<h5><span class="header-section-number">3.2.1.5.2</span> Figures<a href="runmodels.html#figures" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div id="overall-forest" class="section level6 hasAnchor" number="3.2.1.5.2.1">
<h6><span class="header-section-number">3.2.1.5.2.1</span> Overall Forest<a href="runmodels.html#overall-forest" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="runmodels.html#cb167-1" tabindex="-1"></a>ipd1a_fx_plot_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(df, mod, type, cov){</span>
<span id="cb167-2"><a href="runmodels.html#cb167-2" tabindex="-1"></a>  m <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(mod, <span class="fu">c</span>(moders<span class="sc">$</span>short_name, stdyModers<span class="sc">$</span>short_name), <span class="fu">c</span>(moders<span class="sc">$</span>long_name, stdyModers<span class="sc">$</span>long_name), <span class="at">warn_missing =</span> F)</span>
<span id="cb167-3"><a href="runmodels.html#cb167-3" tabindex="-1"></a>  cv <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(cov, covars<span class="sc">$</span>short_name, covars<span class="sc">$</span>long_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb167-4"><a href="runmodels.html#cb167-4" tabindex="-1"></a>  dl <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">max</span>(<span class="fu">abs</span>(<span class="fu">min</span>(df<span class="sc">$</span>estimate)), <span class="fu">abs</span>(<span class="fu">max</span>(df<span class="sc">$</span>estimate))), <span class="dv">3</span>)</span>
<span id="cb167-5"><a href="runmodels.html#cb167-5" tabindex="-1"></a>  <span class="co"># stds &lt;- unique(df$study)</span></span>
<span id="cb167-6"><a href="runmodels.html#cb167-6" tabindex="-1"></a>  lim <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span><span class="sc">-</span>dl<span class="sc">-</span>(dl<span class="sc">/</span><span class="fl">2.5</span>), <span class="dv">0</span><span class="sc">+</span>dl<span class="sc">+</span>(dl<span class="sc">/</span><span class="fl">2.5</span>))</span>
<span id="cb167-7"><a href="runmodels.html#cb167-7" tabindex="-1"></a>  brk <span class="ot">&lt;-</span> <span class="cf">if</span>(dl <span class="sc">&gt;</span> .<span class="dv">01</span>) <span class="fu">round</span>(<span class="fu">c</span>(<span class="dv">0</span><span class="sc">-</span>dl<span class="sc">-</span>(dl<span class="sc">/</span><span class="dv">5</span>), <span class="dv">0</span>, <span class="dv">0</span><span class="sc">+</span>dl<span class="sc">+</span>(dl<span class="sc">/</span><span class="dv">5</span>)),<span class="dv">2</span>) <span class="cf">else</span> <span class="fu">round</span>(<span class="fu">c</span>(<span class="dv">0</span><span class="sc">-</span>dl<span class="sc">-</span>(dl<span class="sc">/</span><span class="dv">5</span>), <span class="dv">0</span>, <span class="dv">0</span><span class="sc">+</span>dl<span class="sc">+</span>(dl<span class="sc">/</span><span class="dv">5</span>)),<span class="dv">3</span>) </span>
<span id="cb167-8"><a href="runmodels.html#cb167-8" tabindex="-1"></a>  <span class="co"># lim_high &lt;- lim[2]*4</span></span>
<span id="cb167-9"><a href="runmodels.html#cb167-9" tabindex="-1"></a>  lab <span class="ot">&lt;-</span> <span class="fu">str_replace</span>(brk, <span class="st">&quot;^0.&quot;</span>, <span class="st">&quot;.&quot;</span>)<span class="co">#str_remove(round(c(0-d-(d/5), 0, 0+d+(d/5)),2), &quot;^0&quot;)</span></span>
<span id="cb167-10"><a href="runmodels.html#cb167-10" tabindex="-1"></a>  shapes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">16</span>, <span class="dv">17</span>, <span class="dv">18</span>)[<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(<span class="fu">unique</span>(df<span class="sc">$</span>term))]</span>
<span id="cb167-11"><a href="runmodels.html#cb167-11" tabindex="-1"></a>  lt <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">&quot;solid&quot;</span>, <span class="fu">length</span>(<span class="fu">unique</span>(df<span class="sc">$</span>term)))</span>
<span id="cb167-12"><a href="runmodels.html#cb167-12" tabindex="-1"></a>  titl <span class="ot">&lt;-</span> <span class="cf">if</span>(mod <span class="sc">==</span> <span class="st">&quot;none&quot;</span>){<span class="cn">NULL</span>} <span class="cf">else</span> {<span class="fu">sprintf</span>(<span class="st">&quot;%s Moderation of Personality-Outcome Associations&quot;</span>, m)}</span>
<span id="cb167-13"><a href="runmodels.html#cb167-13" tabindex="-1"></a>  titl <span class="ot">&lt;-</span> <span class="cf">if</span>(<span class="sc">!</span>cov <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;none&quot;</span>, <span class="st">&quot;all&quot;</span>)) <span class="fu">paste</span>(cv, <span class="st">&quot;Adjusted&quot;</span>, titl, <span class="at">collapse =</span> <span class="st">&quot; &quot;</span>) <span class="cf">else</span> <span class="fu">paste</span>(cv, titl, <span class="at">collapse =</span> <span class="st">&quot; &quot;</span>)</span>
<span id="cb167-14"><a href="runmodels.html#cb167-14" tabindex="-1"></a>  leg <span class="ot">&lt;-</span> <span class="cf">if</span>(<span class="fu">length</span>(<span class="fu">unique</span>(df<span class="sc">$</span>term)) <span class="sc">&gt;</span> <span class="dv">1</span>){<span class="st">&quot;bottom&quot;</span>} <span class="cf">else</span> {<span class="st">&quot;none&quot;</span>}</span>
<span id="cb167-15"><a href="runmodels.html#cb167-15" tabindex="-1"></a>  p <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb167-16"><a href="runmodels.html#cb167-16" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">conf.low =</span> <span class="fu">ifelse</span>(conf.low <span class="sc">&lt;</span> lim[<span class="dv">1</span>], lim[<span class="dv">1</span>], conf.low),</span>
<span id="cb167-17"><a href="runmodels.html#cb167-17" tabindex="-1"></a>           <span class="at">conf.high =</span> <span class="fu">ifelse</span>(conf.high <span class="sc">&gt;</span> lim[<span class="dv">2</span>], lim[<span class="dv">2</span>], conf.high)) <span class="sc">%&gt;%</span> </span>
<span id="cb167-18"><a href="runmodels.html#cb167-18" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Outcome, <span class="at">y =</span> estimate)) <span class="sc">+</span></span>
<span id="cb167-19"><a href="runmodels.html#cb167-19" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> lim, <span class="at">breaks =</span> brk, <span class="at">labels =</span> lab) <span class="sc">+</span> </span>
<span id="cb167-20"><a href="runmodels.html#cb167-20" tabindex="-1"></a>    <span class="fu">scale_size_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="fl">1.5</span>)) <span class="sc">+</span></span>
<span id="cb167-21"><a href="runmodels.html#cb167-21" tabindex="-1"></a>    <span class="fu">scale_shape_manual</span>(<span class="at">values =</span> shapes) <span class="sc">+</span></span>
<span id="cb167-22"><a href="runmodels.html#cb167-22" tabindex="-1"></a>    <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;blue&quot;</span>, <span class="st">&quot;black&quot;</span>)) <span class="sc">+</span></span>
<span id="cb167-23"><a href="runmodels.html#cb167-23" tabindex="-1"></a>    <span class="fu">scale_linetype_manual</span>(<span class="at">values =</span> lt) <span class="sc">+</span></span>
<span id="cb167-24"><a href="runmodels.html#cb167-24" tabindex="-1"></a>    <span class="fu">geom_hline</span>(<span class="fu">aes</span>(<span class="at">yintercept =</span> <span class="dv">0</span>), <span class="at">size =</span> .<span class="dv">5</span>, <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>) <span class="sc">+</span></span>
<span id="cb167-25"><a href="runmodels.html#cb167-25" tabindex="-1"></a>    <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> conf.low, <span class="at">ymax =</span> conf.high, <span class="at">linetype =</span> term)</span>
<span id="cb167-26"><a href="runmodels.html#cb167-26" tabindex="-1"></a>                  , <span class="at">width =</span> <span class="dv">0</span></span>
<span id="cb167-27"><a href="runmodels.html#cb167-27" tabindex="-1"></a>                  , <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> .<span class="dv">9</span>)) <span class="sc">+</span> </span>
<span id="cb167-28"><a href="runmodels.html#cb167-28" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> sig, <span class="at">size =</span> sig, <span class="at">shape =</span> term)</span>
<span id="cb167-29"><a href="runmodels.html#cb167-29" tabindex="-1"></a>                  , <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> .<span class="dv">9</span>)) <span class="sc">+</span></span>
<span id="cb167-30"><a href="runmodels.html#cb167-30" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span></span>
<span id="cb167-31"><a href="runmodels.html#cb167-31" tabindex="-1"></a>         , <span class="at">y =</span> <span class="st">&quot;Estimate (POMP)&quot;</span></span>
<span id="cb167-32"><a href="runmodels.html#cb167-32" tabindex="-1"></a>         , <span class="at">title =</span> titl</span>
<span id="cb167-33"><a href="runmodels.html#cb167-33" tabindex="-1"></a>         , <span class="at">subtitle =</span> <span class="st">&quot;Method 1A: Pooled Simple Linear Regression&quot;</span></span>
<span id="cb167-34"><a href="runmodels.html#cb167-34" tabindex="-1"></a>         , <span class="at">term =</span> <span class="st">&quot;Term&quot;</span></span>
<span id="cb167-35"><a href="runmodels.html#cb167-35" tabindex="-1"></a>         ) <span class="sc">+</span></span>
<span id="cb167-36"><a href="runmodels.html#cb167-36" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">color =</span> <span class="st">&quot;none&quot;</span>, <span class="at">size =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb167-37"><a href="runmodels.html#cb167-37" tabindex="-1"></a>    <span class="fu">facet_grid</span>(<span class="sc">~</span>Trait, <span class="at">scales =</span> <span class="st">&quot;free_y&quot;</span>, <span class="at">space =</span> <span class="st">&quot;free&quot;</span>) <span class="sc">+</span></span>
<span id="cb167-38"><a href="runmodels.html#cb167-38" tabindex="-1"></a>    <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb167-39"><a href="runmodels.html#cb167-39" tabindex="-1"></a>    <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb167-40"><a href="runmodels.html#cb167-40" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> leg,</span>
<span id="cb167-41"><a href="runmodels.html#cb167-41" tabindex="-1"></a>          <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">1.2</span>), <span class="at">hjust =</span> .<span class="dv">5</span>),</span>
<span id="cb167-42"><a href="runmodels.html#cb167-42" tabindex="-1"></a>          <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> .<span class="dv">5</span>),</span>
<span id="cb167-43"><a href="runmodels.html#cb167-43" tabindex="-1"></a>          <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;white&quot;</span>),</span>
<span id="cb167-44"><a href="runmodels.html#cb167-44" tabindex="-1"></a>          <span class="at">strip.background =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb167-45"><a href="runmodels.html#cb167-45" tabindex="-1"></a>          <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">1.4</span>)),</span>
<span id="cb167-46"><a href="runmodels.html#cb167-46" tabindex="-1"></a>          <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>),</span>
<span id="cb167-47"><a href="runmodels.html#cb167-47" tabindex="-1"></a>          <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="fu">rel</span>(<span class="dv">1</span>)))</span>
<span id="cb167-48"><a href="runmodels.html#cb167-48" tabindex="-1"></a>  ht <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(df<span class="sc">$</span>Outcome)); ht2 <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(df<span class="sc">$</span>term))</span>
<span id="cb167-49"><a href="runmodels.html#cb167-49" tabindex="-1"></a>  wdt <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(df<span class="sc">$</span>Trait))</span>
<span id="cb167-50"><a href="runmodels.html#cb167-50" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/1a_ipd_reg/%s/figures/overall forest/%s_%s_fixed.png&quot;</span>, local_path, type, mod, cov), <span class="at">width =</span> wdt<span class="sc">*</span><span class="dv">2</span>, <span class="at">height =</span> ht <span class="sc">+</span> ht2)</span>
<span id="cb167-51"><a href="runmodels.html#cb167-51" tabindex="-1"></a><span class="co"># save(p, file = sprintf(&quot;%s/results/ipd1a_reg/%s/figures/overall forest/rdata/%s_fixed.RData&quot;, type, local_path, mod))</span></span>
<span id="cb167-52"><a href="runmodels.html#cb167-52" tabindex="-1"></a><span class="fu">rm</span>(p)</span>
<span id="cb167-53"><a href="runmodels.html#cb167-53" tabindex="-1"></a><span class="fu">gc</span>()</span>
<span id="cb167-54"><a href="runmodels.html#cb167-54" tabindex="-1"></a><span class="fu">return</span>(T)</span>
<span id="cb167-55"><a href="runmodels.html#cb167-55" tabindex="-1"></a>}</span>
<span id="cb167-56"><a href="runmodels.html#cb167-56" tabindex="-1"></a></span>
<span id="cb167-57"><a href="runmodels.html#cb167-57" tabindex="-1"></a><span class="co"># x1 = 1, x2 = 1, y = 2</span></span>
<span id="cb167-58"><a href="runmodels.html#cb167-58" tabindex="-1"></a><span class="co"># x1 = 1, x2 = 2, y = 3</span></span>
<span id="cb167-59"><a href="runmodels.html#cb167-59" tabindex="-1"></a></span>
<span id="cb167-60"><a href="runmodels.html#cb167-60" tabindex="-1"></a>ipd1a_fp <span class="ot">&lt;-</span> nested_ipd1a_reg <span class="sc">%&gt;%</span></span>
<span id="cb167-61"><a href="runmodels.html#cb167-61" tabindex="-1"></a>  <span class="fu">unnest</span>(fx) <span class="sc">%&gt;%</span></span>
<span id="cb167-62"><a href="runmodels.html#cb167-62" tabindex="-1"></a>    <span class="fu">filter</span>((Moderator <span class="sc">==</span> <span class="st">&quot;none&quot;</span> <span class="sc">&amp;</span> term <span class="sc">==</span> <span class="st">&quot;p_value&quot;</span>)<span class="sc">|</span></span>
<span id="cb167-63"><a href="runmodels.html#cb167-63" tabindex="-1"></a>          (Moderator <span class="sc">!=</span> <span class="st">&quot;none&quot;</span> <span class="sc">&amp;</span> <span class="fu">grepl</span>(<span class="st">&quot;p_value:&quot;</span>, term))) <span class="sc">%&gt;%</span></span>
<span id="cb167-64"><a href="runmodels.html#cb167-64" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">sig =</span> <span class="fu">ifelse</span>(<span class="fu">sign</span>(conf.low) <span class="sc">==</span> <span class="fu">sign</span>(conf.high), <span class="st">&quot;sig&quot;</span>, <span class="st">&quot;ns&quot;</span>),</span>
<span id="cb167-65"><a href="runmodels.html#cb167-65" tabindex="-1"></a>           <span class="at">sig =</span> <span class="fu">factor</span>(sig, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;sig&quot;</span>,<span class="st">&quot;ns&quot;</span>)),</span>
<span id="cb167-66"><a href="runmodels.html#cb167-66" tabindex="-1"></a>           <span class="at">Trait =</span> <span class="fu">factor</span>(Trait, <span class="at">levels =</span> traits<span class="sc">$</span>short_name),</span>
<span id="cb167-67"><a href="runmodels.html#cb167-67" tabindex="-1"></a>           <span class="at">Outcome =</span> <span class="fu">factor</span>(Outcome, <span class="at">levels =</span> outcomes<span class="sc">$</span>short_name, <span class="at">labels =</span> <span class="fu">str_wrap</span>(outcomes<span class="sc">$</span>long_name, <span class="dv">15</span>)),</span>
<span id="cb167-68"><a href="runmodels.html#cb167-68" tabindex="-1"></a>           <span class="at">Outcome =</span> forcats<span class="sc">::</span><span class="fu">fct_rev</span>(Outcome))  <span class="sc">%&gt;%</span></span>
<span id="cb167-69"><a href="runmodels.html#cb167-69" tabindex="-1"></a>  <span class="fu">group_by</span>(type, Moderator, Covariate) <span class="sc">%&gt;%</span></span>
<span id="cb167-70"><a href="runmodels.html#cb167-70" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span></span>
<span id="cb167-71"><a href="runmodels.html#cb167-71" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb167-72"><a href="runmodels.html#cb167-72" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">pmap</span>(<span class="fu">list</span>(data, Moderator, type, Covariate), ipd1a_fx_plot_fun))</span></code></pre></div>
</div>
<div id="study-specific-forest-plots" class="section level6 hasAnchor" number="3.2.1.5.2.2">
<h6><span class="header-section-number">3.2.1.5.2.2</span> Study-Specific Forest Plots<a href="runmodels.html#study-specific-forest-plots" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<p>This header is here to simply emphasize that this method does not provide study-specific estimates, unlike Methods 2ab, 3, and 4.</p>
</div>
<div id="overall-simple-effects-plots" class="section level6 hasAnchor" number="3.2.1.5.2.3">
<h6><span class="header-section-number">3.2.1.5.2.3</span> Overall Simple Effects Plots<a href="runmodels.html#overall-simple-effects-plots" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="runmodels.html#cb168-1" tabindex="-1"></a>loadRData <span class="ot">&lt;-</span> <span class="cf">function</span>(fileName, type, obj, folder){</span>
<span id="cb168-2"><a href="runmodels.html#cb168-2" tabindex="-1"></a><span class="co">#loads an RData file, and returns it</span></span>
<span id="cb168-3"><a href="runmodels.html#cb168-3" tabindex="-1"></a>    path <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/1a_ipd_reg/%s/%s/%s&quot;</span>, local_path, type, folder, fileName)</span>
<span id="cb168-4"><a href="runmodels.html#cb168-4" tabindex="-1"></a>    <span class="fu">load</span>(path)</span>
<span id="cb168-5"><a href="runmodels.html#cb168-5" tabindex="-1"></a>    <span class="fu">get</span>(<span class="fu">ls</span>()[<span class="fu">grepl</span>(obj, <span class="fu">ls</span>())])</span>
<span id="cb168-6"><a href="runmodels.html#cb168-6" tabindex="-1"></a>}</span>
<span id="cb168-7"><a href="runmodels.html#cb168-7" tabindex="-1"></a></span>
<span id="cb168-8"><a href="runmodels.html#cb168-8" tabindex="-1"></a><span class="do">## load in &quot;fixed&quot; effects</span></span>
<span id="cb168-9"><a href="runmodels.html#cb168-9" tabindex="-1"></a><span class="do">## first get file names</span></span>
<span id="cb168-10"><a href="runmodels.html#cb168-10" tabindex="-1"></a>nested_ipd1a_simp <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">type =</span> <span class="fu">c</span>(<span class="st">&quot;Frequentist&quot;</span>, <span class="st">&quot;Bayesian&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb168-11"><a href="runmodels.html#cb168-11" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">file =</span> <span class="fu">map</span>(type, <span class="sc">~</span><span class="fu">list.files</span>(<span class="fu">sprintf</span>(<span class="st">&quot;%s/results/1a_ipd_reg/%s/predicted&quot;</span>, local_path, .)))) <span class="sc">%&gt;%</span></span>
<span id="cb168-12"><a href="runmodels.html#cb168-12" tabindex="-1"></a>  <span class="fu">unnest</span>(file) <span class="sc">%&gt;%</span></span>
<span id="cb168-13"><a href="runmodels.html#cb168-13" tabindex="-1"></a>  <span class="fu">separate</span>(file, <span class="fu">c</span>(<span class="st">&quot;Outcome&quot;</span>, <span class="st">&quot;Trait&quot;</span>, <span class="st">&quot;Moderator&quot;</span>, <span class="st">&quot;Covariate&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>, <span class="at">remove =</span> F) <span class="sc">%&gt;%</span> </span>
<span id="cb168-14"><a href="runmodels.html#cb168-14" tabindex="-1"></a>  <span class="do">## read in the files</span></span>
<span id="cb168-15"><a href="runmodels.html#cb168-15" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Covariate =</span> <span class="fu">str_remove</span>(Covariate, <span class="st">&quot;.RData&quot;</span>),</span>
<span id="cb168-16"><a href="runmodels.html#cb168-16" tabindex="-1"></a>         <span class="at">pred =</span> <span class="fu">map2</span>(file, type, <span class="sc">~</span><span class="fu">loadRData</span>(.x, .y, <span class="st">&quot;pred.fx&quot;</span>, <span class="st">&quot;predicted&quot;</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb168-17"><a href="runmodels.html#cb168-17" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>file) </span>
<span id="cb168-18"><a href="runmodels.html#cb168-18" tabindex="-1"></a>nested_ipd1a_simp</span></code></pre></div>
<pre><code>## # A tibble: 360 × 6
##    type        Outcome      Trait Moderator Covariate pred             
##    &lt;chr&gt;       &lt;chr&gt;        &lt;chr&gt; &lt;chr&gt;     &lt;chr&gt;     &lt;list&gt;           
##  1 Frequentist crystallized A     age       all       &lt;tibble [63 × 8]&gt;
##  2 Frequentist crystallized A     age       none      &lt;df [63 × 5]&gt;    
##  3 Frequentist crystallized A     baseAge   age       &lt;tibble [63 × 6]&gt;
##  4 Frequentist crystallized A     baseAge   all       &lt;tibble [63 × 9]&gt;
##  5 Frequentist crystallized A     baseAge   education &lt;tibble [63 × 6]&gt;
##  6 Frequentist crystallized A     baseAge   gender    &lt;tibble [63 × 6]&gt;
##  7 Frequentist crystallized A     baseAge   none      &lt;df [63 × 5]&gt;    
##  8 Frequentist crystallized A     baseYear  age       &lt;tibble [63 × 6]&gt;
##  9 Frequentist crystallized A     baseYear  all       &lt;tibble [63 × 9]&gt;
## 10 Frequentist crystallized A     baseYear  education &lt;tibble [63 × 6]&gt;
## # ℹ 350 more rows</code></pre>
</div>
<div id="study-specific-simple-effects-plots" class="section level6 hasAnchor" number="3.2.1.5.2.4">
<h6><span class="header-section-number">3.2.1.5.2.4</span> Study-Specific Simple Effects Plots<a href="runmodels.html#study-specific-simple-effects-plots" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<p>This header is here to simply emphasize that this method does not provide study-specific estimates, unlike Methods 2ab, 3, and 4.</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="runmodels.html#cb170-1" tabindex="-1"></a>simp_eff_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(df, outcome, mod, type, cov){ </span>
<span id="cb170-2"><a href="runmodels.html#cb170-2" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(outcome, mod))</span>
<span id="cb170-3"><a href="runmodels.html#cb170-3" tabindex="-1"></a>  o <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(outcome, outcomes<span class="sc">$</span>short_name, outcomes<span class="sc">$</span>long_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb170-4"><a href="runmodels.html#cb170-4" tabindex="-1"></a>  cv <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(cov, covars<span class="sc">$</span>short_name, covars<span class="sc">$</span>long_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb170-5"><a href="runmodels.html#cb170-5" tabindex="-1"></a>  m <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(mod, <span class="fu">c</span>(moders<span class="sc">$</span>short_name, stdyModers<span class="sc">$</span>short_name), <span class="fu">c</span>(moders<span class="sc">$</span>long_name, stdyModers<span class="sc">$</span>long_name), <span class="at">warn_missing =</span> F)</span>
<span id="cb170-6"><a href="runmodels.html#cb170-6" tabindex="-1"></a>  d <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">max</span>(<span class="fu">abs</span>(<span class="fu">min</span>(df<span class="sc">$</span>pred)), <span class="fu">abs</span>(<span class="fu">max</span>(df<span class="sc">$</span>pred))), <span class="dv">3</span>)</span>
<span id="cb170-7"><a href="runmodels.html#cb170-7" tabindex="-1"></a>  mini <span class="ot">&lt;-</span> <span class="cf">if</span>(d <span class="sc">&gt;</span> <span class="dv">2</span>) .<span class="dv">05</span> <span class="cf">else</span> <span class="dv">0</span><span class="sc">-</span>(d<span class="sc">+</span>(d<span class="sc">/</span><span class="dv">5</span>))</span>
<span id="cb170-8"><a href="runmodels.html#cb170-8" tabindex="-1"></a>  maxi <span class="ot">&lt;-</span> <span class="cf">if</span>(d <span class="sc">&gt;</span> <span class="dv">2</span>) <span class="fl">2.05</span> <span class="cf">else</span> <span class="dv">0</span><span class="sc">+</span>d<span class="sc">+</span>(d<span class="sc">/</span><span class="dv">5</span>)</span>
<span id="cb170-9"><a href="runmodels.html#cb170-9" tabindex="-1"></a>  lim <span class="ot">&lt;-</span> <span class="fu">c</span>(mini, maxi)</span>
<span id="cb170-10"><a href="runmodels.html#cb170-10" tabindex="-1"></a>  brk <span class="ot">&lt;-</span> <span class="cf">if</span>(d <span class="sc">&gt;</span> <span class="dv">2</span>) <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>) <span class="cf">else</span>{<span class="fu">round</span>(<span class="fu">c</span>(<span class="dv">0</span><span class="sc">-</span>d<span class="sc">-</span>(d<span class="sc">/</span><span class="dv">10</span>), <span class="dv">0</span>, <span class="dv">0</span><span class="sc">+</span>d<span class="sc">+</span>(d<span class="sc">/</span><span class="dv">10</span>)),<span class="dv">2</span>)}</span>
<span id="cb170-11"><a href="runmodels.html#cb170-11" tabindex="-1"></a>  lab <span class="ot">&lt;-</span> <span class="cf">if</span>(d <span class="sc">&gt;</span> <span class="dv">2</span>){<span class="fu">c</span>(<span class="st">&quot;0&quot;</span>, <span class="st">&quot;1&quot;</span>, <span class="st">&quot;2&quot;</span>)} <span class="cf">else</span>{<span class="fu">str_remove</span>(<span class="fu">c</span>(<span class="fu">round</span>(<span class="dv">0</span><span class="sc">-</span>d<span class="sc">-</span>(d<span class="sc">/</span><span class="dv">10</span>),<span class="dv">2</span>), <span class="dv">0</span>, <span class="fu">round</span>(<span class="dv">0</span><span class="sc">+</span>d<span class="sc">+</span>(d<span class="sc">/</span><span class="dv">10</span>),<span class="dv">2</span>)), <span class="st">&quot;^0&quot;</span>)}</span>
<span id="cb170-12"><a href="runmodels.html#cb170-12" tabindex="-1"></a>  titl <span class="ot">&lt;-</span> <span class="cf">if</span>(mod <span class="sc">==</span> <span class="st">&quot;none&quot;</span>){o} <span class="cf">else</span> {<span class="fu">sprintf</span>(<span class="st">&quot;%s: Personality x %s Simple Effects&quot;</span>, o, m)}</span>
<span id="cb170-13"><a href="runmodels.html#cb170-13" tabindex="-1"></a>  <span class="co"># colnames(df)[colnames(df) == mod] &lt;- &quot;mod_value&quot;</span></span>
<span id="cb170-14"><a href="runmodels.html#cb170-14" tabindex="-1"></a>  df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> unclass <span class="sc">%&gt;%</span> data.frame</span>
<span id="cb170-15"><a href="runmodels.html#cb170-15" tabindex="-1"></a>  df<span class="sc">$</span>mod_value <span class="ot">&lt;-</span> df[,mod]</span>
<span id="cb170-16"><a href="runmodels.html#cb170-16" tabindex="-1"></a>  df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span><span class="fu">all_of</span>(mod)) <span class="sc">%&gt;%</span> as_tibble</span>
<span id="cb170-17"><a href="runmodels.html#cb170-17" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">class</span>(df<span class="sc">$</span>mod_value) <span class="sc">==</span> <span class="st">&quot;factor&quot;</span>){df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">mod_fac =</span> <span class="fu">factor</span>(mod_value))} </span>
<span id="cb170-18"><a href="runmodels.html#cb170-18" tabindex="-1"></a>  <span class="cf">else</span>{df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb170-19"><a href="runmodels.html#cb170-19" tabindex="-1"></a>    <span class="fu">group_by</span>(Trait) <span class="sc">%&gt;%</span></span>
<span id="cb170-20"><a href="runmodels.html#cb170-20" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">mod_fac =</span> <span class="fu">factor</span>(mod_value, <span class="at">levels =</span> <span class="fu">unique</span>(mod_value), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;-1 SD&quot;</span>, <span class="st">&quot;M&quot;</span>, <span class="st">&quot;+1 SD&quot;</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb170-21"><a href="runmodels.html#cb170-21" tabindex="-1"></a>    <span class="fu">ungroup</span>()</span>
<span id="cb170-22"><a href="runmodels.html#cb170-22" tabindex="-1"></a>  }</span>
<span id="cb170-23"><a href="runmodels.html#cb170-23" tabindex="-1"></a>  lt <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;dotted&quot;</span>, <span class="st">&quot;solid&quot;</span>, <span class="st">&quot;dashed&quot;</span>, <span class="st">&quot;dotdash&quot;</span>, <span class="st">&quot;longdash&quot;</span>, <span class="st">&quot;twodash&quot;</span>)[<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(<span class="fu">unique</span>(df<span class="sc">$</span>mod_fac))]</span>
<span id="cb170-24"><a href="runmodels.html#cb170-24" tabindex="-1"></a>  </span>
<span id="cb170-25"><a href="runmodels.html#cb170-25" tabindex="-1"></a>  df <span class="sc">%&gt;%</span></span>
<span id="cb170-26"><a href="runmodels.html#cb170-26" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Trait =</span> <span class="fu">factor</span>(Trait, <span class="at">levels =</span> traits<span class="sc">$</span>short_name, <span class="at">labels =</span> traits<span class="sc">$</span>long_name),</span>
<span id="cb170-27"><a href="runmodels.html#cb170-27" tabindex="-1"></a>           <span class="at">lower =</span> <span class="fu">ifelse</span>(lower <span class="sc">&lt;</span> <span class="dv">4</span>, <span class="dv">4</span>, lower),</span>
<span id="cb170-28"><a href="runmodels.html#cb170-28" tabindex="-1"></a>           <span class="at">upper =</span> <span class="fu">ifelse</span>(upper <span class="sc">&gt;</span> <span class="dv">10</span>, <span class="dv">10</span>, upper)) <span class="sc">%&gt;%</span></span>
<span id="cb170-29"><a href="runmodels.html#cb170-29" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> p_value</span>
<span id="cb170-30"><a href="runmodels.html#cb170-30" tabindex="-1"></a>               , <span class="at">y =</span> pred</span>
<span id="cb170-31"><a href="runmodels.html#cb170-31" tabindex="-1"></a>               , <span class="at">group  =</span> mod_fac))  <span class="sc">+</span></span>
<span id="cb170-32"><a href="runmodels.html#cb170-32" tabindex="-1"></a>      <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">10</span>)</span>
<span id="cb170-33"><a href="runmodels.html#cb170-33" tabindex="-1"></a>                         , <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">10</span>)</span>
<span id="cb170-34"><a href="runmodels.html#cb170-34" tabindex="-1"></a>                         , <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">10</span>)) <span class="sc">+</span></span>
<span id="cb170-35"><a href="runmodels.html#cb170-35" tabindex="-1"></a>      <span class="fu">scale_linetype_manual</span>(<span class="at">values =</span> lt) <span class="sc">+</span></span>
<span id="cb170-36"><a href="runmodels.html#cb170-36" tabindex="-1"></a>      <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> lower</span>
<span id="cb170-37"><a href="runmodels.html#cb170-37" tabindex="-1"></a>                      , <span class="at">ymax =</span> upper</span>
<span id="cb170-38"><a href="runmodels.html#cb170-38" tabindex="-1"></a>                      , <span class="at">fill =</span> mod_fac)</span>
<span id="cb170-39"><a href="runmodels.html#cb170-39" tabindex="-1"></a>                  , <span class="at">alpha =</span> .<span class="dv">25</span>) <span class="sc">+</span></span>
<span id="cb170-40"><a href="runmodels.html#cb170-40" tabindex="-1"></a>      <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">linetype =</span> mod_fac)) <span class="sc">+</span></span>
<span id="cb170-41"><a href="runmodels.html#cb170-41" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Personality (POMP)&quot;</span></span>
<span id="cb170-42"><a href="runmodels.html#cb170-42" tabindex="-1"></a>           , <span class="at">y =</span> <span class="fu">paste</span>(o, <span class="st">&quot;(POMP)&quot;</span>)</span>
<span id="cb170-43"><a href="runmodels.html#cb170-43" tabindex="-1"></a>           , <span class="at">title =</span> titl</span>
<span id="cb170-44"><a href="runmodels.html#cb170-44" tabindex="-1"></a>           , <span class="at">linetype =</span> m</span>
<span id="cb170-45"><a href="runmodels.html#cb170-45" tabindex="-1"></a>           , <span class="at">fill =</span> m</span>
<span id="cb170-46"><a href="runmodels.html#cb170-46" tabindex="-1"></a>           , <span class="at">subtitle =</span> <span class="st">&quot;Method 1A: Pooled Simple Linear Regression&quot;</span>) <span class="sc">+</span></span>
<span id="cb170-47"><a href="runmodels.html#cb170-47" tabindex="-1"></a>      <span class="fu">facet_wrap</span>(<span class="sc">~</span>Trait, <span class="at">nrow =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb170-48"><a href="runmodels.html#cb170-48" tabindex="-1"></a>      <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb170-49"><a href="runmodels.html#cb170-49" tabindex="-1"></a>      <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span></span>
<span id="cb170-50"><a href="runmodels.html#cb170-50" tabindex="-1"></a>            , <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">1.2</span>), <span class="at">hjust =</span> .<span class="dv">5</span>)</span>
<span id="cb170-51"><a href="runmodels.html#cb170-51" tabindex="-1"></a>            , <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> .<span class="dv">5</span>)</span>
<span id="cb170-52"><a href="runmodels.html#cb170-52" tabindex="-1"></a>            , <span class="at">strip.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;black&quot;</span>)</span>
<span id="cb170-53"><a href="runmodels.html#cb170-53" tabindex="-1"></a>            , <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">color =</span> <span class="st">&quot;white&quot;</span>)</span>
<span id="cb170-54"><a href="runmodels.html#cb170-54" tabindex="-1"></a>            , <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>))</span>
<span id="cb170-55"><a href="runmodels.html#cb170-55" tabindex="-1"></a>  <span class="fu">ggsave</span>(<span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/1a_ipd_reg/%s/figures/overall simple effects/%s_%s_%s.png&quot;</span>, local_path, type, outcome, mod, cov), <span class="at">width =</span> <span class="dv">6</span>, <span class="at">height =</span> <span class="dv">6</span>)</span>
<span id="cb170-56"><a href="runmodels.html#cb170-56" tabindex="-1"></a>}</span>
<span id="cb170-57"><a href="runmodels.html#cb170-57" tabindex="-1"></a></span>
<span id="cb170-58"><a href="runmodels.html#cb170-58" tabindex="-1"></a>ipd1a_se_plot <span class="ot">&lt;-</span> nested_ipd1a_simp <span class="sc">%&gt;%</span></span>
<span id="cb170-59"><a href="runmodels.html#cb170-59" tabindex="-1"></a>  <span class="fu">group_by</span>(type, Outcome, Moderator, Covariate) <span class="sc">%&gt;%</span></span>
<span id="cb170-60"><a href="runmodels.html#cb170-60" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span></span>
<span id="cb170-61"><a href="runmodels.html#cb170-61" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb170-62"><a href="runmodels.html#cb170-62" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">data =</span> <span class="fu">map</span>(data, <span class="sc">~</span>(.) <span class="sc">%&gt;%</span> <span class="fu">unnest</span>(pred)),</span>
<span id="cb170-63"><a href="runmodels.html#cb170-63" tabindex="-1"></a>         <span class="at">plot =</span> <span class="fu">pmap</span>(<span class="fu">list</span>(data, Outcome, Moderator, type, Covariate), simp_eff_fun))</span></code></pre></div>
<pre><code>## [1] &quot;crystallized age&quot;</code></pre>
<pre><code>## [1] &quot;crystallized age&quot;</code></pre>
<pre><code>## [1] &quot;crystallized baseAge&quot;</code></pre>
<pre><code>## [1] &quot;crystallized baseAge&quot;</code></pre>
<pre><code>## [1] &quot;crystallized baseAge&quot;</code></pre>
<pre><code>## [1] &quot;crystallized baseAge&quot;</code></pre>
<pre><code>## [1] &quot;crystallized baseAge&quot;</code></pre>
<pre><code>## [1] &quot;crystallized baseYear&quot;</code></pre>
<pre><code>## [1] &quot;crystallized baseYear&quot;</code></pre>
<pre><code>## [1] &quot;crystallized baseYear&quot;</code></pre>
<pre><code>## [1] &quot;crystallized baseYear&quot;</code></pre>
<pre><code>## [1] &quot;crystallized baseYear&quot;</code></pre>
<pre><code>## [1] &quot;crystallized continent&quot;</code></pre>
<pre><code>## [1] &quot;crystallized continent&quot;</code></pre>
<pre><code>## [1] &quot;crystallized continent&quot;</code></pre>
<pre><code>## [1] &quot;crystallized continent&quot;</code></pre>
<pre><code>## [1] &quot;crystallized continent&quot;</code></pre>
<pre><code>## [1] &quot;crystallized country&quot;</code></pre>
<pre><code>## [1] &quot;crystallized country&quot;</code></pre>
<pre><code>## [1] &quot;crystallized country&quot;</code></pre>
<pre><code>## [1] &quot;crystallized country&quot;</code></pre>
<pre><code>## [1] &quot;crystallized country&quot;</code></pre>
<pre><code>## [1] &quot;crystallized education&quot;</code></pre>
<pre><code>## [1] &quot;crystallized education&quot;</code></pre>
<pre><code>## [1] &quot;crystallized gender&quot;</code></pre>
<pre><code>## [1] &quot;crystallized gender&quot;</code></pre>
<pre><code>## [1] &quot;crystallized predInt&quot;</code></pre>
<pre><code>## [1] &quot;crystallized predInt&quot;</code></pre>
<pre><code>## [1] &quot;crystallized predInt&quot;</code></pre>
<pre><code>## [1] &quot;crystallized predInt&quot;</code></pre>
<pre><code>## [1] &quot;crystallized predInt&quot;</code></pre>
<pre><code>## [1] &quot;crystallized scale&quot;</code></pre>
<pre><code>## [1] &quot;crystallized scale&quot;</code></pre>
<pre><code>## [1] &quot;crystallized scale&quot;</code></pre>
<pre><code>## [1] &quot;crystallized scale&quot;</code></pre>
<pre><code>## [1] &quot;crystallized scale&quot;</code></pre>
<pre><code>## [1] &quot;crystallized age&quot;</code></pre>
<pre><code>## [1] &quot;crystallized age&quot;</code></pre>
<pre><code>## [1] &quot;crystallized baseAge&quot;</code></pre>
<pre><code>## [1] &quot;crystallized baseAge&quot;</code></pre>
<pre><code>## [1] &quot;crystallized baseAge&quot;</code></pre>
<pre><code>## [1] &quot;crystallized baseAge&quot;</code></pre>
<pre><code>## [1] &quot;crystallized baseAge&quot;</code></pre>
<pre><code>## [1] &quot;crystallized baseYear&quot;</code></pre>
<pre><code>## [1] &quot;crystallized baseYear&quot;</code></pre>
<pre><code>## [1] &quot;crystallized baseYear&quot;</code></pre>
<pre><code>## [1] &quot;crystallized baseYear&quot;</code></pre>
<pre><code>## [1] &quot;crystallized baseYear&quot;</code></pre>
<pre><code>## [1] &quot;crystallized continent&quot;</code></pre>
<pre><code>## [1] &quot;crystallized continent&quot;</code></pre>
<pre><code>## [1] &quot;crystallized continent&quot;</code></pre>
<pre><code>## [1] &quot;crystallized continent&quot;</code></pre>
<pre><code>## [1] &quot;crystallized continent&quot;</code></pre>
<pre><code>## [1] &quot;crystallized country&quot;</code></pre>
<pre><code>## [1] &quot;crystallized country&quot;</code></pre>
<pre><code>## [1] &quot;crystallized country&quot;</code></pre>
<pre><code>## [1] &quot;crystallized country&quot;</code></pre>
<pre><code>## [1] &quot;crystallized country&quot;</code></pre>
<pre><code>## [1] &quot;crystallized education&quot;</code></pre>
<pre><code>## [1] &quot;crystallized education&quot;</code></pre>
<pre><code>## [1] &quot;crystallized gender&quot;</code></pre>
<pre><code>## [1] &quot;crystallized gender&quot;</code></pre>
<pre><code>## [1] &quot;crystallized predInt&quot;</code></pre>
<pre><code>## [1] &quot;crystallized predInt&quot;</code></pre>
<pre><code>## [1] &quot;crystallized predInt&quot;</code></pre>
<pre><code>## [1] &quot;crystallized predInt&quot;</code></pre>
<pre><code>## [1] &quot;crystallized predInt&quot;</code></pre>
<pre><code>## [1] &quot;crystallized scale&quot;</code></pre>
<pre><code>## [1] &quot;crystallized scale&quot;</code></pre>
<pre><code>## [1] &quot;crystallized scale&quot;</code></pre>
<pre><code>## [1] &quot;crystallized scale&quot;</code></pre>
<pre><code>## [1] &quot;crystallized scale&quot;</code></pre>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb243-1"><a href="runmodels.html#cb243-1" tabindex="-1"></a><span class="co"># Extraversion continent</span></span>
<span id="cb243-2"><a href="runmodels.html#cb243-2" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;~/Documents/projects/data synthesis/crystallized/results/1a_ipd_reg/Frequentist/models/crystallized_E_continent_all.RData&quot;</span>)</span>
<span id="cb243-3"><a href="runmodels.html#cb243-3" tabindex="-1"></a><span class="fu">coef</span>(m)</span></code></pre></div>
<pre><code>##                (Intercept)                    p_value                        age               genderFemale 
##                5.549134520               -0.046145461                0.004171313                0.141786850 
##                   SRhealth                  education         continentAustralia            continentEurope 
##                0.019022604                0.308632325               -0.485469914                1.179707965 
## p_value:continentAustralia    p_value:continentEurope 
##                0.057715148                0.150113337</code></pre>
<div class="sourceCode" id="cb245"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb245-1"><a href="runmodels.html#cb245-1" tabindex="-1"></a>cntrm <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb245-2"><a href="runmodels.html#cb245-2" tabindex="-1"></a>  <span class="st">&quot;p_value = 0&quot;</span> <span class="co"># North America</span></span>
<span id="cb245-3"><a href="runmodels.html#cb245-3" tabindex="-1"></a>  , <span class="st">&quot;p_value + p_value:continentAustralia = 0&quot;</span> <span class="co"># Australia</span></span>
<span id="cb245-4"><a href="runmodels.html#cb245-4" tabindex="-1"></a>  , <span class="st">&quot;p_value + p_value:continentEurope = 0&quot;</span> <span class="co"># Europe</span></span>
<span id="cb245-5"><a href="runmodels.html#cb245-5" tabindex="-1"></a>); <span class="fu">names</span>(cntrm) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;North America&quot;</span>, <span class="st">&quot;Australia&quot;</span>, <span class="st">&quot;Europe&quot;</span>)</span>
<span id="cb245-6"><a href="runmodels.html#cb245-6" tabindex="-1"></a>(multcomp<span class="sc">::</span><span class="fu">glht</span>(m, cntrm) <span class="sc">%&gt;%</span> <span class="co"># multcomp hypothesis function</span></span>
<span id="cb245-7"><a href="runmodels.html#cb245-7" tabindex="-1"></a>      <span class="fu">confint</span>(., <span class="at">calpha =</span> multcomp<span class="sc">::</span><span class="fu">univariate_calpha</span>()))<span class="sc">$</span>confint <span class="sc">%&gt;%</span></span>
<span id="cb245-8"><a href="runmodels.html#cb245-8" tabindex="-1"></a>      <span class="fu">data.frame</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb245-9"><a href="runmodels.html#cb245-9" tabindex="-1"></a>  <span class="fu">data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb245-10"><a href="runmodels.html#cb245-10" tabindex="-1"></a>  <span class="fu">rownames_to_column</span>(<span class="st">&quot;cntr&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb245-11"><a href="runmodels.html#cb245-11" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">term =</span> <span class="fu">mapvalues</span>(cntr, <span class="fu">str_remove</span>(cntrm, <span class="st">&quot; = 0&quot;</span>), <span class="fu">names</span>(cntrm))) <span class="sc">%&gt;%</span> </span>
<span id="cb245-12"><a href="runmodels.html#cb245-12" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>cntr) <span class="sc">%&gt;%</span></span>
<span id="cb245-13"><a href="runmodels.html#cb245-13" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">est =</span> <span class="fu">sprintf</span>(<span class="st">&quot;b = %.2f, 95%% CI [%.2f, %.2f]&quot;</span>, Estimate, lwr, upr))</span></code></pre></div>
<pre><code>##      Estimate         lwr         upr          term                              est
## 1 -0.04614546 -0.06939046 -0.02290047 North America b = -0.05, 95% CI [-0.07, -0.02]
## 2  0.01156969 -0.01240456  0.03554393     Australia   b = 0.01, 95% CI [-0.01, 0.04]
## 3  0.10396788  0.05998319  0.14795256        Europe    b = 0.10, 95% CI [0.06, 0.15]</code></pre>
<div class="sourceCode" id="cb247"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb247-1"><a href="runmodels.html#cb247-1" tabindex="-1"></a><span class="co"># Neuroticism continent</span></span>
<span id="cb247-2"><a href="runmodels.html#cb247-2" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;~/Documents/projects/data synthesis/crystallized/results/1a_ipd_reg/Frequentist/models/crystallized_N_continent_all.RData&quot;</span>)</span>
<span id="cb247-3"><a href="runmodels.html#cb247-3" tabindex="-1"></a><span class="fu">coef</span>(m)</span></code></pre></div>
<pre><code>##                (Intercept)                    p_value                        age               genderFemale 
##               5.9846147217              -0.0019269944              -0.0003912502              -0.1545757888 
##                  education         continentAustralia            continentEurope p_value:continentAustralia 
##               0.3065055260              -0.1803310763               1.1872866354              -0.1332956492 
##    p_value:continentEurope 
##               0.0611509497</code></pre>
<div class="sourceCode" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb249-1"><a href="runmodels.html#cb249-1" tabindex="-1"></a>cntrm <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb249-2"><a href="runmodels.html#cb249-2" tabindex="-1"></a>  <span class="st">&quot;p_value = 0&quot;</span> <span class="co"># North America</span></span>
<span id="cb249-3"><a href="runmodels.html#cb249-3" tabindex="-1"></a>  , <span class="st">&quot;p_value + p_value:continentAustralia = 0&quot;</span> <span class="co"># Australia</span></span>
<span id="cb249-4"><a href="runmodels.html#cb249-4" tabindex="-1"></a>  , <span class="st">&quot;p_value + p_value:continentEurope = 0&quot;</span> <span class="co"># Europe</span></span>
<span id="cb249-5"><a href="runmodels.html#cb249-5" tabindex="-1"></a>); <span class="fu">names</span>(cntrm) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;North America&quot;</span>, <span class="st">&quot;Australia&quot;</span>, <span class="st">&quot;Europe&quot;</span>)</span>
<span id="cb249-6"><a href="runmodels.html#cb249-6" tabindex="-1"></a>(multcomp<span class="sc">::</span><span class="fu">glht</span>(m, cntrm) <span class="sc">%&gt;%</span> <span class="co"># multcomp hypothesis function</span></span>
<span id="cb249-7"><a href="runmodels.html#cb249-7" tabindex="-1"></a>      <span class="fu">confint</span>(., <span class="at">calpha =</span> multcomp<span class="sc">::</span><span class="fu">univariate_calpha</span>()))<span class="sc">$</span>confint <span class="sc">%&gt;%</span></span>
<span id="cb249-8"><a href="runmodels.html#cb249-8" tabindex="-1"></a>      <span class="fu">data.frame</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb249-9"><a href="runmodels.html#cb249-9" tabindex="-1"></a>  <span class="fu">data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb249-10"><a href="runmodels.html#cb249-10" tabindex="-1"></a>  <span class="fu">rownames_to_column</span>(<span class="st">&quot;cntr&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb249-11"><a href="runmodels.html#cb249-11" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">term =</span> <span class="fu">mapvalues</span>(cntr, <span class="fu">str_remove</span>(cntrm, <span class="st">&quot; = 0&quot;</span>), <span class="fu">names</span>(cntrm))) <span class="sc">%&gt;%</span> </span>
<span id="cb249-12"><a href="runmodels.html#cb249-12" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>cntr) <span class="sc">%&gt;%</span></span>
<span id="cb249-13"><a href="runmodels.html#cb249-13" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">est =</span> <span class="fu">sprintf</span>(<span class="st">&quot;b = %.2f, 95%% CI [%.2f, %.2f]&quot;</span>, Estimate, lwr, upr))</span></code></pre></div>
<pre><code>##       Estimate         lwr         upr          term                              est
## 1 -0.001926994 -0.02067998  0.01682599 North America  b = -0.00, 95% CI [-0.02, 0.02]
## 2 -0.135222644 -0.16119743 -0.10924786     Australia b = -0.14, 95% CI [-0.16, -0.11]
## 3  0.059223955  0.03262787  0.08582004        Europe    b = 0.06, 95% CI [0.03, 0.09]</code></pre>
<div class="sourceCode" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb251-1"><a href="runmodels.html#cb251-1" tabindex="-1"></a><span class="co"># Neuroticism continent</span></span>
<span id="cb251-2"><a href="runmodels.html#cb251-2" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;~/Documents/projects/data synthesis/crystallized/results/1a_ipd_reg/Frequentist/models/crystallized_O_scale_all.RData&quot;</span>)</span>
<span id="cb251-3"><a href="runmodels.html#cb251-3" tabindex="-1"></a><span class="fu">coef</span>(m)</span></code></pre></div>
<pre><code>##          (Intercept)              p_value                  age         genderFemale             SRhealth 
##          3.339901072          0.368662547          0.006242933          0.160535249          0.037314257 
##            education           scaleBFI-S         scaleEysenck            scaleMIDI          scaleTDA-40 
##          0.271069104          4.327067799          2.644895382          1.206799564          0.684281664 
##   p_value:scaleBFI-S p_value:scaleEysenck    p_value:scaleMIDI  p_value:scaleTDA-40 
##         -0.316552453         -0.059001287         -0.281742471         -0.172583588</code></pre>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb253-1"><a href="runmodels.html#cb253-1" tabindex="-1"></a>cntrm <span class="ot">&lt;-</span> <span class="fu">rbind</span>(</span>
<span id="cb253-2"><a href="runmodels.html#cb253-2" tabindex="-1"></a>  <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="fu">rep</span>(<span class="dv">0</span>,<span class="dv">12</span>)) <span class="co"># NEO-FFI</span></span>
<span id="cb253-3"><a href="runmodels.html#cb253-3" tabindex="-1"></a>  , <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="fu">rep</span>(<span class="dv">0</span>,<span class="dv">8</span>),<span class="dv">1</span>,<span class="fu">rep</span>(<span class="dv">0</span>,<span class="dv">3</span>)) <span class="co"># BFI-S</span></span>
<span id="cb253-4"><a href="runmodels.html#cb253-4" tabindex="-1"></a>  , <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="fu">rep</span>(<span class="dv">0</span>,<span class="dv">9</span>),<span class="dv">1</span>,<span class="fu">rep</span>(<span class="dv">0</span>,<span class="dv">2</span>)) <span class="co"># Eysenck</span></span>
<span id="cb253-5"><a href="runmodels.html#cb253-5" tabindex="-1"></a>  , <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="fu">rep</span>(<span class="dv">0</span>,<span class="dv">10</span>),<span class="dv">1</span>,<span class="dv">0</span>) <span class="co"># MIDI</span></span>
<span id="cb253-6"><a href="runmodels.html#cb253-6" tabindex="-1"></a>  , <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="fu">rep</span>(<span class="dv">0</span>,<span class="dv">11</span>),<span class="dv">1</span>) <span class="co"># TDA-40</span></span>
<span id="cb253-7"><a href="runmodels.html#cb253-7" tabindex="-1"></a>); <span class="fu">rownames</span>(cntrm) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;NEO-FFI&quot;</span>, <span class="st">&quot;BFI-S&quot;</span>, <span class="st">&quot;Eysenck&quot;</span>, <span class="st">&quot;MIDI&quot;</span>, <span class="st">&quot;TDA-40&quot;</span>)</span>
<span id="cb253-8"><a href="runmodels.html#cb253-8" tabindex="-1"></a>(multcomp<span class="sc">::</span><span class="fu">glht</span>(m, cntrm) <span class="sc">%&gt;%</span> <span class="co"># multcomp hypothesis function</span></span>
<span id="cb253-9"><a href="runmodels.html#cb253-9" tabindex="-1"></a>      <span class="fu">confint</span>(., <span class="at">calpha =</span> multcomp<span class="sc">::</span><span class="fu">univariate_calpha</span>()))<span class="sc">$</span>confint <span class="sc">%&gt;%</span></span>
<span id="cb253-10"><a href="runmodels.html#cb253-10" tabindex="-1"></a>      <span class="fu">data.frame</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb253-11"><a href="runmodels.html#cb253-11" tabindex="-1"></a>  <span class="fu">data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb253-12"><a href="runmodels.html#cb253-12" tabindex="-1"></a>  <span class="fu">rownames_to_column</span>(<span class="st">&quot;cntr&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb253-13"><a href="runmodels.html#cb253-13" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">term =</span> <span class="fu">rownames</span>(cntrm)) <span class="sc">%&gt;%</span> </span>
<span id="cb253-14"><a href="runmodels.html#cb253-14" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>cntr) <span class="sc">%&gt;%</span></span>
<span id="cb253-15"><a href="runmodels.html#cb253-15" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">est =</span> <span class="fu">sprintf</span>(<span class="st">&quot;b = %.2f, 95%% CI [%.2f, %.2f]&quot;</span>, Estimate, lwr, upr))</span></code></pre></div>
<pre><code>##     Estimate         lwr       upr    term                            est
## 1 0.36866255  0.22956598 0.5077591 NEO-FFI  b = 0.37, 95% CI [0.23, 0.51]
## 2 0.05211009 -0.01683090 0.1210511   BFI-S b = 0.05, 95% CI [-0.02, 0.12]
## 3 0.30966126  0.17573543 0.4435871 Eysenck  b = 0.31, 95% CI [0.18, 0.44]
## 4 0.08692008  0.06461337 0.1092268    MIDI  b = 0.09, 95% CI [0.06, 0.11]
## 5 0.19607896  0.17193054 0.2202274  TDA-40  b = 0.20, 95% CI [0.17, 0.22]</code></pre>
</div>
</div>
</div>
<div id="sample-results-section" class="section level4 hasAnchor" number="3.2.1.6">
<h4><span class="header-section-number">3.2.1.6</span> Sample Results Section<a href="runmodels.html#sample-results-section" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>We examined estimates of overall prospective associations between Big Five personality characteristics and crystallized abilities as well as participant and sample-level moderators of those associations using fully pooled, one-stage regression models with individual participant data in 11 studies. Table S1 presents the fully adjusted (age, gender, education) pooled estimates of the key terms from all unmoderated estimates as well as participant- and sample-level moderators. Across the 20 (5 unmoderated, 15 participant-level moderators) key participant-level terms, 10 (50%) were significant. For unmoderated personality-cognition associations, extraversion (-), agreeableness (-), conscientiousness (+), neuroticism (-), and openness (+) were significantly associated with later crystallized abilities. Forest plots of the overall point estimates are available in the online materials and web app, as are tables with all model terms (e.g., intercepts, covariate-cognitive ability associations).</p>
<table class=" lightable-classic" style="color: black; font-family: Times New Roman; width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
(#tab:ipd1a key term tab)1A Pooled Analysis of Individual Participant Data: Fixed Effect Estimates of Fully Adjusted Personality-Crystallized Domain Associations
</caption>
<thead>
<tr>
<th style="empty-cells: hide;" colspan="1">
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
Extraversion
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
Agreeableness
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
Conscientiousness
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
Neuroticism
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
Openness to Experience
</div>
</th>
</tr>
<tr>
<th style="text-align:right;">
Term
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
</tr>
</thead>
<tbody>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>None</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Personality
</td>
<td style="text-align:center;">
<strong>-0.03<br>[-0.05, -0.02]</strong>
</td>
<td style="text-align:center;">
<strong>-0.05<br>[-0.06, -0.03]</strong>
</td>
<td style="text-align:center;">
<strong>0.03<br>[0.02, 0.05]</strong>
</td>
<td style="text-align:center;">
<strong>-0.03<br>[-0.04, -0.01]</strong>
</td>
<td style="text-align:center;">
<strong>0.13<br>[0.11, 0.14]</strong>
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Age</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Age
</td>
<td style="text-align:center;">
-0.000<br>[-0.002, 0.001]
</td>
<td style="text-align:center;">
-0.001<br>[-0.003, 0.000]
</td>
<td style="text-align:center;">
0.001<br>[-0.001, 0.002]
</td>
<td style="text-align:center;">
<strong>0.002<br>[0.001, 0.003]</strong>
</td>
<td style="text-align:center;">
<strong>-0.003<br>[-0.005, -0.002]</strong>
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Gender</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Gender (Male v Female)
</td>
<td style="text-align:center;">
<strong>0.05<br>[0.02, 0.08]</strong>
</td>
<td style="text-align:center;">
0.03<br>[-0.01, 0.06]
</td>
<td style="text-align:center;">
0.01<br>[-0.02, 0.05]
</td>
<td style="text-align:center;">
-0.01<br>[-0.04, 0.01]
</td>
<td style="text-align:center;">
-0.02<br>[-0.06, 0.009]
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Education</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Education (Years)
</td>
<td style="text-align:center;">
<strong>0.007<br>[0.002, 0.01]</strong>
</td>
<td style="text-align:center;">
-0.001<br>[-0.007, 0.005]
</td>
<td style="text-align:center;">
<strong>-0.007<br>[-0.01, -0.001]</strong>
</td>
<td style="text-align:center;">
-0.002<br>[-0.006, 0.001]
</td>
<td style="text-align:center;">
0.005<br>[-0.000, 0.01]
</td>
</tr>
<tr grouplength="2">
<td colspan="6" style="border-bottom: 0;">
<strong>Continent</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Continent (North America v Europe)
</td>
<td style="text-align:center;">
<strong>0.15<br>[0.10, 0.20]</strong>
</td>
<td style="text-align:center;">
-0.03<br>[-0.09, 0.04]
</td>
<td style="text-align:center;">
-0.04<br>[-0.10, 0.01]
</td>
<td style="text-align:center;">
<strong>0.06<br>[0.03, 0.09]</strong>
</td>
<td style="text-align:center;">
0.04<br>[-0.01, 0.10]
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Continent (North America v Australia)
</td>
<td style="text-align:center;">
<strong>0.06<br>[0.02, 0.09]</strong>
</td>
<td style="text-align:center;">
0.002<br>[-0.04, 0.04]
</td>
<td style="text-align:center;">
<strong>-0.04<br>[-0.08, -0.008]</strong>
</td>
<td style="text-align:center;">
<strong>-0.13<br>[-0.17, -0.10]</strong>
</td>
<td style="text-align:center;">
<strong>0.11<br>[0.08, 0.14]</strong>
</td>
</tr>
<tr grouplength="4">
<td colspan="6" style="border-bottom: 0;">
<strong>Country</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Country (United States v Germany)
</td>
<td style="text-align:center;">
<strong>0.20<br>[0.12, 0.27]</strong>
</td>
<td style="text-align:center;">
0.005<br>[-0.08, 0.09]
</td>
<td style="text-align:center;">
-0.06<br>[-0.15, 0.04]
</td>
<td style="text-align:center;">
<strong>0.10<br>[0.03, 0.17]</strong>
</td>
<td style="text-align:center;">
0.02<br>[-0.04, 0.09]
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Country (United States v Sweden)
</td>
<td style="text-align:center;">
<strong>0.08<br>[0.02, 0.15]</strong>
</td>
<td style="text-align:center;">
<strong>-0.22<br>[-0.33, -0.11]</strong>
</td>
<td style="text-align:center;">
<strong>-0.21<br>[-0.30, -0.11]</strong>
</td>
<td style="text-align:center;">
0.03<br>[-0.03, 0.09]
</td>
<td style="text-align:center;">
<strong>0.23<br>[0.09, 0.36]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Country (United States v The Netherlands)
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
-0.02<br>[-0.07, 0.03]
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Country (United States v Australia)
</td>
<td style="text-align:center;">
<strong>0.06<br>[0.02, 0.09]</strong>
</td>
<td style="text-align:center;">
0.001<br>[-0.04, 0.04]
</td>
<td style="text-align:center;">
<strong>-0.05<br>[-0.08, -0.01]</strong>
</td>
<td style="text-align:center;">
<strong>-0.13<br>[-0.17, -0.10]</strong>
</td>
<td style="text-align:center;">
<strong>0.11<br>[0.08, 0.14]</strong>
</td>
</tr>
<tr grouplength="6">
<td colspan="6" style="border-bottom: 0;">
<strong>Personality Scale</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Scale (NEO-FFI v DPQ)
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>0.11<br>[0.06, 0.17]</strong>
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Scale (NEO-FFI v Eysenck)
</td>
<td style="text-align:center;">
0.02<br>[-0.15, 0.20]
</td>
<td style="text-align:center;">
<strong>-0.23<br>[-0.36, -0.09]</strong>
</td>
<td style="text-align:center;">
<strong>-0.15<br>[-0.28, -0.02]</strong>
</td>
<td style="text-align:center;">
<strong>0.21<br>[0.14, 0.27]</strong>
</td>
<td style="text-align:center;">
-0.06<br>[-0.25, 0.13]
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Scale (NEO-FFI v MIDI)
</td>
<td style="text-align:center;">
-0.06<br>[-0.22, 0.11]
</td>
<td style="text-align:center;">
-0.005<br>[-0.09, 0.08]
</td>
<td style="text-align:center;">
0.06<br>[-0.04, 0.15]
</td>
<td style="text-align:center;">
<strong>0.14<br>[0.10, 0.18]</strong>
</td>
<td style="text-align:center;">
<strong>-0.28<br>[-0.42, -0.14]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Scale (NEO-FFI v BFI-S)
</td>
<td style="text-align:center;">
0.07<br>[-0.11, 0.25]
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>0.14<br>[0.05, 0.22]</strong>
</td>
<td style="text-align:center;">
<strong>-0.32<br>[-0.47, -0.16]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Scale (NEO-FFI v IPIP NEO)
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
<strong>0.10<br>[0.01, 0.19]</strong>
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Scale (NEO-FFI v TDA-40)
</td>
<td style="text-align:center;">
-0.003<br>[-0.17, 0.16]
</td>
<td style="text-align:center;">
-0.004<br>[-0.09, 0.08]
</td>
<td style="text-align:center;">
0.01<br>[-0.08, 0.10]
</td>
<td style="text-align:center;">
0.02<br>[-0.02, 0.07]
</td>
<td style="text-align:center;">
<strong>-0.17<br>[-0.31, -0.03]</strong>
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Baseline Age</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Study Baseline Age
</td>
<td style="text-align:center;">
<strong>-0.004<br>[-0.005, -0.003]</strong>
</td>
<td style="text-align:center;">
-0.001<br>[-0.002, 0.001]
</td>
<td style="text-align:center;">
-0.000<br>[-0.002, 0.001]
</td>
<td style="text-align:center;">
-0.000<br>[-0.001, 0.001]
</td>
<td style="text-align:center;">
<strong>-0.004<br>[-0.005, -0.003]</strong>
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Baseline Year</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Study Baseline Year
</td>
<td style="text-align:center;">
-0.003<br>[-0.006, 0.001]
</td>
<td style="text-align:center;">
<strong>0.007<br>[0.002, 0.01]</strong>
</td>
<td style="text-align:center;">
<strong>0.007<br>[0.003, 0.01]</strong>
</td>
<td style="text-align:center;">
<strong>0.002<br>[0.000, 0.005]</strong>
</td>
<td style="text-align:center;">
<strong>-0.010<br>[-0.01, -0.004]</strong>
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Prediction Interval</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Prediction Interval
</td>
<td style="text-align:center;">
0.002<br>[-0.005, 0.009]
</td>
<td style="text-align:center;">
<strong>-0.03<br>[-0.04, -0.03]</strong>
</td>
<td style="text-align:center;">
<strong>-0.03<br>[-0.03, -0.02]</strong>
</td>
<td style="text-align:center;">
<strong>-0.006<br>[-0.01, -0.000]</strong>
</td>
<td style="text-align:center;">
<strong>0.02<br>[0.01, 0.03]</strong>
</td>
</tr>
</tbody>
</table>
<p>In addition, gender (b = 0.05, 95% CI [0.02, 0.08]) moderated the prospective association between extraversion and crystallized abilities. To better understand how gender moderates the relationships, Figure S1 displays the fully adjusted (age, gender, education) predicted crystallized abilities levels at different levels of the Big Five for males and females. As is clear in the first column (Method 1A) and first row (extraversion) of the figure, the overall prospective association between personality-crystallized ability association was negative for males (b = -0.06, 95% CI [-0.08, -0.04]) and null for females (b = -0.01, 95% CI [-0.03, 0.006]). Moreover, education moderated the association between extraversion (b = 0.007, 95% CI [0.002, 0.01]) and conscientiousness (b = -0.007, 95% [-0.01, -0.001]) and later crystallized abilities. For extraversion, this indicated that less educated individuals who were higher in extraversion tended to have lower crystallized ability scores at later time points than those with more education and high in extraversion. For conscientiousness, less educated individuals who were lower in conscientiousness had worse crystallized ability at later time points than more educated individuals who were lower in conscientiousness. Finally, age moderated the relationship between both neuroticism (b = 0.002, 95% CI [0.001, 0.003]) and openness (b = -0.003, 95% CI [-0.005, -0.002]) and crystallized abilities. Older individuals who were higher in neuroticism had higher crystallized ability scores than younger individuals. Older individuals who were lower in openness had higher crystallized ability scores than younger individuals who were low in openness. All other simple effects of participant-level moderators are available in the online materials and in the web app.</p>
<div class="figure"><span style="display:block;" id="fig:unnamed-chunk-23"></span>
<img src="../../results/1a_ipd_reg/Frequentist/figures/overall simple effects/crystallized_gender_all.png" alt="Figure S1. Simple effects of the prospective association between Big Five personality characteristics (rows) and crystallized abilities across gender (male, female) using all methods of data synthesis (columns). The x-axis captures personality in percentage of maximum possible (POMP) units, the y-axis captures crystallized abilities in POMP, and different panels represent each of the Big Five characteristics. Different lines indicate the predicted levels of cognitive ability for males (dotted line) and females (solid line)." width="900" />
<p class="caption">
Figure 3.1: Figure S1. Simple effects of the prospective association between Big Five personality characteristics (rows) and crystallized abilities across gender (male, female) using all methods of data synthesis (columns). The x-axis captures personality in percentage of maximum possible (POMP) units, the y-axis captures crystallized abilities in POMP, and different panels represent each of the Big Five characteristics. Different lines indicate the predicted levels of cognitive ability for males (dotted line) and females (solid line).
</p>
</div>
<p>Additionally, we examined sample-level moderators. These moderators are those that are the same across the individuals in the sample and speak more to similarities and differences in the samples as a whole. Specifically, we examined how the continent and country of origin of each sample, the personality scale used, the average baseline age of the sample, the average baseline year of assessment of personality, and the average interval between personality and cognitive assessment may predict the estimated personality-cognitive ability association. Estimates of the sample-level moderators of Big Five personality characteristic-crystallized / knowledge domain cognitive ability associations across methods can be seen in Table S1. Of these 55 tested associations, 36 (65.45%) were significant. For example, the associations between both extraversion and neuroticism and crystallized / knowledge domain associations were more positive for European and Australian samples than for North American samples. Although North American samples (b = -0.05, 95% CI [-0.07, -0.02]) demonstrated negative associations between extraversion and cognitive ability, European samples (b = 0.06, 95% CI [0.06, 0.15]) demonstrated positive associations, and Australian samples (b = 0.01, 95% CI [-0.01, 0.04]) null associations. For neuroticism, North American samples (b = -0.01, 95% CI [-0.02, 0.02]) demonstrated null associations with cognitive ability, while European (b = 0.06, 95% CI [0.03, 0.09]) samples demonstrated a positive association and Australian samples (b = -0.14, 95% CI [-0.16, -0.11]) demonstrated a negative association. For personality scales, NEO-FFI measures of openness (b = 0.37, 95% CI [0.23, 0.51]) tended to be differently associated with crystallized / knowledge domain cognitive ability than other personality scales, including the MIDI (HRS, b = 0.09, 95% CI [0.06, 0.11]), the BFI-S (GSOEP, b = 0.05, 95% CI [-0.02, 0.12]), and the TDA-40 (HILDA, b = 0.20, 95% CI [0.17, 0.22]).</p>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb255-1"><a href="runmodels.html#cb255-1" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>()[<span class="fu">grepl</span>(<span class="st">&quot;ipd1a&quot;</span>, <span class="fu">ls</span>())])</span></code></pre></div>
</div>
</div>
<div id="part-1b-pooled-linear-regression-with-cluster-robust-standard-errors" class="section level3 hasAnchor" number="3.2.2">
<h3><span class="header-section-number">3.2.2</span> Part 1B: Pooled Linear Regression with Cluster Robust Standard Errors<a href="runmodels.html#part-1b-pooled-linear-regression-with-cluster-robust-standard-errors" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="analytic-plan-1" class="section level4 hasAnchor" number="3.2.2.1">
<h4><span class="header-section-number">3.2.2.1</span> Analytic Plan<a href="runmodels.html#analytic-plan-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In the present study, we aimed to examine associations between personality traits and crystallized cognitive abilities using fully pooled, single-stage regression models with cluster robust standard errors (Gaure, 2013; Pustejovsky &amp; Tipton, 2018) and individual participant data. Correcting for dependencies without explicitly modeling cross-sample heterogeneity is sometimes called nuisance clustering (Fitzmaurice &amp; Laird, 1995). Below, we detail each stage of the analysis.</p>
<div id="statistical-modeling-1" class="section level5 hasAnchor" number="3.2.2.1.1">
<h5><span class="header-section-number">3.2.2.1.1</span> Statistical Modeling<a href="runmodels.html#statistical-modeling-1" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>A single regression model tests the relationship between personality and crystallized cognitive ability across all samples. Using the R programming language, we created two functions to (1) set up and run the model and extract model coefficients and (2) extract simple-effects predictions for moderator models (i.e. predicted values across levels of the moderator values). The basic form of the model is as follows:</p>
<p><span class="math inline">\(Y_{ij}=b_0+b_1\ast predictor_{ij}+\epsilon_{ij}\)</span>
<span class="math inline">\(\varepsilon_{ij}\sim\mathcal{N}(0, \sigma^2)\)</span>,</p>
<p>with sample as a cluster, where <span class="math inline">\(b_1\)</span> represents the overall effect of personality predicting the outcome. For moderator models, we add two additional terms, <span class="math inline">\(b_2\)</span>, which captures the prospective association between a moderator and cognitive ability, adjusting for personality, and b_3, which captures how cognitive ability varies as a function of both personality and the moderator (e.g., does the association differ for males and females).</p>
<p>Models will be tested using the <code>lm_robust()</code> function from the <code>estimatr</code> package in <code>R</code>, with <code>cluster=study</code> and <code>se_type="CR0"</code>. The <code>tidy()</code> function from the broom package was used to extract model coefficients and confidence intervals (CI). Inferences will be based on the 95% confidence intervals. Simple-effects predictions were calculated by providing the full range of personality (0-10) and average levels of the covariates from the data used to estimate the model as the “newdata” argument in the predict() function.</p>
</div>
</div>
<div id="model-function-1" class="section level4 hasAnchor" number="3.2.2.2">
<h4><span class="header-section-number">3.2.2.2</span> Model Function<a href="runmodels.html#model-function-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The first thing we need is a function that will bring in the data, create a formula in the model based on input on the type (Frequentist or Bayesian), moderators (none, age, gender, and education), and combinations of covariates (single or fully adjusted based on age, gender, and education). Then we run the model, which in this case uses the <code>lm_robust()</code> function from the <code>estimatr</code> pacakge, extract its fixed effect estimates, and save both for later. By saving the results, it will make it easier and faster for us to extract the necessary model results later while still retaining all information from the original model.</p>
<div class="sourceCode" id="cb256"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb256-1"><a href="runmodels.html#cb256-1" tabindex="-1"></a>ipd1b_mod_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(trait, outcome, type, mod, cov){</span>
<span id="cb256-2"><a href="runmodels.html#cb256-2" tabindex="-1"></a>  <span class="do">## load the data</span></span>
<span id="cb256-3"><a href="runmodels.html#cb256-3" tabindex="-1"></a>  <span class="fu">load</span>(<span class="fu">sprintf</span>(<span class="st">&quot;%s/data/one_stage/%s_%s.RData&quot;</span>, local_path, trait, outcome))</span>
<span id="cb256-4"><a href="runmodels.html#cb256-4" tabindex="-1"></a>  </span>
<span id="cb256-5"><a href="runmodels.html#cb256-5" tabindex="-1"></a>  <span class="do">## model formula </span></span>
<span id="cb256-6"><a href="runmodels.html#cb256-6" tabindex="-1"></a>  <span class="cf">if</span> (cov <span class="sc">==</span> <span class="st">&quot;all&quot;</span>) cv <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;age&quot;</span>, <span class="st">&quot;gender&quot;</span>, <span class="st">&quot;education&quot;</span>)</span>
<span id="cb256-7"><a href="runmodels.html#cb256-7" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span>cov <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;all&quot;</span>, <span class="st">&quot;none&quot;</span>)) cv <span class="ot">&lt;-</span> cov</span>
<span id="cb256-8"><a href="runmodels.html#cb256-8" tabindex="-1"></a>  rhs <span class="ot">&lt;-</span> <span class="st">&quot;p_value&quot;</span></span>
<span id="cb256-9"><a href="runmodels.html#cb256-9" tabindex="-1"></a>  rhs <span class="ot">&lt;-</span> <span class="cf">if</span>(cov <span class="sc">!=</span> <span class="st">&quot;none&quot;</span>) <span class="fu">c</span>(rhs, cv) <span class="cf">else</span> rhs</span>
<span id="cb256-10"><a href="runmodels.html#cb256-10" tabindex="-1"></a>  <span class="cf">if</span>(mod <span class="sc">!=</span> <span class="st">&quot;none&quot;</span>){rhs <span class="ot">&lt;-</span> <span class="fu">c</span>(rhs, <span class="fu">paste</span>(<span class="st">&quot;p_value&quot;</span>, mod, <span class="at">sep =</span> <span class="st">&quot;*&quot;</span>))}</span>
<span id="cb256-11"><a href="runmodels.html#cb256-11" tabindex="-1"></a>  rhs <span class="ot">&lt;-</span> <span class="fu">paste</span>(rhs, <span class="at">collapse =</span> <span class="st">&quot; + &quot;</span>)</span>
<span id="cb256-12"><a href="runmodels.html#cb256-12" tabindex="-1"></a>  f <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;o_value ~ &quot;</span>, rhs, <span class="at">collapse =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb256-13"><a href="runmodels.html#cb256-13" tabindex="-1"></a>  </span>
<span id="cb256-14"><a href="runmodels.html#cb256-14" tabindex="-1"></a>  <span class="do">## compiled Bayesian model to speed up processing and avoid crashing</span></span>
<span id="cb256-15"><a href="runmodels.html#cb256-15" tabindex="-1"></a>  <span class="cf">if</span>(type <span class="sc">==</span> <span class="st">&quot;Bayesian&quot;</span>) <span class="fu">load</span>(<span class="fu">sprintf</span>(<span class="st">&quot;%s/results/1a_ipd_reg/bayes_sample_mod.RData&quot;</span>, local_path))</span>
<span id="cb256-16"><a href="runmodels.html#cb256-16" tabindex="-1"></a>  </span>
<span id="cb256-17"><a href="runmodels.html#cb256-17" tabindex="-1"></a>  <span class="do">## run the models &amp; save</span></span>
<span id="cb256-18"><a href="runmodels.html#cb256-18" tabindex="-1"></a>  m <span class="ot">&lt;-</span> <span class="cf">if</span>(type <span class="sc">==</span> <span class="st">&quot;Frequentist&quot;</span>){<span class="fu">lm_robust</span>(<span class="fu">formula</span>(f), <span class="at">data =</span> d, <span class="at">clusters =</span> study, <span class="at">se_type =</span> <span class="st">&quot;CR0&quot;</span>)} <span class="cf">else</span> {<span class="fu">update</span>(m, <span class="at">formula =</span> f, <span class="at">newdata =</span> d)}</span>
<span id="cb256-19"><a href="runmodels.html#cb256-19" tabindex="-1"></a>  <span class="fu">save</span>(m, <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/1b_ipd_fixef/%s/models/%s_%s_%s_%s.RData&quot;</span></span>
<span id="cb256-20"><a href="runmodels.html#cb256-20" tabindex="-1"></a>                         , local_path, type, outcome, trait, mod, cov))</span>
<span id="cb256-21"><a href="runmodels.html#cb256-21" tabindex="-1"></a>  </span>
<span id="cb256-22"><a href="runmodels.html#cb256-22" tabindex="-1"></a>  <span class="do">## extract model terms and confidence intervals &amp; save</span></span>
<span id="cb256-23"><a href="runmodels.html#cb256-23" tabindex="-1"></a>  fx <span class="ot">&lt;-</span> <span class="fu">tidy</span>(m, <span class="at">conf.int =</span> T) <span class="sc">%&gt;%</span></span>
<span id="cb256-24"><a href="runmodels.html#cb256-24" tabindex="-1"></a>    <span class="fu">select</span>(term, estimate, conf.low, conf.high)</span>
<span id="cb256-25"><a href="runmodels.html#cb256-25" tabindex="-1"></a>  <span class="fu">save</span>(fx, <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/1b_ipd_fixef/%s/summary/%s_%s_%s_%s.RData&quot;</span></span>
<span id="cb256-26"><a href="runmodels.html#cb256-26" tabindex="-1"></a>                          , local_path, type, outcome, trait, mod, cov))</span>
<span id="cb256-27"><a href="runmodels.html#cb256-27" tabindex="-1"></a>  </span>
<span id="cb256-28"><a href="runmodels.html#cb256-28" tabindex="-1"></a>   <span class="do">## get simple effects for moderator tests</span></span>
<span id="cb256-29"><a href="runmodels.html#cb256-29" tabindex="-1"></a>  <span class="cf">if</span>(mod <span class="sc">!=</span> <span class="st">&quot;none&quot;</span>){</span>
<span id="cb256-30"><a href="runmodels.html#cb256-30" tabindex="-1"></a>    pred.fx <span class="ot">&lt;-</span> <span class="fu">ipd1b_simpeff_fun</span>(m, mod, type, d)</span>
<span id="cb256-31"><a href="runmodels.html#cb256-31" tabindex="-1"></a>    <span class="fu">save</span>(pred.fx, <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/1b_ipd_fixef/%s/predicted/%s_%s_%s_%s.RData&quot;</span>, local_path, type, outcome, trait, mod, cov))</span>
<span id="cb256-32"><a href="runmodels.html#cb256-32" tabindex="-1"></a>  }</span>
<span id="cb256-33"><a href="runmodels.html#cb256-33" tabindex="-1"></a>  </span>
<span id="cb256-34"><a href="runmodels.html#cb256-34" tabindex="-1"></a>  <span class="do">## clean up the local function environment</span></span>
<span id="cb256-35"><a href="runmodels.html#cb256-35" tabindex="-1"></a>  <span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">c</span>(<span class="st">&quot;d&quot;</span>, <span class="st">&quot;f&quot;</span>, <span class="st">&quot;rhs&quot;</span>, <span class="st">&quot;m&quot;</span>, <span class="st">&quot;fx&quot;</span>))</span>
<span id="cb256-36"><a href="runmodels.html#cb256-36" tabindex="-1"></a>  <span class="fu">gc</span>()</span>
<span id="cb256-37"><a href="runmodels.html#cb256-37" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="simple-effects-function-1" class="section level4 hasAnchor" number="3.2.2.3">
<h4><span class="header-section-number">3.2.2.3</span> Simple Effects Function<a href="runmodels.html#simple-effects-function-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb257-1"><a href="runmodels.html#cb257-1" tabindex="-1"></a>ipd1b_simpeff_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(m, moder, type, d){</span>
<span id="cb257-2"><a href="runmodels.html#cb257-2" tabindex="-1"></a>  d <span class="ot">&lt;-</span> <span class="cf">if</span>(type <span class="sc">==</span> <span class="st">&quot;Bayesian&quot;</span>) m<span class="sc">$</span>data <span class="cf">else</span> d <span class="sc">%&gt;%</span> <span class="fu">select</span>(o_value, <span class="fu">one_of</span>(<span class="fu">rownames</span>(<span class="fu">attr</span>(m<span class="sc">$</span>terms, <span class="st">&quot;factors&quot;</span>)))) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">complete.cases</span>(.)) <span class="sc">%&gt;%</span> <span class="fu">data.frame</span>()</span>
<span id="cb257-3"><a href="runmodels.html#cb257-3" tabindex="-1"></a>  d <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>o_value, <span class="sc">-</span>p_value)</span>
<span id="cb257-4"><a href="runmodels.html#cb257-4" tabindex="-1"></a>  cols <span class="ot">&lt;-</span> <span class="fu">colnames</span>(d)</span>
<span id="cb257-5"><a href="runmodels.html#cb257-5" tabindex="-1"></a>  md_cl <span class="ot">&lt;-</span> <span class="fu">class</span>(d[,moder])</span>
<span id="cb257-6"><a href="runmodels.html#cb257-6" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">any</span>(<span class="fu">sapply</span>(d, class) <span class="sc">==</span> <span class="st">&quot;numeric&quot;</span>)){</span>
<span id="cb257-7"><a href="runmodels.html#cb257-7" tabindex="-1"></a>    msd <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span></span>
<span id="cb257-8"><a href="runmodels.html#cb257-8" tabindex="-1"></a>      <span class="fu">select_if</span>(is.numeric) <span class="sc">%&gt;%</span></span>
<span id="cb257-9"><a href="runmodels.html#cb257-9" tabindex="-1"></a>      <span class="fu">pivot_longer</span>(<span class="fu">everything</span>()</span>
<span id="cb257-10"><a href="runmodels.html#cb257-10" tabindex="-1"></a>                   , <span class="at">names_to =</span> <span class="st">&quot;item&quot;</span></span>
<span id="cb257-11"><a href="runmodels.html#cb257-11" tabindex="-1"></a>                   , <span class="at">values_to =</span> <span class="st">&quot;value&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb257-12"><a href="runmodels.html#cb257-12" tabindex="-1"></a>      <span class="fu">group_by</span>(item) <span class="sc">%&gt;%</span></span>
<span id="cb257-13"><a href="runmodels.html#cb257-13" tabindex="-1"></a>      <span class="fu">summarize_at</span>(<span class="fu">vars</span>(value), <span class="fu">lst</span>(mean, sd), <span class="at">na.rm =</span> T) <span class="sc">%&gt;%</span></span>
<span id="cb257-14"><a href="runmodels.html#cb257-14" tabindex="-1"></a>      <span class="fu">ungroup</span>()</span>
<span id="cb257-15"><a href="runmodels.html#cb257-15" tabindex="-1"></a>  }</span>
<span id="cb257-16"><a href="runmodels.html#cb257-16" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">any</span>(<span class="fu">sapply</span>(d, class) <span class="sc">==</span> <span class="st">&quot;factor&quot;</span>)){</span>
<span id="cb257-17"><a href="runmodels.html#cb257-17" tabindex="-1"></a>    fct_lev <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> </span>
<span id="cb257-18"><a href="runmodels.html#cb257-18" tabindex="-1"></a>      <span class="fu">select_if</span>(is.factor) <span class="sc">%&gt;%</span></span>
<span id="cb257-19"><a href="runmodels.html#cb257-19" tabindex="-1"></a>      <span class="fu">summarize_all</span>(<span class="sc">~</span><span class="fu">list</span>(<span class="fu">unique</span>(.)))</span>
<span id="cb257-20"><a href="runmodels.html#cb257-20" tabindex="-1"></a>  }</span>
<span id="cb257-21"><a href="runmodels.html#cb257-21" tabindex="-1"></a>  d <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span><span class="fu">one_of</span>(moder))</span>
<span id="cb257-22"><a href="runmodels.html#cb257-22" tabindex="-1"></a>  md_levs <span class="ot">&lt;-</span> <span class="cf">if</span>(md_cl <span class="sc">==</span> <span class="st">&quot;numeric&quot;</span>){</span>
<span id="cb257-23"><a href="runmodels.html#cb257-23" tabindex="-1"></a>    <span class="cf">if</span>(moder <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;age&quot;</span>, <span class="st">&quot;baseAge&quot;</span>, <span class="st">&quot;baseYear&quot;</span>)) {</span>
<span id="cb257-24"><a href="runmodels.html#cb257-24" tabindex="-1"></a>      <span class="fu">c</span>(<span class="sc">-</span><span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">10</span>)</span>
<span id="cb257-25"><a href="runmodels.html#cb257-25" tabindex="-1"></a>      } <span class="cf">else</span> <span class="cf">if</span> (moder <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;predInt&quot;</span>, <span class="st">&quot;education&quot;</span>)) {</span>
<span id="cb257-26"><a href="runmodels.html#cb257-26" tabindex="-1"></a>      <span class="fu">c</span>(<span class="sc">-</span><span class="dv">5</span>, <span class="dv">0</span>, <span class="dv">5</span>) </span>
<span id="cb257-27"><a href="runmodels.html#cb257-27" tabindex="-1"></a>      } <span class="cf">else</span> {</span>
<span id="cb257-28"><a href="runmodels.html#cb257-28" tabindex="-1"></a>        <span class="fu">with</span>(msd, <span class="fu">c</span>(mean[item <span class="sc">==</span> moder] <span class="sc">-</span> sd[item <span class="sc">==</span> moder], mean[item <span class="sc">==</span> moder], mean[item <span class="sc">==</span> moder] <span class="sc">+</span> sd[item <span class="sc">==</span> moder]))</span>
<span id="cb257-29"><a href="runmodels.html#cb257-29" tabindex="-1"></a>      }</span>
<span id="cb257-30"><a href="runmodels.html#cb257-30" tabindex="-1"></a>  } <span class="cf">else</span> { </span>
<span id="cb257-31"><a href="runmodels.html#cb257-31" tabindex="-1"></a>    <span class="fu">unique</span>(fct_lev[,moder][[<span class="dv">1</span>]])</span>
<span id="cb257-32"><a href="runmodels.html#cb257-32" tabindex="-1"></a>  }</span>
<span id="cb257-33"><a href="runmodels.html#cb257-33" tabindex="-1"></a>  </span>
<span id="cb257-34"><a href="runmodels.html#cb257-34" tabindex="-1"></a>  mod_frame <span class="ot">&lt;-</span> <span class="fu">crossing</span>(</span>
<span id="cb257-35"><a href="runmodels.html#cb257-35" tabindex="-1"></a>    <span class="at">p_value =</span> <span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">10</span>,.<span class="dv">5</span>)</span>
<span id="cb257-36"><a href="runmodels.html#cb257-36" tabindex="-1"></a>    , <span class="at">modvalue =</span> md_levs</span>
<span id="cb257-37"><a href="runmodels.html#cb257-37" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> <span class="fu">setNames</span>(<span class="fu">c</span>(<span class="st">&quot;p_value&quot;</span>, moder))</span>
<span id="cb257-38"><a href="runmodels.html#cb257-38" tabindex="-1"></a>  </span>
<span id="cb257-39"><a href="runmodels.html#cb257-39" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">ncol</span>(d) <span class="sc">&gt;</span> <span class="dv">0</span>){</span>
<span id="cb257-40"><a href="runmodels.html#cb257-40" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">any</span>(<span class="fu">sapply</span>(d, class) <span class="sc">==</span> <span class="st">&quot;numeric&quot;</span>)){</span>
<span id="cb257-41"><a href="runmodels.html#cb257-41" tabindex="-1"></a>      mod_frame <span class="ot">&lt;-</span> <span class="fu">tibble</span>(mod_frame, d <span class="sc">%&gt;%</span> <span class="fu">select_if</span>(is.numeric) <span class="sc">%&gt;%</span> <span class="fu">summarize_all</span>(mean))</span>
<span id="cb257-42"><a href="runmodels.html#cb257-42" tabindex="-1"></a>    } </span>
<span id="cb257-43"><a href="runmodels.html#cb257-43" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">any</span>(<span class="fu">sapply</span>(d, class) <span class="sc">==</span> <span class="st">&quot;factor&quot;</span>)){</span>
<span id="cb257-44"><a href="runmodels.html#cb257-44" tabindex="-1"></a>      mod_frame <span class="ot">&lt;-</span> <span class="fu">tibble</span>(mod_frame, d <span class="sc">%&gt;%</span> <span class="fu">select_if</span>(is.factor) <span class="sc">%&gt;%</span> <span class="fu">summarize_all</span>(<span class="sc">~</span><span class="fu">levels</span>(.)[<span class="dv">1</span>]))</span>
<span id="cb257-45"><a href="runmodels.html#cb257-45" tabindex="-1"></a>    }</span>
<span id="cb257-46"><a href="runmodels.html#cb257-46" tabindex="-1"></a>  }</span>
<span id="cb257-47"><a href="runmodels.html#cb257-47" tabindex="-1"></a>  </span>
<span id="cb257-48"><a href="runmodels.html#cb257-48" tabindex="-1"></a>  pred.fx <span class="ot">&lt;-</span> <span class="cf">if</span>(type <span class="sc">==</span> <span class="st">&quot;Bayesian&quot;</span>){</span>
<span id="cb257-49"><a href="runmodels.html#cb257-49" tabindex="-1"></a>    <span class="fu">bind_cols</span>(</span>
<span id="cb257-50"><a href="runmodels.html#cb257-50" tabindex="-1"></a>      mod_frame, </span>
<span id="cb257-51"><a href="runmodels.html#cb257-51" tabindex="-1"></a>      <span class="fu">fitted</span>(m, <span class="at">newdata =</span> mod_frame) <span class="sc">%&gt;%</span> data.frame</span>
<span id="cb257-52"><a href="runmodels.html#cb257-52" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb257-53"><a href="runmodels.html#cb257-53" tabindex="-1"></a>      <span class="fu">select</span>(<span class="fu">one_of</span>(<span class="fu">colnames</span>(m<span class="sc">$</span>data)), <span class="at">pred =</span> Estimate, <span class="at">lower =</span> Q2<span class="fl">.5</span>, <span class="at">upper =</span> Q97<span class="fl">.5</span>)</span>
<span id="cb257-54"><a href="runmodels.html#cb257-54" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb257-55"><a href="runmodels.html#cb257-55" tabindex="-1"></a>    <span class="fu">bind_cols</span>(</span>
<span id="cb257-56"><a href="runmodels.html#cb257-56" tabindex="-1"></a>      mod_frame, </span>
<span id="cb257-57"><a href="runmodels.html#cb257-57" tabindex="-1"></a>      <span class="fu">predict</span>(m, <span class="at">newdata =</span> mod_frame, <span class="at">interval =</span> <span class="st">&quot;confidence&quot;</span>)<span class="sc">$</span>fit <span class="sc">%&gt;%</span> data.frame </span>
<span id="cb257-58"><a href="runmodels.html#cb257-58" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb257-59"><a href="runmodels.html#cb257-59" tabindex="-1"></a>      <span class="fu">select</span>(<span class="fu">one_of</span>(<span class="fu">rownames</span>(<span class="fu">attr</span>(m<span class="sc">$</span>terms, <span class="st">&quot;factors&quot;</span>))), <span class="at">pred =</span> fit, <span class="at">lower =</span> lwr, <span class="at">upper =</span> upr)</span>
<span id="cb257-60"><a href="runmodels.html#cb257-60" tabindex="-1"></a>  }</span>
<span id="cb257-61"><a href="runmodels.html#cb257-61" tabindex="-1"></a>  </span>
<span id="cb257-62"><a href="runmodels.html#cb257-62" tabindex="-1"></a>  <span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">c</span>(<span class="st">&quot;m&quot;</span>, <span class="st">&quot;mod_frame&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;md_levs&quot;</span>))</span>
<span id="cb257-63"><a href="runmodels.html#cb257-63" tabindex="-1"></a>  <span class="fu">gc</span>()</span>
<span id="cb257-64"><a href="runmodels.html#cb257-64" tabindex="-1"></a>  <span class="fu">return</span>(pred.fx)</span>
<span id="cb257-65"><a href="runmodels.html#cb257-65" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="run-models-and-summaries-1" class="section level4 hasAnchor" number="3.2.2.4">
<h4><span class="header-section-number">3.2.2.4</span> Run Models and Summaries<a href="runmodels.html#run-models-and-summaries-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The code below generates all possible preregistrered combinations of traits, outcomes, types, moderators, and covariates. Then these combinations are fed serially to the model function written previously, which will run and save the results.</p>
<div class="sourceCode" id="cb258"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb258-1"><a href="runmodels.html#cb258-1" tabindex="-1"></a><span class="fu">plan</span>(<span class="fu">multisession</span>(<span class="at">workers =</span> <span class="dv">12</span><span class="dt">L</span>))</span>
<span id="cb258-2"><a href="runmodels.html#cb258-2" tabindex="-1"></a>nested_ipd1b_fixef <span class="ot">&lt;-</span> </span>
<span id="cb258-3"><a href="runmodels.html#cb258-3" tabindex="-1"></a>  <span class="co"># moderator combinations </span></span>
<span id="cb258-4"><a href="runmodels.html#cb258-4" tabindex="-1"></a>  <span class="fu">crossing</span>(</span>
<span id="cb258-5"><a href="runmodels.html#cb258-5" tabindex="-1"></a>    <span class="at">Trait =</span> traits<span class="sc">$</span>short_name</span>
<span id="cb258-6"><a href="runmodels.html#cb258-6" tabindex="-1"></a>    , <span class="at">Outcome =</span> outcomes<span class="sc">$</span>short_name</span>
<span id="cb258-7"><a href="runmodels.html#cb258-7" tabindex="-1"></a>    , <span class="at">type =</span> <span class="fu">c</span>(<span class="st">&quot;Frequentist&quot;</span>)</span>
<span id="cb258-8"><a href="runmodels.html#cb258-8" tabindex="-1"></a>    , <span class="at">Moderator =</span> <span class="fu">c</span>(<span class="st">&quot;age&quot;</span>, <span class="st">&quot;gender&quot;</span>, <span class="st">&quot;education&quot;</span>)</span>
<span id="cb258-9"><a href="runmodels.html#cb258-9" tabindex="-1"></a>    , <span class="at">Covariate =</span> <span class="fu">c</span>(<span class="st">&quot;none&quot;</span>, <span class="st">&quot;all&quot;</span>)</span>
<span id="cb258-10"><a href="runmodels.html#cb258-10" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb258-11"><a href="runmodels.html#cb258-11" tabindex="-1"></a>  <span class="fu">full_join</span>(</span>
<span id="cb258-12"><a href="runmodels.html#cb258-12" tabindex="-1"></a>    <span class="co"># unmoderated combinations </span></span>
<span id="cb258-13"><a href="runmodels.html#cb258-13" tabindex="-1"></a>    <span class="fu">crossing</span>(</span>
<span id="cb258-14"><a href="runmodels.html#cb258-14" tabindex="-1"></a>      <span class="at">Trait =</span> traits<span class="sc">$</span>short_name</span>
<span id="cb258-15"><a href="runmodels.html#cb258-15" tabindex="-1"></a>      , <span class="at">Outcome =</span> outcomes<span class="sc">$</span>short_name</span>
<span id="cb258-16"><a href="runmodels.html#cb258-16" tabindex="-1"></a>      , <span class="at">type =</span> <span class="fu">c</span>(<span class="st">&quot;Frequentist&quot;</span>)</span>
<span id="cb258-17"><a href="runmodels.html#cb258-17" tabindex="-1"></a>      , <span class="at">Moderator =</span> <span class="fu">c</span>(<span class="st">&quot;none&quot;</span>)</span>
<span id="cb258-18"><a href="runmodels.html#cb258-18" tabindex="-1"></a>      , <span class="at">Covariate =</span> <span class="fu">c</span>(<span class="st">&quot;none&quot;</span>, <span class="st">&quot;age&quot;</span>, <span class="st">&quot;gender&quot;</span>, <span class="st">&quot;education&quot;</span>, <span class="st">&quot;all&quot;</span>)</span>
<span id="cb258-19"><a href="runmodels.html#cb258-19" tabindex="-1"></a>      )</span>
<span id="cb258-20"><a href="runmodels.html#cb258-20" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb258-21"><a href="runmodels.html#cb258-21" tabindex="-1"></a>  <span class="co"># filter(Trait == &quot;N&quot;) %&gt;%</span></span>
<span id="cb258-22"><a href="runmodels.html#cb258-22" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">run =</span> <span class="fu">future_pmap</span>(</span>
<span id="cb258-23"><a href="runmodels.html#cb258-23" tabindex="-1"></a>    <span class="fu">list</span>(Trait, Outcome, type, Moderator, Covariate)</span>
<span id="cb258-24"><a href="runmodels.html#cb258-24" tabindex="-1"></a>    , ipd1b_mod_fun</span>
<span id="cb258-25"><a href="runmodels.html#cb258-25" tabindex="-1"></a>    , <span class="at">.progress =</span> T</span>
<span id="cb258-26"><a href="runmodels.html#cb258-26" tabindex="-1"></a>    , <span class="at">.options =</span> <span class="fu">furrr_options</span>(</span>
<span id="cb258-27"><a href="runmodels.html#cb258-27" tabindex="-1"></a>      <span class="at">globals =</span> <span class="fu">c</span>(<span class="st">&quot;res_path&quot;</span>, <span class="st">&quot;local_path&quot;</span>, <span class="st">&quot;ipd1b_simpeff_fun&quot;</span>, <span class="st">&quot;traits&quot;</span>, <span class="st">&quot;studies&quot;</span>, <span class="st">&quot;outcomes&quot;</span>, <span class="st">&quot;covars&quot;</span>, <span class="st">&quot;moders&quot;</span>)</span>
<span id="cb258-28"><a href="runmodels.html#cb258-28" tabindex="-1"></a>      , <span class="at">packages =</span> <span class="fu">c</span>(<span class="st">&quot;plyr&quot;</span>, <span class="st">&quot;tidyverse&quot;</span>, <span class="st">&quot;broom.mixed&quot;</span>, <span class="st">&quot;broom&quot;</span>, <span class="st">&quot;estimatr&quot;</span>)</span>
<span id="cb258-29"><a href="runmodels.html#cb258-29" tabindex="-1"></a>           )</span>
<span id="cb258-30"><a href="runmodels.html#cb258-30" tabindex="-1"></a>    ))</span>
<span id="cb258-31"><a href="runmodels.html#cb258-31" tabindex="-1"></a><span class="fu">closeAllConnections</span>()</span>
<span id="cb258-32"><a href="runmodels.html#cb258-32" tabindex="-1"></a></span>
<span id="cb258-33"><a href="runmodels.html#cb258-33" tabindex="-1"></a><span class="co"># nested_ipd1b_fixef %&gt;%</span></span>
<span id="cb258-34"><a href="runmodels.html#cb258-34" tabindex="-1"></a><span class="co">#   # select(-done) %&gt;%</span></span>
<span id="cb258-35"><a href="runmodels.html#cb258-35" tabindex="-1"></a><span class="co">#   write.table(.</span></span>
<span id="cb258-36"><a href="runmodels.html#cb258-36" tabindex="-1"></a><span class="co">#               , file = sprintf(&quot;%s/scripts/cluster/args/frequentist/ipd1b_frequentist.txt&quot;, local_path)</span></span>
<span id="cb258-37"><a href="runmodels.html#cb258-37" tabindex="-1"></a>              <span class="co"># , row.names = F)</span></span></code></pre></div>
<!-- ### DELETE LATER   -->
<!-- ```{r} -->
<!-- pred_fun <- function(file, type, outcome, trait, mod, cov){ -->
<!--   if(mod != "none"){ -->
<!--     load(sprintf("%s/data/one_stage/%s_%s.RData", local_path, trait, outcome)) -->
<!--     load(sprintf("%s/results/1b_ipd_fixef/%s/models/%s_%s_%s_%s.RData", local_path, type, outcome, trait, mod, cov)) -->
<!--     pred.fx <- ipd1b_simpeff_fun(m, mod, type, d) -->
<!--     save(pred.fx, file = sprintf("%s/results/1b_ipd_fixef/%s/predicted/%s_%s_%s_%s.RData", local_path, type, outcome, trait, mod, cov)) -->
<!--   } -->
<!-- } -->
<!-- tibble(type = c("Frequentist", "Bayesian")) %>% -->
<!--   mutate(file = map(type, ~list.files(sprintf("%s/results/1b_ipd_fixef/%s/summary", local_path, .)))) %>% -->
<!--   unnest(file) %>% -->
<!--   separate(file, c("Outcome", "Trait", "Moderator", "Covariate"), sep = "_", remove = F) %>%  -->
<!--   ## read in the files -->
<!--   mutate(Covariate = str_remove(Covariate, ".RData"), -->
<!--          pmap(list(file, type, Outcome, Trait, Moderator, Covariate), possibly(pred_fun, NA_real_))) -->
<!-- ``` -->
</div>
<div id="compile-results-1" class="section level4 hasAnchor" number="3.2.2.5">
<h4><span class="header-section-number">3.2.2.5</span> Compile Results<a href="runmodels.html#compile-results-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Once all the models are run, we are ready to compile all their results. By saving the fixed effects results previously, we are able to simply load those results and ignore the models. However, because we also saved the models, we can also recall and extract information from them if and when needed.</p>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb259-1"><a href="runmodels.html#cb259-1" tabindex="-1"></a>loadRData <span class="ot">&lt;-</span> <span class="cf">function</span>(fileName, type, obj, folder){</span>
<span id="cb259-2"><a href="runmodels.html#cb259-2" tabindex="-1"></a><span class="co">#loads an RData file, and returns it</span></span>
<span id="cb259-3"><a href="runmodels.html#cb259-3" tabindex="-1"></a>    path <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/1b_ipd_fixef/%s/%s/%s&quot;</span>, local_path, type, folder, fileName)</span>
<span id="cb259-4"><a href="runmodels.html#cb259-4" tabindex="-1"></a>    <span class="fu">load</span>(path)</span>
<span id="cb259-5"><a href="runmodels.html#cb259-5" tabindex="-1"></a>    <span class="fu">get</span>(<span class="fu">ls</span>()[<span class="fu">grepl</span>(obj, <span class="fu">ls</span>())])</span>
<span id="cb259-6"><a href="runmodels.html#cb259-6" tabindex="-1"></a>}</span>
<span id="cb259-7"><a href="runmodels.html#cb259-7" tabindex="-1"></a></span>
<span id="cb259-8"><a href="runmodels.html#cb259-8" tabindex="-1"></a><span class="do">## load in &quot;fixed&quot; effects</span></span>
<span id="cb259-9"><a href="runmodels.html#cb259-9" tabindex="-1"></a><span class="do">## first get file names</span></span>
<span id="cb259-10"><a href="runmodels.html#cb259-10" tabindex="-1"></a>nested_ipd1b_fixef <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">type =</span> <span class="fu">c</span>(<span class="st">&quot;Frequentist&quot;</span>, <span class="st">&quot;Bayesian&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb259-11"><a href="runmodels.html#cb259-11" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">file =</span> <span class="fu">map</span>(type, <span class="sc">~</span><span class="fu">list.files</span>(<span class="fu">sprintf</span>(<span class="st">&quot;%s/results/1b_ipd_fixef/%s/summary&quot;</span>, local_path, .)))) <span class="sc">%&gt;%</span></span>
<span id="cb259-12"><a href="runmodels.html#cb259-12" tabindex="-1"></a>  <span class="fu">unnest</span>(file) <span class="sc">%&gt;%</span></span>
<span id="cb259-13"><a href="runmodels.html#cb259-13" tabindex="-1"></a>  <span class="fu">separate</span>(file, <span class="fu">c</span>(<span class="st">&quot;Outcome&quot;</span>, <span class="st">&quot;Trait&quot;</span>, <span class="st">&quot;Moderator&quot;</span>, <span class="st">&quot;Covariate&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>, <span class="at">remove =</span> F) <span class="sc">%&gt;%</span> </span>
<span id="cb259-14"><a href="runmodels.html#cb259-14" tabindex="-1"></a>  <span class="do">## read in the files</span></span>
<span id="cb259-15"><a href="runmodels.html#cb259-15" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Covariate =</span> <span class="fu">str_remove</span>(Covariate, <span class="st">&quot;.RData&quot;</span>),</span>
<span id="cb259-16"><a href="runmodels.html#cb259-16" tabindex="-1"></a>         <span class="at">fx =</span> <span class="fu">map2</span>(file, type, <span class="sc">~</span><span class="fu">loadRData</span>(.x, .y, <span class="st">&quot;fx&quot;</span>, <span class="st">&quot;summary&quot;</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb259-17"><a href="runmodels.html#cb259-17" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>file) </span></code></pre></div>
<div id="tables-1" class="section level5 hasAnchor" number="3.2.2.5.1">
<h5><span class="header-section-number">3.2.2.5.1</span> Tables<a href="runmodels.html#tables-1" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Next, we want to format the study results in APA table format. In this case, we are interested in the fixed effects of personality predicting cognitive ability when there were no moderators, and the personality x moderator interaction when there was a moderator.</p>
<div id="fixed-effects-1" class="section level6 hasAnchor" number="3.2.2.5.1.1">
<h6><span class="header-section-number">3.2.2.5.1.1</span> Fixed Effects<a href="runmodels.html#fixed-effects-1" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<div class="sourceCode" id="cb260"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb260-1"><a href="runmodels.html#cb260-1" tabindex="-1"></a><span class="do">## format results </span></span>
<span id="cb260-2"><a href="runmodels.html#cb260-2" tabindex="-1"></a>ipd1b_fixef_tab <span class="ot">&lt;-</span> nested_ipd1b_fixef <span class="sc">%&gt;%</span></span>
<span id="cb260-3"><a href="runmodels.html#cb260-3" tabindex="-1"></a>  <span class="fu">unnest</span>(fx) <span class="sc">%&gt;%</span></span>
<span id="cb260-4"><a href="runmodels.html#cb260-4" tabindex="-1"></a>  <span class="fu">filter</span>((Moderator <span class="sc">==</span> <span class="st">&quot;none&quot;</span> <span class="sc">&amp;</span> term <span class="sc">==</span> <span class="st">&quot;p_value&quot;</span>) <span class="sc">|</span></span>
<span id="cb260-5"><a href="runmodels.html#cb260-5" tabindex="-1"></a>         (Moderator <span class="sc">!=</span> <span class="st">&quot;none&quot;</span> <span class="sc">&amp;</span> <span class="fu">grepl</span>(<span class="st">&quot;p_value:&quot;</span>, term))) <span class="sc">%&gt;%</span></span>
<span id="cb260-6"><a href="runmodels.html#cb260-6" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sig =</span> <span class="fu">ifelse</span>(<span class="fu">sign</span>(conf.low) <span class="sc">==</span> <span class="fu">sign</span>(conf.high), <span class="st">&quot;sig&quot;</span>, <span class="st">&quot;ns&quot;</span>),</span>
<span id="cb260-7"><a href="runmodels.html#cb260-7" tabindex="-1"></a>         <span class="at">Trait =</span> <span class="fu">factor</span>(Trait, traits<span class="sc">$</span>short_name),</span>
<span id="cb260-8"><a href="runmodels.html#cb260-8" tabindex="-1"></a>         <span class="at">Outcome =</span> <span class="fu">factor</span>(Outcome, outcomes<span class="sc">$</span>short_name, outcomes<span class="sc">$</span>long_name),</span>
<span id="cb260-9"><a href="runmodels.html#cb260-9" tabindex="-1"></a>         <span class="at">Moderator =</span> <span class="fu">factor</span>(Moderator, <span class="fu">c</span>(moders<span class="sc">$</span>short_name, stdyModers<span class="sc">$</span>short_name), <span class="fu">c</span>(moders<span class="sc">$</span>long_name, stdyModers<span class="sc">$</span>long_name)),</span>
<span id="cb260-10"><a href="runmodels.html#cb260-10" tabindex="-1"></a>         <span class="at">Covariate =</span> <span class="fu">ifelse</span>(Moderator <span class="sc">!=</span> <span class="st">&quot;None&quot;</span> <span class="sc">&amp;</span> Covariate <span class="sc">==</span> <span class="st">&quot;None&quot;</span>, Moderator, Covariate),</span>
<span id="cb260-11"><a href="runmodels.html#cb260-11" tabindex="-1"></a>         <span class="at">Covariate =</span> <span class="fu">factor</span>(Covariate, moders<span class="sc">$</span>short_name, <span class="fu">str_wrap</span>(moders<span class="sc">$</span>long_name, <span class="dv">15</span>)),</span>
<span id="cb260-12"><a href="runmodels.html#cb260-12" tabindex="-1"></a>         <span class="at">term =</span> <span class="fu">str_remove_all</span>(term, <span class="st">&quot;p_value:&quot;</span>),</span>
<span id="cb260-13"><a href="runmodels.html#cb260-13" tabindex="-1"></a>         <span class="at">term =</span> <span class="fu">mapvalues</span>(term, <span class="fu">c</span>(<span class="st">&quot;scaleBFIMS&quot;</span>, <span class="st">&quot;scaleIPIPNEO&quot;</span>, <span class="st">&quot;scaleTDAM40&quot;</span>, <span class="st">&quot;countryTheNetherlands&quot;</span>)</span>
<span id="cb260-14"><a href="runmodels.html#cb260-14" tabindex="-1"></a>                          , <span class="fu">c</span>(<span class="st">&quot;scaleBFI-S&quot;</span>, <span class="st">&quot;scaleIPIP NEO&quot;</span>, <span class="st">&quot;scaleTDA-40&quot;</span>, <span class="st">&quot;countryThe Netherlands&quot;</span>)),</span>
<span id="cb260-15"><a href="runmodels.html#cb260-15" tabindex="-1"></a>         <span class="at">term2 =</span> <span class="fu">factor</span>(term, <span class="fu">c</span>(moders<span class="sc">$</span>short_term, stdyModers<span class="sc">$</span>short_term),</span>
<span id="cb260-16"><a href="runmodels.html#cb260-16" tabindex="-1"></a>                       <span class="fu">c</span>(moders<span class="sc">$</span>long_term, stdyModers<span class="sc">$</span>long_term))) <span class="sc">%&gt;%</span></span>
<span id="cb260-17"><a href="runmodels.html#cb260-17" tabindex="-1"></a>  <span class="fu">mutate_at</span>(<span class="fu">vars</span>(estimate, conf.low, conf.high), </span>
<span id="cb260-18"><a href="runmodels.html#cb260-18" tabindex="-1"></a>            <span class="sc">~</span><span class="fu">ifelse</span>(<span class="fu">abs</span>(.) <span class="sc">&lt;</span> .<span class="dv">001</span>, <span class="fu">sprintf</span>(<span class="st">&quot;%.3f&quot;</span>, .), <span class="fu">sprintf</span>(<span class="st">&quot;%.2f&quot;</span>, .))) <span class="sc">%&gt;%</span></span>
<span id="cb260-19"><a href="runmodels.html#cb260-19" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">est =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s&lt;br&gt;[%s, %s]&quot;</span>, estimate, conf.low, conf.high),</span>
<span id="cb260-20"><a href="runmodels.html#cb260-20" tabindex="-1"></a>         <span class="at">est =</span> <span class="fu">ifelse</span>(sig <span class="sc">==</span> <span class="st">&quot;sig&quot;</span>, <span class="fu">sprintf</span>(<span class="st">&quot;&lt;strong&gt;%s&lt;/strong&gt;&quot;</span>, est), est)) <span class="sc">%&gt;%</span></span>
<span id="cb260-21"><a href="runmodels.html#cb260-21" tabindex="-1"></a>  <span class="co"># mutate(est = sprintf(&quot;%s [%s, %s]&quot;, estimate, conf.low, conf.high),</span></span>
<span id="cb260-22"><a href="runmodels.html#cb260-22" tabindex="-1"></a>  <span class="co"># est = ifelse(sig == &quot;sig&quot;, sprintf(&quot;\\textbf{%s}&quot;, est), est)) %&gt;%</span></span>
<span id="cb260-23"><a href="runmodels.html#cb260-23" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>estimate, <span class="sc">-</span>conf.low, <span class="sc">-</span>conf.high, <span class="sc">-</span>sig, <span class="sc">-</span>term) <span class="sc">%&gt;%</span></span>
<span id="cb260-24"><a href="runmodels.html#cb260-24" tabindex="-1"></a>  <span class="fu">arrange</span>(type, Outcome, Trait, Moderator, Covariate) <span class="sc">%&gt;%</span></span>
<span id="cb260-25"><a href="runmodels.html#cb260-25" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">&quot;Trait&quot;</span>, <span class="at">values_from =</span> <span class="st">&quot;est&quot;</span>) </span>
<span id="cb260-26"><a href="runmodels.html#cb260-26" tabindex="-1"></a>ipd1b_fixef_tab</span></code></pre></div>
<pre><code>## # A tibble: 98 × 10
##    type     Outcome              Moderator Covariate      term2                  E                    A     C     N     O    
##    &lt;chr&gt;    &lt;fct&gt;                &lt;fct&gt;     &lt;fct&gt;          &lt;fct&gt;                  &lt;chr&gt;                &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
##  1 Bayesian Crystallized Ability None      None           Personality            &lt;strong&gt;-0.05&lt;br&gt;[-… &lt;str… &lt;str… &lt;str… &lt;str…
##  2 Bayesian Crystallized Ability None      Age            Personality            &lt;strong&gt;-0.05&lt;br&gt;[-… &lt;str… &lt;str… &lt;str… &lt;str…
##  3 Bayesian Crystallized Ability None      Gender         Personality            &lt;strong&gt;-0.06&lt;br&gt;[-… &lt;str… &lt;str… &lt;str… &lt;str…
##  4 Bayesian Crystallized Ability None      Education      Personality            &lt;strong&gt;-0.06&lt;br&gt;[-… -0.0… &lt;str… &lt;str… &lt;str…
##  5 Bayesian Crystallized Ability None      Fully Adjusted Personality            &lt;strong&gt;-0.08&lt;br&gt;[-… &lt;str… 0.01… &lt;str… &lt;str…
##  6 Bayesian Crystallized Ability Age       None           Age                    &lt;strong&gt;-0.00&lt;br&gt;[-… &lt;str… -0.0… &lt;str… &lt;str…
##  7 Bayesian Crystallized Ability Age       Fully Adjusted Age                    &lt;strong&gt;-0.00&lt;br&gt;[-… &lt;str… -0.0… &lt;str… &lt;str…
##  8 Bayesian Crystallized Ability Gender    None           Gender (Male v Female) &lt;strong&gt;0.09&lt;br&gt;[0.… 0.03… -0.0… -0.0… -0.0…
##  9 Bayesian Crystallized Ability Gender    Fully Adjusted Gender (Male v Female) &lt;strong&gt;0.09&lt;br&gt;[0.… 0.03… 0.00… -0.0… -0.0…
## 10 Bayesian Crystallized Ability Education None           Education (Years)      -0.001&lt;br&gt;[-0.01, 0… &lt;str… &lt;str… &lt;str… -0.0…
## # ℹ 88 more rows</code></pre>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb262-1"><a href="runmodels.html#cb262-1" tabindex="-1"></a>ipd1b_res <span class="ot">&lt;-</span> nested_ipd1b_fixef <span class="sc">%&gt;%</span></span>
<span id="cb262-2"><a href="runmodels.html#cb262-2" tabindex="-1"></a>  <span class="fu">unnest</span>(fx) <span class="sc">%&gt;%</span></span>
<span id="cb262-3"><a href="runmodels.html#cb262-3" tabindex="-1"></a>  <span class="co"># keep key terms </span></span>
<span id="cb262-4"><a href="runmodels.html#cb262-4" tabindex="-1"></a>  <span class="fu">filter</span>((Moderator <span class="sc">==</span> <span class="st">&quot;none&quot;</span> <span class="sc">&amp;</span> term <span class="sc">==</span> <span class="st">&quot;p_value&quot;</span>) <span class="sc">|</span></span>
<span id="cb262-5"><a href="runmodels.html#cb262-5" tabindex="-1"></a>         (Moderator <span class="sc">!=</span> <span class="st">&quot;none&quot;</span> <span class="sc">&amp;</span> <span class="fu">grepl</span>(<span class="st">&quot;p_value:&quot;</span>, term))) <span class="sc">%&gt;%</span></span>
<span id="cb262-6"><a href="runmodels.html#cb262-6" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sig =</span> <span class="fu">ifelse</span>(<span class="fu">sign</span>(conf.low) <span class="sc">==</span> <span class="fu">sign</span>(conf.high), <span class="st">&quot;sig&quot;</span>, <span class="st">&quot;ns&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb262-7"><a href="runmodels.html#cb262-7" tabindex="-1"></a>  <span class="fu">mutate_at</span>(<span class="fu">vars</span>(estimate, conf.low, conf.high), </span>
<span id="cb262-8"><a href="runmodels.html#cb262-8" tabindex="-1"></a>            <span class="sc">~</span><span class="fu">ifelse</span>(<span class="fu">abs</span>(.) <span class="sc">&lt;</span> .<span class="dv">01</span>, <span class="fu">sprintf</span>(<span class="st">&quot;%.3f&quot;</span>, .), <span class="fu">sprintf</span>(<span class="st">&quot;%.2f&quot;</span>, .))) <span class="sc">%&gt;%</span></span>
<span id="cb262-9"><a href="runmodels.html#cb262-9" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">est =</span> <span class="fu">sprintf</span>(<span class="st">&quot;</span><span class="sc">\\</span><span class="st">textit{b} = %s, 95</span><span class="sc">\\</span><span class="st">%% CI [%s, %s]&quot;</span>, estimate, conf.low, conf.high)) </span></code></pre></div>
<p>Now that we’ve formatted the values, we can group by moderators and save results as separate tables. Even though additional information could be included given that we have one outcome, we’ll stick with this split because it will make it easier for those using this tutorial who multiple traits, outcomes, covariates, and moderators.</p>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb263-1"><a href="runmodels.html#cb263-1" tabindex="-1"></a><span class="do">## table function </span></span>
<span id="cb263-2"><a href="runmodels.html#cb263-2" tabindex="-1"></a>ipd1b_tab_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(d, type, moder){</span>
<span id="cb263-3"><a href="runmodels.html#cb263-3" tabindex="-1"></a>  <span class="co"># long outcome name</span></span>
<span id="cb263-4"><a href="runmodels.html#cb263-4" tabindex="-1"></a>  md <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(moder, <span class="fu">c</span>(<span class="st">&quot;None&quot;</span>, moders<span class="sc">$</span>long_name, stdyModers<span class="sc">$</span>long_name), <span class="fu">c</span>(<span class="st">&quot;none&quot;</span>, moders<span class="sc">$</span>short_name, stdyModers<span class="sc">$</span>short_name), <span class="at">warn_missing =</span> F)</span>
<span id="cb263-5"><a href="runmodels.html#cb263-5" tabindex="-1"></a>  d <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(Outcome, Covariate, term2)</span>
<span id="cb263-6"><a href="runmodels.html#cb263-6" tabindex="-1"></a>  <span class="co"># getting row numbers for later grouping</span></span>
<span id="cb263-7"><a href="runmodels.html#cb263-7" tabindex="-1"></a>  rs <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Outcome) <span class="sc">%&gt;%</span> <span class="fu">tally</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb263-8"><a href="runmodels.html#cb263-8" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">end =</span> <span class="fu">cumsum</span>(n), <span class="at">start =</span> <span class="fu">lag</span>(end) <span class="sc">+</span> <span class="dv">1</span>, <span class="at">start =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(start), <span class="dv">1</span>, start))</span>
<span id="cb263-9"><a href="runmodels.html#cb263-9" tabindex="-1"></a>  cs <span class="ot">&lt;-</span> <span class="cf">if</span>(<span class="fu">length</span>(<span class="fu">unique</span>(d<span class="sc">$</span>term2)) <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="fu">c</span>(<span class="dv">2</span>, <span class="fu">rep</span>(<span class="dv">1</span>,<span class="dv">5</span>)) <span class="cf">else</span> <span class="fu">rep</span>(<span class="dv">1</span>,<span class="dv">6</span>)</span>
<span id="cb263-10"><a href="runmodels.html#cb263-10" tabindex="-1"></a>  <span class="fu">names</span>(cs) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot; &quot;</span>, <span class="fu">paste0</span>(<span class="st">&quot;&lt;strong&gt;&quot;</span>, traits<span class="sc">$</span>long_name, <span class="st">&quot;&lt;/strong&gt;&quot;</span>))</span>
<span id="cb263-11"><a href="runmodels.html#cb263-11" tabindex="-1"></a>  <span class="co"># cln &lt;- if(length(unique(d$term2)) == 1) c(&quot; &quot;, rep(&quot;\\textit{b} [CI]&quot;, 5)) else c(&quot; &quot;, &quot;Term&quot;, rep(&quot;\\textit{b} [CI]&quot;, 5))</span></span>
<span id="cb263-12"><a href="runmodels.html#cb263-12" tabindex="-1"></a>  cln <span class="ot">&lt;-</span> <span class="cf">if</span>(<span class="fu">length</span>(<span class="fu">unique</span>(d<span class="sc">$</span>term2)) <span class="sc">==</span> <span class="dv">1</span>) <span class="fu">c</span>(<span class="st">&quot; &quot;</span>, <span class="fu">rep</span>(<span class="st">&quot;&lt;em&gt;b&lt;/em&gt; [CI]&quot;</span>, <span class="dv">5</span>)) <span class="cf">else</span> <span class="fu">c</span>(<span class="st">&quot; &quot;</span>, <span class="st">&quot;Term&quot;</span>, <span class="fu">rep</span>(<span class="st">&quot;&lt;em&gt;b&lt;/em&gt; [CI]&quot;</span>, <span class="dv">5</span>))</span>
<span id="cb263-13"><a href="runmodels.html#cb263-13" tabindex="-1"></a>  al <span class="ot">&lt;-</span> <span class="cf">if</span>(<span class="fu">length</span>(<span class="fu">unique</span>(d<span class="sc">$</span>term2)) <span class="sc">==</span> <span class="dv">1</span>) <span class="fu">c</span>(<span class="st">&quot;r&quot;</span>, <span class="fu">rep</span>(<span class="st">&quot;c&quot;</span>, <span class="dv">5</span>)) <span class="cf">else</span> <span class="fu">c</span>(<span class="st">&quot;r&quot;</span>, <span class="st">&quot;r&quot;</span>, <span class="fu">rep</span>(<span class="st">&quot;c&quot;</span>, <span class="dv">5</span>))</span>
<span id="cb263-14"><a href="runmodels.html#cb263-14" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">length</span>(<span class="fu">unique</span>(d<span class="sc">$</span>term2)) <span class="sc">==</span> <span class="dv">1</span>) {</span>
<span id="cb263-15"><a href="runmodels.html#cb263-15" tabindex="-1"></a>    d <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>term2); dubs <span class="ot">&lt;-</span> F</span>
<span id="cb263-16"><a href="runmodels.html#cb263-16" tabindex="-1"></a>  }</span>
<span id="cb263-17"><a href="runmodels.html#cb263-17" tabindex="-1"></a>  cap <span class="ot">&lt;-</span> <span class="cf">if</span>(md <span class="sc">==</span> <span class="st">&quot;none&quot;</span>) <span class="st">&quot;1B Pooled Analysis of Individual Participant Data: Cluster Robust Fixed Effect Personality-Crystallized Domain Associations&quot;</span> <span class="cf">else</span> <span class="fu">sprintf</span>(<span class="st">&quot;1B Pooled Analysis of Individual Participant Data: Cluster Robust Fixed Effect %s Moderation of Personality-Crystallized Domain Associations&quot;</span>, md)</span>
<span id="cb263-18"><a href="runmodels.html#cb263-18" tabindex="-1"></a>  tab <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span></span>
<span id="cb263-19"><a href="runmodels.html#cb263-19" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>Outcome) <span class="sc">%&gt;%</span></span>
<span id="cb263-20"><a href="runmodels.html#cb263-20" tabindex="-1"></a>    <span class="fu">kable</span>(., <span class="st">&quot;html&quot;</span></span>
<span id="cb263-21"><a href="runmodels.html#cb263-21" tabindex="-1"></a>    <span class="co"># kable(., &quot;latex&quot;</span></span>
<span id="cb263-22"><a href="runmodels.html#cb263-22" tabindex="-1"></a>          , <span class="at">booktabs =</span> T</span>
<span id="cb263-23"><a href="runmodels.html#cb263-23" tabindex="-1"></a>          , <span class="at">escape =</span> F</span>
<span id="cb263-24"><a href="runmodels.html#cb263-24" tabindex="-1"></a>          , <span class="at">col.names =</span> cln</span>
<span id="cb263-25"><a href="runmodels.html#cb263-25" tabindex="-1"></a>          , <span class="at">align =</span> al</span>
<span id="cb263-26"><a href="runmodels.html#cb263-26" tabindex="-1"></a>          , <span class="at">caption =</span> cap</span>
<span id="cb263-27"><a href="runmodels.html#cb263-27" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb263-28"><a href="runmodels.html#cb263-28" tabindex="-1"></a>    <span class="fu">kable_classic</span>(<span class="at">full_width =</span> F, <span class="at">html_font =</span> <span class="st">&quot;Times New Roman&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb263-29"><a href="runmodels.html#cb263-29" tabindex="-1"></a>    <span class="co"># kable_styling(full_width = F, font_size = 7) %&gt;%</span></span>
<span id="cb263-30"><a href="runmodels.html#cb263-30" tabindex="-1"></a>    <span class="fu">collapse_rows</span>(<span class="dv">1</span>, <span class="st">&quot;top&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb263-31"><a href="runmodels.html#cb263-31" tabindex="-1"></a>    <span class="fu">add_header_above</span>(cs, <span class="at">escape =</span> F) </span>
<span id="cb263-32"><a href="runmodels.html#cb263-32" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">nrow</span>(rs)){</span>
<span id="cb263-33"><a href="runmodels.html#cb263-33" tabindex="-1"></a>    tab <span class="ot">&lt;-</span> tab <span class="sc">%&gt;%</span> </span>
<span id="cb263-34"><a href="runmodels.html#cb263-34" tabindex="-1"></a>      kableExtra<span class="sc">::</span><span class="fu">group_rows</span>(rs<span class="sc">$</span>Outcome[i], rs<span class="sc">$</span>start[i], rs<span class="sc">$</span>end[i]) </span>
<span id="cb263-35"><a href="runmodels.html#cb263-35" tabindex="-1"></a>  }</span>
<span id="cb263-36"><a href="runmodels.html#cb263-36" tabindex="-1"></a>  <span class="fu">save_kable</span>(tab, <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/1b_ipd_fixef/%s/tables/overall/%s.html&quot;</span></span>
<span id="cb263-37"><a href="runmodels.html#cb263-37" tabindex="-1"></a>                                 , local_path, type, md))</span>
<span id="cb263-38"><a href="runmodels.html#cb263-38" tabindex="-1"></a>  <span class="fu">return</span>(tab)</span>
<span id="cb263-39"><a href="runmodels.html#cb263-39" tabindex="-1"></a>}</span>
<span id="cb263-40"><a href="runmodels.html#cb263-40" tabindex="-1"></a></span>
<span id="cb263-41"><a href="runmodels.html#cb263-41" tabindex="-1"></a>ipd1b_fx_tab <span class="ot">&lt;-</span> ipd1b_fixef_tab <span class="sc">%&gt;%</span></span>
<span id="cb263-42"><a href="runmodels.html#cb263-42" tabindex="-1"></a>  <span class="fu">group_by</span>(type, Moderator) <span class="sc">%&gt;%</span></span>
<span id="cb263-43"><a href="runmodels.html#cb263-43" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span></span>
<span id="cb263-44"><a href="runmodels.html#cb263-44" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb263-45"><a href="runmodels.html#cb263-45" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">tab =</span> <span class="fu">pmap</span>(<span class="fu">list</span>(data, type, Moderator), ipd1b_tab_fun))</span>
<span id="cb263-46"><a href="runmodels.html#cb263-46" tabindex="-1"></a>ipd1b_fx_tab</span></code></pre></div>
<pre><code>## # A tibble: 14 × 4
##    type        Moderator           data              tab           
##    &lt;chr&gt;       &lt;fct&gt;               &lt;list&gt;            &lt;list&gt;        
##  1 Bayesian    None                &lt;tibble [5 × 8]&gt;  &lt;kablExtr [1]&gt;
##  2 Bayesian    Age                 &lt;tibble [2 × 8]&gt;  &lt;kablExtr [1]&gt;
##  3 Bayesian    Gender              &lt;tibble [2 × 8]&gt;  &lt;kablExtr [1]&gt;
##  4 Bayesian    Education           &lt;tibble [2 × 8]&gt;  &lt;kablExtr [1]&gt;
##  5 Frequentist None                &lt;tibble [6 × 8]&gt;  &lt;kablExtr [1]&gt;
##  6 Frequentist Age                 &lt;tibble [2 × 8]&gt;  &lt;kablExtr [1]&gt;
##  7 Frequentist Gender              &lt;tibble [2 × 8]&gt;  &lt;kablExtr [1]&gt;
##  8 Frequentist Education           &lt;tibble [2 × 8]&gt;  &lt;kablExtr [1]&gt;
##  9 Frequentist Continent           &lt;tibble [10 × 8]&gt; &lt;kablExtr [1]&gt;
## 10 Frequentist Country             &lt;tibble [20 × 8]&gt; &lt;kablExtr [1]&gt;
## 11 Frequentist Personality Scale   &lt;tibble [30 × 8]&gt; &lt;kablExtr [1]&gt;
## 12 Frequentist Baseline Age        &lt;tibble [5 × 8]&gt;  &lt;kablExtr [1]&gt;
## 13 Frequentist Baseline Year       &lt;tibble [5 × 8]&gt;  &lt;kablExtr [1]&gt;
## 14 Frequentist Prediction Interval &lt;tibble [5 × 8]&gt;  &lt;kablExtr [1]&gt;</code></pre>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb265-1"><a href="runmodels.html#cb265-1" tabindex="-1"></a><span class="co"># save(ipd1b_fixef_tab, ipd1b_res, file = sprintf(&quot;%s/manuscript/results/ipd1b_fx_tab.RData&quot;, local_path))</span></span>
<span id="cb265-2"><a href="runmodels.html#cb265-2" tabindex="-1"></a></span>
<span id="cb265-3"><a href="runmodels.html#cb265-3" tabindex="-1"></a><span class="do">## Frequentist</span></span>
<span id="cb265-4"><a href="runmodels.html#cb265-4" tabindex="-1"></a>(ipd1b_fx_tab <span class="sc">%&gt;%</span> <span class="fu">filter</span>(type <span class="sc">==</span> <span class="st">&quot;Frequentist&quot;</span> <span class="sc">&amp;</span> Moderator <span class="sc">==</span> <span class="st">&quot;None&quot;</span>))<span class="sc">$</span>tab[[<span class="dv">1</span>]]</span></code></pre></div>
<table class=" lightable-classic" style="color: black; font-family: Times New Roman; width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-28">Table 3.1: </span>1B Pooled Analysis of Individual Participant Data: Cluster Robust Fixed Effect Personality-Crystallized Domain Associations
</caption>
<thead>
<tr>
<th style="empty-cells: hide;" colspan="1">
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>Extraversion</strong>
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>Agreeableness</strong>
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>Conscientiousness</strong>
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>Neuroticism</strong>
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>Openness to Experience</strong>
</div>
</th>
</tr>
<tr>
<th style="text-align:right;">
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
</tr>
</thead>
<tbody>
<tr grouplength="6">
<td colspan="6" style="border-bottom: 0;">
<strong>Crystallized Ability</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
None
</td>
<td style="text-align:center;">
-0.08<br>[-0.27, 0.10]
</td>
<td style="text-align:center;">
-0.14<br>[-0.36, 0.08]
</td>
<td style="text-align:center;">
0.01<br>[-0.17, 0.18]
</td>
<td style="text-align:center;">
-0.00<br>[-0.15, 0.14]
</td>
<td style="text-align:center;">
<strong>0.20<br>[0.06, 0.34]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Age
</td>
<td style="text-align:center;">
-0.09<br>[-0.28, 0.11]
</td>
<td style="text-align:center;">
-0.14<br>[-0.38, 0.10]
</td>
<td style="text-align:center;">
0.01<br>[-0.17, 0.19]
</td>
<td style="text-align:center;">
0.00<br>[-0.15, 0.15]
</td>
<td style="text-align:center;">
<strong>0.19<br>[0.04, 0.34]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Gender
</td>
<td style="text-align:center;">
-0.08<br>[-0.26, 0.11]
</td>
<td style="text-align:center;">
-0.14<br>[-0.37, 0.10]
</td>
<td style="text-align:center;">
0.02<br>[-0.16, 0.19]
</td>
<td style="text-align:center;">
0.01<br>[-0.14, 0.16]
</td>
<td style="text-align:center;">
<strong>0.19<br>[0.06, 0.32]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Self-Rated
Physical Health
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
0.01<br>[-0.35, 0.36]
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:right;vertical-align: top !important;padding-left: 2em;" rowspan="2" indentlevel="1">
Education
</td>
<td style="text-align:center;">
-0.07<br>[-0.22, 0.08]
</td>
<td style="text-align:center;">
-0.06<br>[-0.23, 0.10]
</td>
<td style="text-align:center;">
-0.01<br>[-0.15, 0.13]
</td>
<td style="text-align:center;">
-0.03<br>[-0.13, 0.08]
</td>
<td style="text-align:center;">
0.10<br>[-0.03, 0.24]
</td>
</tr>
<tr>
<td style="text-align:center;padding-left: 2em;" indentlevel="1">
-0.07<br>[-0.22, 0.08]
</td>
<td style="text-align:center;">
-0.07<br>[-0.23, 0.08]
</td>
<td style="text-align:center;">
-0.01<br>[-0.14, 0.12]
</td>
<td style="text-align:center;">
-0.03<br>[-0.13, 0.08]
</td>
<td style="text-align:center;">
0.11<br>[-0.03, 0.25]
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb266"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb266-1"><a href="runmodels.html#cb266-1" tabindex="-1"></a><span class="do">## bayesian</span></span>
<span id="cb266-2"><a href="runmodels.html#cb266-2" tabindex="-1"></a>(ipd1b_fx_tab <span class="sc">%&gt;%</span> <span class="fu">filter</span>(type <span class="sc">==</span> <span class="st">&quot;Bayesian&quot;</span> <span class="sc">&amp;</span> Moderator <span class="sc">==</span> <span class="st">&quot;None&quot;</span>))<span class="sc">$</span>tab[[<span class="dv">1</span>]]</span></code></pre></div>
<table class=" lightable-classic" style="color: black; font-family: Times New Roman; width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-28">Table 3.1: </span>1B Pooled Analysis of Individual Participant Data: Cluster Robust Fixed Effect Personality-Crystallized Domain Associations
</caption>
<thead>
<tr>
<th style="empty-cells: hide;" colspan="1">
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>Extraversion</strong>
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>Agreeableness</strong>
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>Conscientiousness</strong>
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>Neuroticism</strong>
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
<strong>Openness to Experience</strong>
</div>
</th>
</tr>
<tr>
<th style="text-align:right;">
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
</tr>
</thead>
<tbody>
<tr grouplength="5">
<td colspan="6" style="border-bottom: 0;">
<strong>Crystallized Ability</strong>
</td>
</tr>
<tr>
<td style="text-align:right;vertical-align: top !important;padding-left: 2em;" rowspan="2" indentlevel="1">
None
</td>
<td style="text-align:center;">
<strong>-0.05<br>[-0.07, -0.04]</strong>
</td>
<td style="text-align:center;">
<strong>-0.03<br>[-0.05, -0.01]</strong>
</td>
<td style="text-align:center;">
<strong>0.04<br>[0.02, 0.06]</strong>
</td>
<td style="text-align:center;">
<strong>0.11<br>[0.10, 0.13]</strong>
</td>
<td style="text-align:center;">
<strong>0.16<br>[0.14, 0.18]</strong>
</td>
</tr>
<tr>
<td style="text-align:center;padding-left: 2em;" indentlevel="1">
<strong>-0.05<br>[-0.07, -0.04]</strong>
</td>
<td style="text-align:center;">
<strong>-0.03<br>[-0.05, -0.01]</strong>
</td>
<td style="text-align:center;">
<strong>0.04<br>[0.02, 0.06]</strong>
</td>
<td style="text-align:center;">
<strong>0.11<br>[0.10, 0.13]</strong>
</td>
<td style="text-align:center;">
<strong>0.16<br>[0.14, 0.18]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Gender
</td>
<td style="text-align:center;">
<strong>-0.06<br>[-0.07, -0.04]</strong>
</td>
<td style="text-align:center;">
<strong>-0.03<br>[-0.05, -0.01]</strong>
</td>
<td style="text-align:center;">
<strong>0.04<br>[0.02, 0.06]</strong>
</td>
<td style="text-align:center;">
<strong>0.12<br>[0.10, 0.13]</strong>
</td>
<td style="text-align:center;">
<strong>0.16<br>[0.14, 0.18]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Education
</td>
<td style="text-align:center;">
<strong>-0.06<br>[-0.08, -0.05]</strong>
</td>
<td style="text-align:center;">
-0.02<br>[-0.04, 0.000]
</td>
<td style="text-align:center;">
<strong>0.02<br>[0.00, 0.03]</strong>
</td>
<td style="text-align:center;">
<strong>0.07<br>[0.06, 0.08]</strong>
</td>
<td style="text-align:center;">
<strong>0.08<br>[0.06, 0.10]</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Fully Adjusted
</td>
<td style="text-align:center;">
<strong>-0.08<br>[-0.10, -0.07]</strong>
</td>
<td style="text-align:center;">
<strong>-0.05<br>[-0.07, -0.03]</strong>
</td>
<td style="text-align:center;">
0.01<br>[-0.01, 0.03]
</td>
<td style="text-align:center;">
<strong>0.15<br>[0.13, 0.16]</strong>
</td>
<td style="text-align:center;">
<strong>0.14<br>[0.13, 0.16]</strong>
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb267-1"><a href="runmodels.html#cb267-1" tabindex="-1"></a>ipd1b_tab_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(d, type, cov){</span>
<span id="cb267-2"><a href="runmodels.html#cb267-2" tabindex="-1"></a>  <span class="co"># long outcome name</span></span>
<span id="cb267-3"><a href="runmodels.html#cb267-3" tabindex="-1"></a>  covar <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(cov, covars<span class="sc">$</span>long_name, covars<span class="sc">$</span>short_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb267-4"><a href="runmodels.html#cb267-4" tabindex="-1"></a>  <span class="co"># getting row numbers for later grouping</span></span>
<span id="cb267-5"><a href="runmodels.html#cb267-5" tabindex="-1"></a>  rs <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Moderator) <span class="sc">%&gt;%</span> <span class="fu">tally</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb267-6"><a href="runmodels.html#cb267-6" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">end =</span> <span class="fu">cumsum</span>(n), <span class="at">start =</span> <span class="fu">lag</span>(end) <span class="sc">+</span> <span class="dv">1</span>, <span class="at">start =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(start), <span class="dv">1</span>, start))</span>
<span id="cb267-7"><a href="runmodels.html#cb267-7" tabindex="-1"></a>  <span class="co"># number and name of columns for span columns </span></span>
<span id="cb267-8"><a href="runmodels.html#cb267-8" tabindex="-1"></a>  cs <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">1</span>,<span class="dv">6</span>)</span>
<span id="cb267-9"><a href="runmodels.html#cb267-9" tabindex="-1"></a>  <span class="fu">names</span>(cs) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot; &quot;</span>, traits<span class="sc">$</span>long_name)</span>
<span id="cb267-10"><a href="runmodels.html#cb267-10" tabindex="-1"></a>  <span class="co"># cln &lt;- if(length(unique(d$term2)) == 1) c(&quot;Covariate&quot;, rep(&quot;\\textit{b} [CI]&quot;, 5)) else c(&quot; &quot;, &quot;Term&quot;, rep(&quot;\\textit{b} [CI]&quot;, 5))</span></span>
<span id="cb267-11"><a href="runmodels.html#cb267-11" tabindex="-1"></a>  cln <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Term&quot;</span>, <span class="fu">rep</span>(<span class="st">&quot;&lt;em&gt;b&lt;/em&gt; [CI]&quot;</span>, <span class="dv">5</span>))</span>
<span id="cb267-12"><a href="runmodels.html#cb267-12" tabindex="-1"></a>  al <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;r&quot;</span>, <span class="fu">rep</span>(<span class="st">&quot;c&quot;</span>, <span class="dv">5</span>))</span>
<span id="cb267-13"><a href="runmodels.html#cb267-13" tabindex="-1"></a>  <span class="co"># caption </span></span>
<span id="cb267-14"><a href="runmodels.html#cb267-14" tabindex="-1"></a>  cv <span class="ot">&lt;-</span> <span class="cf">if</span> (cov <span class="sc">==</span> <span class="st">&quot;None&quot;</span>) <span class="st">&quot;Unadjusted&quot;</span> <span class="cf">else</span> cov</span>
<span id="cb267-15"><a href="runmodels.html#cb267-15" tabindex="-1"></a>  cap <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">&quot;1B Pooled Analysis of Individual Participant Data with Cluster Corrected Standard Errors: Fixed Effect Estimates of %s Personality-Crystallized Domain Associations&quot;</span>, cv)</span>
<span id="cb267-16"><a href="runmodels.html#cb267-16" tabindex="-1"></a>  <span class="co"># kable the table</span></span>
<span id="cb267-17"><a href="runmodels.html#cb267-17" tabindex="-1"></a>  tab <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span></span>
<span id="cb267-18"><a href="runmodels.html#cb267-18" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>Moderator) <span class="sc">%&gt;%</span></span>
<span id="cb267-19"><a href="runmodels.html#cb267-19" tabindex="-1"></a>    <span class="fu">kable</span>(., <span class="st">&quot;html&quot;</span></span>
<span id="cb267-20"><a href="runmodels.html#cb267-20" tabindex="-1"></a>    <span class="co"># kable(., &quot;latex&quot;</span></span>
<span id="cb267-21"><a href="runmodels.html#cb267-21" tabindex="-1"></a>          , <span class="at">booktabs =</span> T</span>
<span id="cb267-22"><a href="runmodels.html#cb267-22" tabindex="-1"></a>          , <span class="at">escape =</span> F</span>
<span id="cb267-23"><a href="runmodels.html#cb267-23" tabindex="-1"></a>          , <span class="at">col.names =</span> cln</span>
<span id="cb267-24"><a href="runmodels.html#cb267-24" tabindex="-1"></a>          , <span class="at">align =</span> al</span>
<span id="cb267-25"><a href="runmodels.html#cb267-25" tabindex="-1"></a>          , <span class="at">caption =</span> cap</span>
<span id="cb267-26"><a href="runmodels.html#cb267-26" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb267-27"><a href="runmodels.html#cb267-27" tabindex="-1"></a>    <span class="fu">kable_classic</span>(<span class="at">full_width =</span> F, <span class="at">html_font =</span> <span class="st">&quot;Times New Roman&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb267-28"><a href="runmodels.html#cb267-28" tabindex="-1"></a>    <span class="co"># kable_styling(full_width = F, font_size = 7) %&gt;%</span></span>
<span id="cb267-29"><a href="runmodels.html#cb267-29" tabindex="-1"></a>    <span class="fu">add_header_above</span>(cs)</span>
<span id="cb267-30"><a href="runmodels.html#cb267-30" tabindex="-1"></a>  <span class="co"># for loop to add grouped sections </span></span>
<span id="cb267-31"><a href="runmodels.html#cb267-31" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(rs)){</span>
<span id="cb267-32"><a href="runmodels.html#cb267-32" tabindex="-1"></a>    tab <span class="ot">&lt;-</span> tab <span class="sc">%&gt;%</span> </span>
<span id="cb267-33"><a href="runmodels.html#cb267-33" tabindex="-1"></a>      kableExtra<span class="sc">::</span><span class="fu">group_rows</span>(rs<span class="sc">$</span>Moderator[i], rs<span class="sc">$</span>start[i], rs<span class="sc">$</span>end[i]) </span>
<span id="cb267-34"><a href="runmodels.html#cb267-34" tabindex="-1"></a>  }</span>
<span id="cb267-35"><a href="runmodels.html#cb267-35" tabindex="-1"></a>  <span class="co"># save the resulting html table</span></span>
<span id="cb267-36"><a href="runmodels.html#cb267-36" tabindex="-1"></a>  <span class="fu">save_kable</span>(tab, <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/1b_ipd_fixef/%s/tables/key terms/%s.html&quot;</span></span>
<span id="cb267-37"><a href="runmodels.html#cb267-37" tabindex="-1"></a>                                 , local_path, type, covar))</span>
<span id="cb267-38"><a href="runmodels.html#cb267-38" tabindex="-1"></a>  <span class="fu">return</span>(tab) <span class="co"># return the html table</span></span>
<span id="cb267-39"><a href="runmodels.html#cb267-39" tabindex="-1"></a>}</span>
<span id="cb267-40"><a href="runmodels.html#cb267-40" tabindex="-1"></a></span>
<span id="cb267-41"><a href="runmodels.html#cb267-41" tabindex="-1"></a>ipd1b_fx_tab2 <span class="ot">&lt;-</span> ipd1b_fixef_tab <span class="sc">%&gt;%</span></span>
<span id="cb267-42"><a href="runmodels.html#cb267-42" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>Moderator <span class="sc">%in%</span> stdyModers<span class="sc">$</span>long_name) <span class="sc">%&gt;%</span></span>
<span id="cb267-43"><a href="runmodels.html#cb267-43" tabindex="-1"></a>  <span class="fu">arrange</span>(Moderator, term2) <span class="sc">%&gt;%</span></span>
<span id="cb267-44"><a href="runmodels.html#cb267-44" tabindex="-1"></a>  <span class="fu">filter</span>(Covariate <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;None&quot;</span>, <span class="st">&quot;Fully Adjusted&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb267-45"><a href="runmodels.html#cb267-45" tabindex="-1"></a>  <span class="fu">group_by</span>(Outcome, type, Covariate) <span class="sc">%&gt;%</span> </span>
<span id="cb267-46"><a href="runmodels.html#cb267-46" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span></span>
<span id="cb267-47"><a href="runmodels.html#cb267-47" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb267-48"><a href="runmodels.html#cb267-48" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">tab =</span> <span class="fu">pmap</span>(<span class="fu">list</span>(data, type, Covariate), ipd1b_tab_fun))</span>
<span id="cb267-49"><a href="runmodels.html#cb267-49" tabindex="-1"></a></span>
<span id="cb267-50"><a href="runmodels.html#cb267-50" tabindex="-1"></a></span>
<span id="cb267-51"><a href="runmodels.html#cb267-51" tabindex="-1"></a><span class="do">## Frequentist, no moderator</span></span>
<span id="cb267-52"><a href="runmodels.html#cb267-52" tabindex="-1"></a>(ipd1b_fx_tab2 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(type <span class="sc">==</span> <span class="st">&quot;Frequentist&quot;</span> <span class="sc">&amp;</span> Covariate <span class="sc">==</span> <span class="st">&quot;Fully Adjusted&quot;</span>))<span class="sc">$</span>tab[[<span class="dv">1</span>]]</span></code></pre></div>
<table class=" lightable-classic" style="color: black; font-family: Times New Roman; width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-29">Table 3.2: </span>1B Pooled Analysis of Individual Participant Data with Cluster Corrected Standard Errors: Fixed Effect Estimates of Fully Adjusted Personality-Crystallized Domain Associations
</caption>
<thead>
<tr>
<th style="empty-cells: hide;" colspan="1">
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
Extraversion
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
Agreeableness
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
Conscientiousness
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
Neuroticism
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
Openness to Experience
</div>
</th>
</tr>
<tr>
<th style="text-align:right;">
Term
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
</tr>
</thead>
<tbody>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>None</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Personality
</td>
<td style="text-align:center;">
-0.07<br>[-0.22, 0.08]
</td>
<td style="text-align:center;">
-0.07<br>[-0.23, 0.08]
</td>
<td style="text-align:center;">
-0.01<br>[-0.14, 0.12]
</td>
<td style="text-align:center;">
-0.03<br>[-0.13, 0.08]
</td>
<td style="text-align:center;">
0.11<br>[-0.03, 0.25]
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Age</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Age
</td>
<td style="text-align:center;">
0.000<br>[-0.00, 0.00]
</td>
<td style="text-align:center;">
-0.000<br>[-0.00, 0.00]
</td>
<td style="text-align:center;">
-0.001<br>[-0.00, 0.00]
</td>
<td style="text-align:center;">
0.00<br>[-0.00, 0.00]
</td>
<td style="text-align:center;">
-0.00<br>[-0.01, 0.001]
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Gender</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Gender (Male v Female)
</td>
<td style="text-align:center;">
<strong>0.05<br>[0.001, 0.10]</strong>
</td>
<td style="text-align:center;">
0.04<br>[-0.00, 0.08]
</td>
<td style="text-align:center;">
0.03<br>[-0.07, 0.13]
</td>
<td style="text-align:center;">
-0.01<br>[-0.08, 0.05]
</td>
<td style="text-align:center;">
-0.02<br>[-0.08, 0.04]
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Education</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Education (Years)
</td>
<td style="text-align:center;">
0.00<br>[-0.01, 0.02]
</td>
<td style="text-align:center;">
-0.00<br>[-0.03, 0.02]
</td>
<td style="text-align:center;">
-0.01<br>[-0.03, 0.02]
</td>
<td style="text-align:center;">
-0.00<br>[-0.02, 0.01]
</td>
<td style="text-align:center;">
0.00<br>[-0.01, 0.01]
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb268"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb268-1"><a href="runmodels.html#cb268-1" tabindex="-1"></a><span class="do">## bayesian</span></span>
<span id="cb268-2"><a href="runmodels.html#cb268-2" tabindex="-1"></a>(ipd1b_fx_tab2 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(type <span class="sc">==</span> <span class="st">&quot;Bayesian&quot;</span> <span class="sc">&amp;</span> Covariate <span class="sc">==</span> <span class="st">&quot;Fully Adjusted&quot;</span>))<span class="sc">$</span>tab[[<span class="dv">1</span>]]</span></code></pre></div>
<table class=" lightable-classic" style="color: black; font-family: Times New Roman; width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-29">Table 3.2: </span>1B Pooled Analysis of Individual Participant Data with Cluster Corrected Standard Errors: Fixed Effect Estimates of Fully Adjusted Personality-Crystallized Domain Associations
</caption>
<thead>
<tr>
<th style="empty-cells: hide;" colspan="1">
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
Extraversion
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
Agreeableness
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
Conscientiousness
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
Neuroticism
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
Openness to Experience
</div>
</th>
</tr>
<tr>
<th style="text-align:right;">
Term
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
</tr>
</thead>
<tbody>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>None</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Personality
</td>
<td style="text-align:center;">
<strong>-0.08<br>[-0.10, -0.07]</strong>
</td>
<td style="text-align:center;">
<strong>-0.05<br>[-0.07, -0.03]</strong>
</td>
<td style="text-align:center;">
0.01<br>[-0.01, 0.03]
</td>
<td style="text-align:center;">
<strong>0.15<br>[0.13, 0.16]</strong>
</td>
<td style="text-align:center;">
<strong>0.14<br>[0.13, 0.16]</strong>
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Age</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Age
</td>
<td style="text-align:center;">
<strong>-0.00<br>[-0.00, -0.000]</strong>
</td>
<td style="text-align:center;">
<strong>-0.00<br>[-0.00, -0.000]</strong>
</td>
<td style="text-align:center;">
-0.000<br>[-0.00, 0.00]
</td>
<td style="text-align:center;">
<strong>0.00<br>[0.00, 0.00]</strong>
</td>
<td style="text-align:center;">
<strong>-0.00<br>[-0.00, -0.000]</strong>
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Gender</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Gender (Male v Female)
</td>
<td style="text-align:center;">
<strong>0.09<br>[0.05, 0.12]</strong>
</td>
<td style="text-align:center;">
0.03<br>[-0.01, 0.08]
</td>
<td style="text-align:center;">
0.000<br>[-0.04, 0.04]
</td>
<td style="text-align:center;">
-0.02<br>[-0.04, 0.01]
</td>
<td style="text-align:center;">
-0.03<br>[-0.07, 0.00]
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Education</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Education (Years)
</td>
<td style="text-align:center;">
<strong>-0.01<br>[-0.01, -0.000]</strong>
</td>
<td style="text-align:center;">
<strong>-0.02<br>[-0.03, -0.01]</strong>
</td>
<td style="text-align:center;">
<strong>-0.02<br>[-0.02, -0.01]</strong>
</td>
<td style="text-align:center;">
<strong>0.01<br>[0.01, 0.01]</strong>
</td>
<td style="text-align:center;">
-0.00<br>[-0.01, 0.00]
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb269"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb269-1"><a href="runmodels.html#cb269-1" tabindex="-1"></a><span class="co"># save(ipd1a_fx_tab, ipd1a_fx_tab2, ipd1a_res, file = sprintf(&quot;%s/manuscript/results/ipd1b_fx_tab.RData&quot;, local_path))</span></span></code></pre></div>
</div>
<div id="study-specific-effects-1" class="section level6 hasAnchor" number="3.2.2.5.1.2">
<h6><span class="header-section-number">3.2.2.5.1.2</span> Study-Specific Effects<a href="runmodels.html#study-specific-effects-1" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<p>This header is here to simply emphasize that this method does not provide study-specific estimates, unlike Methods 2ab, 3, and 4.</p>
</div>
<div id="heterogeneity-estimates-1" class="section level6 hasAnchor" number="3.2.2.5.1.3">
<h6><span class="header-section-number">3.2.2.5.1.3</span> Heterogeneity Estimates<a href="runmodels.html#heterogeneity-estimates-1" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<p>This header is here to simply emphasize that this method does not provide heterogeneity estimates because it does not provide study-specific estimates, unlike Methods 2ab, 3, and 4.</p>
</div>
<div id="all-model-terms-1" class="section level6 hasAnchor" number="3.2.2.5.1.4">
<h6><span class="header-section-number">3.2.2.5.1.4</span> All Model Terms<a href="runmodels.html#all-model-terms-1" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<div class="sourceCode" id="cb270"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb270-1"><a href="runmodels.html#cb270-1" tabindex="-1"></a>ipd1b_mod_tab <span class="ot">&lt;-</span> nested_ipd1b_fixef <span class="sc">%&gt;%</span></span>
<span id="cb270-2"><a href="runmodels.html#cb270-2" tabindex="-1"></a>  <span class="fu">unnest</span>(fx) <span class="sc">%&gt;%</span></span>
<span id="cb270-3"><a href="runmodels.html#cb270-3" tabindex="-1"></a>  <span class="co"># keep key terms </span></span>
<span id="cb270-4"><a href="runmodels.html#cb270-4" tabindex="-1"></a>  <span class="co"># mark significance and prettify trait, outcome, and covariate names</span></span>
<span id="cb270-5"><a href="runmodels.html#cb270-5" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sig =</span> <span class="fu">ifelse</span>(<span class="fu">sign</span>(conf.low) <span class="sc">==</span> <span class="fu">sign</span>(conf.high), <span class="st">&quot;sig&quot;</span>, <span class="st">&quot;ns&quot;</span>),</span>
<span id="cb270-6"><a href="runmodels.html#cb270-6" tabindex="-1"></a>         <span class="at">Trait =</span> <span class="fu">factor</span>(Trait, traits<span class="sc">$</span>short_name),</span>
<span id="cb270-7"><a href="runmodels.html#cb270-7" tabindex="-1"></a>         <span class="at">Outcome =</span> <span class="fu">factor</span>(Outcome, outcomes<span class="sc">$</span>short_name, outcomes<span class="sc">$</span>long_name),</span>
<span id="cb270-8"><a href="runmodels.html#cb270-8" tabindex="-1"></a>         <span class="at">Moderator =</span> <span class="fu">factor</span>(Moderator, <span class="fu">c</span>(moders<span class="sc">$</span>short_name, stdyModers<span class="sc">$</span>short_name), <span class="fu">c</span>(moders<span class="sc">$</span>long_name, stdyModers<span class="sc">$</span>long_name)),</span>
<span id="cb270-9"><a href="runmodels.html#cb270-9" tabindex="-1"></a>         <span class="at">Covariate =</span> <span class="fu">factor</span>(Covariate, covars<span class="sc">$</span>short_name, <span class="fu">str_wrap</span>(covars<span class="sc">$</span>long_name, <span class="dv">15</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb270-10"><a href="runmodels.html#cb270-10" tabindex="-1"></a>  <span class="co"># format values as text, combine estimates and CI&#39;s, bold significance</span></span>
<span id="cb270-11"><a href="runmodels.html#cb270-11" tabindex="-1"></a>  <span class="fu">mutate_at</span>(<span class="fu">vars</span>(estimate, conf.low, conf.high), </span>
<span id="cb270-12"><a href="runmodels.html#cb270-12" tabindex="-1"></a>            <span class="sc">~</span><span class="fu">ifelse</span>(<span class="fu">abs</span>(.) <span class="sc">&lt;</span> .<span class="dv">01</span>, <span class="fu">sprintf</span>(<span class="st">&quot;%.3f&quot;</span>, .), <span class="fu">sprintf</span>(<span class="st">&quot;%.2f&quot;</span>, .))) <span class="sc">%&gt;%</span></span>
<span id="cb270-13"><a href="runmodels.html#cb270-13" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">est =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s&lt;br&gt;[%s, %s]&quot;</span>, estimate, conf.low, conf.high),</span>
<span id="cb270-14"><a href="runmodels.html#cb270-14" tabindex="-1"></a>         <span class="at">est =</span> <span class="fu">ifelse</span>(sig <span class="sc">==</span> <span class="st">&quot;sig&quot;</span>, <span class="fu">sprintf</span>(<span class="st">&quot;&lt;strong&gt;%s&lt;/strong&gt;&quot;</span>, est), est)) <span class="sc">%&gt;%</span></span>
<span id="cb270-15"><a href="runmodels.html#cb270-15" tabindex="-1"></a>  <span class="co"># mutate(est = sprintf(&quot;%s [%s, %s]&quot;, estimate, conf.low, conf.high),</span></span>
<span id="cb270-16"><a href="runmodels.html#cb270-16" tabindex="-1"></a>  <span class="co"># est = ifelse(sig == &quot;sig&quot;, sprintf(&quot;\\textbf{%s}&quot;, est), est)) %&gt;%</span></span>
<span id="cb270-17"><a href="runmodels.html#cb270-17" tabindex="-1"></a>  <span class="co"># final reshaping, remove extra columns, arrange values, and change to wide format</span></span>
<span id="cb270-18"><a href="runmodels.html#cb270-18" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>estimate, <span class="sc">-</span>conf.low, <span class="sc">-</span>conf.high, <span class="sc">-</span>sig) <span class="sc">%&gt;%</span></span>
<span id="cb270-19"><a href="runmodels.html#cb270-19" tabindex="-1"></a>  <span class="fu">arrange</span>(type, Outcome, Trait, Moderator, Covariate) <span class="sc">%&gt;%</span></span>
<span id="cb270-20"><a href="runmodels.html#cb270-20" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">&quot;Trait&quot;</span>, <span class="at">values_from =</span> <span class="st">&quot;est&quot;</span>) </span>
<span id="cb270-21"><a href="runmodels.html#cb270-21" tabindex="-1"></a></span>
<span id="cb270-22"><a href="runmodels.html#cb270-22" tabindex="-1"></a>ipd1a_mod_tab_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(d, type, out, moder, cov){</span>
<span id="cb270-23"><a href="runmodels.html#cb270-23" tabindex="-1"></a>  md <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(moder, <span class="fu">c</span>(moders<span class="sc">$</span>long_name, stdyModers<span class="sc">$</span>long_name), <span class="fu">c</span>(moders<span class="sc">$</span>short_name, stdyModers<span class="sc">$</span>short_name), <span class="at">warn_missing =</span> F)</span>
<span id="cb270-24"><a href="runmodels.html#cb270-24" tabindex="-1"></a>  o <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(out, outcomes<span class="sc">$</span>long_name, outcomes<span class="sc">$</span>short_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb270-25"><a href="runmodels.html#cb270-25" tabindex="-1"></a>  cv <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(cov, covars<span class="sc">$</span>long_name, covars<span class="sc">$</span>short_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb270-26"><a href="runmodels.html#cb270-26" tabindex="-1"></a>  cs <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">1</span>,<span class="dv">6</span>)</span>
<span id="cb270-27"><a href="runmodels.html#cb270-27" tabindex="-1"></a>  <span class="fu">names</span>(cs) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot; &quot;</span>, <span class="fu">paste0</span>(<span class="st">&quot;&lt;strong&gt;&quot;</span>, traits<span class="sc">$</span>long_name, <span class="st">&quot;&lt;/strong&gt;&quot;</span>))</span>
<span id="cb270-28"><a href="runmodels.html#cb270-28" tabindex="-1"></a>  <span class="co"># cln &lt;- if(length(unique(d$term2)) == 1) c(&quot;Covariate&quot;, rep(&quot;\\textit{b} [CI]&quot;, 5)) else c(&quot; &quot;, &quot;Term&quot;, rep(&quot;\\textit{b} [CI]&quot;, 5))</span></span>
<span id="cb270-29"><a href="runmodels.html#cb270-29" tabindex="-1"></a>  cln <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Term&quot;</span>, <span class="fu">rep</span>(<span class="st">&quot;&lt;em&gt;b&lt;/em&gt; [CI]&quot;</span>, <span class="dv">5</span>))</span>
<span id="cb270-30"><a href="runmodels.html#cb270-30" tabindex="-1"></a>  al <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;r&quot;</span>, <span class="fu">rep</span>(<span class="st">&quot;c&quot;</span>, <span class="dv">5</span>))</span>
<span id="cb270-31"><a href="runmodels.html#cb270-31" tabindex="-1"></a>  <span class="co"># caption </span></span>
<span id="cb270-32"><a href="runmodels.html#cb270-32" tabindex="-1"></a>  cap <span class="ot">&lt;-</span> <span class="cf">if</span>(md <span class="sc">==</span> <span class="st">&quot;none&quot;</span>) <span class="st">&quot;1B Pooled Analysis of Individual Participant Data with Cluster Corrected Standard Errors: All Model Estimates of Fixed Effect Personality-Crystallized Domain Associations&quot;</span> <span class="cf">else</span> <span class="fu">sprintf</span>(<span class="st">&quot;1B Pooled Analysis of Individual Participant Data with Cluster Corrected Standard Errors: All Model Estimates of Fixed Effect %s Moderation of Personality-Crystallized Domain Associations&quot;</span>, md)</span>
<span id="cb270-33"><a href="runmodels.html#cb270-33" tabindex="-1"></a>  </span>
<span id="cb270-34"><a href="runmodels.html#cb270-34" tabindex="-1"></a>  <span class="co"># kable the table</span></span>
<span id="cb270-35"><a href="runmodels.html#cb270-35" tabindex="-1"></a>  tab <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span></span>
<span id="cb270-36"><a href="runmodels.html#cb270-36" tabindex="-1"></a>    <span class="fu">arrange</span>(term) <span class="sc">%&gt;%</span></span>
<span id="cb270-37"><a href="runmodels.html#cb270-37" tabindex="-1"></a>    <span class="fu">kable</span>(., <span class="st">&quot;html&quot;</span></span>
<span id="cb270-38"><a href="runmodels.html#cb270-38" tabindex="-1"></a>    <span class="co"># kable(., &quot;latex&quot;</span></span>
<span id="cb270-39"><a href="runmodels.html#cb270-39" tabindex="-1"></a>          , <span class="at">booktabs =</span> T</span>
<span id="cb270-40"><a href="runmodels.html#cb270-40" tabindex="-1"></a>          , <span class="at">escape =</span> F</span>
<span id="cb270-41"><a href="runmodels.html#cb270-41" tabindex="-1"></a>          , <span class="at">col.names =</span> cln</span>
<span id="cb270-42"><a href="runmodels.html#cb270-42" tabindex="-1"></a>          , <span class="at">align =</span> al</span>
<span id="cb270-43"><a href="runmodels.html#cb270-43" tabindex="-1"></a>          , <span class="at">caption =</span> cap</span>
<span id="cb270-44"><a href="runmodels.html#cb270-44" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb270-45"><a href="runmodels.html#cb270-45" tabindex="-1"></a>    <span class="fu">kable_classic</span>(<span class="at">full_width =</span> F, <span class="at">html_font =</span> <span class="st">&quot;Times New Roman&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb270-46"><a href="runmodels.html#cb270-46" tabindex="-1"></a>    <span class="co"># kable_styling(full_width = F, font_size = 7) %&gt;%</span></span>
<span id="cb270-47"><a href="runmodels.html#cb270-47" tabindex="-1"></a>    <span class="fu">add_header_above</span>(cs, <span class="at">escape =</span> F)</span>
<span id="cb270-48"><a href="runmodels.html#cb270-48" tabindex="-1"></a>  <span class="co"># save the resulting html table</span></span>
<span id="cb270-49"><a href="runmodels.html#cb270-49" tabindex="-1"></a>  <span class="fu">save_kable</span>(tab, <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/1b_ipd_fixef/%s/tables/all terms/%s-%s-%s.html&quot;</span></span>
<span id="cb270-50"><a href="runmodels.html#cb270-50" tabindex="-1"></a>                                 , local_path, type, o, md, cv))</span>
<span id="cb270-51"><a href="runmodels.html#cb270-51" tabindex="-1"></a>  <span class="fu">return</span>(tab) <span class="co"># return the html table</span></span>
<span id="cb270-52"><a href="runmodels.html#cb270-52" tabindex="-1"></a>}</span>
<span id="cb270-53"><a href="runmodels.html#cb270-53" tabindex="-1"></a></span>
<span id="cb270-54"><a href="runmodels.html#cb270-54" tabindex="-1"></a>ipd1b_mod_tab <span class="ot">&lt;-</span> ipd1b_mod_tab <span class="sc">%&gt;%</span></span>
<span id="cb270-55"><a href="runmodels.html#cb270-55" tabindex="-1"></a>  <span class="fu">group_by</span>(type, Outcome, Moderator, Covariate) <span class="sc">%&gt;%</span></span>
<span id="cb270-56"><a href="runmodels.html#cb270-56" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span></span>
<span id="cb270-57"><a href="runmodels.html#cb270-57" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb270-58"><a href="runmodels.html#cb270-58" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">tab =</span> <span class="fu">pmap</span>(<span class="fu">list</span>(data, type, Outcome, Moderator, Covariate), ipd1a_mod_tab_fun))</span></code></pre></div>
</div>
</div>
<div id="figures-1" class="section level5 hasAnchor" number="3.2.2.5.2">
<h5><span class="header-section-number">3.2.2.5.2</span> Figures<a href="runmodels.html#figures-1" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div id="overall-forest-1" class="section level6 hasAnchor" number="3.2.2.5.2.1">
<h6><span class="header-section-number">3.2.2.5.2.1</span> Overall Forest<a href="runmodels.html#overall-forest-1" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<div class="sourceCode" id="cb271"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb271-1"><a href="runmodels.html#cb271-1" tabindex="-1"></a>ipd1b_fx_plot_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(df, mod, type, cov){</span>
<span id="cb271-2"><a href="runmodels.html#cb271-2" tabindex="-1"></a>  m <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(mod, <span class="fu">c</span>(moders<span class="sc">$</span>short_name, stdyModers<span class="sc">$</span>short_name), <span class="fu">c</span>(moders<span class="sc">$</span>long_name, stdyModers<span class="sc">$</span>long_name), <span class="at">warn_missing =</span> F)</span>
<span id="cb271-3"><a href="runmodels.html#cb271-3" tabindex="-1"></a>  cv <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(cov, covars<span class="sc">$</span>short_name, covars<span class="sc">$</span>long_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb271-4"><a href="runmodels.html#cb271-4" tabindex="-1"></a>  d <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">max</span>(<span class="fu">abs</span>(<span class="fu">min</span>(df<span class="sc">$</span>estimate)), <span class="fu">abs</span>(<span class="fu">max</span>(df<span class="sc">$</span>estimate))), <span class="dv">3</span>)</span>
<span id="cb271-5"><a href="runmodels.html#cb271-5" tabindex="-1"></a>  <span class="co"># stds &lt;- unique(df$study)</span></span>
<span id="cb271-6"><a href="runmodels.html#cb271-6" tabindex="-1"></a>  lim <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span><span class="sc">-</span>d<span class="sc">-</span>(d<span class="sc">/</span><span class="fl">2.5</span>), <span class="dv">0</span><span class="sc">+</span>d<span class="sc">+</span>(d<span class="sc">/</span><span class="fl">2.5</span>))</span>
<span id="cb271-7"><a href="runmodels.html#cb271-7" tabindex="-1"></a>  brk <span class="ot">&lt;-</span> <span class="cf">if</span>(d <span class="sc">&gt;</span> .<span class="dv">01</span>) <span class="fu">round</span>(<span class="fu">c</span>(<span class="dv">0</span><span class="sc">-</span>d<span class="sc">-</span>(d<span class="sc">/</span><span class="dv">5</span>), <span class="dv">0</span>, <span class="dv">0</span><span class="sc">+</span>d<span class="sc">+</span>(d<span class="sc">/</span><span class="dv">5</span>)),<span class="dv">2</span>) <span class="cf">else</span> <span class="fu">round</span>(<span class="fu">c</span>(<span class="dv">0</span><span class="sc">-</span>d<span class="sc">-</span>(d<span class="sc">/</span><span class="dv">5</span>), <span class="dv">0</span>, <span class="dv">0</span><span class="sc">+</span>d<span class="sc">+</span>(d<span class="sc">/</span><span class="dv">5</span>)),<span class="dv">3</span>) </span>
<span id="cb271-8"><a href="runmodels.html#cb271-8" tabindex="-1"></a>  <span class="co"># lim_high &lt;- lim[2]*4</span></span>
<span id="cb271-9"><a href="runmodels.html#cb271-9" tabindex="-1"></a>  lab <span class="ot">&lt;-</span> <span class="fu">str_replace</span>(brk, <span class="st">&quot;^0.&quot;</span>, <span class="st">&quot;.&quot;</span>)<span class="co">#str_remove(round(c(0-d-(d/5), 0, 0+d+(d/5)),2), &quot;^0&quot;)</span></span>
<span id="cb271-10"><a href="runmodels.html#cb271-10" tabindex="-1"></a>  shapes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">16</span>, <span class="dv">17</span>, <span class="dv">18</span>)[<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(<span class="fu">unique</span>(df<span class="sc">$</span>term))]</span>
<span id="cb271-11"><a href="runmodels.html#cb271-11" tabindex="-1"></a>  lt <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">&quot;solid&quot;</span>, <span class="fu">length</span>(<span class="fu">unique</span>(df<span class="sc">$</span>term)))</span>
<span id="cb271-12"><a href="runmodels.html#cb271-12" tabindex="-1"></a>  titl <span class="ot">&lt;-</span> <span class="cf">if</span>(mod <span class="sc">==</span> <span class="st">&quot;none&quot;</span>){<span class="cn">NULL</span>} <span class="cf">else</span> {<span class="fu">sprintf</span>(<span class="st">&quot;%s Moderation of Personality-Outcome Associations&quot;</span>, m)}</span>
<span id="cb271-13"><a href="runmodels.html#cb271-13" tabindex="-1"></a>  titl <span class="ot">&lt;-</span> <span class="cf">if</span>(<span class="sc">!</span>cov <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;none&quot;</span>, <span class="st">&quot;all&quot;</span>)) <span class="fu">paste</span>(cv, <span class="st">&quot;Adjusted&quot;</span>, titl, <span class="at">collapse =</span> <span class="st">&quot; &quot;</span>) <span class="cf">else</span> <span class="fu">paste</span>(cv, titl, <span class="at">collapse =</span> <span class="st">&quot; &quot;</span>)</span>
<span id="cb271-14"><a href="runmodels.html#cb271-14" tabindex="-1"></a>  leg <span class="ot">&lt;-</span> <span class="cf">if</span>(<span class="fu">length</span>(<span class="fu">unique</span>(df<span class="sc">$</span>term)) <span class="sc">&gt;</span> <span class="dv">1</span>){<span class="st">&quot;bottom&quot;</span>} <span class="cf">else</span> {<span class="st">&quot;none&quot;</span>}</span>
<span id="cb271-15"><a href="runmodels.html#cb271-15" tabindex="-1"></a>  p <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb271-16"><a href="runmodels.html#cb271-16" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">conf.low =</span> <span class="fu">ifelse</span>(conf.low <span class="sc">&lt;</span> lim[<span class="dv">1</span>], lim[<span class="dv">1</span>], conf.low),</span>
<span id="cb271-17"><a href="runmodels.html#cb271-17" tabindex="-1"></a>           <span class="at">conf.high =</span> <span class="fu">ifelse</span>(conf.high <span class="sc">&gt;</span> lim[<span class="dv">2</span>], lim[<span class="dv">2</span>], conf.high)) <span class="sc">%&gt;%</span> </span>
<span id="cb271-18"><a href="runmodels.html#cb271-18" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Outcome, <span class="at">y =</span> estimate)) <span class="sc">+</span></span>
<span id="cb271-19"><a href="runmodels.html#cb271-19" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> lim, <span class="at">breaks =</span> brk, <span class="at">labels =</span> lab) <span class="sc">+</span> </span>
<span id="cb271-20"><a href="runmodels.html#cb271-20" tabindex="-1"></a>    <span class="fu">scale_size_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="fl">1.4</span>, <span class="fl">1.8</span>)) <span class="sc">+</span></span>
<span id="cb271-21"><a href="runmodels.html#cb271-21" tabindex="-1"></a>    <span class="fu">scale_shape_manual</span>(<span class="at">values =</span> shapes) <span class="sc">+</span></span>
<span id="cb271-22"><a href="runmodels.html#cb271-22" tabindex="-1"></a>    <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;black&quot;</span>, <span class="st">&quot;blue&quot;</span>)) <span class="sc">+</span></span>
<span id="cb271-23"><a href="runmodels.html#cb271-23" tabindex="-1"></a>    <span class="fu">scale_linetype_manual</span>(<span class="at">values =</span> lt) <span class="sc">+</span></span>
<span id="cb271-24"><a href="runmodels.html#cb271-24" tabindex="-1"></a>    <span class="fu">geom_hline</span>(<span class="fu">aes</span>(<span class="at">yintercept =</span> <span class="dv">0</span>), <span class="at">size =</span> .<span class="dv">25</span>, <span class="at">color =</span> <span class="st">&quot;gray50&quot;</span>) <span class="sc">+</span></span>
<span id="cb271-25"><a href="runmodels.html#cb271-25" tabindex="-1"></a>    <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> conf.low, <span class="at">ymax =</span> conf.high, <span class="at">linetype =</span> term)</span>
<span id="cb271-26"><a href="runmodels.html#cb271-26" tabindex="-1"></a>                  , <span class="at">width =</span> <span class="dv">0</span></span>
<span id="cb271-27"><a href="runmodels.html#cb271-27" tabindex="-1"></a>                  , <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> .<span class="dv">9</span>)) <span class="sc">+</span> </span>
<span id="cb271-28"><a href="runmodels.html#cb271-28" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> sig, <span class="at">size =</span> sig, <span class="at">shape =</span> term)</span>
<span id="cb271-29"><a href="runmodels.html#cb271-29" tabindex="-1"></a>                  , <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> .<span class="dv">9</span>)) <span class="sc">+</span></span>
<span id="cb271-30"><a href="runmodels.html#cb271-30" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span></span>
<span id="cb271-31"><a href="runmodels.html#cb271-31" tabindex="-1"></a>         , <span class="at">y =</span> <span class="st">&quot;Estimate (POMP)&quot;</span></span>
<span id="cb271-32"><a href="runmodels.html#cb271-32" tabindex="-1"></a>         , <span class="at">title =</span> titl</span>
<span id="cb271-33"><a href="runmodels.html#cb271-33" tabindex="-1"></a>         , <span class="at">subtitle =</span> <span class="st">&quot;Method 1B: Pooled Linear Regression with Cluster-Corrected Standard Errors&quot;</span></span>
<span id="cb271-34"><a href="runmodels.html#cb271-34" tabindex="-1"></a>         ) <span class="sc">+</span></span>
<span id="cb271-35"><a href="runmodels.html#cb271-35" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">color =</span> <span class="st">&quot;none&quot;</span>, <span class="at">size =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb271-36"><a href="runmodels.html#cb271-36" tabindex="-1"></a>    <span class="fu">facet_grid</span>(<span class="sc">~</span>Trait, <span class="at">scales =</span> <span class="st">&quot;free_y&quot;</span>, <span class="at">space =</span> <span class="st">&quot;free&quot;</span>) <span class="sc">+</span></span>
<span id="cb271-37"><a href="runmodels.html#cb271-37" tabindex="-1"></a>    <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb271-38"><a href="runmodels.html#cb271-38" tabindex="-1"></a>    <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb271-39"><a href="runmodels.html#cb271-39" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> leg,</span>
<span id="cb271-40"><a href="runmodels.html#cb271-40" tabindex="-1"></a>          <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">1.2</span>), <span class="at">hjust =</span> .<span class="dv">5</span>),</span>
<span id="cb271-41"><a href="runmodels.html#cb271-41" tabindex="-1"></a>          <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> .<span class="dv">5</span>),</span>
<span id="cb271-42"><a href="runmodels.html#cb271-42" tabindex="-1"></a>          <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;white&quot;</span>),</span>
<span id="cb271-43"><a href="runmodels.html#cb271-43" tabindex="-1"></a>          <span class="at">strip.background =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb271-44"><a href="runmodels.html#cb271-44" tabindex="-1"></a>          <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">1.4</span>)),</span>
<span id="cb271-45"><a href="runmodels.html#cb271-45" tabindex="-1"></a>          <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>),</span>
<span id="cb271-46"><a href="runmodels.html#cb271-46" tabindex="-1"></a>          <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="fu">rel</span>(<span class="dv">1</span>)))</span>
<span id="cb271-47"><a href="runmodels.html#cb271-47" tabindex="-1"></a>  ht <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(df<span class="sc">$</span>Outcome)); ht2 <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(df<span class="sc">$</span>term))</span>
<span id="cb271-48"><a href="runmodels.html#cb271-48" tabindex="-1"></a>  wdt <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(df<span class="sc">$</span>Trait))</span>
<span id="cb271-49"><a href="runmodels.html#cb271-49" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/1b_ipd_fixef/%s/figures/overall forest/%s_%s_fixed.png&quot;</span>, local_path, type, mod, cov), <span class="at">width =</span> wdt<span class="sc">*</span><span class="dv">2</span>, <span class="at">height =</span> ht<span class="sc">+</span>ht2)</span>
<span id="cb271-50"><a href="runmodels.html#cb271-50" tabindex="-1"></a><span class="fu">rm</span>(p)</span>
<span id="cb271-51"><a href="runmodels.html#cb271-51" tabindex="-1"></a><span class="fu">gc</span>()</span>
<span id="cb271-52"><a href="runmodels.html#cb271-52" tabindex="-1"></a><span class="fu">return</span>(T)</span>
<span id="cb271-53"><a href="runmodels.html#cb271-53" tabindex="-1"></a>}</span>
<span id="cb271-54"><a href="runmodels.html#cb271-54" tabindex="-1"></a></span>
<span id="cb271-55"><a href="runmodels.html#cb271-55" tabindex="-1"></a>nested_ipd1b_fixef <span class="sc">%&gt;%</span></span>
<span id="cb271-56"><a href="runmodels.html#cb271-56" tabindex="-1"></a>  <span class="fu">unnest</span>(fx) <span class="sc">%&gt;%</span></span>
<span id="cb271-57"><a href="runmodels.html#cb271-57" tabindex="-1"></a>    <span class="fu">filter</span>((Moderator <span class="sc">==</span> <span class="st">&quot;none&quot;</span> <span class="sc">&amp;</span> term <span class="sc">==</span> <span class="st">&quot;p_value&quot;</span>)<span class="sc">|</span></span>
<span id="cb271-58"><a href="runmodels.html#cb271-58" tabindex="-1"></a>          (Moderator <span class="sc">!=</span> <span class="st">&quot;none&quot;</span> <span class="sc">&amp;</span> <span class="fu">grepl</span>(<span class="st">&quot;p_value:&quot;</span>, term))) <span class="sc">%&gt;%</span></span>
<span id="cb271-59"><a href="runmodels.html#cb271-59" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">sig =</span> <span class="fu">ifelse</span>(<span class="fu">sign</span>(conf.low) <span class="sc">==</span> <span class="fu">sign</span>(conf.high), <span class="st">&quot;sig&quot;</span>, <span class="st">&quot;ns&quot;</span>),</span>
<span id="cb271-60"><a href="runmodels.html#cb271-60" tabindex="-1"></a>           <span class="at">sig =</span> <span class="fu">factor</span>(sig, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;sig&quot;</span>,<span class="st">&quot;ns&quot;</span>)),</span>
<span id="cb271-61"><a href="runmodels.html#cb271-61" tabindex="-1"></a>           <span class="at">Trait =</span> <span class="fu">factor</span>(Trait, <span class="at">levels =</span> traits<span class="sc">$</span>short_name),</span>
<span id="cb271-62"><a href="runmodels.html#cb271-62" tabindex="-1"></a>           <span class="at">Outcome =</span> <span class="fu">factor</span>(Outcome, <span class="at">levels =</span> outcomes<span class="sc">$</span>short_name, <span class="at">labels =</span> <span class="fu">str_wrap</span>(outcomes<span class="sc">$</span>long_name, <span class="dv">15</span>)),</span>
<span id="cb271-63"><a href="runmodels.html#cb271-63" tabindex="-1"></a>           <span class="at">Outcome =</span> forcats<span class="sc">::</span><span class="fu">fct_rev</span>(Outcome))  <span class="sc">%&gt;%</span></span>
<span id="cb271-64"><a href="runmodels.html#cb271-64" tabindex="-1"></a>  <span class="fu">group_by</span>(type, Moderator, Covariate) <span class="sc">%&gt;%</span></span>
<span id="cb271-65"><a href="runmodels.html#cb271-65" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span></span>
<span id="cb271-66"><a href="runmodels.html#cb271-66" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb271-67"><a href="runmodels.html#cb271-67" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">pmap</span>(<span class="fu">list</span>(data, Moderator, type, Covariate), ipd1b_fx_plot_fun))</span></code></pre></div>
</div>
<div id="study-specific-forest-plots-1" class="section level6 hasAnchor" number="3.2.2.5.2.2">
<h6><span class="header-section-number">3.2.2.5.2.2</span> Study-Specific Forest Plots<a href="runmodels.html#study-specific-forest-plots-1" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<p>This header is here to simply emphasize that this method does not provide study-specific estimates, unlike Methods 2ab, 3, and 4.</p>
</div>
<div id="overall-simple-effects-plots-1" class="section level6 hasAnchor" number="3.2.2.5.2.3">
<h6><span class="header-section-number">3.2.2.5.2.3</span> Overall Simple Effects Plots<a href="runmodels.html#overall-simple-effects-plots-1" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<div class="sourceCode" id="cb272"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb272-1"><a href="runmodels.html#cb272-1" tabindex="-1"></a>loadRData <span class="ot">&lt;-</span> <span class="cf">function</span>(fileName, type, obj, folder){</span>
<span id="cb272-2"><a href="runmodels.html#cb272-2" tabindex="-1"></a><span class="co">#loads an RData file, and returns it</span></span>
<span id="cb272-3"><a href="runmodels.html#cb272-3" tabindex="-1"></a>    path <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/1b_ipd_fixef/%s/%s/%s&quot;</span>, local_path, type, folder, fileName)</span>
<span id="cb272-4"><a href="runmodels.html#cb272-4" tabindex="-1"></a>    <span class="fu">load</span>(path)</span>
<span id="cb272-5"><a href="runmodels.html#cb272-5" tabindex="-1"></a>    <span class="fu">get</span>(<span class="fu">ls</span>()[<span class="fu">grepl</span>(obj, <span class="fu">ls</span>())])</span>
<span id="cb272-6"><a href="runmodels.html#cb272-6" tabindex="-1"></a>}</span>
<span id="cb272-7"><a href="runmodels.html#cb272-7" tabindex="-1"></a></span>
<span id="cb272-8"><a href="runmodels.html#cb272-8" tabindex="-1"></a><span class="do">## load in &quot;fixed&quot; effects</span></span>
<span id="cb272-9"><a href="runmodels.html#cb272-9" tabindex="-1"></a><span class="do">## first get file names</span></span>
<span id="cb272-10"><a href="runmodels.html#cb272-10" tabindex="-1"></a>nested_ipd1b_simp <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">type =</span> <span class="fu">c</span>(<span class="st">&quot;Frequentist&quot;</span>, <span class="st">&quot;Bayesian&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb272-11"><a href="runmodels.html#cb272-11" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">file =</span> <span class="fu">map</span>(type, <span class="sc">~</span><span class="fu">list.files</span>(<span class="fu">sprintf</span>(<span class="st">&quot;%s/results/1b_ipd_fixef/%s/predicted&quot;</span>, local_path, .)))) <span class="sc">%&gt;%</span></span>
<span id="cb272-12"><a href="runmodels.html#cb272-12" tabindex="-1"></a>  <span class="fu">unnest</span>(file) <span class="sc">%&gt;%</span></span>
<span id="cb272-13"><a href="runmodels.html#cb272-13" tabindex="-1"></a>  <span class="fu">separate</span>(file, <span class="fu">c</span>(<span class="st">&quot;Outcome&quot;</span>, <span class="st">&quot;Trait&quot;</span>, <span class="st">&quot;Moderator&quot;</span>, <span class="st">&quot;Covariate&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>, <span class="at">remove =</span> F) <span class="sc">%&gt;%</span> </span>
<span id="cb272-14"><a href="runmodels.html#cb272-14" tabindex="-1"></a>  <span class="do">## read in the files</span></span>
<span id="cb272-15"><a href="runmodels.html#cb272-15" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Covariate =</span> <span class="fu">str_remove</span>(Covariate, <span class="st">&quot;.RData&quot;</span>),</span>
<span id="cb272-16"><a href="runmodels.html#cb272-16" tabindex="-1"></a>         <span class="at">pred =</span> <span class="fu">map2</span>(file, type, <span class="sc">~</span><span class="fu">loadRData</span>(.x, .y, <span class="st">&quot;pred.fx&quot;</span>, <span class="st">&quot;predicted&quot;</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb272-17"><a href="runmodels.html#cb272-17" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>file) </span>
<span id="cb272-18"><a href="runmodels.html#cb272-18" tabindex="-1"></a>nested_ipd1a_simp</span></code></pre></div>
<div class="sourceCode" id="cb273"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb273-1"><a href="runmodels.html#cb273-1" tabindex="-1"></a>simp_eff_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(df, outcome, mod, type, cov){ </span>
<span id="cb273-2"><a href="runmodels.html#cb273-2" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(outcome, mod))</span>
<span id="cb273-3"><a href="runmodels.html#cb273-3" tabindex="-1"></a>  o <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(outcome, outcomes<span class="sc">$</span>short_name, outcomes<span class="sc">$</span>long_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb273-4"><a href="runmodels.html#cb273-4" tabindex="-1"></a>  cv <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(cov, covars<span class="sc">$</span>short_name, covars<span class="sc">$</span>long_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb273-5"><a href="runmodels.html#cb273-5" tabindex="-1"></a>  m <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(mod, moders<span class="sc">$</span>short_name, moders<span class="sc">$</span>long_name, <span class="at">warn_missing =</span> F)</span>
<span id="cb273-6"><a href="runmodels.html#cb273-6" tabindex="-1"></a>  d <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">max</span>(<span class="fu">abs</span>(<span class="fu">min</span>(df<span class="sc">$</span>pred)), <span class="fu">abs</span>(<span class="fu">max</span>(df<span class="sc">$</span>pred))), <span class="dv">3</span>)</span>
<span id="cb273-7"><a href="runmodels.html#cb273-7" tabindex="-1"></a>  mini <span class="ot">&lt;-</span> <span class="cf">if</span>(d <span class="sc">&gt;</span> <span class="dv">2</span>) .<span class="dv">05</span> <span class="cf">else</span> <span class="dv">0</span><span class="sc">-</span>(d<span class="sc">+</span>(d<span class="sc">/</span><span class="dv">5</span>))</span>
<span id="cb273-8"><a href="runmodels.html#cb273-8" tabindex="-1"></a>  maxi <span class="ot">&lt;-</span> <span class="cf">if</span>(d <span class="sc">&gt;</span> <span class="dv">2</span>) <span class="fl">2.05</span> <span class="cf">else</span> <span class="dv">0</span><span class="sc">+</span>d<span class="sc">+</span>(d<span class="sc">/</span><span class="dv">5</span>)</span>
<span id="cb273-9"><a href="runmodels.html#cb273-9" tabindex="-1"></a>  lim <span class="ot">&lt;-</span> <span class="fu">c</span>(mini, maxi)</span>
<span id="cb273-10"><a href="runmodels.html#cb273-10" tabindex="-1"></a>  brk <span class="ot">&lt;-</span> <span class="cf">if</span>(d <span class="sc">&gt;</span> <span class="dv">2</span>) <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>) <span class="cf">else</span>{<span class="fu">round</span>(<span class="fu">c</span>(<span class="dv">0</span><span class="sc">-</span>d<span class="sc">-</span>(d<span class="sc">/</span><span class="dv">10</span>), <span class="dv">0</span>, <span class="dv">0</span><span class="sc">+</span>d<span class="sc">+</span>(d<span class="sc">/</span><span class="dv">10</span>)),<span class="dv">2</span>)}</span>
<span id="cb273-11"><a href="runmodels.html#cb273-11" tabindex="-1"></a>  lab <span class="ot">&lt;-</span> <span class="cf">if</span>(d <span class="sc">&gt;</span> <span class="dv">2</span>){<span class="fu">c</span>(<span class="st">&quot;0&quot;</span>, <span class="st">&quot;1&quot;</span>, <span class="st">&quot;2&quot;</span>)} <span class="cf">else</span>{<span class="fu">str_remove</span>(<span class="fu">c</span>(<span class="fu">round</span>(<span class="dv">0</span><span class="sc">-</span>d<span class="sc">-</span>(d<span class="sc">/</span><span class="dv">10</span>),<span class="dv">2</span>), <span class="dv">0</span>, <span class="fu">round</span>(<span class="dv">0</span><span class="sc">+</span>d<span class="sc">+</span>(d<span class="sc">/</span><span class="dv">10</span>),<span class="dv">2</span>)), <span class="st">&quot;^0&quot;</span>)}</span>
<span id="cb273-12"><a href="runmodels.html#cb273-12" tabindex="-1"></a>  titl <span class="ot">&lt;-</span> <span class="cf">if</span>(mod <span class="sc">==</span> <span class="st">&quot;none&quot;</span>){o} <span class="cf">else</span> {<span class="fu">sprintf</span>(<span class="st">&quot;%s: Personality x %s Simple Effects&quot;</span>, o, m)}</span>
<span id="cb273-13"><a href="runmodels.html#cb273-13" tabindex="-1"></a>  <span class="co"># colnames(df)[colnames(df) == mod] &lt;- &quot;mod_value&quot;</span></span>
<span id="cb273-14"><a href="runmodels.html#cb273-14" tabindex="-1"></a>  df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> unclass <span class="sc">%&gt;%</span> data.frame</span>
<span id="cb273-15"><a href="runmodels.html#cb273-15" tabindex="-1"></a>  df<span class="sc">$</span>mod_value <span class="ot">&lt;-</span> df[,mod]</span>
<span id="cb273-16"><a href="runmodels.html#cb273-16" tabindex="-1"></a>  df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span><span class="fu">all_of</span>(mod)) <span class="sc">%&gt;%</span> as_tibble</span>
<span id="cb273-17"><a href="runmodels.html#cb273-17" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">class</span>(df<span class="sc">$</span>mod_value) <span class="sc">==</span> <span class="st">&quot;factor&quot;</span>){df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">mod_fac =</span> <span class="fu">factor</span>(mod_value))} </span>
<span id="cb273-18"><a href="runmodels.html#cb273-18" tabindex="-1"></a>  <span class="cf">else</span>{df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb273-19"><a href="runmodels.html#cb273-19" tabindex="-1"></a>    <span class="fu">group_by</span>(Trait) <span class="sc">%&gt;%</span></span>
<span id="cb273-20"><a href="runmodels.html#cb273-20" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">mod_fac =</span> <span class="fu">factor</span>(mod_value, <span class="at">levels =</span> <span class="fu">unique</span>(mod_value), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;-1 SD&quot;</span>, <span class="st">&quot;M&quot;</span>, <span class="st">&quot;+1 SD&quot;</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb273-21"><a href="runmodels.html#cb273-21" tabindex="-1"></a>    <span class="fu">ungroup</span>()</span>
<span id="cb273-22"><a href="runmodels.html#cb273-22" tabindex="-1"></a>  }</span>
<span id="cb273-23"><a href="runmodels.html#cb273-23" tabindex="-1"></a>  lt <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;dotted&quot;</span>, <span class="st">&quot;solid&quot;</span>, <span class="st">&quot;dashed&quot;</span>, <span class="st">&quot;dotdash&quot;</span>, <span class="st">&quot;longdash&quot;</span>, <span class="st">&quot;twodash&quot;</span>)[<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(<span class="fu">unique</span>(df<span class="sc">$</span>mod_fac))]</span>
<span id="cb273-24"><a href="runmodels.html#cb273-24" tabindex="-1"></a>  </span>
<span id="cb273-25"><a href="runmodels.html#cb273-25" tabindex="-1"></a>  df <span class="sc">%&gt;%</span></span>
<span id="cb273-26"><a href="runmodels.html#cb273-26" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Trait =</span> <span class="fu">factor</span>(Trait, <span class="at">levels =</span> traits<span class="sc">$</span>short_name, <span class="at">labels =</span> traits<span class="sc">$</span>long_name),</span>
<span id="cb273-27"><a href="runmodels.html#cb273-27" tabindex="-1"></a>           <span class="at">lower =</span> <span class="fu">ifelse</span>(lower <span class="sc">&lt;</span> <span class="dv">4</span>, <span class="dv">4</span>, lower),</span>
<span id="cb273-28"><a href="runmodels.html#cb273-28" tabindex="-1"></a>           <span class="at">upper =</span> <span class="fu">ifelse</span>(upper <span class="sc">&gt;</span> <span class="dv">10</span>, <span class="dv">10</span>, upper)) <span class="sc">%&gt;%</span></span>
<span id="cb273-29"><a href="runmodels.html#cb273-29" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> p_value</span>
<span id="cb273-30"><a href="runmodels.html#cb273-30" tabindex="-1"></a>               , <span class="at">y =</span> pred</span>
<span id="cb273-31"><a href="runmodels.html#cb273-31" tabindex="-1"></a>               , <span class="at">group  =</span> mod_fac))  <span class="sc">+</span></span>
<span id="cb273-32"><a href="runmodels.html#cb273-32" tabindex="-1"></a>      <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">10</span>)</span>
<span id="cb273-33"><a href="runmodels.html#cb273-33" tabindex="-1"></a>                         , <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">10</span>)</span>
<span id="cb273-34"><a href="runmodels.html#cb273-34" tabindex="-1"></a>                         , <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">10</span>)) <span class="sc">+</span></span>
<span id="cb273-35"><a href="runmodels.html#cb273-35" tabindex="-1"></a>      <span class="fu">scale_linetype_manual</span>(<span class="at">values =</span> lt) <span class="sc">+</span></span>
<span id="cb273-36"><a href="runmodels.html#cb273-36" tabindex="-1"></a>      <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> lower</span>
<span id="cb273-37"><a href="runmodels.html#cb273-37" tabindex="-1"></a>                      , <span class="at">ymax =</span> upper</span>
<span id="cb273-38"><a href="runmodels.html#cb273-38" tabindex="-1"></a>                      , <span class="at">fill =</span> mod_fac)</span>
<span id="cb273-39"><a href="runmodels.html#cb273-39" tabindex="-1"></a>                  , <span class="at">alpha =</span> .<span class="dv">25</span>) <span class="sc">+</span></span>
<span id="cb273-40"><a href="runmodels.html#cb273-40" tabindex="-1"></a>      <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">linetype =</span> mod_fac)) <span class="sc">+</span></span>
<span id="cb273-41"><a href="runmodels.html#cb273-41" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Personality (POMP)&quot;</span></span>
<span id="cb273-42"><a href="runmodels.html#cb273-42" tabindex="-1"></a>           , <span class="at">y =</span> <span class="fu">paste</span>(o, <span class="st">&quot;(POMP)&quot;</span>)</span>
<span id="cb273-43"><a href="runmodels.html#cb273-43" tabindex="-1"></a>           , <span class="at">title =</span> titl</span>
<span id="cb273-44"><a href="runmodels.html#cb273-44" tabindex="-1"></a>           , <span class="at">linetype =</span> m</span>
<span id="cb273-45"><a href="runmodels.html#cb273-45" tabindex="-1"></a>           , <span class="at">fill =</span> m</span>
<span id="cb273-46"><a href="runmodels.html#cb273-46" tabindex="-1"></a>           , <span class="at">subtitle =</span> <span class="st">&quot;Method 1B: Pooled Linear Regression with Cluster-Corrected Standard Errors&quot;</span>) <span class="sc">+</span></span>
<span id="cb273-47"><a href="runmodels.html#cb273-47" tabindex="-1"></a>      <span class="fu">facet_wrap</span>(<span class="sc">~</span>Trait, <span class="at">nrow =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb273-48"><a href="runmodels.html#cb273-48" tabindex="-1"></a>      <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb273-49"><a href="runmodels.html#cb273-49" tabindex="-1"></a>      <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span></span>
<span id="cb273-50"><a href="runmodels.html#cb273-50" tabindex="-1"></a>            , <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">1.2</span>), <span class="at">hjust =</span> .<span class="dv">5</span>)</span>
<span id="cb273-51"><a href="runmodels.html#cb273-51" tabindex="-1"></a>            , <span class="at">strip.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;black&quot;</span>)</span>
<span id="cb273-52"><a href="runmodels.html#cb273-52" tabindex="-1"></a>            , <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">color =</span> <span class="st">&quot;white&quot;</span>)</span>
<span id="cb273-53"><a href="runmodels.html#cb273-53" tabindex="-1"></a>            , <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>))</span>
<span id="cb273-54"><a href="runmodels.html#cb273-54" tabindex="-1"></a>  <span class="fu">ggsave</span>(<span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%s/results/1b_ipd_fixef/%s/figures/overall simple effects/%s_%s_%s.png&quot;</span>, local_path, type, outcome, mod, cov), <span class="at">width =</span> <span class="dv">6</span>, <span class="at">height =</span> <span class="dv">6</span>)</span>
<span id="cb273-55"><a href="runmodels.html#cb273-55" tabindex="-1"></a>}</span>
<span id="cb273-56"><a href="runmodels.html#cb273-56" tabindex="-1"></a></span>
<span id="cb273-57"><a href="runmodels.html#cb273-57" tabindex="-1"></a>ipd1b_se_plot <span class="ot">&lt;-</span> nested_ipd1b_simp <span class="sc">%&gt;%</span></span>
<span id="cb273-58"><a href="runmodels.html#cb273-58" tabindex="-1"></a>  <span class="fu">group_by</span>(type, Outcome, Moderator, Covariate) <span class="sc">%&gt;%</span></span>
<span id="cb273-59"><a href="runmodels.html#cb273-59" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span></span>
<span id="cb273-60"><a href="runmodels.html#cb273-60" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb273-61"><a href="runmodels.html#cb273-61" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">data =</span> <span class="fu">map</span>(data, <span class="sc">~</span>(.) <span class="sc">%&gt;%</span> <span class="fu">unnest</span>(pred)),</span>
<span id="cb273-62"><a href="runmodels.html#cb273-62" tabindex="-1"></a>         <span class="at">plot =</span> <span class="fu">pmap</span>(<span class="fu">list</span>(data, Outcome, Moderator, type, Covariate), simp_eff_fun))</span></code></pre></div>
</div>
<div id="study-specific-simple-effects-plots-1" class="section level6 hasAnchor" number="3.2.2.5.2.4">
<h6><span class="header-section-number">3.2.2.5.2.4</span> Study-Specific Simple Effects Plots<a href="runmodels.html#study-specific-simple-effects-plots-1" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<p>This header is here to simply emphasize that this method does not provide study-specific estimates, unlike Methods 2ab, 3, and 4.</p>
</div>
</div>
</div>
<div id="sample-results-section-1" class="section level4 hasAnchor" number="3.2.2.6">
<h4><span class="header-section-number">3.2.2.6</span> Sample Results Section<a href="runmodels.html#sample-results-section-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>We examined estimates of overall prospective associations between Big Five personality characteristics and crystallized abilities as well as participant-level moderators of those associations using fully pooled, one-stage regression models with cluster-corrected standard errors using individual participant data in 11 studies. This allowed us to correct for clustering of data within studies without estimating sample-specific estimates. Table S2 presents the estimates of the key terms from all unmoderated and participant and sample-level moderators estimates from fully adjusted models. Across the 20 participant-level personality-cognitive ability associations and moderators of those associations, none were significant, including unmoderated associations between personality and crystallized abilities.</p>
<table class=" lightable-classic" style="color: black; font-family: Times New Roman; width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-29">Table 3.2: </span>1B Pooled Analysis of Individual Participant Data with Cluster Corrected Standard Errors: Fixed Effect Estimates of Fully Adjusted Personality-Crystallized Domain Associations
</caption>
<thead>
<tr>
<th style="empty-cells: hide;" colspan="1">
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
Extraversion
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
Agreeableness
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
Conscientiousness
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
Neuroticism
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
Openness to Experience
</div>
</th>
</tr>
<tr>
<th style="text-align:right;">
Term
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
<th style="text-align:center;">
<em>b</em> [CI]
</th>
</tr>
</thead>
<tbody>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>None</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Personality
</td>
<td style="text-align:center;">
-0.07<br>[-0.22, 0.08]
</td>
<td style="text-align:center;">
-0.07<br>[-0.23, 0.08]
</td>
<td style="text-align:center;">
-0.01<br>[-0.14, 0.12]
</td>
<td style="text-align:center;">
-0.03<br>[-0.13, 0.08]
</td>
<td style="text-align:center;">
0.11<br>[-0.03, 0.25]
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Age</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Age
</td>
<td style="text-align:center;">
0.000<br>[-0.00, 0.00]
</td>
<td style="text-align:center;">
-0.000<br>[-0.00, 0.00]
</td>
<td style="text-align:center;">
-0.001<br>[-0.00, 0.00]
</td>
<td style="text-align:center;">
0.00<br>[-0.00, 0.00]
</td>
<td style="text-align:center;">
-0.00<br>[-0.01, 0.001]
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Gender</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Gender (Male v Female)
</td>
<td style="text-align:center;">
<strong>0.05<br>[0.001, 0.10]</strong>
</td>
<td style="text-align:center;">
0.04<br>[-0.00, 0.08]
</td>
<td style="text-align:center;">
0.03<br>[-0.07, 0.13]
</td>
<td style="text-align:center;">
-0.01<br>[-0.08, 0.05]
</td>
<td style="text-align:center;">
-0.02<br>[-0.08, 0.04]
</td>
</tr>
<tr grouplength="1">
<td colspan="6" style="border-bottom: 0;">
<strong>Education</strong>
</td>
</tr>
<tr>
<td style="text-align:right;padding-left: 2em;" indentlevel="1">
Education (Years)
</td>
<td style="text-align:center;">
0.00<br>[-0.01, 0.02]
</td>
<td style="text-align:center;">
-0.00<br>[-0.03, 0.02]
</td>
<td style="text-align:center;">
-0.01<br>[-0.03, 0.02]
</td>
<td style="text-align:center;">
-0.00<br>[-0.02, 0.01]
</td>
<td style="text-align:center;">
0.00<br>[-0.01, 0.01]
</td>
</tr>
</tbody>
</table>
<p>The simple effects plots shown in Figure S2 provide a visualization to help better understand the moderators. The figure displays the predicted crystallized ability levels at different levels of the Big Five for males and females. Gender moderated the relationship between extraversion and later crystallized abilities (b = 0.06, 95% CI [0.001, 0.12]). The overall association between personality traits and later crystallized ability was null for extraversion for men (b = -0.01, 95% CI [-0.06, 0.03]) but positive for women (b = 0.05, 95% CI [0.004, 0.09]), such that women who were higher in extraversion tended to score higher on crystallized domain tasks. All other simple effects are available in the online materials and in the web app.</p>
<div class="figure"><span style="display:block;" id="fig:unnamed-chunk-32"></span>
<img src="../../results/1b_ipd_fixef/Frequentist/figures/overall simple effects/crystallized_gender_all.png" alt="Figure S2. Simple effects of the prospective association between Big Five personality characteristics (rows) and crystallized abilities across gender (male, female) using all methods of data synthesis (columns). The x-axis captures personality in percentage of maximum possible (POMP) units, the y-axis captures crystallized abilities in POMP, and different panels represent each of the Big Five characteristics. Different lines indicate the predicted levels of cognitive ability for males (dotted line) and females (solid line)." width="900" />
<p class="caption">
Figure 3.2: Figure S2. Simple effects of the prospective association between Big Five personality characteristics (rows) and crystallized abilities across gender (male, female) using all methods of data synthesis (columns). The x-axis captures personality in percentage of maximum possible (POMP) units, the y-axis captures crystallized abilities in POMP, and different panels represent each of the Big Five characteristics. Different lines indicate the predicted levels of cognitive ability for males (dotted line) and females (solid line).
</p>
</div>
<div class="sourceCode" id="cb274"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb274-1"><a href="runmodels.html#cb274-1" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>()[<span class="fu">grepl</span>(<span class="st">&quot;ipd1b&quot;</span>, <span class="fu">ls</span>())])</span></code></pre></div>

</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="cleaning.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="method-2-pooled-one-stage-models-with-study-specific-effects.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/02-IPD_reg.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
